const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-CtwlOLW4.js","assets/webworkerAll-DRs3jmjf.js","assets/colorToUniform-vRmBns-P.js","assets/WebGPURenderer-CQ6-Gc_v.js","assets/SharedSystems-ChPcKxkF.js","assets/WebGLRenderer--c-WU2LZ.js"])))=>i.map(i=>d[i]);
function RT(n,t){for(var e=0;e<t.length;e++){const s=t[e];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in n)){const o=Object.getOwnPropertyDescriptor(s,a);o&&Object.defineProperty(n,a,o.get?o:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();var ne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var wp={exports:{}},Rl={};var Kx;function jT(){if(Kx)return Rl;Kx=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(s,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var u in a)u!=="key"&&(o[u]=a[u])}else o=a;return a=o.ref,{$$typeof:n,type:s,key:c,ref:a!==void 0?a:null,props:o}}return Rl.Fragment=t,Rl.jsx=e,Rl.jsxs=e,Rl}var Qx;function MT(){return Qx||(Qx=1,wp.exports=jT()),wp.exports}var m=MT(),Ep={exports:{}},Yt={};var Jx;function kT(){if(Jx)return Yt;Jx=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),x=Symbol.iterator;function v(D){return D===null||typeof D!="object"?null:(D=x&&D[x]||D["@@iterator"],typeof D=="function"?D:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,_={};function A(D,Y,at){this.props=D,this.context=Y,this.refs=_,this.updater=at||S}A.prototype.isReactComponent={},A.prototype.setState=function(D,Y){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,Y,"setState")},A.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function R(){}R.prototype=A.prototype;function C(D,Y,at){this.props=D,this.context=Y,this.refs=_,this.updater=at||S}var j=C.prototype=new R;j.constructor=C,w(j,A.prototype),j.isPureReactComponent=!0;var k=Array.isArray;function I(){}var N={H:null,A:null,T:null,S:null},L=Object.prototype.hasOwnProperty;function H(D,Y,at){var lt=at.ref;return{$$typeof:n,type:D,key:Y,ref:lt!==void 0?lt:null,props:at}}function B(D,Y){return H(D.type,Y,D.props)}function U(D){return typeof D=="object"&&D!==null&&D.$$typeof===n}function z(D){var Y={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(at){return Y[at]})}var G=/\/+/g;function V(D,Y){return typeof D=="object"&&D!==null&&D.key!=null?z(""+D.key):Y.toString(36)}function J(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(I,I):(D.status="pending",D.then(function(Y){D.status==="pending"&&(D.status="fulfilled",D.value=Y)},function(Y){D.status==="pending"&&(D.status="rejected",D.reason=Y)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function O(D,Y,at,lt,nt){var xt=typeof D;(xt==="undefined"||xt==="boolean")&&(D=null);var Rt=!1;if(D===null)Rt=!0;else switch(xt){case"bigint":case"string":case"number":Rt=!0;break;case"object":switch(D.$$typeof){case n:case t:Rt=!0;break;case p:return Rt=D._init,O(Rt(D._payload),Y,at,lt,nt)}}if(Rt)return nt=nt(D),Rt=lt===""?"."+V(D,0):lt,k(nt)?(at="",Rt!=null&&(at=Rt.replace(G,"$&/")+"/"),O(nt,Y,at,"",function(Et){return Et})):nt!=null&&(U(nt)&&(nt=B(nt,at+(nt.key==null||D&&D.key===nt.key?"":(""+nt.key).replace(G,"$&/")+"/")+Rt)),Y.push(nt)),1;Rt=0;var yt=lt===""?".":lt+":";if(k(D))for(var Mt=0;Mt<D.length;Mt++)lt=D[Mt],xt=yt+V(lt,Mt),Rt+=O(lt,Y,at,xt,nt);else if(Mt=v(D),typeof Mt=="function")for(D=Mt.call(D),Mt=0;!(lt=D.next()).done;)lt=lt.value,xt=yt+V(lt,Mt++),Rt+=O(lt,Y,at,xt,nt);else if(xt==="object"){if(typeof D.then=="function")return O(J(D),Y,at,lt,nt);throw Y=String(D),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return Rt}function $(D,Y,at){if(D==null)return D;var lt=[],nt=0;return O(D,lt,"","",function(xt){return Y.call(at,xt,nt++)}),lt}function rt(D){if(D._status===-1){var Y=D._result;Y=Y(),Y.then(function(at){(D._status===0||D._status===-1)&&(D._status=1,D._result=at)},function(at){(D._status===0||D._status===-1)&&(D._status=2,D._result=at)}),D._status===-1&&(D._status=0,D._result=Y)}if(D._status===1)return D._result.default;throw D._result}var it=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},ft={map:$,forEach:function(D,Y,at){$(D,function(){Y.apply(this,arguments)},at)},count:function(D){var Y=0;return $(D,function(){Y++}),Y},toArray:function(D){return $(D,function(Y){return Y})||[]},only:function(D){if(!U(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return Yt.Activity=y,Yt.Children=ft,Yt.Component=A,Yt.Fragment=e,Yt.Profiler=a,Yt.PureComponent=C,Yt.StrictMode=s,Yt.Suspense=d,Yt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Yt.__COMPILER_RUNTIME={__proto__:null,c:function(D){return N.H.useMemoCache(D)}},Yt.cache=function(D){return function(){return D.apply(null,arguments)}},Yt.cacheSignal=function(){return null},Yt.cloneElement=function(D,Y,at){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var lt=w({},D.props),nt=D.key;if(Y!=null)for(xt in Y.key!==void 0&&(nt=""+Y.key),Y)!L.call(Y,xt)||xt==="key"||xt==="__self"||xt==="__source"||xt==="ref"&&Y.ref===void 0||(lt[xt]=Y[xt]);var xt=arguments.length-2;if(xt===1)lt.children=at;else if(1<xt){for(var Rt=Array(xt),yt=0;yt<xt;yt++)Rt[yt]=arguments[yt+2];lt.children=Rt}return H(D.type,nt,lt)},Yt.createContext=function(D){return D={$$typeof:c,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:o,_context:D},D},Yt.createElement=function(D,Y,at){var lt,nt={},xt=null;if(Y!=null)for(lt in Y.key!==void 0&&(xt=""+Y.key),Y)L.call(Y,lt)&&lt!=="key"&&lt!=="__self"&&lt!=="__source"&&(nt[lt]=Y[lt]);var Rt=arguments.length-2;if(Rt===1)nt.children=at;else if(1<Rt){for(var yt=Array(Rt),Mt=0;Mt<Rt;Mt++)yt[Mt]=arguments[Mt+2];nt.children=yt}if(D&&D.defaultProps)for(lt in Rt=D.defaultProps,Rt)nt[lt]===void 0&&(nt[lt]=Rt[lt]);return H(D,xt,nt)},Yt.createRef=function(){return{current:null}},Yt.forwardRef=function(D){return{$$typeof:u,render:D}},Yt.isValidElement=U,Yt.lazy=function(D){return{$$typeof:p,_payload:{_status:-1,_result:D},_init:rt}},Yt.memo=function(D,Y){return{$$typeof:h,type:D,compare:Y===void 0?null:Y}},Yt.startTransition=function(D){var Y=N.T,at={};N.T=at;try{var lt=D(),nt=N.S;nt!==null&&nt(at,lt),typeof lt=="object"&&lt!==null&&typeof lt.then=="function"&&lt.then(I,it)}catch(xt){it(xt)}finally{Y!==null&&at.types!==null&&(Y.types=at.types),N.T=Y}},Yt.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Yt.use=function(D){return N.H.use(D)},Yt.useActionState=function(D,Y,at){return N.H.useActionState(D,Y,at)},Yt.useCallback=function(D,Y){return N.H.useCallback(D,Y)},Yt.useContext=function(D){return N.H.useContext(D)},Yt.useDebugValue=function(){},Yt.useDeferredValue=function(D,Y){return N.H.useDeferredValue(D,Y)},Yt.useEffect=function(D,Y){return N.H.useEffect(D,Y)},Yt.useEffectEvent=function(D){return N.H.useEffectEvent(D)},Yt.useId=function(){return N.H.useId()},Yt.useImperativeHandle=function(D,Y,at){return N.H.useImperativeHandle(D,Y,at)},Yt.useInsertionEffect=function(D,Y){return N.H.useInsertionEffect(D,Y)},Yt.useLayoutEffect=function(D,Y){return N.H.useLayoutEffect(D,Y)},Yt.useMemo=function(D,Y){return N.H.useMemo(D,Y)},Yt.useOptimistic=function(D,Y){return N.H.useOptimistic(D,Y)},Yt.useReducer=function(D,Y,at){return N.H.useReducer(D,Y,at)},Yt.useRef=function(D){return N.H.useRef(D)},Yt.useState=function(D){return N.H.useState(D)},Yt.useSyncExternalStore=function(D,Y,at){return N.H.useSyncExternalStore(D,Y,at)},Yt.useTransition=function(){return N.H.useTransition()},Yt.version="19.2.3",Yt}var Zx;function kg(){return Zx||(Zx=1,Ep.exports=kT()),Ep.exports}var E=kg();const Qf=Kf(E),OT=RT({__proto__:null,default:Qf},[E]);var Ap={exports:{}},jl={},Tp={exports:{}},Cp={};var tv;function NT(){return tv||(tv=1,(function(n){function t(O,$){var rt=O.length;O.push($);t:for(;0<rt;){var it=rt-1>>>1,ft=O[it];if(0<a(ft,$))O[it]=$,O[rt]=ft,rt=it;else break t}}function e(O){return O.length===0?null:O[0]}function s(O){if(O.length===0)return null;var $=O[0],rt=O.pop();if(rt!==$){O[0]=rt;t:for(var it=0,ft=O.length,D=ft>>>1;it<D;){var Y=2*(it+1)-1,at=O[Y],lt=Y+1,nt=O[lt];if(0>a(at,rt))lt<ft&&0>a(nt,at)?(O[it]=nt,O[lt]=rt,it=lt):(O[it]=at,O[Y]=rt,it=Y);else if(lt<ft&&0>a(nt,rt))O[it]=nt,O[lt]=rt,it=lt;else break t}}return $}function a(O,$){var rt=O.sortIndex-$.sortIndex;return rt!==0?rt:O.id-$.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();n.unstable_now=function(){return c.now()-u}}var d=[],h=[],p=1,y=null,x=3,v=!1,S=!1,w=!1,_=!1,A=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function j(O){for(var $=e(h);$!==null;){if($.callback===null)s(h);else if($.startTime<=O)s(h),$.sortIndex=$.expirationTime,t(d,$);else break;$=e(h)}}function k(O){if(w=!1,j(O),!S)if(e(d)!==null)S=!0,I||(I=!0,z());else{var $=e(h);$!==null&&J(k,$.startTime-O)}}var I=!1,N=-1,L=5,H=-1;function B(){return _?!0:!(n.unstable_now()-H<L)}function U(){if(_=!1,I){var O=n.unstable_now();H=O;var $=!0;try{t:{S=!1,w&&(w=!1,R(N),N=-1),v=!0;var rt=x;try{e:{for(j(O),y=e(d);y!==null&&!(y.expirationTime>O&&B());){var it=y.callback;if(typeof it=="function"){y.callback=null,x=y.priorityLevel;var ft=it(y.expirationTime<=O);if(O=n.unstable_now(),typeof ft=="function"){y.callback=ft,j(O),$=!0;break e}y===e(d)&&s(d),j(O)}else s(d);y=e(d)}if(y!==null)$=!0;else{var D=e(h);D!==null&&J(k,D.startTime-O),$=!1}}break t}finally{y=null,x=rt,v=!1}$=void 0}}finally{$?z():I=!1}}}var z;if(typeof C=="function")z=function(){C(U)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,V=G.port2;G.port1.onmessage=U,z=function(){V.postMessage(null)}}else z=function(){A(U,0)};function J(O,$){N=A(function(){O(n.unstable_now())},$)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(O){switch(x){case 1:case 2:case 3:var $=3;break;default:$=x}var rt=x;x=$;try{return O()}finally{x=rt}},n.unstable_requestPaint=function(){_=!0},n.unstable_runWithPriority=function(O,$){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var rt=x;x=O;try{return $()}finally{x=rt}},n.unstable_scheduleCallback=function(O,$,rt){var it=n.unstable_now();switch(typeof rt=="object"&&rt!==null?(rt=rt.delay,rt=typeof rt=="number"&&0<rt?it+rt:it):rt=it,O){case 1:var ft=-1;break;case 2:ft=250;break;case 5:ft=1073741823;break;case 4:ft=1e4;break;default:ft=5e3}return ft=rt+ft,O={id:p++,callback:$,priorityLevel:O,startTime:rt,expirationTime:ft,sortIndex:-1},rt>it?(O.sortIndex=rt,t(h,O),e(d)===null&&O===e(h)&&(w?(R(N),N=-1):w=!0,J(k,rt-it))):(O.sortIndex=ft,t(d,O),S||v||(S=!0,I||(I=!0,z()))),O},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(O){var $=x;return function(){var rt=x;x=$;try{return O.apply(this,arguments)}finally{x=rt}}}})(Cp)),Cp}var ev;function IT(){return ev||(ev=1,Tp.exports=NT()),Tp.exports}var Rp={exports:{}},Fn={};var nv;function LT(){if(nv)return Fn;nv=1;var n=kg();function t(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var s={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,h,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:d,containerInfo:h,implementation:p}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Fn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Fn.createPortal=function(d,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return o(d,h,null,p)},Fn.flushSync=function(d){var h=c.T,p=s.p;try{if(c.T=null,s.p=2,d)return d()}finally{c.T=h,s.p=p,s.d.f()}},Fn.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(d,h))},Fn.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},Fn.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var p=h.as,y=u(p,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?s.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:y,integrity:x,fetchPriority:v}):p==="script"&&s.d.X(d,{crossOrigin:y,integrity:x,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Fn.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=u(h.as,h.crossOrigin);s.d.M(d,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(d)},Fn.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,y=u(p,h.crossOrigin);s.d.L(d,p,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Fn.preloadModule=function(d,h){if(typeof d=="string")if(h){var p=u(h.as,h.crossOrigin);s.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(d)},Fn.requestFormReset=function(d){s.d.r(d)},Fn.unstable_batchedUpdates=function(d,h){return d(h)},Fn.useFormState=function(d,h,p){return c.H.useFormState(d,h,p)},Fn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Fn.version="19.2.3",Fn}var iv;function D_(){if(iv)return Rp.exports;iv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Rp.exports=LT(),Rp.exports}var sv;function DT(){if(sv)return jl;sv=1;var n=IT(),t=kg(),e=D_();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var r=i,l=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(l=r.return),i=r.return;while(i)}return r.tag===3?l:null}function c(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function u(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(o(i)!==i)throw Error(s(188))}function h(i){var r=i.alternate;if(!r){if(r=o(i),r===null)throw Error(s(188));return r!==i?null:i}for(var l=i,f=r;;){var g=l.return;if(g===null)break;var b=g.alternate;if(b===null){if(f=g.return,f!==null){l=f;continue}break}if(g.child===b.child){for(b=g.child;b;){if(b===l)return d(g),i;if(b===f)return d(g),r;b=b.sibling}throw Error(s(188))}if(l.return!==f.return)l=g,f=b;else{for(var T=!1,M=g.child;M;){if(M===l){T=!0,l=g,f=b;break}if(M===f){T=!0,f=g,l=b;break}M=M.sibling}if(!T){for(M=b.child;M;){if(M===l){T=!0,l=b,f=g;break}if(M===f){T=!0,f=b,l=g;break}M=M.sibling}if(!T)throw Error(s(189))}}if(l.alternate!==f)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?i:r}function p(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=p(i),r!==null)return r;i=i.sibling}return null}var y=Object.assign,x=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),C=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function z(i){return i===null||typeof i!="object"?null:(i=U&&i[U]||i["@@iterator"],typeof i=="function"?i:null)}var G=Symbol.for("react.client.reference");function V(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===G?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case w:return"Fragment";case A:return"Profiler";case _:return"StrictMode";case k:return"Suspense";case I:return"SuspenseList";case H:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case S:return"Portal";case C:return i.displayName||"Context";case R:return(i._context.displayName||"Context")+".Consumer";case j:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case N:return r=i.displayName||null,r!==null?r:V(i.type)||"Memo";case L:r=i._payload,i=i._init;try{return V(i(r))}catch{}}return null}var J=Array.isArray,O=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,rt={pending:!1,data:null,method:null,action:null},it=[],ft=-1;function D(i){return{current:i}}function Y(i){0>ft||(i.current=it[ft],it[ft]=null,ft--)}function at(i,r){ft++,it[ft]=i.current,i.current=r}var lt=D(null),nt=D(null),xt=D(null),Rt=D(null);function yt(i,r){switch(at(xt,r),at(nt,i),at(lt,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?xx(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=xx(r),i=vx(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Y(lt),at(lt,i)}function Mt(){Y(lt),Y(nt),Y(xt)}function Et(i){i.memoizedState!==null&&at(Rt,i);var r=lt.current,l=vx(r,i.type);r!==l&&(at(nt,i),at(lt,l))}function Tt(i){nt.current===i&&(Y(lt),Y(nt)),Rt.current===i&&(Y(Rt),El._currentValue=rt)}var qt,Gt;function Vt(i){if(qt===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);qt=r&&r[1]||"",Gt=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+qt+i+Gt}var Ct=!1;function Wn(i,r){if(!i||Ct)return"";Ct=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(r){var ct=function(){throw Error()};if(Object.defineProperty(ct.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ct,[])}catch(et){var Q=et}Reflect.construct(i,[],ct)}else{try{ct.call()}catch(et){Q=et}i.call(ct.prototype)}}else{try{throw Error()}catch(et){Q=et}(ct=i())&&typeof ct.catch=="function"&&ct.catch(function(){})}}catch(et){if(et&&Q&&typeof et.stack=="string")return[et.stack,Q.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=f.DetermineComponentFrameRoot(),T=b[0],M=b[1];if(T&&M){var P=T.split(`
`),K=M.split(`
`);for(g=f=0;f<P.length&&!P[f].includes("DetermineComponentFrameRoot");)f++;for(;g<K.length&&!K[g].includes("DetermineComponentFrameRoot");)g++;if(f===P.length||g===K.length)for(f=P.length-1,g=K.length-1;1<=f&&0<=g&&P[f]!==K[g];)g--;for(;1<=f&&0<=g;f--,g--)if(P[f]!==K[g]){if(f!==1||g!==1)do if(f--,g--,0>g||P[f]!==K[g]){var st=`
`+P[f].replace(" at new "," at ");return i.displayName&&st.includes("<anonymous>")&&(st=st.replace("<anonymous>",i.displayName)),st}while(1<=f&&0<=g);break}}}finally{Ct=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?Vt(l):""}function Yn(i,r){switch(i.tag){case 26:case 27:case 5:return Vt(i.type);case 16:return Vt("Lazy");case 13:return i.child!==r&&r!==null?Vt("Suspense Fallback"):Vt("Suspense");case 19:return Vt("SuspenseList");case 0:case 15:return Wn(i.type,!1);case 11:return Wn(i.type.render,!1);case 1:return Wn(i.type,!0);case 31:return Vt("Activity");default:return""}}function he(i){try{var r="",l=null;do r+=Yn(i,l),l=i,i=i.return;while(i);return r}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var Jt=Object.prototype.hasOwnProperty,Te=n.unstable_scheduleCallback,Xt=n.unstable_cancelCallback,Ue=n.unstable_shouldYield,mn=n.unstable_requestPaint,Ye=n.unstable_now,Xe=n.unstable_getCurrentPriorityLevel,ln=n.unstable_ImmediatePriority,Ze=n.unstable_UserBlockingPriority,cn=n.unstable_NormalPriority,Xn=n.unstable_LowPriority,X=n.unstable_IdlePriority,vt=n.log,kt=n.unstable_setDisableYieldValue,Zt=null,Ht=null;function Ie(i){if(typeof vt=="function"&&kt(i),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(Zt,i)}catch{}}var fe=Math.clz32?Math.clz32:_t,mt=Math.log,ut=Math.LN2;function _t(i){return i>>>=0,i===0?32:31-(mt(i)/ut|0)|0}var pt=256,It=262144,ae=4194304;function ze(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function gn(i,r,l){var f=i.pendingLanes;if(f===0)return 0;var g=0,b=i.suspendedLanes,T=i.pingedLanes;i=i.warmLanes;var M=f&134217727;return M!==0?(f=M&~b,f!==0?g=ze(f):(T&=M,T!==0?g=ze(T):l||(l=M&~i,l!==0&&(g=ze(l))))):(M=f&~b,M!==0?g=ze(M):T!==0?g=ze(T):l||(l=f&~i,l!==0&&(g=ze(l)))),g===0?0:r!==0&&r!==g&&(r&b)===0&&(b=g&-g,l=r&-r,b>=l||b===32&&(l&4194048)!==0)?r:g}function we(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function qe(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dr(){var i=ae;return ae<<=1,(ae&62914560)===0&&(ae=4194304),i}function qs(i){for(var r=[],l=0;31>l;l++)r.push(i);return r}function Zi(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Aa(i,r,l,f,g,b){var T=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var M=i.entanglements,P=i.expirationTimes,K=i.hiddenUpdates;for(l=T&~l;0<l;){var st=31-fe(l),ct=1<<st;M[st]=0,P[st]=-1;var Q=K[st];if(Q!==null)for(K[st]=null,st=0;st<Q.length;st++){var et=Q[st];et!==null&&(et.lane&=-536870913)}l&=~ct}f!==0&&ts(i,f,0),b!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=b&~(T&~r))}function ts(i,r,l){i.pendingLanes|=r,i.suspendedLanes&=~r;var f=31-fe(r);i.entangledLanes|=r,i.entanglements[f]=i.entanglements[f]|1073741824|l&261930}function nn(i,r){var l=i.entangledLanes|=r;for(i=i.entanglements;l;){var f=31-fe(l),g=1<<f;g&r|i[f]&r&&(i[f]|=r),l&=~g}}function Ta(i,r){var l=r&-r;return l=(l&42)!==0?1:ps(l),(l&(i.suspendedLanes|r))!==0?0:l}function ps(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ks(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Mc(){var i=$.p;return i!==0?i:(i=window.event,i===void 0?32:Gx(i.type))}function zo(i,r){var l=$.p;try{return $.p=i,r()}finally{$.p=l}}var es=Math.random().toString(36).slice(2),yn="__reactFiber$"+es,un="__reactProps$"+es,ci="__reactContainer$"+es,Qs="__reactEvents$"+es,vd="__reactListeners$"+es,Sd="__reactHandles$"+es,ms="__reactResources$"+es,Js="__reactMarker$"+es;function Ca(i){delete i[yn],delete i[un],delete i[Qs],delete i[vd],delete i[Sd]}function gs(i){var r=i[yn];if(r)return r;for(var l=i.parentNode;l;){if(r=l[ci]||l[yn]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(i=Cx(i);i!==null;){if(l=i[yn])return l;i=Cx(i)}return r}i=l,l=i.parentNode}return null}function Ee(i){if(i=i[yn]||i[ci]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function ui(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function ns(i){var r=i[ms];return r||(r=i[ms]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function fn(i){i[Js]=!0}var kc=new Set,Oc={};function ys(i,r){Zs(i,r),Zs(i+"Capture",r)}function Zs(i,r){for(Oc[i]=r,i=0;i<r.length;i++)kc.add(r[i])}var _d=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tt={},ht={};function At(i){return Jt.call(ht,i)?!0:Jt.call(tt,i)?!1:_d.test(i)?ht[i]=!0:(tt[i]=!0,!1)}function St(i,r,l){if(At(r))if(l===null)i.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var f=r.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+l)}}function jt(i,r,l){if(l===null)i.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+l)}}function dt(i,r,l,f){if(f===null)i.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(r,l,""+f)}}function wt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Lt(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Dt(i,r,l){var f=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var g=f.get,b=f.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return g.call(this)},set:function(T){l=""+T,b.call(this,T)}}),Object.defineProperty(i,r,{enumerable:f.enumerable}),{getValue:function(){return l},setValue:function(T){l=""+T},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function Ft(i){if(!i._valueTracker){var r=Lt(i)?"checked":"value";i._valueTracker=Dt(i,r,""+i[r])}}function Ae(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var l=r.getValue(),f="";return i&&(f=Lt(i)?i.checked?"true":"false":i.value),i=f,i!==l?(r.setValue(i),!0):!1}function Pe(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var oe=/[\n"\\]/g;function ve(i){return i.replace(oe,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function ie(i,r,l,f,g,b,T,M){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),r!=null?T==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+wt(r)):i.value!==""+wt(r)&&(i.value=""+wt(r)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),r!=null?De(i,T,wt(r)):l!=null?De(i,T,wt(l)):f!=null&&i.removeAttribute("value"),g==null&&b!=null&&(i.defaultChecked=!!b),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?i.name=""+wt(M):i.removeAttribute("name")}function Le(i,r,l,f,g,b,T,M){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.type=b),r!=null||l!=null){if(!(b!=="submit"&&b!=="reset"||r!=null)){Ft(i);return}l=l!=null?""+wt(l):"",r=r!=null?""+wt(r):l,M||r===i.value||(i.value=r),i.defaultValue=r}f=f??g,f=typeof f!="function"&&typeof f!="symbol"&&!!f,i.checked=M?i.checked:!!f,i.defaultChecked=!!f,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T),Ft(i)}function De(i,r,l){r==="number"&&Pe(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function pe(i,r,l,f){if(i=i.options,r){r={};for(var g=0;g<l.length;g++)r["$"+l[g]]=!0;for(l=0;l<i.length;l++)g=r.hasOwnProperty("$"+i[l].value),i[l].selected!==g&&(i[l].selected=g),g&&f&&(i[l].defaultSelected=!0)}else{for(l=""+wt(l),r=null,g=0;g<i.length;g++){if(i[g].value===l){i[g].selected=!0,f&&(i[g].defaultSelected=!0);return}r!==null||i[g].disabled||(r=i[g])}r!==null&&(r.selected=!0)}}function Rn(i,r,l){if(r!=null&&(r=""+wt(r),r!==i.value&&(i.value=r),l==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=l!=null?""+wt(l):""}function dn(i,r,l,f){if(r==null){if(f!=null){if(l!=null)throw Error(s(92));if(J(f)){if(1<f.length)throw Error(s(93));f=f[0]}l=f}l==null&&(l=""),r=l}l=wt(r),i.defaultValue=l,f=i.textContent,f===l&&f!==""&&f!==null&&(i.value=f),Ft(i)}function me(i,r){if(r){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=r;return}}i.textContent=r}var is=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ss(i,r,l){var f=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?f?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":f?i.setProperty(r,l):typeof l!="number"||l===0||is.has(r)?r==="float"?i.cssFloat=l:i[r]=(""+l).trim():i[r]=l+"px"}function jn(i,r,l){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,l!=null){for(var f in l)!l.hasOwnProperty(f)||r!=null&&r.hasOwnProperty(f)||(f.indexOf("--")===0?i.setProperty(f,""):f==="float"?i.cssFloat="":i[f]="");for(var g in r)f=r[g],r.hasOwnProperty(g)&&l[g]!==f&&ss(i,g,f)}else for(var b in r)r.hasOwnProperty(b)&&ss(i,b,r[b])}function qn(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fi=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ei(i){return bs.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function In(){}var Br=null;function Ur(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var xs=null,Bi=null;function Po(i){var r=Ee(i);if(r&&(i=r.stateNode)){var l=i[un]||null;t:switch(i=r.stateNode,r.type){case"input":if(ie(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+ve(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var f=l[r];if(f!==i&&f.form===i.form){var g=f[un]||null;if(!g)throw Error(s(90));ie(f,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(r=0;r<l.length;r++)f=l[r],f.form===i.form&&Ae(f)}break t;case"textarea":Rn(i,l.value,l.defaultValue);break t;case"select":r=l.value,r!=null&&pe(i,!!l.multiple,r,!1)}}}var Ho=!1;function Nc(i,r,l){if(Ho)return i(r,l);Ho=!0;try{var f=i(r);return f}finally{if(Ho=!1,(xs!==null||Bi!==null)&&(vu(),xs&&(r=xs,i=Bi,Bi=xs=null,Po(r),i)))for(r=0;r<i.length;r++)Po(i[r])}}function zr(i,r){var l=i.stateNode;if(l===null)return null;var f=l[un]||null;if(f===null)return null;l=f[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break t;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(s(231,r,typeof l));return l}var vs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wd=!1;if(vs)try{var Fo={};Object.defineProperty(Fo,"passive",{get:function(){wd=!0}}),window.addEventListener("test",Fo,Fo),window.removeEventListener("test",Fo,Fo)}catch{wd=!1}var tr=null,Ed=null,Ic=null;function v0(){if(Ic)return Ic;var i,r=Ed,l=r.length,f,g="value"in tr?tr.value:tr.textContent,b=g.length;for(i=0;i<l&&r[i]===g[i];i++);var T=l-i;for(f=1;f<=T&&r[l-f]===g[b-f];f++);return Ic=g.slice(i,1<f?1-f:void 0)}function Lc(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function Dc(){return!0}function S0(){return!1}function ti(i){function r(l,f,g,b,T){this._reactName=l,this._targetInst=g,this.type=f,this.nativeEvent=b,this.target=T,this.currentTarget=null;for(var M in i)i.hasOwnProperty(M)&&(l=i[M],this[M]=l?l(b):b[M]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Dc:S0,this.isPropagationStopped=S0,this}return y(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Dc)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Dc)},persist:function(){},isPersistent:Dc}),r}var Pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bc=ti(Pr),Go=y({},Pr,{view:0,detail:0}),TA=ti(Go),Ad,Td,$o,Uc=y({},Go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rd,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==$o&&($o&&i.type==="mousemove"?(Ad=i.screenX-$o.screenX,Td=i.screenY-$o.screenY):Td=Ad=0,$o=i),Ad)},movementY:function(i){return"movementY"in i?i.movementY:Td}}),_0=ti(Uc),CA=y({},Uc,{dataTransfer:0}),RA=ti(CA),jA=y({},Go,{relatedTarget:0}),Cd=ti(jA),MA=y({},Pr,{animationName:0,elapsedTime:0,pseudoElement:0}),kA=ti(MA),OA=y({},Pr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),NA=ti(OA),IA=y({},Pr,{data:0}),w0=ti(IA),LA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},BA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function UA(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=BA[i])?!!r[i]:!1}function Rd(){return UA}var zA=y({},Go,{key:function(i){if(i.key){var r=LA[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Lc(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?DA[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rd,charCode:function(i){return i.type==="keypress"?Lc(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Lc(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),PA=ti(zA),HA=y({},Uc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E0=ti(HA),FA=y({},Go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rd}),GA=ti(FA),$A=y({},Pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),VA=ti($A),WA=y({},Uc,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),YA=ti(WA),XA=y({},Pr,{newState:0,oldState:0}),qA=ti(XA),KA=[9,13,27,32],jd=vs&&"CompositionEvent"in window,Vo=null;vs&&"documentMode"in document&&(Vo=document.documentMode);var QA=vs&&"TextEvent"in window&&!Vo,A0=vs&&(!jd||Vo&&8<Vo&&11>=Vo),T0=" ",C0=!1;function R0(i,r){switch(i){case"keyup":return KA.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function j0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ra=!1;function JA(i,r){switch(i){case"compositionend":return j0(r);case"keypress":return r.which!==32?null:(C0=!0,T0);case"textInput":return i=r.data,i===T0&&C0?null:i;default:return null}}function ZA(i,r){if(Ra)return i==="compositionend"||!jd&&R0(i,r)?(i=v0(),Ic=Ed=tr=null,Ra=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return A0&&r.locale!=="ko"?null:r.data;default:return null}}var t5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function M0(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!t5[i.type]:r==="textarea"}function k0(i,r,l,f){xs?Bi?Bi.push(f):Bi=[f]:xs=f,r=Cu(r,"onChange"),0<r.length&&(l=new Bc("onChange","change",null,l,f),i.push({event:l,listeners:r}))}var Wo=null,Yo=null;function e5(i){hx(i,0)}function zc(i){var r=ui(i);if(Ae(r))return i}function O0(i,r){if(i==="change")return r}var N0=!1;if(vs){var Md;if(vs){var kd="oninput"in document;if(!kd){var I0=document.createElement("div");I0.setAttribute("oninput","return;"),kd=typeof I0.oninput=="function"}Md=kd}else Md=!1;N0=Md&&(!document.documentMode||9<document.documentMode)}function L0(){Wo&&(Wo.detachEvent("onpropertychange",D0),Yo=Wo=null)}function D0(i){if(i.propertyName==="value"&&zc(Yo)){var r=[];k0(r,Yo,i,Ur(i)),Nc(e5,r)}}function n5(i,r,l){i==="focusin"?(L0(),Wo=r,Yo=l,Wo.attachEvent("onpropertychange",D0)):i==="focusout"&&L0()}function i5(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return zc(Yo)}function s5(i,r){if(i==="click")return zc(r)}function r5(i,r){if(i==="input"||i==="change")return zc(r)}function a5(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var di=typeof Object.is=="function"?Object.is:a5;function Xo(i,r){if(di(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var l=Object.keys(i),f=Object.keys(r);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var g=l[f];if(!Jt.call(r,g)||!di(i[g],r[g]))return!1}return!0}function B0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function U0(i,r){var l=B0(i);i=0;for(var f;l;){if(l.nodeType===3){if(f=i+l.textContent.length,i<=r&&f>=r)return{node:l,offset:r-i};i=f}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=B0(l)}}function z0(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?z0(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function P0(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=Pe(i.document);r instanceof i.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)i=r.contentWindow;else break;r=Pe(i.document)}return r}function Od(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var o5=vs&&"documentMode"in document&&11>=document.documentMode,ja=null,Nd=null,qo=null,Id=!1;function H0(i,r,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Id||ja==null||ja!==Pe(f)||(f=ja,"selectionStart"in f&&Od(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),qo&&Xo(qo,f)||(qo=f,f=Cu(Nd,"onSelect"),0<f.length&&(r=new Bc("onSelect","select",null,r,l),i.push({event:r,listeners:f}),r.target=ja)))}function Hr(i,r){var l={};return l[i.toLowerCase()]=r.toLowerCase(),l["Webkit"+i]="webkit"+r,l["Moz"+i]="moz"+r,l}var Ma={animationend:Hr("Animation","AnimationEnd"),animationiteration:Hr("Animation","AnimationIteration"),animationstart:Hr("Animation","AnimationStart"),transitionrun:Hr("Transition","TransitionRun"),transitionstart:Hr("Transition","TransitionStart"),transitioncancel:Hr("Transition","TransitionCancel"),transitionend:Hr("Transition","TransitionEnd")},Ld={},F0={};vs&&(F0=document.createElement("div").style,"AnimationEvent"in window||(delete Ma.animationend.animation,delete Ma.animationiteration.animation,delete Ma.animationstart.animation),"TransitionEvent"in window||delete Ma.transitionend.transition);function Fr(i){if(Ld[i])return Ld[i];if(!Ma[i])return i;var r=Ma[i],l;for(l in r)if(r.hasOwnProperty(l)&&l in F0)return Ld[i]=r[l];return i}var G0=Fr("animationend"),$0=Fr("animationiteration"),V0=Fr("animationstart"),l5=Fr("transitionrun"),c5=Fr("transitionstart"),u5=Fr("transitioncancel"),W0=Fr("transitionend"),Y0=new Map,Dd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dd.push("scrollEnd");function Ui(i,r){Y0.set(i,r),ys(r,[i])}var Pc=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Ai=[],ka=0,Bd=0;function Hc(){for(var i=ka,r=Bd=ka=0;r<i;){var l=Ai[r];Ai[r++]=null;var f=Ai[r];Ai[r++]=null;var g=Ai[r];Ai[r++]=null;var b=Ai[r];if(Ai[r++]=null,f!==null&&g!==null){var T=f.pending;T===null?g.next=g:(g.next=T.next,T.next=g),f.pending=g}b!==0&&X0(l,g,b)}}function Fc(i,r,l,f){Ai[ka++]=i,Ai[ka++]=r,Ai[ka++]=l,Ai[ka++]=f,Bd|=f,i.lanes|=f,i=i.alternate,i!==null&&(i.lanes|=f)}function Ud(i,r,l,f){return Fc(i,r,l,f),Gc(i)}function Gr(i,r){return Fc(i,null,null,r),Gc(i)}function X0(i,r,l){i.lanes|=l;var f=i.alternate;f!==null&&(f.lanes|=l);for(var g=!1,b=i.return;b!==null;)b.childLanes|=l,f=b.alternate,f!==null&&(f.childLanes|=l),b.tag===22&&(i=b.stateNode,i===null||i._visibility&1||(g=!0)),i=b,b=b.return;return i.tag===3?(b=i.stateNode,g&&r!==null&&(g=31-fe(l),i=b.hiddenUpdates,f=i[g],f===null?i[g]=[r]:f.push(r),r.lane=l|536870912),b):null}function Gc(i){if(50<yl)throw yl=0,Yh=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Oa={};function f5(i,r,l,f){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hi(i,r,l,f){return new f5(i,r,l,f)}function zd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ss(i,r){var l=i.alternate;return l===null?(l=hi(i.tag,r,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=r,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,r=i.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function q0(i,r){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,r=l.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function $c(i,r,l,f,g,b){var T=0;if(f=i,typeof i=="function")zd(i)&&(T=1);else if(typeof i=="string")T=gT(i,l,lt.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case H:return i=hi(31,l,r,g),i.elementType=H,i.lanes=b,i;case w:return $r(l.children,g,b,r);case _:T=8,g|=24;break;case A:return i=hi(12,l,r,g|2),i.elementType=A,i.lanes=b,i;case k:return i=hi(13,l,r,g),i.elementType=k,i.lanes=b,i;case I:return i=hi(19,l,r,g),i.elementType=I,i.lanes=b,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case C:T=10;break t;case R:T=9;break t;case j:T=11;break t;case N:T=14;break t;case L:T=16,f=null;break t}T=29,l=Error(s(130,i===null?"null":typeof i,"")),f=null}return r=hi(T,l,r,g),r.elementType=i,r.type=f,r.lanes=b,r}function $r(i,r,l,f){return i=hi(7,i,f,r),i.lanes=l,i}function Pd(i,r,l){return i=hi(6,i,null,r),i.lanes=l,i}function K0(i){var r=hi(18,null,null,0);return r.stateNode=i,r}function Hd(i,r,l){return r=hi(4,i.children!==null?i.children:[],i.key,r),r.lanes=l,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var Q0=new WeakMap;function Ti(i,r){if(typeof i=="object"&&i!==null){var l=Q0.get(i);return l!==void 0?l:(r={value:i,source:r,stack:he(r)},Q0.set(i,r),r)}return{value:i,source:r,stack:he(r)}}var Na=[],Ia=0,Vc=null,Ko=0,Ci=[],Ri=0,er=null,rs=1,as="";function _s(i,r){Na[Ia++]=Ko,Na[Ia++]=Vc,Vc=i,Ko=r}function J0(i,r,l){Ci[Ri++]=rs,Ci[Ri++]=as,Ci[Ri++]=er,er=i;var f=rs;i=as;var g=32-fe(f)-1;f&=~(1<<g),l+=1;var b=32-fe(r)+g;if(30<b){var T=g-g%5;b=(f&(1<<T)-1).toString(32),f>>=T,g-=T,rs=1<<32-fe(r)+g|l<<g|f,as=b+i}else rs=1<<b|l<<g|f,as=i}function Fd(i){i.return!==null&&(_s(i,1),J0(i,1,0))}function Gd(i){for(;i===Vc;)Vc=Na[--Ia],Na[Ia]=null,Ko=Na[--Ia],Na[Ia]=null;for(;i===er;)er=Ci[--Ri],Ci[Ri]=null,as=Ci[--Ri],Ci[Ri]=null,rs=Ci[--Ri],Ci[Ri]=null}function Z0(i,r){Ci[Ri++]=rs,Ci[Ri++]=as,Ci[Ri++]=er,rs=r.id,as=r.overflow,er=i}var Ln=null,He=null,de=!1,nr=null,ji=!1,$d=Error(s(519));function ir(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Qo(Ti(r,i)),$d}function ty(i){var r=i.stateNode,l=i.type,f=i.memoizedProps;switch(r[yn]=i,r[un]=f,l){case"dialog":re("cancel",r),re("close",r);break;case"iframe":case"object":case"embed":re("load",r);break;case"video":case"audio":for(l=0;l<xl.length;l++)re(xl[l],r);break;case"source":re("error",r);break;case"img":case"image":case"link":re("error",r),re("load",r);break;case"details":re("toggle",r);break;case"input":re("invalid",r),Le(r,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":re("invalid",r);break;case"textarea":re("invalid",r),dn(r,f.value,f.defaultValue,f.children)}l=f.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||f.suppressHydrationWarning===!0||yx(r.textContent,l)?(f.popover!=null&&(re("beforetoggle",r),re("toggle",r)),f.onScroll!=null&&re("scroll",r),f.onScrollEnd!=null&&re("scrollend",r),f.onClick!=null&&(r.onclick=In),r=!0):r=!1,r||ir(i,!0)}function ey(i){for(Ln=i.return;Ln;)switch(Ln.tag){case 5:case 31:case 13:ji=!1;return;case 27:case 3:ji=!0;return;default:Ln=Ln.return}}function La(i){if(i!==Ln)return!1;if(!de)return ey(i),de=!0,!1;var r=i.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||lp(i.type,i.memoizedProps)),l=!l),l&&He&&ir(i),ey(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));He=Tx(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));He=Tx(i)}else r===27?(r=He,yr(i.type)?(i=hp,hp=null,He=i):He=r):He=Ln?ki(i.stateNode.nextSibling):null;return!0}function Vr(){He=Ln=null,de=!1}function Vd(){var i=nr;return i!==null&&(si===null?si=i:si.push.apply(si,i),nr=null),i}function Qo(i){nr===null?nr=[i]:nr.push(i)}var Wd=D(null),Wr=null,ws=null;function sr(i,r,l){at(Wd,r._currentValue),r._currentValue=l}function Es(i){i._currentValue=Wd.current,Y(Wd)}function Yd(i,r,l){for(;i!==null;){var f=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,f!==null&&(f.childLanes|=r)):f!==null&&(f.childLanes&r)!==r&&(f.childLanes|=r),i===l)break;i=i.return}}function Xd(i,r,l,f){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var b=g.dependencies;if(b!==null){var T=g.child;b=b.firstContext;t:for(;b!==null;){var M=b;b=g;for(var P=0;P<r.length;P++)if(M.context===r[P]){b.lanes|=l,M=b.alternate,M!==null&&(M.lanes|=l),Yd(b.return,l,i),f||(T=null);break t}b=M.next}}else if(g.tag===18){if(T=g.return,T===null)throw Error(s(341));T.lanes|=l,b=T.alternate,b!==null&&(b.lanes|=l),Yd(T,l,i),T=null}else T=g.child;if(T!==null)T.return=g;else for(T=g;T!==null;){if(T===i){T=null;break}if(g=T.sibling,g!==null){g.return=T.return,T=g;break}T=T.return}g=T}}function Da(i,r,l,f){i=null;for(var g=r,b=!1;g!==null;){if(!b){if((g.flags&524288)!==0)b=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var T=g.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var M=g.type;di(g.pendingProps.value,T.value)||(i!==null?i.push(M):i=[M])}}else if(g===Rt.current){if(T=g.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(El):i=[El])}g=g.return}i!==null&&Xd(r,i,l,f),r.flags|=262144}function Wc(i){for(i=i.firstContext;i!==null;){if(!di(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Yr(i){Wr=i,ws=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Dn(i){return ny(Wr,i)}function Yc(i,r){return Wr===null&&Yr(i),ny(i,r)}function ny(i,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},ws===null){if(i===null)throw Error(s(308));ws=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else ws=ws.next=r;return l}var d5=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(l,f){i.push(f)}};this.abort=function(){r.aborted=!0,i.forEach(function(l){return l()})}},h5=n.unstable_scheduleCallback,p5=n.unstable_NormalPriority,bn={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qd(){return{controller:new d5,data:new Map,refCount:0}}function Jo(i){i.refCount--,i.refCount===0&&h5(p5,function(){i.controller.abort()})}var Zo=null,Kd=0,Ba=0,Ua=null;function m5(i,r){if(Zo===null){var l=Zo=[];Kd=0,Ba=Zh(),Ua={status:"pending",value:void 0,then:function(f){l.push(f)}}}return Kd++,r.then(iy,iy),r}function iy(){if(--Kd===0&&Zo!==null){Ua!==null&&(Ua.status="fulfilled");var i=Zo;Zo=null,Ba=0,Ua=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function g5(i,r){var l=[],f={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return i.then(function(){f.status="fulfilled",f.value=r;for(var g=0;g<l.length;g++)(0,l[g])(r)},function(g){for(f.status="rejected",f.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),f}var sy=O.S;O.S=function(i,r){Hb=Ye(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&m5(i,r),sy!==null&&sy(i,r)};var Xr=D(null);function Qd(){var i=Xr.current;return i!==null?i:Ne.pooledCache}function Xc(i,r){r===null?at(Xr,Xr.current):at(Xr,r.pool)}function ry(){var i=Qd();return i===null?null:{parent:bn._currentValue,pool:i}}var za=Error(s(460)),Jd=Error(s(474)),qc=Error(s(542)),Kc={then:function(){}};function ay(i){return i=i.status,i==="fulfilled"||i==="rejected"}function oy(i,r,l){switch(l=i[l],l===void 0?i.push(r):l!==r&&(r.then(In,In),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,cy(i),i;default:if(typeof r.status=="string")r.then(In,In);else{if(i=Ne,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(f){if(r.status==="pending"){var g=r;g.status="fulfilled",g.value=f}},function(f){if(r.status==="pending"){var g=r;g.status="rejected",g.reason=f}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,cy(i),i}throw Kr=r,za}}function qr(i){try{var r=i._init;return r(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Kr=l,za):l}}var Kr=null;function ly(){if(Kr===null)throw Error(s(459));var i=Kr;return Kr=null,i}function cy(i){if(i===za||i===qc)throw Error(s(483))}var Pa=null,tl=0;function Qc(i){var r=tl;return tl+=1,Pa===null&&(Pa=[]),oy(Pa,i,r)}function el(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function Jc(i,r){throw r.$$typeof===x?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function uy(i){function r(W,F){if(i){var q=W.deletions;q===null?(W.deletions=[F],W.flags|=16):q.push(F)}}function l(W,F){if(!i)return null;for(;F!==null;)r(W,F),F=F.sibling;return null}function f(W){for(var F=new Map;W!==null;)W.key!==null?F.set(W.key,W):F.set(W.index,W),W=W.sibling;return F}function g(W,F){return W=Ss(W,F),W.index=0,W.sibling=null,W}function b(W,F,q){return W.index=q,i?(q=W.alternate,q!==null?(q=q.index,q<F?(W.flags|=67108866,F):q):(W.flags|=67108866,F)):(W.flags|=1048576,F)}function T(W){return i&&W.alternate===null&&(W.flags|=67108866),W}function M(W,F,q,ot){return F===null||F.tag!==6?(F=Pd(q,W.mode,ot),F.return=W,F):(F=g(F,q),F.return=W,F)}function P(W,F,q,ot){var Ut=q.type;return Ut===w?st(W,F,q.props.children,ot,q.key):F!==null&&(F.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===L&&qr(Ut)===F.type)?(F=g(F,q.props),el(F,q),F.return=W,F):(F=$c(q.type,q.key,q.props,null,W.mode,ot),el(F,q),F.return=W,F)}function K(W,F,q,ot){return F===null||F.tag!==4||F.stateNode.containerInfo!==q.containerInfo||F.stateNode.implementation!==q.implementation?(F=Hd(q,W.mode,ot),F.return=W,F):(F=g(F,q.children||[]),F.return=W,F)}function st(W,F,q,ot,Ut){return F===null||F.tag!==7?(F=$r(q,W.mode,ot,Ut),F.return=W,F):(F=g(F,q),F.return=W,F)}function ct(W,F,q){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=Pd(""+F,W.mode,q),F.return=W,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case v:return q=$c(F.type,F.key,F.props,null,W.mode,q),el(q,F),q.return=W,q;case S:return F=Hd(F,W.mode,q),F.return=W,F;case L:return F=qr(F),ct(W,F,q)}if(J(F)||z(F))return F=$r(F,W.mode,q,null),F.return=W,F;if(typeof F.then=="function")return ct(W,Qc(F),q);if(F.$$typeof===C)return ct(W,Yc(W,F),q);Jc(W,F)}return null}function Q(W,F,q,ot){var Ut=F!==null?F.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return Ut!==null?null:M(W,F,""+q,ot);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case v:return q.key===Ut?P(W,F,q,ot):null;case S:return q.key===Ut?K(W,F,q,ot):null;case L:return q=qr(q),Q(W,F,q,ot)}if(J(q)||z(q))return Ut!==null?null:st(W,F,q,ot,null);if(typeof q.then=="function")return Q(W,F,Qc(q),ot);if(q.$$typeof===C)return Q(W,F,Yc(W,q),ot);Jc(W,q)}return null}function et(W,F,q,ot,Ut){if(typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint")return W=W.get(q)||null,M(F,W,""+ot,Ut);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case v:return W=W.get(ot.key===null?q:ot.key)||null,P(F,W,ot,Ut);case S:return W=W.get(ot.key===null?q:ot.key)||null,K(F,W,ot,Ut);case L:return ot=qr(ot),et(W,F,q,ot,Ut)}if(J(ot)||z(ot))return W=W.get(q)||null,st(F,W,ot,Ut,null);if(typeof ot.then=="function")return et(W,F,q,Qc(ot),Ut);if(ot.$$typeof===C)return et(W,F,q,Yc(F,ot),Ut);Jc(F,ot)}return null}function Ot(W,F,q,ot){for(var Ut=null,be=null,Nt=F,te=F=0,ce=null;Nt!==null&&te<q.length;te++){Nt.index>te?(ce=Nt,Nt=null):ce=Nt.sibling;var xe=Q(W,Nt,q[te],ot);if(xe===null){Nt===null&&(Nt=ce);break}i&&Nt&&xe.alternate===null&&r(W,Nt),F=b(xe,F,te),be===null?Ut=xe:be.sibling=xe,be=xe,Nt=ce}if(te===q.length)return l(W,Nt),de&&_s(W,te),Ut;if(Nt===null){for(;te<q.length;te++)Nt=ct(W,q[te],ot),Nt!==null&&(F=b(Nt,F,te),be===null?Ut=Nt:be.sibling=Nt,be=Nt);return de&&_s(W,te),Ut}for(Nt=f(Nt);te<q.length;te++)ce=et(Nt,W,te,q[te],ot),ce!==null&&(i&&ce.alternate!==null&&Nt.delete(ce.key===null?te:ce.key),F=b(ce,F,te),be===null?Ut=ce:be.sibling=ce,be=ce);return i&&Nt.forEach(function(_r){return r(W,_r)}),de&&_s(W,te),Ut}function $t(W,F,q,ot){if(q==null)throw Error(s(151));for(var Ut=null,be=null,Nt=F,te=F=0,ce=null,xe=q.next();Nt!==null&&!xe.done;te++,xe=q.next()){Nt.index>te?(ce=Nt,Nt=null):ce=Nt.sibling;var _r=Q(W,Nt,xe.value,ot);if(_r===null){Nt===null&&(Nt=ce);break}i&&Nt&&_r.alternate===null&&r(W,Nt),F=b(_r,F,te),be===null?Ut=_r:be.sibling=_r,be=_r,Nt=ce}if(xe.done)return l(W,Nt),de&&_s(W,te),Ut;if(Nt===null){for(;!xe.done;te++,xe=q.next())xe=ct(W,xe.value,ot),xe!==null&&(F=b(xe,F,te),be===null?Ut=xe:be.sibling=xe,be=xe);return de&&_s(W,te),Ut}for(Nt=f(Nt);!xe.done;te++,xe=q.next())xe=et(Nt,W,te,xe.value,ot),xe!==null&&(i&&xe.alternate!==null&&Nt.delete(xe.key===null?te:xe.key),F=b(xe,F,te),be===null?Ut=xe:be.sibling=xe,be=xe);return i&&Nt.forEach(function(CT){return r(W,CT)}),de&&_s(W,te),Ut}function ke(W,F,q,ot){if(typeof q=="object"&&q!==null&&q.type===w&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case v:t:{for(var Ut=q.key;F!==null;){if(F.key===Ut){if(Ut=q.type,Ut===w){if(F.tag===7){l(W,F.sibling),ot=g(F,q.props.children),ot.return=W,W=ot;break t}}else if(F.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===L&&qr(Ut)===F.type){l(W,F.sibling),ot=g(F,q.props),el(ot,q),ot.return=W,W=ot;break t}l(W,F);break}else r(W,F);F=F.sibling}q.type===w?(ot=$r(q.props.children,W.mode,ot,q.key),ot.return=W,W=ot):(ot=$c(q.type,q.key,q.props,null,W.mode,ot),el(ot,q),ot.return=W,W=ot)}return T(W);case S:t:{for(Ut=q.key;F!==null;){if(F.key===Ut)if(F.tag===4&&F.stateNode.containerInfo===q.containerInfo&&F.stateNode.implementation===q.implementation){l(W,F.sibling),ot=g(F,q.children||[]),ot.return=W,W=ot;break t}else{l(W,F);break}else r(W,F);F=F.sibling}ot=Hd(q,W.mode,ot),ot.return=W,W=ot}return T(W);case L:return q=qr(q),ke(W,F,q,ot)}if(J(q))return Ot(W,F,q,ot);if(z(q)){if(Ut=z(q),typeof Ut!="function")throw Error(s(150));return q=Ut.call(q),$t(W,F,q,ot)}if(typeof q.then=="function")return ke(W,F,Qc(q),ot);if(q.$$typeof===C)return ke(W,F,Yc(W,q),ot);Jc(W,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,F!==null&&F.tag===6?(l(W,F.sibling),ot=g(F,q),ot.return=W,W=ot):(l(W,F),ot=Pd(q,W.mode,ot),ot.return=W,W=ot),T(W)):l(W,F)}return function(W,F,q,ot){try{tl=0;var Ut=ke(W,F,q,ot);return Pa=null,Ut}catch(Nt){if(Nt===za||Nt===qc)throw Nt;var be=hi(29,Nt,null,W.mode);return be.lanes=ot,be.return=W,be}}}var Qr=uy(!0),fy=uy(!1),rr=!1;function Zd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function th(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ar(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function or(i,r,l){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(Se&2)!==0){var g=f.pending;return g===null?r.next=r:(r.next=g.next,g.next=r),f.pending=r,r=Gc(i),X0(i,null,l),r}return Fc(i,f,r,l),Gc(i)}function nl(i,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var f=r.lanes;f&=i.pendingLanes,l|=f,r.lanes=l,nn(i,l)}}function eh(i,r){var l=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var g=null,b=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};b===null?g=b=T:b=b.next=T,l=l.next}while(l!==null);b===null?g=b=r:b=b.next=r}else g=b=r;l={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:b,shared:f.shared,callbacks:f.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=r:i.next=r,l.lastBaseUpdate=r}var nh=!1;function il(){if(nh){var i=Ua;if(i!==null)throw i}}function sl(i,r,l,f){nh=!1;var g=i.updateQueue;rr=!1;var b=g.firstBaseUpdate,T=g.lastBaseUpdate,M=g.shared.pending;if(M!==null){g.shared.pending=null;var P=M,K=P.next;P.next=null,T===null?b=K:T.next=K,T=P;var st=i.alternate;st!==null&&(st=st.updateQueue,M=st.lastBaseUpdate,M!==T&&(M===null?st.firstBaseUpdate=K:M.next=K,st.lastBaseUpdate=P))}if(b!==null){var ct=g.baseState;T=0,st=K=P=null,M=b;do{var Q=M.lane&-536870913,et=Q!==M.lane;if(et?(le&Q)===Q:(f&Q)===Q){Q!==0&&Q===Ba&&(nh=!0),st!==null&&(st=st.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});t:{var Ot=i,$t=M;Q=r;var ke=l;switch($t.tag){case 1:if(Ot=$t.payload,typeof Ot=="function"){ct=Ot.call(ke,ct,Q);break t}ct=Ot;break t;case 3:Ot.flags=Ot.flags&-65537|128;case 0:if(Ot=$t.payload,Q=typeof Ot=="function"?Ot.call(ke,ct,Q):Ot,Q==null)break t;ct=y({},ct,Q);break t;case 2:rr=!0}}Q=M.callback,Q!==null&&(i.flags|=64,et&&(i.flags|=8192),et=g.callbacks,et===null?g.callbacks=[Q]:et.push(Q))}else et={lane:Q,tag:M.tag,payload:M.payload,callback:M.callback,next:null},st===null?(K=st=et,P=ct):st=st.next=et,T|=Q;if(M=M.next,M===null){if(M=g.shared.pending,M===null)break;et=M,M=et.next,et.next=null,g.lastBaseUpdate=et,g.shared.pending=null}}while(!0);st===null&&(P=ct),g.baseState=P,g.firstBaseUpdate=K,g.lastBaseUpdate=st,b===null&&(g.shared.lanes=0),dr|=T,i.lanes=T,i.memoizedState=ct}}function dy(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function hy(i,r){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)dy(l[i],r)}var Ha=D(null),Zc=D(0);function py(i,r){i=Ns,at(Zc,i),at(Ha,r),Ns=i|r.baseLanes}function ih(){at(Zc,Ns),at(Ha,Ha.current)}function sh(){Ns=Zc.current,Y(Ha),Y(Zc)}var pi=D(null),Mi=null;function lr(i){var r=i.alternate;at(hn,hn.current&1),at(pi,i),Mi===null&&(r===null||Ha.current!==null||r.memoizedState!==null)&&(Mi=i)}function rh(i){at(hn,hn.current),at(pi,i),Mi===null&&(Mi=i)}function my(i){i.tag===22?(at(hn,hn.current),at(pi,i),Mi===null&&(Mi=i)):cr()}function cr(){at(hn,hn.current),at(pi,pi.current)}function mi(i){Y(pi),Mi===i&&(Mi=null),Y(hn)}var hn=D(0);function tu(i){for(var r=i;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||fp(l)||dp(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var As=0,Kt=null,je=null,xn=null,eu=!1,Fa=!1,Jr=!1,nu=0,rl=0,Ga=null,y5=0;function sn(){throw Error(s(321))}function ah(i,r){if(r===null)return!1;for(var l=0;l<r.length&&l<i.length;l++)if(!di(i[l],r[l]))return!1;return!0}function oh(i,r,l,f,g,b){return As=b,Kt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,O.H=i===null||i.memoizedState===null?Jy:_h,Jr=!1,b=l(f,g),Jr=!1,Fa&&(b=yy(r,l,f,g)),gy(i),b}function gy(i){O.H=ll;var r=je!==null&&je.next!==null;if(As=0,xn=je=Kt=null,eu=!1,rl=0,Ga=null,r)throw Error(s(300));i===null||vn||(i=i.dependencies,i!==null&&Wc(i)&&(vn=!0))}function yy(i,r,l,f){Kt=i;var g=0;do{if(Fa&&(Ga=null),rl=0,Fa=!1,25<=g)throw Error(s(301));if(g+=1,xn=je=null,i.updateQueue!=null){var b=i.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}O.H=Zy,b=r(l,f)}while(Fa);return b}function b5(){var i=O.H,r=i.useState()[0];return r=typeof r.then=="function"?al(r):r,i=i.useState()[0],(je!==null?je.memoizedState:null)!==i&&(Kt.flags|=1024),r}function lh(){var i=nu!==0;return nu=0,i}function ch(i,r,l){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~l}function uh(i){if(eu){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}eu=!1}As=0,xn=je=Kt=null,Fa=!1,rl=nu=0,Ga=null}function Kn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xn===null?Kt.memoizedState=xn=i:xn=xn.next=i,xn}function pn(){if(je===null){var i=Kt.alternate;i=i!==null?i.memoizedState:null}else i=je.next;var r=xn===null?Kt.memoizedState:xn.next;if(r!==null)xn=r,je=i;else{if(i===null)throw Kt.alternate===null?Error(s(467)):Error(s(310));je=i,i={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},xn===null?Kt.memoizedState=xn=i:xn=xn.next=i}return xn}function iu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function al(i){var r=rl;return rl+=1,Ga===null&&(Ga=[]),i=oy(Ga,i,r),r=Kt,(xn===null?r.memoizedState:xn.next)===null&&(r=r.alternate,O.H=r===null||r.memoizedState===null?Jy:_h),i}function su(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return al(i);if(i.$$typeof===C)return Dn(i)}throw Error(s(438,String(i)))}function fh(i){var r=null,l=Kt.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var f=Kt.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(r={data:f.data.map(function(g){return g.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=iu(),Kt.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(i),f=0;f<i;f++)l[f]=B;return r.index++,l}function Ts(i,r){return typeof r=="function"?r(i):r}function ru(i){var r=pn();return dh(r,je,i)}function dh(i,r,l){var f=i.queue;if(f===null)throw Error(s(311));f.lastRenderedReducer=l;var g=i.baseQueue,b=f.pending;if(b!==null){if(g!==null){var T=g.next;g.next=b.next,b.next=T}r.baseQueue=g=b,f.pending=null}if(b=i.baseState,g===null)i.memoizedState=b;else{r=g.next;var M=T=null,P=null,K=r,st=!1;do{var ct=K.lane&-536870913;if(ct!==K.lane?(le&ct)===ct:(As&ct)===ct){var Q=K.revertLane;if(Q===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ct===Ba&&(st=!0);else if((As&Q)===Q){K=K.next,Q===Ba&&(st=!0);continue}else ct={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},P===null?(M=P=ct,T=b):P=P.next=ct,Kt.lanes|=Q,dr|=Q;ct=K.action,Jr&&l(b,ct),b=K.hasEagerState?K.eagerState:l(b,ct)}else Q={lane:ct,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},P===null?(M=P=Q,T=b):P=P.next=Q,Kt.lanes|=ct,dr|=ct;K=K.next}while(K!==null&&K!==r);if(P===null?T=b:P.next=M,!di(b,i.memoizedState)&&(vn=!0,st&&(l=Ua,l!==null)))throw l;i.memoizedState=b,i.baseState=T,i.baseQueue=P,f.lastRenderedState=b}return g===null&&(f.lanes=0),[i.memoizedState,f.dispatch]}function hh(i){var r=pn(),l=r.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=i;var f=l.dispatch,g=l.pending,b=r.memoizedState;if(g!==null){l.pending=null;var T=g=g.next;do b=i(b,T.action),T=T.next;while(T!==g);di(b,r.memoizedState)||(vn=!0),r.memoizedState=b,r.baseQueue===null&&(r.baseState=b),l.lastRenderedState=b}return[b,f]}function by(i,r,l){var f=Kt,g=pn(),b=de;if(b){if(l===void 0)throw Error(s(407));l=l()}else l=r();var T=!di((je||g).memoizedState,l);if(T&&(g.memoizedState=l,vn=!0),g=g.queue,gh(Sy.bind(null,f,g,i),[i]),g.getSnapshot!==r||T||xn!==null&&xn.memoizedState.tag&1){if(f.flags|=2048,$a(9,{destroy:void 0},vy.bind(null,f,g,l,r),null),Ne===null)throw Error(s(349));b||(As&127)!==0||xy(f,r,l)}return l}function xy(i,r,l){i.flags|=16384,i={getSnapshot:r,value:l},r=Kt.updateQueue,r===null?(r=iu(),Kt.updateQueue=r,r.stores=[i]):(l=r.stores,l===null?r.stores=[i]:l.push(i))}function vy(i,r,l,f){r.value=l,r.getSnapshot=f,_y(r)&&wy(i)}function Sy(i,r,l){return l(function(){_y(r)&&wy(i)})}function _y(i){var r=i.getSnapshot;i=i.value;try{var l=r();return!di(i,l)}catch{return!0}}function wy(i){var r=Gr(i,2);r!==null&&ri(r,i,2)}function ph(i){var r=Kn();if(typeof i=="function"){var l=i;if(i=l(),Jr){Ie(!0);try{l()}finally{Ie(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:i},r}function Ey(i,r,l,f){return i.baseState=l,dh(i,je,typeof f=="function"?f:Ts)}function x5(i,r,l,f,g){if(lu(i))throw Error(s(485));if(i=r.action,i!==null){var b={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){b.listeners.push(T)}};O.T!==null?l(!0):b.isTransition=!1,f(b),l=r.pending,l===null?(b.next=r.pending=b,Ay(r,b)):(b.next=l.next,r.pending=l.next=b)}}function Ay(i,r){var l=r.action,f=r.payload,g=i.state;if(r.isTransition){var b=O.T,T={};O.T=T;try{var M=l(g,f),P=O.S;P!==null&&P(T,M),Ty(i,r,M)}catch(K){mh(i,r,K)}finally{b!==null&&T.types!==null&&(b.types=T.types),O.T=b}}else try{b=l(g,f),Ty(i,r,b)}catch(K){mh(i,r,K)}}function Ty(i,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(f){Cy(i,r,f)},function(f){return mh(i,r,f)}):Cy(i,r,l)}function Cy(i,r,l){r.status="fulfilled",r.value=l,Ry(r),i.state=l,r=i.pending,r!==null&&(l=r.next,l===r?i.pending=null:(l=l.next,r.next=l,Ay(i,l)))}function mh(i,r,l){var f=i.pending;if(i.pending=null,f!==null){f=f.next;do r.status="rejected",r.reason=l,Ry(r),r=r.next;while(r!==f)}i.action=null}function Ry(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function jy(i,r){return r}function My(i,r){if(de){var l=Ne.formState;if(l!==null){t:{var f=Kt;if(de){if(He){e:{for(var g=He,b=ji;g.nodeType!==8;){if(!b){g=null;break e}if(g=ki(g.nextSibling),g===null){g=null;break e}}b=g.data,g=b==="F!"||b==="F"?g:null}if(g){He=ki(g.nextSibling),f=g.data==="F!";break t}}ir(f)}f=!1}f&&(r=l[0])}}return l=Kn(),l.memoizedState=l.baseState=r,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jy,lastRenderedState:r},l.queue=f,l=qy.bind(null,Kt,f),f.dispatch=l,f=ph(!1),b=Sh.bind(null,Kt,!1,f.queue),f=Kn(),g={state:r,dispatch:null,action:i,pending:null},f.queue=g,l=x5.bind(null,Kt,g,b,l),g.dispatch=l,f.memoizedState=i,[r,l,!1]}function ky(i){var r=pn();return Oy(r,je,i)}function Oy(i,r,l){if(r=dh(i,r,jy)[0],i=ru(Ts)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var f=al(r)}catch(T){throw T===za?qc:T}else f=r;r=pn();var g=r.queue,b=g.dispatch;return l!==r.memoizedState&&(Kt.flags|=2048,$a(9,{destroy:void 0},v5.bind(null,g,l),null)),[f,b,i]}function v5(i,r){i.action=r}function Ny(i){var r=pn(),l=je;if(l!==null)return Oy(r,l,i);pn(),r=r.memoizedState,l=pn();var f=l.queue.dispatch;return l.memoizedState=i,[r,f,!1]}function $a(i,r,l,f){return i={tag:i,create:l,deps:f,inst:r,next:null},r=Kt.updateQueue,r===null&&(r=iu(),Kt.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=i.next=i:(f=l.next,l.next=i,i.next=f,r.lastEffect=i),i}function Iy(){return pn().memoizedState}function au(i,r,l,f){var g=Kn();Kt.flags|=i,g.memoizedState=$a(1|r,{destroy:void 0},l,f===void 0?null:f)}function ou(i,r,l,f){var g=pn();f=f===void 0?null:f;var b=g.memoizedState.inst;je!==null&&f!==null&&ah(f,je.memoizedState.deps)?g.memoizedState=$a(r,b,l,f):(Kt.flags|=i,g.memoizedState=$a(1|r,b,l,f))}function Ly(i,r){au(8390656,8,i,r)}function gh(i,r){ou(2048,8,i,r)}function S5(i){Kt.flags|=4;var r=Kt.updateQueue;if(r===null)r=iu(),Kt.updateQueue=r,r.events=[i];else{var l=r.events;l===null?r.events=[i]:l.push(i)}}function Dy(i){var r=pn().memoizedState;return S5({ref:r,nextImpl:i}),function(){if((Se&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function By(i,r){return ou(4,2,i,r)}function Uy(i,r){return ou(4,4,i,r)}function zy(i,r){if(typeof r=="function"){i=i();var l=r(i);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function Py(i,r,l){l=l!=null?l.concat([i]):null,ou(4,4,zy.bind(null,r,i),l)}function yh(){}function Hy(i,r){var l=pn();r=r===void 0?null:r;var f=l.memoizedState;return r!==null&&ah(r,f[1])?f[0]:(l.memoizedState=[i,r],i)}function Fy(i,r){var l=pn();r=r===void 0?null:r;var f=l.memoizedState;if(r!==null&&ah(r,f[1]))return f[0];if(f=i(),Jr){Ie(!0);try{i()}finally{Ie(!1)}}return l.memoizedState=[f,r],f}function bh(i,r,l){return l===void 0||(As&1073741824)!==0&&(le&261930)===0?i.memoizedState=r:(i.memoizedState=l,i=Gb(),Kt.lanes|=i,dr|=i,l)}function Gy(i,r,l,f){return di(l,r)?l:Ha.current!==null?(i=bh(i,l,f),di(i,r)||(vn=!0),i):(As&42)===0||(As&1073741824)!==0&&(le&261930)===0?(vn=!0,i.memoizedState=l):(i=Gb(),Kt.lanes|=i,dr|=i,r)}function $y(i,r,l,f,g){var b=$.p;$.p=b!==0&&8>b?b:8;var T=O.T,M={};O.T=M,Sh(i,!1,r,l);try{var P=g(),K=O.S;if(K!==null&&K(M,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var st=g5(P,f);ol(i,r,st,bi(i))}else ol(i,r,f,bi(i))}catch(ct){ol(i,r,{then:function(){},status:"rejected",reason:ct},bi())}finally{$.p=b,T!==null&&M.types!==null&&(T.types=M.types),O.T=T}}function _5(){}function xh(i,r,l,f){if(i.tag!==5)throw Error(s(476));var g=Vy(i).queue;$y(i,g,r,rt,l===null?_5:function(){return Wy(i),l(f)})}function Vy(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:rt,baseState:rt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:rt},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:l},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function Wy(i){var r=Vy(i);r.next===null&&(r=i.alternate.memoizedState),ol(i,r.next.queue,{},bi())}function vh(){return Dn(El)}function Yy(){return pn().memoizedState}function Xy(){return pn().memoizedState}function w5(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var l=bi();i=ar(l);var f=or(r,i,l);f!==null&&(ri(f,r,l),nl(f,r,l)),r={cache:qd()},i.payload=r;return}r=r.return}}function E5(i,r,l){var f=bi();l={lane:f,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},lu(i)?Ky(r,l):(l=Ud(i,r,l,f),l!==null&&(ri(l,i,f),Qy(l,r,f)))}function qy(i,r,l){var f=bi();ol(i,r,l,f)}function ol(i,r,l,f){var g={lane:f,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(lu(i))Ky(r,g);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=r.lastRenderedReducer,b!==null))try{var T=r.lastRenderedState,M=b(T,l);if(g.hasEagerState=!0,g.eagerState=M,di(M,T))return Fc(i,r,g,0),Ne===null&&Hc(),!1}catch{}if(l=Ud(i,r,g,f),l!==null)return ri(l,i,f),Qy(l,r,f),!0}return!1}function Sh(i,r,l,f){if(f={lane:2,revertLane:Zh(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},lu(i)){if(r)throw Error(s(479))}else r=Ud(i,l,f,2),r!==null&&ri(r,i,2)}function lu(i){var r=i.alternate;return i===Kt||r!==null&&r===Kt}function Ky(i,r){Fa=eu=!0;var l=i.pending;l===null?r.next=r:(r.next=l.next,l.next=r),i.pending=r}function Qy(i,r,l){if((l&4194048)!==0){var f=r.lanes;f&=i.pendingLanes,l|=f,r.lanes=l,nn(i,l)}}var ll={readContext:Dn,use:su,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useLayoutEffect:sn,useInsertionEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useSyncExternalStore:sn,useId:sn,useHostTransitionStatus:sn,useFormState:sn,useActionState:sn,useOptimistic:sn,useMemoCache:sn,useCacheRefresh:sn};ll.useEffectEvent=sn;var Jy={readContext:Dn,use:su,useCallback:function(i,r){return Kn().memoizedState=[i,r===void 0?null:r],i},useContext:Dn,useEffect:Ly,useImperativeHandle:function(i,r,l){l=l!=null?l.concat([i]):null,au(4194308,4,zy.bind(null,r,i),l)},useLayoutEffect:function(i,r){return au(4194308,4,i,r)},useInsertionEffect:function(i,r){au(4,2,i,r)},useMemo:function(i,r){var l=Kn();r=r===void 0?null:r;var f=i();if(Jr){Ie(!0);try{i()}finally{Ie(!1)}}return l.memoizedState=[f,r],f},useReducer:function(i,r,l){var f=Kn();if(l!==void 0){var g=l(r);if(Jr){Ie(!0);try{l(r)}finally{Ie(!1)}}}else g=r;return f.memoizedState=f.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},f.queue=i,i=i.dispatch=E5.bind(null,Kt,i),[f.memoizedState,i]},useRef:function(i){var r=Kn();return i={current:i},r.memoizedState=i},useState:function(i){i=ph(i);var r=i.queue,l=qy.bind(null,Kt,r);return r.dispatch=l,[i.memoizedState,l]},useDebugValue:yh,useDeferredValue:function(i,r){var l=Kn();return bh(l,i,r)},useTransition:function(){var i=ph(!1);return i=$y.bind(null,Kt,i.queue,!0,!1),Kn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,l){var f=Kt,g=Kn();if(de){if(l===void 0)throw Error(s(407));l=l()}else{if(l=r(),Ne===null)throw Error(s(349));(le&127)!==0||xy(f,r,l)}g.memoizedState=l;var b={value:l,getSnapshot:r};return g.queue=b,Ly(Sy.bind(null,f,b,i),[i]),f.flags|=2048,$a(9,{destroy:void 0},vy.bind(null,f,b,l,r),null),l},useId:function(){var i=Kn(),r=Ne.identifierPrefix;if(de){var l=as,f=rs;l=(f&~(1<<32-fe(f)-1)).toString(32)+l,r="_"+r+"R_"+l,l=nu++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=y5++,r="_"+r+"r_"+l.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:vh,useFormState:My,useActionState:My,useOptimistic:function(i){var r=Kn();r.memoizedState=r.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=Sh.bind(null,Kt,!0,l),l.dispatch=r,[i,r]},useMemoCache:fh,useCacheRefresh:function(){return Kn().memoizedState=w5.bind(null,Kt)},useEffectEvent:function(i){var r=Kn(),l={impl:i};return r.memoizedState=l,function(){if((Se&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},_h={readContext:Dn,use:su,useCallback:Hy,useContext:Dn,useEffect:gh,useImperativeHandle:Py,useInsertionEffect:By,useLayoutEffect:Uy,useMemo:Fy,useReducer:ru,useRef:Iy,useState:function(){return ru(Ts)},useDebugValue:yh,useDeferredValue:function(i,r){var l=pn();return Gy(l,je.memoizedState,i,r)},useTransition:function(){var i=ru(Ts)[0],r=pn().memoizedState;return[typeof i=="boolean"?i:al(i),r]},useSyncExternalStore:by,useId:Yy,useHostTransitionStatus:vh,useFormState:ky,useActionState:ky,useOptimistic:function(i,r){var l=pn();return Ey(l,je,i,r)},useMemoCache:fh,useCacheRefresh:Xy};_h.useEffectEvent=Dy;var Zy={readContext:Dn,use:su,useCallback:Hy,useContext:Dn,useEffect:gh,useImperativeHandle:Py,useInsertionEffect:By,useLayoutEffect:Uy,useMemo:Fy,useReducer:hh,useRef:Iy,useState:function(){return hh(Ts)},useDebugValue:yh,useDeferredValue:function(i,r){var l=pn();return je===null?bh(l,i,r):Gy(l,je.memoizedState,i,r)},useTransition:function(){var i=hh(Ts)[0],r=pn().memoizedState;return[typeof i=="boolean"?i:al(i),r]},useSyncExternalStore:by,useId:Yy,useHostTransitionStatus:vh,useFormState:Ny,useActionState:Ny,useOptimistic:function(i,r){var l=pn();return je!==null?Ey(l,je,i,r):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:fh,useCacheRefresh:Xy};Zy.useEffectEvent=Dy;function wh(i,r,l,f){r=i.memoizedState,l=l(f,r),l=l==null?r:y({},r,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Eh={enqueueSetState:function(i,r,l){i=i._reactInternals;var f=bi(),g=ar(f);g.payload=r,l!=null&&(g.callback=l),r=or(i,g,f),r!==null&&(ri(r,i,f),nl(r,i,f))},enqueueReplaceState:function(i,r,l){i=i._reactInternals;var f=bi(),g=ar(f);g.tag=1,g.payload=r,l!=null&&(g.callback=l),r=or(i,g,f),r!==null&&(ri(r,i,f),nl(r,i,f))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var l=bi(),f=ar(l);f.tag=2,r!=null&&(f.callback=r),r=or(i,f,l),r!==null&&(ri(r,i,l),nl(r,i,l))}};function tb(i,r,l,f,g,b,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,b,T):r.prototype&&r.prototype.isPureReactComponent?!Xo(l,f)||!Xo(g,b):!0}function eb(i,r,l,f){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,f),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,f),r.state!==i&&Eh.enqueueReplaceState(r,r.state,null)}function Zr(i,r){var l=r;if("ref"in r){l={};for(var f in r)f!=="ref"&&(l[f]=r[f])}if(i=i.defaultProps){l===r&&(l=y({},l));for(var g in i)l[g]===void 0&&(l[g]=i[g])}return l}function nb(i){Pc(i)}function ib(i){console.error(i)}function sb(i){Pc(i)}function cu(i,r){try{var l=i.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(f){setTimeout(function(){throw f})}}function rb(i,r,l){try{var f=i.onCaughtError;f(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Ah(i,r,l){return l=ar(l),l.tag=3,l.payload={element:null},l.callback=function(){cu(i,r)},l}function ab(i){return i=ar(i),i.tag=3,i}function ob(i,r,l,f){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var b=f.value;i.payload=function(){return g(b)},i.callback=function(){rb(r,l,f)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){rb(r,l,f),typeof g!="function"&&(hr===null?hr=new Set([this]):hr.add(this));var M=f.stack;this.componentDidCatch(f.value,{componentStack:M!==null?M:""})})}function A5(i,r,l,f,g){if(l.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(r=l.alternate,r!==null&&Da(r,l,g,!0),l=pi.current,l!==null){switch(l.tag){case 31:case 13:return Mi===null?Su():l.alternate===null&&rn===0&&(rn=3),l.flags&=-257,l.flags|=65536,l.lanes=g,f===Kc?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([f]):r.add(f),Kh(i,f,g)),!1;case 22:return l.flags|=65536,f===Kc?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([f])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([f]):l.add(f)),Kh(i,f,g)),!1}throw Error(s(435,l.tag))}return Kh(i,f,g),Su(),!1}if(de)return r=pi.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=g,f!==$d&&(i=Error(s(422),{cause:f}),Qo(Ti(i,l)))):(f!==$d&&(r=Error(s(423),{cause:f}),Qo(Ti(r,l))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,f=Ti(f,l),g=Ah(i.stateNode,f,g),eh(i,g),rn!==4&&(rn=2)),!1;var b=Error(s(520),{cause:f});if(b=Ti(b,l),gl===null?gl=[b]:gl.push(b),rn!==4&&(rn=2),r===null)return!0;f=Ti(f,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,i=g&-g,l.lanes|=i,i=Ah(l.stateNode,f,i),eh(l,i),!1;case 1:if(r=l.type,b=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(hr===null||!hr.has(b))))return l.flags|=65536,g&=-g,l.lanes|=g,g=ab(g),ob(g,i,l,f),eh(l,g),!1}l=l.return}while(l!==null);return!1}var Th=Error(s(461)),vn=!1;function Bn(i,r,l,f){r.child=i===null?fy(r,null,l,f):Qr(r,i.child,l,f)}function lb(i,r,l,f,g){l=l.render;var b=r.ref;if("ref"in f){var T={};for(var M in f)M!=="ref"&&(T[M]=f[M])}else T=f;return Yr(r),f=oh(i,r,l,T,b,g),M=lh(),i!==null&&!vn?(ch(i,r,g),Cs(i,r,g)):(de&&M&&Fd(r),r.flags|=1,Bn(i,r,f,g),r.child)}function cb(i,r,l,f,g){if(i===null){var b=l.type;return typeof b=="function"&&!zd(b)&&b.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=b,ub(i,r,b,f,g)):(i=$c(l.type,null,f,r,r.mode,g),i.ref=r.ref,i.return=r,r.child=i)}if(b=i.child,!Ih(i,g)){var T=b.memoizedProps;if(l=l.compare,l=l!==null?l:Xo,l(T,f)&&i.ref===r.ref)return Cs(i,r,g)}return r.flags|=1,i=Ss(b,f),i.ref=r.ref,i.return=r,r.child=i}function ub(i,r,l,f,g){if(i!==null){var b=i.memoizedProps;if(Xo(b,f)&&i.ref===r.ref)if(vn=!1,r.pendingProps=f=b,Ih(i,g))(i.flags&131072)!==0&&(vn=!0);else return r.lanes=i.lanes,Cs(i,r,g)}return Ch(i,r,l,f,g)}function fb(i,r,l,f){var g=f.children,b=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((r.flags&128)!==0){if(b=b!==null?b.baseLanes|l:l,i!==null){for(f=r.child=i.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;f=g&~b}else f=0,r.child=null;return db(i,r,b,l,f)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&Xc(r,b!==null?b.cachePool:null),b!==null?py(r,b):ih(),my(r);else return f=r.lanes=536870912,db(i,r,b!==null?b.baseLanes|l:l,l,f)}else b!==null?(Xc(r,b.cachePool),py(r,b),cr(),r.memoizedState=null):(i!==null&&Xc(r,null),ih(),cr());return Bn(i,r,g,l),r.child}function cl(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function db(i,r,l,f,g){var b=Qd();return b=b===null?null:{parent:bn._currentValue,pool:b},r.memoizedState={baseLanes:l,cachePool:b},i!==null&&Xc(r,null),ih(),my(r),i!==null&&Da(i,r,f,!0),r.childLanes=g,null}function uu(i,r){return r=du({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function hb(i,r,l){return Qr(r,i.child,null,l),i=uu(r,r.pendingProps),i.flags|=2,mi(r),r.memoizedState=null,i}function T5(i,r,l){var f=r.pendingProps,g=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(de){if(f.mode==="hidden")return i=uu(r,f),r.lanes=536870912,cl(null,i);if(rh(r),(i=He)?(i=Ax(i,ji),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:er!==null?{id:rs,overflow:as}:null,retryLane:536870912,hydrationErrors:null},l=K0(i),l.return=r,r.child=l,Ln=r,He=null)):i=null,i===null)throw ir(r);return r.lanes=536870912,null}return uu(r,f)}var b=i.memoizedState;if(b!==null){var T=b.dehydrated;if(rh(r),g)if(r.flags&256)r.flags&=-257,r=hb(i,r,l);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(vn||Da(i,r,l,!1),g=(l&i.childLanes)!==0,vn||g){if(f=Ne,f!==null&&(T=Ta(f,l),T!==0&&T!==b.retryLane))throw b.retryLane=T,Gr(i,T),ri(f,i,T),Th;Su(),r=hb(i,r,l)}else i=b.treeContext,He=ki(T.nextSibling),Ln=r,de=!0,nr=null,ji=!1,i!==null&&Z0(r,i),r=uu(r,f),r.flags|=4096;return r}return i=Ss(i.child,{mode:f.mode,children:f.children}),i.ref=r.ref,r.child=i,i.return=r,i}function fu(i,r){var l=r.ref;if(l===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(i===null||i.ref!==l)&&(r.flags|=4194816)}}function Ch(i,r,l,f,g){return Yr(r),l=oh(i,r,l,f,void 0,g),f=lh(),i!==null&&!vn?(ch(i,r,g),Cs(i,r,g)):(de&&f&&Fd(r),r.flags|=1,Bn(i,r,l,g),r.child)}function pb(i,r,l,f,g,b){return Yr(r),r.updateQueue=null,l=yy(r,f,l,g),gy(i),f=lh(),i!==null&&!vn?(ch(i,r,b),Cs(i,r,b)):(de&&f&&Fd(r),r.flags|=1,Bn(i,r,l,b),r.child)}function mb(i,r,l,f,g){if(Yr(r),r.stateNode===null){var b=Oa,T=l.contextType;typeof T=="object"&&T!==null&&(b=Dn(T)),b=new l(f,b),r.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Eh,r.stateNode=b,b._reactInternals=r,b=r.stateNode,b.props=f,b.state=r.memoizedState,b.refs={},Zd(r),T=l.contextType,b.context=typeof T=="object"&&T!==null?Dn(T):Oa,b.state=r.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(wh(r,l,T,f),b.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(T=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),T!==b.state&&Eh.enqueueReplaceState(b,b.state,null),sl(r,f,b,g),il(),b.state=r.memoizedState),typeof b.componentDidMount=="function"&&(r.flags|=4194308),f=!0}else if(i===null){b=r.stateNode;var M=r.memoizedProps,P=Zr(l,M);b.props=P;var K=b.context,st=l.contextType;T=Oa,typeof st=="object"&&st!==null&&(T=Dn(st));var ct=l.getDerivedStateFromProps;st=typeof ct=="function"||typeof b.getSnapshotBeforeUpdate=="function",M=r.pendingProps!==M,st||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(M||K!==T)&&eb(r,b,f,T),rr=!1;var Q=r.memoizedState;b.state=Q,sl(r,f,b,g),il(),K=r.memoizedState,M||Q!==K||rr?(typeof ct=="function"&&(wh(r,l,ct,f),K=r.memoizedState),(P=rr||tb(r,l,P,f,Q,K,T))?(st||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(r.flags|=4194308)):(typeof b.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=f,r.memoizedState=K),b.props=f,b.state=K,b.context=T,f=P):(typeof b.componentDidMount=="function"&&(r.flags|=4194308),f=!1)}else{b=r.stateNode,th(i,r),T=r.memoizedProps,st=Zr(l,T),b.props=st,ct=r.pendingProps,Q=b.context,K=l.contextType,P=Oa,typeof K=="object"&&K!==null&&(P=Dn(K)),M=l.getDerivedStateFromProps,(K=typeof M=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(T!==ct||Q!==P)&&eb(r,b,f,P),rr=!1,Q=r.memoizedState,b.state=Q,sl(r,f,b,g),il();var et=r.memoizedState;T!==ct||Q!==et||rr||i!==null&&i.dependencies!==null&&Wc(i.dependencies)?(typeof M=="function"&&(wh(r,l,M,f),et=r.memoizedState),(st=rr||tb(r,l,st,f,Q,et,P)||i!==null&&i.dependencies!==null&&Wc(i.dependencies))?(K||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(f,et,P),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(f,et,P)),typeof b.componentDidUpdate=="function"&&(r.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof b.componentDidUpdate!="function"||T===i.memoizedProps&&Q===i.memoizedState||(r.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&Q===i.memoizedState||(r.flags|=1024),r.memoizedProps=f,r.memoizedState=et),b.props=f,b.state=et,b.context=P,f=st):(typeof b.componentDidUpdate!="function"||T===i.memoizedProps&&Q===i.memoizedState||(r.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&Q===i.memoizedState||(r.flags|=1024),f=!1)}return b=f,fu(i,r),f=(r.flags&128)!==0,b||f?(b=r.stateNode,l=f&&typeof l.getDerivedStateFromError!="function"?null:b.render(),r.flags|=1,i!==null&&f?(r.child=Qr(r,i.child,null,g),r.child=Qr(r,null,l,g)):Bn(i,r,l,g),r.memoizedState=b.state,i=r.child):i=Cs(i,r,g),i}function gb(i,r,l,f){return Vr(),r.flags|=256,Bn(i,r,l,f),r.child}var Rh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function jh(i){return{baseLanes:i,cachePool:ry()}}function Mh(i,r,l){return i=i!==null?i.childLanes&~l:0,r&&(i|=yi),i}function yb(i,r,l){var f=r.pendingProps,g=!1,b=(r.flags&128)!==0,T;if((T=b)||(T=i!==null&&i.memoizedState===null?!1:(hn.current&2)!==0),T&&(g=!0,r.flags&=-129),T=(r.flags&32)!==0,r.flags&=-33,i===null){if(de){if(g?lr(r):cr(),(i=He)?(i=Ax(i,ji),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:er!==null?{id:rs,overflow:as}:null,retryLane:536870912,hydrationErrors:null},l=K0(i),l.return=r,r.child=l,Ln=r,He=null)):i=null,i===null)throw ir(r);return dp(i)?r.lanes=32:r.lanes=536870912,null}var M=f.children;return f=f.fallback,g?(cr(),g=r.mode,M=du({mode:"hidden",children:M},g),f=$r(f,g,l,null),M.return=r,f.return=r,M.sibling=f,r.child=M,f=r.child,f.memoizedState=jh(l),f.childLanes=Mh(i,T,l),r.memoizedState=Rh,cl(null,f)):(lr(r),kh(r,M))}var P=i.memoizedState;if(P!==null&&(M=P.dehydrated,M!==null)){if(b)r.flags&256?(lr(r),r.flags&=-257,r=Oh(i,r,l)):r.memoizedState!==null?(cr(),r.child=i.child,r.flags|=128,r=null):(cr(),M=f.fallback,g=r.mode,f=du({mode:"visible",children:f.children},g),M=$r(M,g,l,null),M.flags|=2,f.return=r,M.return=r,f.sibling=M,r.child=f,Qr(r,i.child,null,l),f=r.child,f.memoizedState=jh(l),f.childLanes=Mh(i,T,l),r.memoizedState=Rh,r=cl(null,f));else if(lr(r),dp(M)){if(T=M.nextSibling&&M.nextSibling.dataset,T)var K=T.dgst;T=K,f=Error(s(419)),f.stack="",f.digest=T,Qo({value:f,source:null,stack:null}),r=Oh(i,r,l)}else if(vn||Da(i,r,l,!1),T=(l&i.childLanes)!==0,vn||T){if(T=Ne,T!==null&&(f=Ta(T,l),f!==0&&f!==P.retryLane))throw P.retryLane=f,Gr(i,f),ri(T,i,f),Th;fp(M)||Su(),r=Oh(i,r,l)}else fp(M)?(r.flags|=192,r.child=i.child,r=null):(i=P.treeContext,He=ki(M.nextSibling),Ln=r,de=!0,nr=null,ji=!1,i!==null&&Z0(r,i),r=kh(r,f.children),r.flags|=4096);return r}return g?(cr(),M=f.fallback,g=r.mode,P=i.child,K=P.sibling,f=Ss(P,{mode:"hidden",children:f.children}),f.subtreeFlags=P.subtreeFlags&65011712,K!==null?M=Ss(K,M):(M=$r(M,g,l,null),M.flags|=2),M.return=r,f.return=r,f.sibling=M,r.child=f,cl(null,f),f=r.child,M=i.child.memoizedState,M===null?M=jh(l):(g=M.cachePool,g!==null?(P=bn._currentValue,g=g.parent!==P?{parent:P,pool:P}:g):g=ry(),M={baseLanes:M.baseLanes|l,cachePool:g}),f.memoizedState=M,f.childLanes=Mh(i,T,l),r.memoizedState=Rh,cl(i.child,f)):(lr(r),l=i.child,i=l.sibling,l=Ss(l,{mode:"visible",children:f.children}),l.return=r,l.sibling=null,i!==null&&(T=r.deletions,T===null?(r.deletions=[i],r.flags|=16):T.push(i)),r.child=l,r.memoizedState=null,l)}function kh(i,r){return r=du({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function du(i,r){return i=hi(22,i,null,r),i.lanes=0,i}function Oh(i,r,l){return Qr(r,i.child,null,l),i=kh(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function bb(i,r,l){i.lanes|=r;var f=i.alternate;f!==null&&(f.lanes|=r),Yd(i.return,r,l)}function Nh(i,r,l,f,g,b){var T=i.memoizedState;T===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:g,treeForkCount:b}:(T.isBackwards=r,T.rendering=null,T.renderingStartTime=0,T.last=f,T.tail=l,T.tailMode=g,T.treeForkCount=b)}function xb(i,r,l){var f=r.pendingProps,g=f.revealOrder,b=f.tail;f=f.children;var T=hn.current,M=(T&2)!==0;if(M?(T=T&1|2,r.flags|=128):T&=1,at(hn,T),Bn(i,r,f,l),f=de?Ko:0,!M&&i!==null&&(i.flags&128)!==0)t:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&bb(i,l,r);else if(i.tag===19)bb(i,l,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break t;for(;i.sibling===null;){if(i.return===null||i.return===r)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(l=r.child,g=null;l!==null;)i=l.alternate,i!==null&&tu(i)===null&&(g=l),l=l.sibling;l=g,l===null?(g=r.child,r.child=null):(g=l.sibling,l.sibling=null),Nh(r,!1,g,l,b,f);break;case"backwards":case"unstable_legacy-backwards":for(l=null,g=r.child,r.child=null;g!==null;){if(i=g.alternate,i!==null&&tu(i)===null){r.child=g;break}i=g.sibling,g.sibling=l,l=g,g=i}Nh(r,!0,l,null,b,f);break;case"together":Nh(r,!1,null,null,void 0,f);break;default:r.memoizedState=null}return r.child}function Cs(i,r,l){if(i!==null&&(r.dependencies=i.dependencies),dr|=r.lanes,(l&r.childLanes)===0)if(i!==null){if(Da(i,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,l=Ss(i,i.pendingProps),r.child=l,l.return=r;i.sibling!==null;)i=i.sibling,l=l.sibling=Ss(i,i.pendingProps),l.return=r;l.sibling=null}return r.child}function Ih(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&Wc(i)))}function C5(i,r,l){switch(r.tag){case 3:yt(r,r.stateNode.containerInfo),sr(r,bn,i.memoizedState.cache),Vr();break;case 27:case 5:Et(r);break;case 4:yt(r,r.stateNode.containerInfo);break;case 10:sr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,rh(r),null;break;case 13:var f=r.memoizedState;if(f!==null)return f.dehydrated!==null?(lr(r),r.flags|=128,null):(l&r.child.childLanes)!==0?yb(i,r,l):(lr(r),i=Cs(i,r,l),i!==null?i.sibling:null);lr(r);break;case 19:var g=(i.flags&128)!==0;if(f=(l&r.childLanes)!==0,f||(Da(i,r,l,!1),f=(l&r.childLanes)!==0),g){if(f)return xb(i,r,l);r.flags|=128}if(g=r.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),at(hn,hn.current),f)break;return null;case 22:return r.lanes=0,fb(i,r,l,r.pendingProps);case 24:sr(r,bn,i.memoizedState.cache)}return Cs(i,r,l)}function vb(i,r,l){if(i!==null)if(i.memoizedProps!==r.pendingProps)vn=!0;else{if(!Ih(i,l)&&(r.flags&128)===0)return vn=!1,C5(i,r,l);vn=(i.flags&131072)!==0}else vn=!1,de&&(r.flags&1048576)!==0&&J0(r,Ko,r.index);switch(r.lanes=0,r.tag){case 16:t:{var f=r.pendingProps;if(i=qr(r.elementType),r.type=i,typeof i=="function")zd(i)?(f=Zr(i,f),r.tag=1,r=mb(null,r,i,f,l)):(r.tag=0,r=Ch(null,r,i,f,l));else{if(i!=null){var g=i.$$typeof;if(g===j){r.tag=11,r=lb(null,r,i,f,l);break t}else if(g===N){r.tag=14,r=cb(null,r,i,f,l);break t}}throw r=V(i)||i,Error(s(306,r,""))}}return r;case 0:return Ch(i,r,r.type,r.pendingProps,l);case 1:return f=r.type,g=Zr(f,r.pendingProps),mb(i,r,f,g,l);case 3:t:{if(yt(r,r.stateNode.containerInfo),i===null)throw Error(s(387));f=r.pendingProps;var b=r.memoizedState;g=b.element,th(i,r),sl(r,f,null,l);var T=r.memoizedState;if(f=T.cache,sr(r,bn,f),f!==b.cache&&Xd(r,[bn],l,!0),il(),f=T.element,b.isDehydrated)if(b={element:f,isDehydrated:!1,cache:T.cache},r.updateQueue.baseState=b,r.memoizedState=b,r.flags&256){r=gb(i,r,f,l);break t}else if(f!==g){g=Ti(Error(s(424)),r),Qo(g),r=gb(i,r,f,l);break t}else for(i=r.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,He=ki(i.firstChild),Ln=r,de=!0,nr=null,ji=!0,l=fy(r,null,f,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Vr(),f===g){r=Cs(i,r,l);break t}Bn(i,r,f,l)}r=r.child}return r;case 26:return fu(i,r),i===null?(l=kx(r.type,null,r.pendingProps,null))?r.memoizedState=l:de||(l=r.type,i=r.pendingProps,f=Ru(xt.current).createElement(l),f[yn]=r,f[un]=i,Un(f,l,i),fn(f),r.stateNode=f):r.memoizedState=kx(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return Et(r),i===null&&de&&(f=r.stateNode=Rx(r.type,r.pendingProps,xt.current),Ln=r,ji=!0,g=He,yr(r.type)?(hp=g,He=ki(f.firstChild)):He=g),Bn(i,r,r.pendingProps.children,l),fu(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&de&&((g=f=He)&&(f=iT(f,r.type,r.pendingProps,ji),f!==null?(r.stateNode=f,Ln=r,He=ki(f.firstChild),ji=!1,g=!0):g=!1),g||ir(r)),Et(r),g=r.type,b=r.pendingProps,T=i!==null?i.memoizedProps:null,f=b.children,lp(g,b)?f=null:T!==null&&lp(g,T)&&(r.flags|=32),r.memoizedState!==null&&(g=oh(i,r,b5,null,null,l),El._currentValue=g),fu(i,r),Bn(i,r,f,l),r.child;case 6:return i===null&&de&&((i=l=He)&&(l=sT(l,r.pendingProps,ji),l!==null?(r.stateNode=l,Ln=r,He=null,i=!0):i=!1),i||ir(r)),null;case 13:return yb(i,r,l);case 4:return yt(r,r.stateNode.containerInfo),f=r.pendingProps,i===null?r.child=Qr(r,null,f,l):Bn(i,r,f,l),r.child;case 11:return lb(i,r,r.type,r.pendingProps,l);case 7:return Bn(i,r,r.pendingProps,l),r.child;case 8:return Bn(i,r,r.pendingProps.children,l),r.child;case 12:return Bn(i,r,r.pendingProps.children,l),r.child;case 10:return f=r.pendingProps,sr(r,r.type,f.value),Bn(i,r,f.children,l),r.child;case 9:return g=r.type._context,f=r.pendingProps.children,Yr(r),g=Dn(g),f=f(g),r.flags|=1,Bn(i,r,f,l),r.child;case 14:return cb(i,r,r.type,r.pendingProps,l);case 15:return ub(i,r,r.type,r.pendingProps,l);case 19:return xb(i,r,l);case 31:return T5(i,r,l);case 22:return fb(i,r,l,r.pendingProps);case 24:return Yr(r),f=Dn(bn),i===null?(g=Qd(),g===null&&(g=Ne,b=qd(),g.pooledCache=b,b.refCount++,b!==null&&(g.pooledCacheLanes|=l),g=b),r.memoizedState={parent:f,cache:g},Zd(r),sr(r,bn,g)):((i.lanes&l)!==0&&(th(i,r),sl(r,null,null,l),il()),g=i.memoizedState,b=r.memoizedState,g.parent!==f?(g={parent:f,cache:f},r.memoizedState=g,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=g),sr(r,bn,f)):(f=b.cache,sr(r,bn,f),f!==g.cache&&Xd(r,[bn],l,!0))),Bn(i,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Rs(i){i.flags|=4}function Lh(i,r,l,f,g){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(Yb())i.flags|=8192;else throw Kr=Kc,Jd}else i.flags&=-16777217}function Sb(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Dx(r))if(Yb())i.flags|=8192;else throw Kr=Kc,Jd}function hu(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Dr():536870912,i.lanes|=r,Xa|=r)}function ul(i,r){if(!de)switch(i.tailMode){case"hidden":r=i.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function Fe(i){var r=i.alternate!==null&&i.alternate.child===i.child,l=0,f=0;if(r)for(var g=i.child;g!==null;)l|=g.lanes|g.childLanes,f|=g.subtreeFlags&65011712,f|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)l|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=f,i.childLanes=l,r}function R5(i,r,l){var f=r.pendingProps;switch(Gd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fe(r),null;case 1:return Fe(r),null;case 3:return l=r.stateNode,f=null,i!==null&&(f=i.memoizedState.cache),r.memoizedState.cache!==f&&(r.flags|=2048),Es(bn),Mt(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(La(r)?Rs(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Vd())),Fe(r),null;case 26:var g=r.type,b=r.memoizedState;return i===null?(Rs(r),b!==null?(Fe(r),Sb(r,b)):(Fe(r),Lh(r,g,null,f,l))):b?b!==i.memoizedState?(Rs(r),Fe(r),Sb(r,b)):(Fe(r),r.flags&=-16777217):(i=i.memoizedProps,i!==f&&Rs(r),Fe(r),Lh(r,g,i,f,l)),null;case 27:if(Tt(r),l=xt.current,g=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==f&&Rs(r);else{if(!f){if(r.stateNode===null)throw Error(s(166));return Fe(r),null}i=lt.current,La(r)?ty(r):(i=Rx(g,f,l),r.stateNode=i,Rs(r))}return Fe(r),null;case 5:if(Tt(r),g=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==f&&Rs(r);else{if(!f){if(r.stateNode===null)throw Error(s(166));return Fe(r),null}if(b=lt.current,La(r))ty(r);else{var T=Ru(xt.current);switch(b){case 1:b=T.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:b=T.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":b=T.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":b=T.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":b=T.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof f.is=="string"?T.createElement("select",{is:f.is}):T.createElement("select"),f.multiple?b.multiple=!0:f.size&&(b.size=f.size);break;default:b=typeof f.is=="string"?T.createElement(g,{is:f.is}):T.createElement(g)}}b[yn]=r,b[un]=f;t:for(T=r.child;T!==null;){if(T.tag===5||T.tag===6)b.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===r)break t;for(;T.sibling===null;){if(T.return===null||T.return===r)break t;T=T.return}T.sibling.return=T.return,T=T.sibling}r.stateNode=b;t:switch(Un(b,g,f),g){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break t;case"img":f=!0;break t;default:f=!1}f&&Rs(r)}}return Fe(r),Lh(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,l),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==f&&Rs(r);else{if(typeof f!="string"&&r.stateNode===null)throw Error(s(166));if(i=xt.current,La(r)){if(i=r.stateNode,l=r.memoizedProps,f=null,g=Ln,g!==null)switch(g.tag){case 27:case 5:f=g.memoizedProps}i[yn]=r,i=!!(i.nodeValue===l||f!==null&&f.suppressHydrationWarning===!0||yx(i.nodeValue,l)),i||ir(r,!0)}else i=Ru(i).createTextNode(f),i[yn]=r,r.stateNode=i}return Fe(r),null;case 31:if(l=r.memoizedState,i===null||i.memoizedState!==null){if(f=La(r),l!==null){if(i===null){if(!f)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[yn]=r}else Vr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Fe(r),i=!1}else l=Vd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return r.flags&256?(mi(r),r):(mi(r),null);if((r.flags&128)!==0)throw Error(s(558))}return Fe(r),null;case 13:if(f=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=La(r),f!==null&&f.dehydrated!==null){if(i===null){if(!g)throw Error(s(318));if(g=r.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[yn]=r}else Vr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Fe(r),g=!1}else g=Vd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return r.flags&256?(mi(r),r):(mi(r),null)}return mi(r),(r.flags&128)!==0?(r.lanes=l,r):(l=f!==null,i=i!==null&&i.memoizedState!==null,l&&(f=r.child,g=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(g=f.alternate.memoizedState.cachePool.pool),b=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),b!==g&&(f.flags|=2048)),l!==i&&l&&(r.child.flags|=8192),hu(r,r.updateQueue),Fe(r),null);case 4:return Mt(),i===null&&ip(r.stateNode.containerInfo),Fe(r),null;case 10:return Es(r.type),Fe(r),null;case 19:if(Y(hn),f=r.memoizedState,f===null)return Fe(r),null;if(g=(r.flags&128)!==0,b=f.rendering,b===null)if(g)ul(f,!1);else{if(rn!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(b=tu(i),b!==null){for(r.flags|=128,ul(f,!1),i=b.updateQueue,r.updateQueue=i,hu(r,i),r.subtreeFlags=0,i=l,l=r.child;l!==null;)q0(l,i),l=l.sibling;return at(hn,hn.current&1|2),de&&_s(r,f.treeForkCount),r.child}i=i.sibling}f.tail!==null&&Ye()>bu&&(r.flags|=128,g=!0,ul(f,!1),r.lanes=4194304)}else{if(!g)if(i=tu(b),i!==null){if(r.flags|=128,g=!0,i=i.updateQueue,r.updateQueue=i,hu(r,i),ul(f,!0),f.tail===null&&f.tailMode==="hidden"&&!b.alternate&&!de)return Fe(r),null}else 2*Ye()-f.renderingStartTime>bu&&l!==536870912&&(r.flags|=128,g=!0,ul(f,!1),r.lanes=4194304);f.isBackwards?(b.sibling=r.child,r.child=b):(i=f.last,i!==null?i.sibling=b:r.child=b,f.last=b)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Ye(),i.sibling=null,l=hn.current,at(hn,g?l&1|2:l&1),de&&_s(r,f.treeForkCount),i):(Fe(r),null);case 22:case 23:return mi(r),sh(),f=r.memoizedState!==null,i!==null?i.memoizedState!==null!==f&&(r.flags|=8192):f&&(r.flags|=8192),f?(l&536870912)!==0&&(r.flags&128)===0&&(Fe(r),r.subtreeFlags&6&&(r.flags|=8192)):Fe(r),l=r.updateQueue,l!==null&&hu(r,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),f=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),f!==l&&(r.flags|=2048),i!==null&&Y(Xr),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Es(bn),Fe(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function j5(i,r){switch(Gd(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return Es(bn),Mt(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return Tt(r),null;case 31:if(r.memoizedState!==null){if(mi(r),r.alternate===null)throw Error(s(340));Vr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(mi(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Vr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return Y(hn),null;case 4:return Mt(),null;case 10:return Es(r.type),null;case 22:case 23:return mi(r),sh(),i!==null&&Y(Xr),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return Es(bn),null;case 25:return null;default:return null}}function _b(i,r){switch(Gd(r),r.tag){case 3:Es(bn),Mt();break;case 26:case 27:case 5:Tt(r);break;case 4:Mt();break;case 31:r.memoizedState!==null&&mi(r);break;case 13:mi(r);break;case 19:Y(hn);break;case 10:Es(r.type);break;case 22:case 23:mi(r),sh(),i!==null&&Y(Xr);break;case 24:Es(bn)}}function fl(i,r){try{var l=r.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var g=f.next;l=g;do{if((l.tag&i)===i){f=void 0;var b=l.create,T=l.inst;f=b(),T.destroy=f}l=l.next}while(l!==g)}}catch(M){Re(r,r.return,M)}}function ur(i,r,l){try{var f=r.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var b=g.next;f=b;do{if((f.tag&i)===i){var T=f.inst,M=T.destroy;if(M!==void 0){T.destroy=void 0,g=r;var P=l,K=M;try{K()}catch(st){Re(g,P,st)}}}f=f.next}while(f!==b)}}catch(st){Re(r,r.return,st)}}function wb(i){var r=i.updateQueue;if(r!==null){var l=i.stateNode;try{hy(r,l)}catch(f){Re(i,i.return,f)}}}function Eb(i,r,l){l.props=Zr(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(f){Re(i,r,f)}}function dl(i,r){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var f=i.stateNode;break;case 30:f=i.stateNode;break;default:f=i.stateNode}typeof l=="function"?i.refCleanup=l(f):l.current=f}}catch(g){Re(i,r,g)}}function os(i,r){var l=i.ref,f=i.refCleanup;if(l!==null)if(typeof f=="function")try{f()}catch(g){Re(i,r,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){Re(i,r,g)}else l.current=null}function Ab(i){var r=i.type,l=i.memoizedProps,f=i.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&f.focus();break t;case"img":l.src?f.src=l.src:l.srcSet&&(f.srcset=l.srcSet)}}catch(g){Re(i,i.return,g)}}function Dh(i,r,l){try{var f=i.stateNode;Q5(f,i.type,l,r),f[un]=r}catch(g){Re(i,i.return,g)}}function Tb(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&yr(i.type)||i.tag===4}function Bh(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||Tb(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&yr(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Uh(i,r,l){var f=i.tag;if(f===5||f===6)i=i.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(i),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=In));else if(f!==4&&(f===27&&yr(i.type)&&(l=i.stateNode,r=null),i=i.child,i!==null))for(Uh(i,r,l),i=i.sibling;i!==null;)Uh(i,r,l),i=i.sibling}function pu(i,r,l){var f=i.tag;if(f===5||f===6)i=i.stateNode,r?l.insertBefore(i,r):l.appendChild(i);else if(f!==4&&(f===27&&yr(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(pu(i,r,l),i=i.sibling;i!==null;)pu(i,r,l),i=i.sibling}function Cb(i){var r=i.stateNode,l=i.memoizedProps;try{for(var f=i.type,g=r.attributes;g.length;)r.removeAttributeNode(g[0]);Un(r,f,l),r[yn]=i,r[un]=l}catch(b){Re(i,i.return,b)}}var js=!1,Sn=!1,zh=!1,Rb=typeof WeakSet=="function"?WeakSet:Set,Mn=null;function M5(i,r){if(i=i.containerInfo,ap=Lu,i=P0(i),Od(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else t:{l=(l=i.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var g=f.anchorOffset,b=f.focusNode;f=f.focusOffset;try{l.nodeType,b.nodeType}catch{l=null;break t}var T=0,M=-1,P=-1,K=0,st=0,ct=i,Q=null;e:for(;;){for(var et;ct!==l||g!==0&&ct.nodeType!==3||(M=T+g),ct!==b||f!==0&&ct.nodeType!==3||(P=T+f),ct.nodeType===3&&(T+=ct.nodeValue.length),(et=ct.firstChild)!==null;)Q=ct,ct=et;for(;;){if(ct===i)break e;if(Q===l&&++K===g&&(M=T),Q===b&&++st===f&&(P=T),(et=ct.nextSibling)!==null)break;ct=Q,Q=ct.parentNode}ct=et}l=M===-1||P===-1?null:{start:M,end:P}}else l=null}l=l||{start:0,end:0}}else l=null;for(op={focusedElem:i,selectionRange:l},Lu=!1,Mn=r;Mn!==null;)if(r=Mn,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,Mn=i;else for(;Mn!==null;){switch(r=Mn,b=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)g=i[l],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&b!==null){i=void 0,l=r,g=b.memoizedProps,b=b.memoizedState,f=l.stateNode;try{var Ot=Zr(l.type,g);i=f.getSnapshotBeforeUpdate(Ot,b),f.__reactInternalSnapshotBeforeUpdate=i}catch($t){Re(l,l.return,$t)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,l=i.nodeType,l===9)up(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":up(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,Mn=i;break}Mn=r.return}}function jb(i,r,l){var f=l.flags;switch(l.tag){case 0:case 11:case 15:ks(i,l),f&4&&fl(5,l);break;case 1:if(ks(i,l),f&4)if(i=l.stateNode,r===null)try{i.componentDidMount()}catch(T){Re(l,l.return,T)}else{var g=Zr(l.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(g,r,i.__reactInternalSnapshotBeforeUpdate)}catch(T){Re(l,l.return,T)}}f&64&&wb(l),f&512&&dl(l,l.return);break;case 3:if(ks(i,l),f&64&&(i=l.updateQueue,i!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{hy(i,r)}catch(T){Re(l,l.return,T)}}break;case 27:r===null&&f&4&&Cb(l);case 26:case 5:ks(i,l),r===null&&f&4&&Ab(l),f&512&&dl(l,l.return);break;case 12:ks(i,l);break;case 31:ks(i,l),f&4&&Ob(i,l);break;case 13:ks(i,l),f&4&&Nb(i,l),f&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=z5.bind(null,l),rT(i,l))));break;case 22:if(f=l.memoizedState!==null||js,!f){r=r!==null&&r.memoizedState!==null||Sn,g=js;var b=Sn;js=f,(Sn=r)&&!b?Os(i,l,(l.subtreeFlags&8772)!==0):ks(i,l),js=g,Sn=b}break;case 30:break;default:ks(i,l)}}function Mb(i){var r=i.alternate;r!==null&&(i.alternate=null,Mb(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&Ca(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Ke=null,ei=!1;function Ms(i,r,l){for(l=l.child;l!==null;)kb(i,r,l),l=l.sibling}function kb(i,r,l){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(Zt,l)}catch{}switch(l.tag){case 26:Sn||os(l,r),Ms(i,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Sn||os(l,r);var f=Ke,g=ei;yr(l.type)&&(Ke=l.stateNode,ei=!1),Ms(i,r,l),Sl(l.stateNode),Ke=f,ei=g;break;case 5:Sn||os(l,r);case 6:if(f=Ke,g=ei,Ke=null,Ms(i,r,l),Ke=f,ei=g,Ke!==null)if(ei)try{(Ke.nodeType===9?Ke.body:Ke.nodeName==="HTML"?Ke.ownerDocument.body:Ke).removeChild(l.stateNode)}catch(b){Re(l,r,b)}else try{Ke.removeChild(l.stateNode)}catch(b){Re(l,r,b)}break;case 18:Ke!==null&&(ei?(i=Ke,wx(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),no(i)):wx(Ke,l.stateNode));break;case 4:f=Ke,g=ei,Ke=l.stateNode.containerInfo,ei=!0,Ms(i,r,l),Ke=f,ei=g;break;case 0:case 11:case 14:case 15:ur(2,l,r),Sn||ur(4,l,r),Ms(i,r,l);break;case 1:Sn||(os(l,r),f=l.stateNode,typeof f.componentWillUnmount=="function"&&Eb(l,r,f)),Ms(i,r,l);break;case 21:Ms(i,r,l);break;case 22:Sn=(f=Sn)||l.memoizedState!==null,Ms(i,r,l),Sn=f;break;default:Ms(i,r,l)}}function Ob(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{no(i)}catch(l){Re(r,r.return,l)}}}function Nb(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{no(i)}catch(l){Re(r,r.return,l)}}function k5(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new Rb),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new Rb),r;default:throw Error(s(435,i.tag))}}function mu(i,r){var l=k5(i);r.forEach(function(f){if(!l.has(f)){l.add(f);var g=P5.bind(null,i,f);f.then(g,g)}})}function ni(i,r){var l=r.deletions;if(l!==null)for(var f=0;f<l.length;f++){var g=l[f],b=i,T=r,M=T;t:for(;M!==null;){switch(M.tag){case 27:if(yr(M.type)){Ke=M.stateNode,ei=!1;break t}break;case 5:Ke=M.stateNode,ei=!1;break t;case 3:case 4:Ke=M.stateNode.containerInfo,ei=!0;break t}M=M.return}if(Ke===null)throw Error(s(160));kb(b,T,g),Ke=null,ei=!1,b=g.alternate,b!==null&&(b.return=null),g.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Ib(r,i),r=r.sibling}var zi=null;function Ib(i,r){var l=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:ni(r,i),ii(i),f&4&&(ur(3,i,i.return),fl(3,i),ur(5,i,i.return));break;case 1:ni(r,i),ii(i),f&512&&(Sn||l===null||os(l,l.return)),f&64&&js&&(i=i.updateQueue,i!==null&&(f=i.callbacks,f!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?f:l.concat(f))));break;case 26:var g=zi;if(ni(r,i),ii(i),f&512&&(Sn||l===null||os(l,l.return)),f&4){var b=l!==null?l.memoizedState:null;if(f=i.memoizedState,l===null)if(f===null)if(i.stateNode===null){t:{f=i.type,l=i.memoizedProps,g=g.ownerDocument||g;e:switch(f){case"title":b=g.getElementsByTagName("title")[0],(!b||b[Js]||b[yn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=g.createElement(f),g.head.insertBefore(b,g.querySelector("head > title"))),Un(b,f,l),b[yn]=i,fn(b),f=b;break t;case"link":var T=Ix("link","href",g).get(f+(l.href||""));if(T){for(var M=0;M<T.length;M++)if(b=T[M],b.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&b.getAttribute("rel")===(l.rel==null?null:l.rel)&&b.getAttribute("title")===(l.title==null?null:l.title)&&b.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(M,1);break e}}b=g.createElement(f),Un(b,f,l),g.head.appendChild(b);break;case"meta":if(T=Ix("meta","content",g).get(f+(l.content||""))){for(M=0;M<T.length;M++)if(b=T[M],b.getAttribute("content")===(l.content==null?null:""+l.content)&&b.getAttribute("name")===(l.name==null?null:l.name)&&b.getAttribute("property")===(l.property==null?null:l.property)&&b.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&b.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(M,1);break e}}b=g.createElement(f),Un(b,f,l),g.head.appendChild(b);break;default:throw Error(s(468,f))}b[yn]=i,fn(b),f=b}i.stateNode=f}else Lx(g,i.type,i.stateNode);else i.stateNode=Nx(g,f,i.memoizedProps);else b!==f?(b===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):b.count--,f===null?Lx(g,i.type,i.stateNode):Nx(g,f,i.memoizedProps)):f===null&&i.stateNode!==null&&Dh(i,i.memoizedProps,l.memoizedProps)}break;case 27:ni(r,i),ii(i),f&512&&(Sn||l===null||os(l,l.return)),l!==null&&f&4&&Dh(i,i.memoizedProps,l.memoizedProps);break;case 5:if(ni(r,i),ii(i),f&512&&(Sn||l===null||os(l,l.return)),i.flags&32){g=i.stateNode;try{me(g,"")}catch(Ot){Re(i,i.return,Ot)}}f&4&&i.stateNode!=null&&(g=i.memoizedProps,Dh(i,g,l!==null?l.memoizedProps:g)),f&1024&&(zh=!0);break;case 6:if(ni(r,i),ii(i),f&4){if(i.stateNode===null)throw Error(s(162));f=i.memoizedProps,l=i.stateNode;try{l.nodeValue=f}catch(Ot){Re(i,i.return,Ot)}}break;case 3:if(ku=null,g=zi,zi=ju(r.containerInfo),ni(r,i),zi=g,ii(i),f&4&&l!==null&&l.memoizedState.isDehydrated)try{no(r.containerInfo)}catch(Ot){Re(i,i.return,Ot)}zh&&(zh=!1,Lb(i));break;case 4:f=zi,zi=ju(i.stateNode.containerInfo),ni(r,i),ii(i),zi=f;break;case 12:ni(r,i),ii(i);break;case 31:ni(r,i),ii(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,mu(i,f)));break;case 13:ni(r,i),ii(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(yu=Ye()),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,mu(i,f)));break;case 22:g=i.memoizedState!==null;var P=l!==null&&l.memoizedState!==null,K=js,st=Sn;if(js=K||g,Sn=st||P,ni(r,i),Sn=st,js=K,ii(i),f&8192)t:for(r=i.stateNode,r._visibility=g?r._visibility&-2:r._visibility|1,g&&(l===null||P||js||Sn||ta(i)),l=null,r=i;;){if(r.tag===5||r.tag===26){if(l===null){P=l=r;try{if(b=P.stateNode,g)T=b.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{M=P.stateNode;var ct=P.memoizedProps.style,Q=ct!=null&&ct.hasOwnProperty("display")?ct.display:null;M.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(Ot){Re(P,P.return,Ot)}}}else if(r.tag===6){if(l===null){P=r;try{P.stateNode.nodeValue=g?"":P.memoizedProps}catch(Ot){Re(P,P.return,Ot)}}}else if(r.tag===18){if(l===null){P=r;try{var et=P.stateNode;g?Ex(et,!0):Ex(P.stateNode,!1)}catch(Ot){Re(P,P.return,Ot)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break t;for(;r.sibling===null;){if(r.return===null||r.return===i)break t;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}f&4&&(f=i.updateQueue,f!==null&&(l=f.retryQueue,l!==null&&(f.retryQueue=null,mu(i,l))));break;case 19:ni(r,i),ii(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,mu(i,f)));break;case 30:break;case 21:break;default:ni(r,i),ii(i)}}function ii(i){var r=i.flags;if(r&2){try{for(var l,f=i.return;f!==null;){if(Tb(f)){l=f;break}f=f.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var g=l.stateNode,b=Bh(i);pu(i,b,g);break;case 5:var T=l.stateNode;l.flags&32&&(me(T,""),l.flags&=-33);var M=Bh(i);pu(i,M,T);break;case 3:case 4:var P=l.stateNode.containerInfo,K=Bh(i);Uh(i,K,P);break;default:throw Error(s(161))}}catch(st){Re(i,i.return,st)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function Lb(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;Lb(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function ks(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)jb(i,r.alternate,r),r=r.sibling}function ta(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:ur(4,r,r.return),ta(r);break;case 1:os(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&Eb(r,r.return,l),ta(r);break;case 27:Sl(r.stateNode);case 26:case 5:os(r,r.return),ta(r);break;case 22:r.memoizedState===null&&ta(r);break;case 30:ta(r);break;default:ta(r)}i=i.sibling}}function Os(i,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var f=r.alternate,g=i,b=r,T=b.flags;switch(b.tag){case 0:case 11:case 15:Os(g,b,l),fl(4,b);break;case 1:if(Os(g,b,l),f=b,g=f.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(K){Re(f,f.return,K)}if(f=b,g=f.updateQueue,g!==null){var M=f.stateNode;try{var P=g.shared.hiddenCallbacks;if(P!==null)for(g.shared.hiddenCallbacks=null,g=0;g<P.length;g++)dy(P[g],M)}catch(K){Re(f,f.return,K)}}l&&T&64&&wb(b),dl(b,b.return);break;case 27:Cb(b);case 26:case 5:Os(g,b,l),l&&f===null&&T&4&&Ab(b),dl(b,b.return);break;case 12:Os(g,b,l);break;case 31:Os(g,b,l),l&&T&4&&Ob(g,b);break;case 13:Os(g,b,l),l&&T&4&&Nb(g,b);break;case 22:b.memoizedState===null&&Os(g,b,l),dl(b,b.return);break;case 30:break;default:Os(g,b,l)}r=r.sibling}}function Ph(i,r){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&Jo(l))}function Hh(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Jo(i))}function Pi(i,r,l,f){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Db(i,r,l,f),r=r.sibling}function Db(i,r,l,f){var g=r.flags;switch(r.tag){case 0:case 11:case 15:Pi(i,r,l,f),g&2048&&fl(9,r);break;case 1:Pi(i,r,l,f);break;case 3:Pi(i,r,l,f),g&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Jo(i)));break;case 12:if(g&2048){Pi(i,r,l,f),i=r.stateNode;try{var b=r.memoizedProps,T=b.id,M=b.onPostCommit;typeof M=="function"&&M(T,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(P){Re(r,r.return,P)}}else Pi(i,r,l,f);break;case 31:Pi(i,r,l,f);break;case 13:Pi(i,r,l,f);break;case 23:break;case 22:b=r.stateNode,T=r.alternate,r.memoizedState!==null?b._visibility&2?Pi(i,r,l,f):hl(i,r):b._visibility&2?Pi(i,r,l,f):(b._visibility|=2,Va(i,r,l,f,(r.subtreeFlags&10256)!==0||!1)),g&2048&&Ph(T,r);break;case 24:Pi(i,r,l,f),g&2048&&Hh(r.alternate,r);break;default:Pi(i,r,l,f)}}function Va(i,r,l,f,g){for(g=g&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var b=i,T=r,M=l,P=f,K=T.flags;switch(T.tag){case 0:case 11:case 15:Va(b,T,M,P,g),fl(8,T);break;case 23:break;case 22:var st=T.stateNode;T.memoizedState!==null?st._visibility&2?Va(b,T,M,P,g):hl(b,T):(st._visibility|=2,Va(b,T,M,P,g)),g&&K&2048&&Ph(T.alternate,T);break;case 24:Va(b,T,M,P,g),g&&K&2048&&Hh(T.alternate,T);break;default:Va(b,T,M,P,g)}r=r.sibling}}function hl(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=i,f=r,g=f.flags;switch(f.tag){case 22:hl(l,f),g&2048&&Ph(f.alternate,f);break;case 24:hl(l,f),g&2048&&Hh(f.alternate,f);break;default:hl(l,f)}r=r.sibling}}var pl=8192;function Wa(i,r,l){if(i.subtreeFlags&pl)for(i=i.child;i!==null;)Bb(i,r,l),i=i.sibling}function Bb(i,r,l){switch(i.tag){case 26:Wa(i,r,l),i.flags&pl&&i.memoizedState!==null&&yT(l,zi,i.memoizedState,i.memoizedProps);break;case 5:Wa(i,r,l);break;case 3:case 4:var f=zi;zi=ju(i.stateNode.containerInfo),Wa(i,r,l),zi=f;break;case 22:i.memoizedState===null&&(f=i.alternate,f!==null&&f.memoizedState!==null?(f=pl,pl=16777216,Wa(i,r,l),pl=f):Wa(i,r,l));break;default:Wa(i,r,l)}}function Ub(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function ml(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var f=r[l];Mn=f,Pb(f,i)}Ub(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)zb(i),i=i.sibling}function zb(i){switch(i.tag){case 0:case 11:case 15:ml(i),i.flags&2048&&ur(9,i,i.return);break;case 3:ml(i);break;case 12:ml(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,gu(i)):ml(i);break;default:ml(i)}}function gu(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var f=r[l];Mn=f,Pb(f,i)}Ub(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:ur(8,r,r.return),gu(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,gu(r));break;default:gu(r)}i=i.sibling}}function Pb(i,r){for(;Mn!==null;){var l=Mn;switch(l.tag){case 0:case 11:case 15:ur(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var f=l.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:Jo(l.memoizedState.cache)}if(f=l.child,f!==null)f.return=l,Mn=f;else t:for(l=i;Mn!==null;){f=Mn;var g=f.sibling,b=f.return;if(Mb(f),f===l){Mn=null;break t}if(g!==null){g.return=b,Mn=g;break t}Mn=b}}}var O5={getCacheForType:function(i){var r=Dn(bn),l=r.data.get(i);return l===void 0&&(l=i(),r.data.set(i,l)),l},cacheSignal:function(){return Dn(bn).controller.signal}},N5=typeof WeakMap=="function"?WeakMap:Map,Se=0,Ne=null,se=null,le=0,Ce=0,gi=null,fr=!1,Ya=!1,Fh=!1,Ns=0,rn=0,dr=0,ea=0,Gh=0,yi=0,Xa=0,gl=null,si=null,$h=!1,yu=0,Hb=0,bu=1/0,xu=null,hr=null,Tn=0,pr=null,qa=null,Is=0,Vh=0,Wh=null,Fb=null,yl=0,Yh=null;function bi(){return(Se&2)!==0&&le!==0?le&-le:O.T!==null?Zh():Mc()}function Gb(){if(yi===0)if((le&536870912)===0||de){var i=It;It<<=1,(It&3932160)===0&&(It=262144),yi=i}else yi=536870912;return i=pi.current,i!==null&&(i.flags|=32),yi}function ri(i,r,l){(i===Ne&&(Ce===2||Ce===9)||i.cancelPendingCommit!==null)&&(Ka(i,0),mr(i,le,yi,!1)),Zi(i,l),((Se&2)===0||i!==Ne)&&(i===Ne&&((Se&2)===0&&(ea|=l),rn===4&&mr(i,le,yi,!1)),ls(i))}function $b(i,r,l){if((Se&6)!==0)throw Error(s(327));var f=!l&&(r&127)===0&&(r&i.expiredLanes)===0||we(i,r),g=f?D5(i,r):qh(i,r,!0),b=f;do{if(g===0){Ya&&!f&&mr(i,r,0,!1);break}else{if(l=i.current.alternate,b&&!I5(l)){g=qh(i,r,!1),b=!1;continue}if(g===2){if(b=r,i.errorRecoveryDisabledLanes&b)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){r=T;t:{var M=i;g=gl;var P=M.current.memoizedState.isDehydrated;if(P&&(Ka(M,T).flags|=256),T=qh(M,T,!1),T!==2){if(Fh&&!P){M.errorRecoveryDisabledLanes|=b,ea|=b,g=4;break t}b=si,si=g,b!==null&&(si===null?si=b:si.push.apply(si,b))}g=T}if(b=!1,g!==2)continue}}if(g===1){Ka(i,0),mr(i,r,0,!0);break}t:{switch(f=i,b=g,b){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:mr(f,r,yi,!fr);break t;case 2:si=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(g=yu+300-Ye(),10<g)){if(mr(f,r,yi,!fr),gn(f,0,!0)!==0)break t;Is=r,f.timeoutHandle=Sx(Vb.bind(null,f,l,si,xu,$h,r,yi,ea,Xa,fr,b,"Throttled",-0,0),g);break t}Vb(f,l,si,xu,$h,r,yi,ea,Xa,fr,b,null,-0,0)}}break}while(!0);ls(i)}function Vb(i,r,l,f,g,b,T,M,P,K,st,ct,Q,et){if(i.timeoutHandle=-1,ct=r.subtreeFlags,ct&8192||(ct&16785408)===16785408){ct={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:In},Bb(r,b,ct);var Ot=(b&62914560)===b?yu-Ye():(b&4194048)===b?Hb-Ye():0;if(Ot=bT(ct,Ot),Ot!==null){Is=b,i.cancelPendingCommit=Ot(Zb.bind(null,i,r,b,l,f,g,T,M,P,st,ct,null,Q,et)),mr(i,b,T,!K);return}}Zb(i,r,b,l,f,g,T,M,P)}function I5(i){for(var r=i;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var f=0;f<l.length;f++){var g=l[f],b=g.getSnapshot;g=g.value;try{if(!di(b(),g))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function mr(i,r,l,f){r&=~Gh,r&=~ea,i.suspendedLanes|=r,i.pingedLanes&=~r,f&&(i.warmLanes|=r),f=i.expirationTimes;for(var g=r;0<g;){var b=31-fe(g),T=1<<b;f[b]=-1,g&=~T}l!==0&&ts(i,l,r)}function vu(){return(Se&6)===0?(bl(0),!1):!0}function Xh(){if(se!==null){if(Ce===0)var i=se.return;else i=se,ws=Wr=null,uh(i),Pa=null,tl=0,i=se;for(;i!==null;)_b(i.alternate,i),i=i.return;se=null}}function Ka(i,r){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,tT(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),Is=0,Xh(),Ne=i,se=l=Ss(i.current,null),le=r,Ce=0,gi=null,fr=!1,Ya=we(i,r),Fh=!1,Xa=yi=Gh=ea=dr=rn=0,si=gl=null,$h=!1,(r&8)!==0&&(r|=r&32);var f=i.entangledLanes;if(f!==0)for(i=i.entanglements,f&=r;0<f;){var g=31-fe(f),b=1<<g;r|=i[g],f&=~b}return Ns=r,Hc(),l}function Wb(i,r){Kt=null,O.H=ll,r===za||r===qc?(r=ly(),Ce=3):r===Jd?(r=ly(),Ce=4):Ce=r===Th?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,gi=r,se===null&&(rn=1,cu(i,Ti(r,i.current)))}function Yb(){var i=pi.current;return i===null?!0:(le&4194048)===le?Mi===null:(le&62914560)===le||(le&536870912)!==0?i===Mi:!1}function Xb(){var i=O.H;return O.H=ll,i===null?ll:i}function qb(){var i=O.A;return O.A=O5,i}function Su(){rn=4,fr||(le&4194048)!==le&&pi.current!==null||(Ya=!0),(dr&134217727)===0&&(ea&134217727)===0||Ne===null||mr(Ne,le,yi,!1)}function qh(i,r,l){var f=Se;Se|=2;var g=Xb(),b=qb();(Ne!==i||le!==r)&&(xu=null,Ka(i,r)),r=!1;var T=rn;t:do try{if(Ce!==0&&se!==null){var M=se,P=gi;switch(Ce){case 8:Xh(),T=6;break t;case 3:case 2:case 9:case 6:pi.current===null&&(r=!0);var K=Ce;if(Ce=0,gi=null,Qa(i,M,P,K),l&&Ya){T=0;break t}break;default:K=Ce,Ce=0,gi=null,Qa(i,M,P,K)}}L5(),T=rn;break}catch(st){Wb(i,st)}while(!0);return r&&i.shellSuspendCounter++,ws=Wr=null,Se=f,O.H=g,O.A=b,se===null&&(Ne=null,le=0,Hc()),T}function L5(){for(;se!==null;)Kb(se)}function D5(i,r){var l=Se;Se|=2;var f=Xb(),g=qb();Ne!==i||le!==r?(xu=null,bu=Ye()+500,Ka(i,r)):Ya=we(i,r);t:do try{if(Ce!==0&&se!==null){r=se;var b=gi;e:switch(Ce){case 1:Ce=0,gi=null,Qa(i,r,b,1);break;case 2:case 9:if(ay(b)){Ce=0,gi=null,Qb(r);break}r=function(){Ce!==2&&Ce!==9||Ne!==i||(Ce=7),ls(i)},b.then(r,r);break t;case 3:Ce=7;break t;case 4:Ce=5;break t;case 7:ay(b)?(Ce=0,gi=null,Qb(r)):(Ce=0,gi=null,Qa(i,r,b,7));break;case 5:var T=null;switch(se.tag){case 26:T=se.memoizedState;case 5:case 27:var M=se;if(T?Dx(T):M.stateNode.complete){Ce=0,gi=null;var P=M.sibling;if(P!==null)se=P;else{var K=M.return;K!==null?(se=K,_u(K)):se=null}break e}}Ce=0,gi=null,Qa(i,r,b,5);break;case 6:Ce=0,gi=null,Qa(i,r,b,6);break;case 8:Xh(),rn=6;break t;default:throw Error(s(462))}}B5();break}catch(st){Wb(i,st)}while(!0);return ws=Wr=null,O.H=f,O.A=g,Se=l,se!==null?0:(Ne=null,le=0,Hc(),rn)}function B5(){for(;se!==null&&!Ue();)Kb(se)}function Kb(i){var r=vb(i.alternate,i,Ns);i.memoizedProps=i.pendingProps,r===null?_u(i):se=r}function Qb(i){var r=i,l=r.alternate;switch(r.tag){case 15:case 0:r=pb(l,r,r.pendingProps,r.type,void 0,le);break;case 11:r=pb(l,r,r.pendingProps,r.type.render,r.ref,le);break;case 5:uh(r);default:_b(l,r),r=se=q0(r,Ns),r=vb(l,r,Ns)}i.memoizedProps=i.pendingProps,r===null?_u(i):se=r}function Qa(i,r,l,f){ws=Wr=null,uh(r),Pa=null,tl=0;var g=r.return;try{if(A5(i,g,r,l,le)){rn=1,cu(i,Ti(l,i.current)),se=null;return}}catch(b){if(g!==null)throw se=g,b;rn=1,cu(i,Ti(l,i.current)),se=null;return}r.flags&32768?(de||f===1?i=!0:Ya||(le&536870912)!==0?i=!1:(fr=i=!0,(f===2||f===9||f===3||f===6)&&(f=pi.current,f!==null&&f.tag===13&&(f.flags|=16384))),Jb(r,i)):_u(r)}function _u(i){var r=i;do{if((r.flags&32768)!==0){Jb(r,fr);return}i=r.return;var l=R5(r.alternate,r,Ns);if(l!==null){se=l;return}if(r=r.sibling,r!==null){se=r;return}se=r=i}while(r!==null);rn===0&&(rn=5)}function Jb(i,r){do{var l=j5(i.alternate,i);if(l!==null){l.flags&=32767,se=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(i=i.sibling,i!==null)){se=i;return}se=i=l}while(i!==null);rn=6,se=null}function Zb(i,r,l,f,g,b,T,M,P){i.cancelPendingCommit=null;do wu();while(Tn!==0);if((Se&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(b=r.lanes|r.childLanes,b|=Bd,Aa(i,l,b,T,M,P),i===Ne&&(se=Ne=null,le=0),qa=r,pr=i,Is=l,Vh=b,Wh=g,Fb=f,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,H5(cn,function(){return sx(),null})):(i.callbackNode=null,i.callbackPriority=0),f=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||f){f=O.T,O.T=null,g=$.p,$.p=2,T=Se,Se|=4;try{M5(i,r,l)}finally{Se=T,$.p=g,O.T=f}}Tn=1,tx(),ex(),nx()}}function tx(){if(Tn===1){Tn=0;var i=pr,r=qa,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=O.T,O.T=null;var f=$.p;$.p=2;var g=Se;Se|=4;try{Ib(r,i);var b=op,T=P0(i.containerInfo),M=b.focusedElem,P=b.selectionRange;if(T!==M&&M&&M.ownerDocument&&z0(M.ownerDocument.documentElement,M)){if(P!==null&&Od(M)){var K=P.start,st=P.end;if(st===void 0&&(st=K),"selectionStart"in M)M.selectionStart=K,M.selectionEnd=Math.min(st,M.value.length);else{var ct=M.ownerDocument||document,Q=ct&&ct.defaultView||window;if(Q.getSelection){var et=Q.getSelection(),Ot=M.textContent.length,$t=Math.min(P.start,Ot),ke=P.end===void 0?$t:Math.min(P.end,Ot);!et.extend&&$t>ke&&(T=ke,ke=$t,$t=T);var W=U0(M,$t),F=U0(M,ke);if(W&&F&&(et.rangeCount!==1||et.anchorNode!==W.node||et.anchorOffset!==W.offset||et.focusNode!==F.node||et.focusOffset!==F.offset)){var q=ct.createRange();q.setStart(W.node,W.offset),et.removeAllRanges(),$t>ke?(et.addRange(q),et.extend(F.node,F.offset)):(q.setEnd(F.node,F.offset),et.addRange(q))}}}}for(ct=[],et=M;et=et.parentNode;)et.nodeType===1&&ct.push({element:et,left:et.scrollLeft,top:et.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<ct.length;M++){var ot=ct[M];ot.element.scrollLeft=ot.left,ot.element.scrollTop=ot.top}}Lu=!!ap,op=ap=null}finally{Se=g,$.p=f,O.T=l}}i.current=r,Tn=2}}function ex(){if(Tn===2){Tn=0;var i=pr,r=qa,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=O.T,O.T=null;var f=$.p;$.p=2;var g=Se;Se|=4;try{jb(i,r.alternate,r)}finally{Se=g,$.p=f,O.T=l}}Tn=3}}function nx(){if(Tn===4||Tn===3){Tn=0,mn();var i=pr,r=qa,l=Is,f=Fb;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Tn=5:(Tn=0,qa=pr=null,ix(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(hr=null),Ks(l),r=r.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(Zt,r,void 0,(r.current.flags&128)===128)}catch{}if(f!==null){r=O.T,g=$.p,$.p=2,O.T=null;try{for(var b=i.onRecoverableError,T=0;T<f.length;T++){var M=f[T];b(M.value,{componentStack:M.stack})}}finally{O.T=r,$.p=g}}(Is&3)!==0&&wu(),ls(i),g=i.pendingLanes,(l&261930)!==0&&(g&42)!==0?i===Yh?yl++:(yl=0,Yh=i):yl=0,bl(0)}}function ix(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,Jo(r)))}function wu(){return tx(),ex(),nx(),sx()}function sx(){if(Tn!==5)return!1;var i=pr,r=Vh;Vh=0;var l=Ks(Is),f=O.T,g=$.p;try{$.p=32>l?32:l,O.T=null,l=Wh,Wh=null;var b=pr,T=Is;if(Tn=0,qa=pr=null,Is=0,(Se&6)!==0)throw Error(s(331));var M=Se;if(Se|=4,zb(b.current),Db(b,b.current,T,l),Se=M,bl(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(Zt,b)}catch{}return!0}finally{$.p=g,O.T=f,ix(i,r)}}function rx(i,r,l){r=Ti(l,r),r=Ah(i.stateNode,r,2),i=or(i,r,2),i!==null&&(Zi(i,2),ls(i))}function Re(i,r,l){if(i.tag===3)rx(i,i,l);else for(;r!==null;){if(r.tag===3){rx(r,i,l);break}else if(r.tag===1){var f=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(hr===null||!hr.has(f))){i=Ti(l,i),l=ab(2),f=or(r,l,2),f!==null&&(ob(l,f,r,i),Zi(f,2),ls(f));break}}r=r.return}}function Kh(i,r,l){var f=i.pingCache;if(f===null){f=i.pingCache=new N5;var g=new Set;f.set(r,g)}else g=f.get(r),g===void 0&&(g=new Set,f.set(r,g));g.has(l)||(Fh=!0,g.add(l),i=U5.bind(null,i,r,l),r.then(i,i))}function U5(i,r,l){var f=i.pingCache;f!==null&&f.delete(r),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,Ne===i&&(le&l)===l&&(rn===4||rn===3&&(le&62914560)===le&&300>Ye()-yu?(Se&2)===0&&Ka(i,0):Gh|=l,Xa===le&&(Xa=0)),ls(i)}function ax(i,r){r===0&&(r=Dr()),i=Gr(i,r),i!==null&&(Zi(i,r),ls(i))}function z5(i){var r=i.memoizedState,l=0;r!==null&&(l=r.retryLane),ax(i,l)}function P5(i,r){var l=0;switch(i.tag){case 31:case 13:var f=i.stateNode,g=i.memoizedState;g!==null&&(l=g.retryLane);break;case 19:f=i.stateNode;break;case 22:f=i.stateNode._retryCache;break;default:throw Error(s(314))}f!==null&&f.delete(r),ax(i,l)}function H5(i,r){return Te(i,r)}var Eu=null,Ja=null,Qh=!1,Au=!1,Jh=!1,gr=0;function ls(i){i!==Ja&&i.next===null&&(Ja===null?Eu=Ja=i:Ja=Ja.next=i),Au=!0,Qh||(Qh=!0,G5())}function bl(i,r){if(!Jh&&Au){Jh=!0;do for(var l=!1,f=Eu;f!==null;){if(i!==0){var g=f.pendingLanes;if(g===0)var b=0;else{var T=f.suspendedLanes,M=f.pingedLanes;b=(1<<31-fe(42|i)+1)-1,b&=g&~(T&~M),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(l=!0,ux(f,b))}else b=le,b=gn(f,f===Ne?b:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(b&3)===0||we(f,b)||(l=!0,ux(f,b));f=f.next}while(l);Jh=!1}}function F5(){ox()}function ox(){Au=Qh=!1;var i=0;gr!==0&&Z5()&&(i=gr);for(var r=Ye(),l=null,f=Eu;f!==null;){var g=f.next,b=lx(f,r);b===0?(f.next=null,l===null?Eu=g:l.next=g,g===null&&(Ja=l)):(l=f,(i!==0||(b&3)!==0)&&(Au=!0)),f=g}Tn!==0&&Tn!==5||bl(i),gr!==0&&(gr=0)}function lx(i,r){for(var l=i.suspendedLanes,f=i.pingedLanes,g=i.expirationTimes,b=i.pendingLanes&-62914561;0<b;){var T=31-fe(b),M=1<<T,P=g[T];P===-1?((M&l)===0||(M&f)!==0)&&(g[T]=qe(M,r)):P<=r&&(i.expiredLanes|=M),b&=~M}if(r=Ne,l=le,l=gn(i,i===r?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f=i.callbackNode,l===0||i===r&&(Ce===2||Ce===9)||i.cancelPendingCommit!==null)return f!==null&&f!==null&&Xt(f),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||we(i,l)){if(r=l&-l,r===i.callbackPriority)return r;switch(f!==null&&Xt(f),Ks(l)){case 2:case 8:l=Ze;break;case 32:l=cn;break;case 268435456:l=X;break;default:l=cn}return f=cx.bind(null,i),l=Te(l,f),i.callbackPriority=r,i.callbackNode=l,r}return f!==null&&f!==null&&Xt(f),i.callbackPriority=2,i.callbackNode=null,2}function cx(i,r){if(Tn!==0&&Tn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(wu()&&i.callbackNode!==l)return null;var f=le;return f=gn(i,i===Ne?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f===0?null:($b(i,f,r),lx(i,Ye()),i.callbackNode!=null&&i.callbackNode===l?cx.bind(null,i):null)}function ux(i,r){if(wu())return null;$b(i,r,!0)}function G5(){eT(function(){(Se&6)!==0?Te(ln,F5):ox()})}function Zh(){if(gr===0){var i=Ba;i===0&&(i=pt,pt<<=1,(pt&261888)===0&&(pt=256)),gr=i}return gr}function fx(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ei(""+i)}function dx(i,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,i.id&&l.setAttribute("form",i.id),r.parentNode.insertBefore(l,r),i=new FormData(i),l.parentNode.removeChild(l),i}function $5(i,r,l,f,g){if(r==="submit"&&l&&l.stateNode===g){var b=fx((g[un]||null).action),T=f.submitter;T&&(r=(r=T[un]||null)?fx(r.formAction):T.getAttribute("formAction"),r!==null&&(b=r,T=null));var M=new Bc("action","action",null,f,g);i.push({event:M,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(gr!==0){var P=T?dx(g,T):new FormData(g);xh(l,{pending:!0,data:P,method:g.method,action:b},null,P)}}else typeof b=="function"&&(M.preventDefault(),P=T?dx(g,T):new FormData(g),xh(l,{pending:!0,data:P,method:g.method,action:b},b,P))},currentTarget:g}]})}}for(var tp=0;tp<Dd.length;tp++){var ep=Dd[tp],V5=ep.toLowerCase(),W5=ep[0].toUpperCase()+ep.slice(1);Ui(V5,"on"+W5)}Ui(G0,"onAnimationEnd"),Ui($0,"onAnimationIteration"),Ui(V0,"onAnimationStart"),Ui("dblclick","onDoubleClick"),Ui("focusin","onFocus"),Ui("focusout","onBlur"),Ui(l5,"onTransitionRun"),Ui(c5,"onTransitionStart"),Ui(u5,"onTransitionCancel"),Ui(W0,"onTransitionEnd"),Zs("onMouseEnter",["mouseout","mouseover"]),Zs("onMouseLeave",["mouseout","mouseover"]),Zs("onPointerEnter",["pointerout","pointerover"]),Zs("onPointerLeave",["pointerout","pointerover"]),ys("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ys("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ys("onBeforeInput",["compositionend","keypress","textInput","paste"]),ys("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ys("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ys("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Y5=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xl));function hx(i,r){r=(r&4)!==0;for(var l=0;l<i.length;l++){var f=i[l],g=f.event;f=f.listeners;t:{var b=void 0;if(r)for(var T=f.length-1;0<=T;T--){var M=f[T],P=M.instance,K=M.currentTarget;if(M=M.listener,P!==b&&g.isPropagationStopped())break t;b=M,g.currentTarget=K;try{b(g)}catch(st){Pc(st)}g.currentTarget=null,b=P}else for(T=0;T<f.length;T++){if(M=f[T],P=M.instance,K=M.currentTarget,M=M.listener,P!==b&&g.isPropagationStopped())break t;b=M,g.currentTarget=K;try{b(g)}catch(st){Pc(st)}g.currentTarget=null,b=P}}}}function re(i,r){var l=r[Qs];l===void 0&&(l=r[Qs]=new Set);var f=i+"__bubble";l.has(f)||(px(r,i,2,!1),l.add(f))}function np(i,r,l){var f=0;r&&(f|=4),px(l,i,f,r)}var Tu="_reactListening"+Math.random().toString(36).slice(2);function ip(i){if(!i[Tu]){i[Tu]=!0,kc.forEach(function(l){l!=="selectionchange"&&(Y5.has(l)||np(l,!1,i),np(l,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Tu]||(r[Tu]=!0,np("selectionchange",!1,r))}}function px(i,r,l,f){switch(Gx(r)){case 2:var g=ST;break;case 8:g=_T;break;default:g=bp}l=g.bind(null,r,l,i),g=void 0,!wd||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(g=!0),f?g!==void 0?i.addEventListener(r,l,{capture:!0,passive:g}):i.addEventListener(r,l,!0):g!==void 0?i.addEventListener(r,l,{passive:g}):i.addEventListener(r,l,!1)}function sp(i,r,l,f,g){var b=f;if((r&1)===0&&(r&2)===0&&f!==null)t:for(;;){if(f===null)return;var T=f.tag;if(T===3||T===4){var M=f.stateNode.containerInfo;if(M===g)break;if(T===4)for(T=f.return;T!==null;){var P=T.tag;if((P===3||P===4)&&T.stateNode.containerInfo===g)return;T=T.return}for(;M!==null;){if(T=gs(M),T===null)return;if(P=T.tag,P===5||P===6||P===26||P===27){f=b=T;continue t}M=M.parentNode}}f=f.return}Nc(function(){var K=b,st=Ur(l),ct=[];t:{var Q=Y0.get(i);if(Q!==void 0){var et=Bc,Ot=i;switch(i){case"keypress":if(Lc(l)===0)break t;case"keydown":case"keyup":et=PA;break;case"focusin":Ot="focus",et=Cd;break;case"focusout":Ot="blur",et=Cd;break;case"beforeblur":case"afterblur":et=Cd;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":et=_0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":et=RA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":et=GA;break;case G0:case $0:case V0:et=kA;break;case W0:et=VA;break;case"scroll":case"scrollend":et=TA;break;case"wheel":et=YA;break;case"copy":case"cut":case"paste":et=NA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":et=E0;break;case"toggle":case"beforetoggle":et=qA}var $t=(r&4)!==0,ke=!$t&&(i==="scroll"||i==="scrollend"),W=$t?Q!==null?Q+"Capture":null:Q;$t=[];for(var F=K,q;F!==null;){var ot=F;if(q=ot.stateNode,ot=ot.tag,ot!==5&&ot!==26&&ot!==27||q===null||W===null||(ot=zr(F,W),ot!=null&&$t.push(vl(F,ot,q))),ke)break;F=F.return}0<$t.length&&(Q=new et(Q,Ot,null,l,st),ct.push({event:Q,listeners:$t}))}}if((r&7)===0){t:{if(Q=i==="mouseover"||i==="pointerover",et=i==="mouseout"||i==="pointerout",Q&&l!==Br&&(Ot=l.relatedTarget||l.fromElement)&&(gs(Ot)||Ot[ci]))break t;if((et||Q)&&(Q=st.window===st?st:(Q=st.ownerDocument)?Q.defaultView||Q.parentWindow:window,et?(Ot=l.relatedTarget||l.toElement,et=K,Ot=Ot?gs(Ot):null,Ot!==null&&(ke=o(Ot),$t=Ot.tag,Ot!==ke||$t!==5&&$t!==27&&$t!==6)&&(Ot=null)):(et=null,Ot=K),et!==Ot)){if($t=_0,ot="onMouseLeave",W="onMouseEnter",F="mouse",(i==="pointerout"||i==="pointerover")&&($t=E0,ot="onPointerLeave",W="onPointerEnter",F="pointer"),ke=et==null?Q:ui(et),q=Ot==null?Q:ui(Ot),Q=new $t(ot,F+"leave",et,l,st),Q.target=ke,Q.relatedTarget=q,ot=null,gs(st)===K&&($t=new $t(W,F+"enter",Ot,l,st),$t.target=q,$t.relatedTarget=ke,ot=$t),ke=ot,et&&Ot)e:{for($t=X5,W=et,F=Ot,q=0,ot=W;ot;ot=$t(ot))q++;ot=0;for(var Ut=F;Ut;Ut=$t(Ut))ot++;for(;0<q-ot;)W=$t(W),q--;for(;0<ot-q;)F=$t(F),ot--;for(;q--;){if(W===F||F!==null&&W===F.alternate){$t=W;break e}W=$t(W),F=$t(F)}$t=null}else $t=null;et!==null&&mx(ct,Q,et,$t,!1),Ot!==null&&ke!==null&&mx(ct,ke,Ot,$t,!0)}}t:{if(Q=K?ui(K):window,et=Q.nodeName&&Q.nodeName.toLowerCase(),et==="select"||et==="input"&&Q.type==="file")var be=O0;else if(M0(Q))if(N0)be=r5;else{be=i5;var Nt=n5}else et=Q.nodeName,!et||et.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?K&&qn(K.elementType)&&(be=O0):be=s5;if(be&&(be=be(i,K))){k0(ct,be,l,st);break t}Nt&&Nt(i,Q,K),i==="focusout"&&K&&Q.type==="number"&&K.memoizedProps.value!=null&&De(Q,"number",Q.value)}switch(Nt=K?ui(K):window,i){case"focusin":(M0(Nt)||Nt.contentEditable==="true")&&(ja=Nt,Nd=K,qo=null);break;case"focusout":qo=Nd=ja=null;break;case"mousedown":Id=!0;break;case"contextmenu":case"mouseup":case"dragend":Id=!1,H0(ct,l,st);break;case"selectionchange":if(o5)break;case"keydown":case"keyup":H0(ct,l,st)}var te;if(jd)t:{switch(i){case"compositionstart":var ce="onCompositionStart";break t;case"compositionend":ce="onCompositionEnd";break t;case"compositionupdate":ce="onCompositionUpdate";break t}ce=void 0}else Ra?R0(i,l)&&(ce="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(ce="onCompositionStart");ce&&(A0&&l.locale!=="ko"&&(Ra||ce!=="onCompositionStart"?ce==="onCompositionEnd"&&Ra&&(te=v0()):(tr=st,Ed="value"in tr?tr.value:tr.textContent,Ra=!0)),Nt=Cu(K,ce),0<Nt.length&&(ce=new w0(ce,i,null,l,st),ct.push({event:ce,listeners:Nt}),te?ce.data=te:(te=j0(l),te!==null&&(ce.data=te)))),(te=QA?JA(i,l):ZA(i,l))&&(ce=Cu(K,"onBeforeInput"),0<ce.length&&(Nt=new w0("onBeforeInput","beforeinput",null,l,st),ct.push({event:Nt,listeners:ce}),Nt.data=te)),$5(ct,i,K,l,st)}hx(ct,r)})}function vl(i,r,l){return{instance:i,listener:r,currentTarget:l}}function Cu(i,r){for(var l=r+"Capture",f=[];i!==null;){var g=i,b=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||b===null||(g=zr(i,l),g!=null&&f.unshift(vl(i,g,b)),g=zr(i,r),g!=null&&f.push(vl(i,g,b))),i.tag===3)return f;i=i.return}return[]}function X5(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function mx(i,r,l,f,g){for(var b=r._reactName,T=[];l!==null&&l!==f;){var M=l,P=M.alternate,K=M.stateNode;if(M=M.tag,P!==null&&P===f)break;M!==5&&M!==26&&M!==27||K===null||(P=K,g?(K=zr(l,b),K!=null&&T.unshift(vl(l,K,P))):g||(K=zr(l,b),K!=null&&T.push(vl(l,K,P)))),l=l.return}T.length!==0&&i.push({event:r,listeners:T})}var q5=/\r\n?/g,K5=/\u0000|\uFFFD/g;function gx(i){return(typeof i=="string"?i:""+i).replace(q5,`
`).replace(K5,"")}function yx(i,r){return r=gx(r),gx(i)===r}function Me(i,r,l,f,g,b){switch(l){case"children":typeof f=="string"?r==="body"||r==="textarea"&&f===""||me(i,f):(typeof f=="number"||typeof f=="bigint")&&r!=="body"&&me(i,""+f);break;case"className":jt(i,"class",f);break;case"tabIndex":jt(i,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":jt(i,l,f);break;case"style":jn(i,f,b);break;case"data":if(r!=="object"){jt(i,"data",f);break}case"src":case"href":if(f===""&&(r!=="a"||l!=="href")){i.removeAttribute(l);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(l);break}f=Ei(""+f),i.setAttribute(l,f);break;case"action":case"formAction":if(typeof f=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(l==="formAction"?(r!=="input"&&Me(i,r,"name",g.name,g,null),Me(i,r,"formEncType",g.formEncType,g,null),Me(i,r,"formMethod",g.formMethod,g,null),Me(i,r,"formTarget",g.formTarget,g,null)):(Me(i,r,"encType",g.encType,g,null),Me(i,r,"method",g.method,g,null),Me(i,r,"target",g.target,g,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(l);break}f=Ei(""+f),i.setAttribute(l,f);break;case"onClick":f!=null&&(i.onclick=In);break;case"onScroll":f!=null&&re("scroll",i);break;case"onScrollEnd":f!=null&&re("scrollend",i);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(s(61));if(l=f.__html,l!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=l}}break;case"multiple":i.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":i.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){i.removeAttribute("xlink:href");break}l=Ei(""+f),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(l,""+f):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":f===!0?i.setAttribute(l,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(l,f):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?i.setAttribute(l,f):i.removeAttribute(l);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?i.removeAttribute(l):i.setAttribute(l,f);break;case"popover":re("beforetoggle",i),re("toggle",i),St(i,"popover",f);break;case"xlinkActuate":dt(i,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":dt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":dt(i,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":dt(i,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":dt(i,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":dt(i,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":dt(i,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":dt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":dt(i,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":St(i,"is",f);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=fi.get(l)||l,St(i,l,f))}}function rp(i,r,l,f,g,b){switch(l){case"style":jn(i,f,b);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(s(61));if(l=f.__html,l!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=l}}break;case"children":typeof f=="string"?me(i,f):(typeof f=="number"||typeof f=="bigint")&&me(i,""+f);break;case"onScroll":f!=null&&re("scroll",i);break;case"onScrollEnd":f!=null&&re("scrollend",i);break;case"onClick":f!=null&&(i.onclick=In);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Oc.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),r=l.slice(2,g?l.length-7:void 0),b=i[un]||null,b=b!=null?b[l]:null,typeof b=="function"&&i.removeEventListener(r,b,g),typeof f=="function")){typeof b!="function"&&b!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(r,f,g);break t}l in i?i[l]=f:f===!0?i.setAttribute(l,""):St(i,l,f)}}}function Un(i,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":re("error",i),re("load",i);var f=!1,g=!1,b;for(b in l)if(l.hasOwnProperty(b)){var T=l[b];if(T!=null)switch(b){case"src":f=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Me(i,r,b,T,l,null)}}g&&Me(i,r,"srcSet",l.srcSet,l,null),f&&Me(i,r,"src",l.src,l,null);return;case"input":re("invalid",i);var M=b=T=g=null,P=null,K=null;for(f in l)if(l.hasOwnProperty(f)){var st=l[f];if(st!=null)switch(f){case"name":g=st;break;case"type":T=st;break;case"checked":P=st;break;case"defaultChecked":K=st;break;case"value":b=st;break;case"defaultValue":M=st;break;case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(s(137,r));break;default:Me(i,r,f,st,l,null)}}Le(i,b,M,P,K,T,g,!1);return;case"select":re("invalid",i),f=T=b=null;for(g in l)if(l.hasOwnProperty(g)&&(M=l[g],M!=null))switch(g){case"value":b=M;break;case"defaultValue":T=M;break;case"multiple":f=M;default:Me(i,r,g,M,l,null)}r=b,l=T,i.multiple=!!f,r!=null?pe(i,!!f,r,!1):l!=null&&pe(i,!!f,l,!0);return;case"textarea":re("invalid",i),b=g=f=null;for(T in l)if(l.hasOwnProperty(T)&&(M=l[T],M!=null))switch(T){case"value":f=M;break;case"defaultValue":g=M;break;case"children":b=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(s(91));break;default:Me(i,r,T,M,l,null)}dn(i,f,g,b);return;case"option":for(P in l)l.hasOwnProperty(P)&&(f=l[P],f!=null)&&(P==="selected"?i.selected=f&&typeof f!="function"&&typeof f!="symbol":Me(i,r,P,f,l,null));return;case"dialog":re("beforetoggle",i),re("toggle",i),re("cancel",i),re("close",i);break;case"iframe":case"object":re("load",i);break;case"video":case"audio":for(f=0;f<xl.length;f++)re(xl[f],i);break;case"image":re("error",i),re("load",i);break;case"details":re("toggle",i);break;case"embed":case"source":case"link":re("error",i),re("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in l)if(l.hasOwnProperty(K)&&(f=l[K],f!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Me(i,r,K,f,l,null)}return;default:if(qn(r)){for(st in l)l.hasOwnProperty(st)&&(f=l[st],f!==void 0&&rp(i,r,st,f,l,void 0));return}}for(M in l)l.hasOwnProperty(M)&&(f=l[M],f!=null&&Me(i,r,M,f,l,null))}function Q5(i,r,l,f){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,b=null,T=null,M=null,P=null,K=null,st=null;for(et in l){var ct=l[et];if(l.hasOwnProperty(et)&&ct!=null)switch(et){case"checked":break;case"value":break;case"defaultValue":P=ct;default:f.hasOwnProperty(et)||Me(i,r,et,null,f,ct)}}for(var Q in f){var et=f[Q];if(ct=l[Q],f.hasOwnProperty(Q)&&(et!=null||ct!=null))switch(Q){case"type":b=et;break;case"name":g=et;break;case"checked":K=et;break;case"defaultChecked":st=et;break;case"value":T=et;break;case"defaultValue":M=et;break;case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(s(137,r));break;default:et!==ct&&Me(i,r,Q,et,f,ct)}}ie(i,T,M,P,K,st,b,g);return;case"select":et=T=M=Q=null;for(b in l)if(P=l[b],l.hasOwnProperty(b)&&P!=null)switch(b){case"value":break;case"multiple":et=P;default:f.hasOwnProperty(b)||Me(i,r,b,null,f,P)}for(g in f)if(b=f[g],P=l[g],f.hasOwnProperty(g)&&(b!=null||P!=null))switch(g){case"value":Q=b;break;case"defaultValue":M=b;break;case"multiple":T=b;default:b!==P&&Me(i,r,g,b,f,P)}r=M,l=T,f=et,Q!=null?pe(i,!!l,Q,!1):!!f!=!!l&&(r!=null?pe(i,!!l,r,!0):pe(i,!!l,l?[]:"",!1));return;case"textarea":et=Q=null;for(M in l)if(g=l[M],l.hasOwnProperty(M)&&g!=null&&!f.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:Me(i,r,M,null,f,g)}for(T in f)if(g=f[T],b=l[T],f.hasOwnProperty(T)&&(g!=null||b!=null))switch(T){case"value":Q=g;break;case"defaultValue":et=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==b&&Me(i,r,T,g,f,b)}Rn(i,Q,et);return;case"option":for(var Ot in l)Q=l[Ot],l.hasOwnProperty(Ot)&&Q!=null&&!f.hasOwnProperty(Ot)&&(Ot==="selected"?i.selected=!1:Me(i,r,Ot,null,f,Q));for(P in f)Q=f[P],et=l[P],f.hasOwnProperty(P)&&Q!==et&&(Q!=null||et!=null)&&(P==="selected"?i.selected=Q&&typeof Q!="function"&&typeof Q!="symbol":Me(i,r,P,Q,f,et));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $t in l)Q=l[$t],l.hasOwnProperty($t)&&Q!=null&&!f.hasOwnProperty($t)&&Me(i,r,$t,null,f,Q);for(K in f)if(Q=f[K],et=l[K],f.hasOwnProperty(K)&&Q!==et&&(Q!=null||et!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,r));break;default:Me(i,r,K,Q,f,et)}return;default:if(qn(r)){for(var ke in l)Q=l[ke],l.hasOwnProperty(ke)&&Q!==void 0&&!f.hasOwnProperty(ke)&&rp(i,r,ke,void 0,f,Q);for(st in f)Q=f[st],et=l[st],!f.hasOwnProperty(st)||Q===et||Q===void 0&&et===void 0||rp(i,r,st,Q,f,et);return}}for(var W in l)Q=l[W],l.hasOwnProperty(W)&&Q!=null&&!f.hasOwnProperty(W)&&Me(i,r,W,null,f,Q);for(ct in f)Q=f[ct],et=l[ct],!f.hasOwnProperty(ct)||Q===et||Q==null&&et==null||Me(i,r,ct,Q,f,et)}function bx(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function J5(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,l=performance.getEntriesByType("resource"),f=0;f<l.length;f++){var g=l[f],b=g.transferSize,T=g.initiatorType,M=g.duration;if(b&&M&&bx(T)){for(T=0,M=g.responseEnd,f+=1;f<l.length;f++){var P=l[f],K=P.startTime;if(K>M)break;var st=P.transferSize,ct=P.initiatorType;st&&bx(ct)&&(P=P.responseEnd,T+=st*(P<M?1:(M-K)/(P-K)))}if(--f,r+=8*(b+T)/(g.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var ap=null,op=null;function Ru(i){return i.nodeType===9?i:i.ownerDocument}function xx(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vx(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function lp(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var cp=null;function Z5(){var i=window.event;return i&&i.type==="popstate"?i===cp?!1:(cp=i,!0):(cp=null,!1)}var Sx=typeof setTimeout=="function"?setTimeout:void 0,tT=typeof clearTimeout=="function"?clearTimeout:void 0,_x=typeof Promise=="function"?Promise:void 0,eT=typeof queueMicrotask=="function"?queueMicrotask:typeof _x<"u"?function(i){return _x.resolve(null).then(i).catch(nT)}:Sx;function nT(i){setTimeout(function(){throw i})}function yr(i){return i==="head"}function wx(i,r){var l=r,f=0;do{var g=l.nextSibling;if(i.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"||l==="/&"){if(f===0){i.removeChild(g),no(r);return}f--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")f++;else if(l==="html")Sl(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,Sl(l);for(var b=l.firstChild;b;){var T=b.nextSibling,M=b.nodeName;b[Js]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&b.rel.toLowerCase()==="stylesheet"||l.removeChild(b),b=T}}else l==="body"&&Sl(i.ownerDocument.body);l=g}while(l);no(r)}function Ex(i,r){var l=i;i=0;do{var f=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=f}while(l)}function up(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":up(l),Ca(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function iT(i,r,l,f){for(;i.nodeType===1;){var g=l;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!f&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(f){if(!i[Js])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(b=i.getAttribute("rel"),b==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(b!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(b=i.getAttribute("src"),(b!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&b&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var b=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===b)return i}else return i;if(i=ki(i.nextSibling),i===null)break}return null}function sT(i,r,l){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=ki(i.nextSibling),i===null))return null;return i}function Ax(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=ki(i.nextSibling),i===null))return null;return i}function fp(i){return i.data==="$?"||i.data==="$~"}function dp(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function rT(i,r){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||l.readyState!=="loading")r();else{var f=function(){r(),l.removeEventListener("DOMContentLoaded",f)};l.addEventListener("DOMContentLoaded",f),i._reactRetry=f}}function ki(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var hp=null;function Tx(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(r===0)return ki(i.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}i=i.nextSibling}return null}function Cx(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return i;r--}else l!=="/$"&&l!=="/&"||r++}i=i.previousSibling}return null}function Rx(i,r,l){switch(r=Ru(l),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Sl(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);Ca(i)}var Oi=new Map,jx=new Set;function ju(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ls=$.d;$.d={f:aT,r:oT,D:lT,C:cT,L:uT,m:fT,X:hT,S:dT,M:pT};function aT(){var i=Ls.f(),r=vu();return i||r}function oT(i){var r=Ee(i);r!==null&&r.tag===5&&r.type==="form"?Wy(r):Ls.r(i)}var Za=typeof document>"u"?null:document;function Mx(i,r,l){var f=Za;if(f&&typeof r=="string"&&r){var g=ve(r);g='link[rel="'+i+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),jx.has(g)||(jx.add(g),i={rel:i,crossOrigin:l,href:r},f.querySelector(g)===null&&(r=f.createElement("link"),Un(r,"link",i),fn(r),f.head.appendChild(r)))}}function lT(i){Ls.D(i),Mx("dns-prefetch",i,null)}function cT(i,r){Ls.C(i,r),Mx("preconnect",i,r)}function uT(i,r,l){Ls.L(i,r,l);var f=Za;if(f&&i&&r){var g='link[rel="preload"][as="'+ve(r)+'"]';r==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+ve(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+ve(l.imageSizes)+'"]')):g+='[href="'+ve(i)+'"]';var b=g;switch(r){case"style":b=to(i);break;case"script":b=eo(i)}Oi.has(b)||(i=y({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:i,as:r},l),Oi.set(b,i),f.querySelector(g)!==null||r==="style"&&f.querySelector(_l(b))||r==="script"&&f.querySelector(wl(b))||(r=f.createElement("link"),Un(r,"link",i),fn(r),f.head.appendChild(r)))}}function fT(i,r){Ls.m(i,r);var l=Za;if(l&&i){var f=r&&typeof r.as=="string"?r.as:"script",g='link[rel="modulepreload"][as="'+ve(f)+'"][href="'+ve(i)+'"]',b=g;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=eo(i)}if(!Oi.has(b)&&(i=y({rel:"modulepreload",href:i},r),Oi.set(b,i),l.querySelector(g)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(wl(b)))return}f=l.createElement("link"),Un(f,"link",i),fn(f),l.head.appendChild(f)}}}function dT(i,r,l){Ls.S(i,r,l);var f=Za;if(f&&i){var g=ns(f).hoistableStyles,b=to(i);r=r||"default";var T=g.get(b);if(!T){var M={loading:0,preload:null};if(T=f.querySelector(_l(b)))M.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":r},l),(l=Oi.get(b))&&pp(i,l);var P=T=f.createElement("link");fn(P),Un(P,"link",i),P._p=new Promise(function(K,st){P.onload=K,P.onerror=st}),P.addEventListener("load",function(){M.loading|=1}),P.addEventListener("error",function(){M.loading|=2}),M.loading|=4,Mu(T,r,f)}T={type:"stylesheet",instance:T,count:1,state:M},g.set(b,T)}}}function hT(i,r){Ls.X(i,r);var l=Za;if(l&&i){var f=ns(l).hoistableScripts,g=eo(i),b=f.get(g);b||(b=l.querySelector(wl(g)),b||(i=y({src:i,async:!0},r),(r=Oi.get(g))&&mp(i,r),b=l.createElement("script"),fn(b),Un(b,"link",i),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(g,b))}}function pT(i,r){Ls.M(i,r);var l=Za;if(l&&i){var f=ns(l).hoistableScripts,g=eo(i),b=f.get(g);b||(b=l.querySelector(wl(g)),b||(i=y({src:i,async:!0,type:"module"},r),(r=Oi.get(g))&&mp(i,r),b=l.createElement("script"),fn(b),Un(b,"link",i),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(g,b))}}function kx(i,r,l,f){var g=(g=xt.current)?ju(g):null;if(!g)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=to(l.href),l=ns(g).hoistableStyles,f=l.get(r),f||(f={type:"style",instance:null,count:0,state:null},l.set(r,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=to(l.href);var b=ns(g).hoistableStyles,T=b.get(i);if(T||(g=g.ownerDocument||g,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(i,T),(b=g.querySelector(_l(i)))&&!b._p&&(T.instance=b,T.state.loading=5),Oi.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Oi.set(i,l),b||mT(g,i,l,T.state))),r&&f===null)throw Error(s(528,""));return T}if(r&&f!==null)throw Error(s(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=eo(l),l=ns(g).hoistableScripts,f=l.get(r),f||(f={type:"script",instance:null,count:0,state:null},l.set(r,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function to(i){return'href="'+ve(i)+'"'}function _l(i){return'link[rel="stylesheet"]['+i+"]"}function Ox(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function mT(i,r,l,f){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?f.loading=1:(r=i.createElement("link"),f.preload=r,r.addEventListener("load",function(){return f.loading|=1}),r.addEventListener("error",function(){return f.loading|=2}),Un(r,"link",l),fn(r),i.head.appendChild(r))}function eo(i){return'[src="'+ve(i)+'"]'}function wl(i){return"script[async]"+i}function Nx(i,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var f=i.querySelector('style[data-href~="'+ve(l.href)+'"]');if(f)return r.instance=f,fn(f),f;var g=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return f=(i.ownerDocument||i).createElement("style"),fn(f),Un(f,"style",g),Mu(f,l.precedence,i),r.instance=f;case"stylesheet":g=to(l.href);var b=i.querySelector(_l(g));if(b)return r.state.loading|=4,r.instance=b,fn(b),b;f=Ox(l),(g=Oi.get(g))&&pp(f,g),b=(i.ownerDocument||i).createElement("link"),fn(b);var T=b;return T._p=new Promise(function(M,P){T.onload=M,T.onerror=P}),Un(b,"link",f),r.state.loading|=4,Mu(b,l.precedence,i),r.instance=b;case"script":return b=eo(l.src),(g=i.querySelector(wl(b)))?(r.instance=g,fn(g),g):(f=l,(g=Oi.get(b))&&(f=y({},l),mp(f,g)),i=i.ownerDocument||i,g=i.createElement("script"),fn(g),Un(g,"link",f),i.head.appendChild(g),r.instance=g);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(f=r.instance,r.state.loading|=4,Mu(f,l.precedence,i));return r.instance}function Mu(i,r,l){for(var f=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=f.length?f[f.length-1]:null,b=g,T=0;T<f.length;T++){var M=f[T];if(M.dataset.precedence===r)b=M;else if(b!==g)break}b?b.parentNode.insertBefore(i,b.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(i,r.firstChild))}function pp(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function mp(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var ku=null;function Ix(i,r,l){if(ku===null){var f=new Map,g=ku=new Map;g.set(l,f)}else g=ku,f=g.get(l),f||(f=new Map,g.set(l,f));if(f.has(i))return f;for(f.set(i,null),l=l.getElementsByTagName(i),g=0;g<l.length;g++){var b=l[g];if(!(b[Js]||b[yn]||i==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var T=b.getAttribute(r)||"";T=i+T;var M=f.get(T);M?M.push(b):f.set(T,[b])}}return f}function Lx(i,r,l){i=i.ownerDocument||i,i.head.insertBefore(l,r==="title"?i.querySelector("head > title"):null)}function gT(i,r,l){if(l===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(i=r.disabled,typeof r.precedence=="string"&&i==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Dx(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function yT(i,r,l,f){if(l.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var g=to(f.href),b=r.querySelector(_l(g));if(b){r=b._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=Ou.bind(i),r.then(i,i)),l.state.loading|=4,l.instance=b,fn(b);return}b=r.ownerDocument||r,f=Ox(f),(g=Oi.get(g))&&pp(f,g),b=b.createElement("link"),fn(b);var T=b;T._p=new Promise(function(M,P){T.onload=M,T.onerror=P}),Un(b,"link",f),l.instance=b}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=Ou.bind(i),r.addEventListener("load",l),r.addEventListener("error",l))}}var gp=0;function bT(i,r){return i.stylesheets&&i.count===0&&Iu(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var f=setTimeout(function(){if(i.stylesheets&&Iu(i,i.stylesheets),i.unsuspend){var b=i.unsuspend;i.unsuspend=null,b()}},6e4+r);0<i.imgBytes&&gp===0&&(gp=62500*J5());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Iu(i,i.stylesheets),i.unsuspend)){var b=i.unsuspend;i.unsuspend=null,b()}},(i.imgBytes>gp?50:800)+r);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(f),clearTimeout(g)}}:null}function Ou(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Iu(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Nu=null;function Iu(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Nu=new Map,r.forEach(xT,i),Nu=null,Ou.call(i))}function xT(i,r){if(!(r.state.loading&4)){var l=Nu.get(i);if(l)var f=l.get(null);else{l=new Map,Nu.set(i,l);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<g.length;b++){var T=g[b];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),f=T)}f&&l.set(null,f)}g=r.instance,T=g.getAttribute("data-precedence"),b=l.get(T)||f,b===f&&l.set(null,g),l.set(T,g),this.count++,f=Ou.bind(this),g.addEventListener("load",f),g.addEventListener("error",f),b?b.parentNode.insertBefore(g,b.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),r.state.loading|=4}}var El={$$typeof:C,Provider:null,Consumer:null,_currentValue:rt,_currentValue2:rt,_threadCount:0};function vT(i,r,l,f,g,b,T,M,P){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qs(0),this.hiddenUpdates=qs(null),this.identifierPrefix=f,this.onUncaughtError=g,this.onCaughtError=b,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function Bx(i,r,l,f,g,b,T,M,P,K,st,ct){return i=new vT(i,r,l,T,P,K,st,ct,M),r=1,b===!0&&(r|=24),b=hi(3,null,null,r),i.current=b,b.stateNode=i,r=qd(),r.refCount++,i.pooledCache=r,r.refCount++,b.memoizedState={element:f,isDehydrated:l,cache:r},Zd(b),i}function Ux(i){return i?(i=Oa,i):Oa}function zx(i,r,l,f,g,b){g=Ux(g),f.context===null?f.context=g:f.pendingContext=g,f=ar(r),f.payload={element:l},b=b===void 0?null:b,b!==null&&(f.callback=b),l=or(i,f,r),l!==null&&(ri(l,i,r),nl(l,i,r))}function Px(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<r?l:r}}function yp(i,r){Px(i,r),(i=i.alternate)&&Px(i,r)}function Hx(i){if(i.tag===13||i.tag===31){var r=Gr(i,67108864);r!==null&&ri(r,i,67108864),yp(i,67108864)}}function Fx(i){if(i.tag===13||i.tag===31){var r=bi();r=ps(r);var l=Gr(i,r);l!==null&&ri(l,i,r),yp(i,r)}}var Lu=!0;function ST(i,r,l,f){var g=O.T;O.T=null;var b=$.p;try{$.p=2,bp(i,r,l,f)}finally{$.p=b,O.T=g}}function _T(i,r,l,f){var g=O.T;O.T=null;var b=$.p;try{$.p=8,bp(i,r,l,f)}finally{$.p=b,O.T=g}}function bp(i,r,l,f){if(Lu){var g=xp(f);if(g===null)sp(i,r,f,Du,l),$x(i,f);else if(ET(g,i,r,l,f))f.stopPropagation();else if($x(i,f),r&4&&-1<wT.indexOf(i)){for(;g!==null;){var b=Ee(g);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var T=ze(b.pendingLanes);if(T!==0){var M=b;for(M.pendingLanes|=2,M.entangledLanes|=2;T;){var P=1<<31-fe(T);M.entanglements[1]|=P,T&=~P}ls(b),(Se&6)===0&&(bu=Ye()+500,bl(0))}}break;case 31:case 13:M=Gr(b,2),M!==null&&ri(M,b,2),vu(),yp(b,2)}if(b=xp(f),b===null&&sp(i,r,f,Du,l),b===g)break;g=b}g!==null&&f.stopPropagation()}else sp(i,r,f,null,l)}}function xp(i){return i=Ur(i),vp(i)}var Du=null;function vp(i){if(Du=null,i=gs(i),i!==null){var r=o(i);if(r===null)i=null;else{var l=r.tag;if(l===13){if(i=c(r),i!==null)return i;i=null}else if(l===31){if(i=u(r),i!==null)return i;i=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Du=i,null}function Gx(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Xe()){case ln:return 2;case Ze:return 8;case cn:case Xn:return 32;case X:return 268435456;default:return 32}default:return 32}}var Sp=!1,br=null,xr=null,vr=null,Al=new Map,Tl=new Map,Sr=[],wT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $x(i,r){switch(i){case"focusin":case"focusout":br=null;break;case"dragenter":case"dragleave":xr=null;break;case"mouseover":case"mouseout":vr=null;break;case"pointerover":case"pointerout":Al.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tl.delete(r.pointerId)}}function Cl(i,r,l,f,g,b){return i===null||i.nativeEvent!==b?(i={blockedOn:r,domEventName:l,eventSystemFlags:f,nativeEvent:b,targetContainers:[g]},r!==null&&(r=Ee(r),r!==null&&Hx(r)),i):(i.eventSystemFlags|=f,r=i.targetContainers,g!==null&&r.indexOf(g)===-1&&r.push(g),i)}function ET(i,r,l,f,g){switch(r){case"focusin":return br=Cl(br,i,r,l,f,g),!0;case"dragenter":return xr=Cl(xr,i,r,l,f,g),!0;case"mouseover":return vr=Cl(vr,i,r,l,f,g),!0;case"pointerover":var b=g.pointerId;return Al.set(b,Cl(Al.get(b)||null,i,r,l,f,g)),!0;case"gotpointercapture":return b=g.pointerId,Tl.set(b,Cl(Tl.get(b)||null,i,r,l,f,g)),!0}return!1}function Vx(i){var r=gs(i.target);if(r!==null){var l=o(r);if(l!==null){if(r=l.tag,r===13){if(r=c(l),r!==null){i.blockedOn=r,zo(i.priority,function(){Fx(l)});return}}else if(r===31){if(r=u(l),r!==null){i.blockedOn=r,zo(i.priority,function(){Fx(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Bu(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var l=xp(i.nativeEvent);if(l===null){l=i.nativeEvent;var f=new l.constructor(l.type,l);Br=f,l.target.dispatchEvent(f),Br=null}else return r=Ee(l),r!==null&&Hx(r),i.blockedOn=l,!1;r.shift()}return!0}function Wx(i,r,l){Bu(i)&&l.delete(r)}function AT(){Sp=!1,br!==null&&Bu(br)&&(br=null),xr!==null&&Bu(xr)&&(xr=null),vr!==null&&Bu(vr)&&(vr=null),Al.forEach(Wx),Tl.forEach(Wx)}function Uu(i,r){i.blockedOn===r&&(i.blockedOn=null,Sp||(Sp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,AT)))}var zu=null;function Yx(i){zu!==i&&(zu=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){zu===i&&(zu=null);for(var r=0;r<i.length;r+=3){var l=i[r],f=i[r+1],g=i[r+2];if(typeof f!="function"){if(vp(f||l)===null)continue;break}var b=Ee(l);b!==null&&(i.splice(r,3),r-=3,xh(b,{pending:!0,data:g,method:l.method,action:f},f,g))}}))}function no(i){function r(P){return Uu(P,i)}br!==null&&Uu(br,i),xr!==null&&Uu(xr,i),vr!==null&&Uu(vr,i),Al.forEach(r),Tl.forEach(r);for(var l=0;l<Sr.length;l++){var f=Sr[l];f.blockedOn===i&&(f.blockedOn=null)}for(;0<Sr.length&&(l=Sr[0],l.blockedOn===null);)Vx(l),l.blockedOn===null&&Sr.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(f=0;f<l.length;f+=3){var g=l[f],b=l[f+1],T=g[un]||null;if(typeof b=="function")T||Yx(l);else if(T){var M=null;if(b&&b.hasAttribute("formAction")){if(g=b,T=b[un]||null)M=T.formAction;else if(vp(g)!==null)continue}else M=T.action;typeof M=="function"?l[f+1]=M:(l.splice(f,3),f-=3),Yx(l)}}}function Xx(){function i(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(T){return g=T})},focusReset:"manual",scroll:"manual"})}function r(){g!==null&&(g(),g=null),f||setTimeout(l,20)}function l(){if(!f&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){f=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),g!==null&&(g(),g=null)}}}function _p(i){this._internalRoot=i}Pu.prototype.render=_p.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var l=r.current,f=bi();zx(l,f,i,r,null,null)},Pu.prototype.unmount=_p.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;zx(i.current,2,null,i,null,null),vu(),r[ci]=null}};function Pu(i){this._internalRoot=i}Pu.prototype.unstable_scheduleHydration=function(i){if(i){var r=Mc();i={blockedOn:null,target:i,priority:r};for(var l=0;l<Sr.length&&r!==0&&r<Sr[l].priority;l++);Sr.splice(l,0,i),l===0&&Vx(i)}};var qx=t.version;if(qx!=="19.2.3")throw Error(s(527,qx,"19.2.3"));$.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=h(r),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var TT={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hu.isDisabled&&Hu.supportsFiber)try{Zt=Hu.inject(TT),Ht=Hu}catch{}}return jl.createRoot=function(i,r){if(!a(i))throw Error(s(299));var l=!1,f="",g=nb,b=ib,T=sb;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(g=r.onUncaughtError),r.onCaughtError!==void 0&&(b=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError)),r=Bx(i,1,!1,null,null,l,f,null,g,b,T,Xx),i[ci]=r.current,ip(i),new _p(r)},jl.hydrateRoot=function(i,r,l){if(!a(i))throw Error(s(299));var f=!1,g="",b=nb,T=ib,M=sb,P=null;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(M=l.onRecoverableError),l.formState!==void 0&&(P=l.formState)),r=Bx(i,1,!0,r,l??null,f,g,P,b,T,M,Xx),r.context=Ux(null),l=r.current,f=bi(),f=ps(f),g=ar(f),g.callback=null,or(l,g,f),l=f,r.current.lanes=l,Zi(r,l),ls(r),i[ci]=r.current,ip(i),new Pu(r)},jl.version="19.2.3",jl}var rv;function BT(){if(rv)return Ap.exports;rv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Ap.exports=DT(),Ap.exports}var UT=BT(),Jf=D_();function rc(){return rc=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},rc.apply(this,arguments)}var Ar;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ar||(Ar={}));const av="popstate";function zT(n){n===void 0&&(n={});function t(s,a){let{pathname:o,search:c,hash:u}=s.location;return Bm("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function e(s,a){return typeof a=="string"?a:B_(a)}return HT(t,e,null,n)}function En(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function Og(n,t){if(!n){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function PT(){return Math.random().toString(36).substr(2,8)}function ov(n,t){return{usr:n.state,key:n.key,idx:t}}function Bm(n,t,e,s){return e===void 0&&(e=null),rc({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof t=="string"?Ro(t):t,{state:e,key:t&&t.key||s||PT()})}function B_(n){let{pathname:t="/",search:e="",hash:s=""}=n;return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Ro(n){let t={};if(n){let e=n.indexOf("#");e>=0&&(t.hash=n.substr(e),n=n.substr(0,e));let s=n.indexOf("?");s>=0&&(t.search=n.substr(s),n=n.substr(0,s)),n&&(t.pathname=n)}return t}function HT(n,t,e,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:o=!1}=s,c=a.history,u=Ar.Pop,d=null,h=p();h==null&&(h=0,c.replaceState(rc({},c.state,{idx:h}),""));function p(){return(c.state||{idx:null}).idx}function y(){u=Ar.Pop;let _=p(),A=_==null?null:_-h;h=_,d&&d({action:u,location:w.location,delta:A})}function x(_,A){u=Ar.Push;let R=Bm(w.location,_,A);h=p()+1;let C=ov(R,h),j=w.createHref(R);try{c.pushState(C,"",j)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;a.location.assign(j)}o&&d&&d({action:u,location:w.location,delta:1})}function v(_,A){u=Ar.Replace;let R=Bm(w.location,_,A);h=p();let C=ov(R,h),j=w.createHref(R);c.replaceState(C,"",j),o&&d&&d({action:u,location:w.location,delta:0})}function S(_){let A=a.location.origin!=="null"?a.location.origin:a.location.href,R=typeof _=="string"?_:B_(_);return R=R.replace(/ $/,"%20"),En(A,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,A)}let w={get action(){return u},get location(){return n(a,c)},listen(_){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(av,y),d=_,()=>{a.removeEventListener(av,y),d=null}},createHref(_){return t(a,_)},createURL:S,encodeLocation(_){let A=S(_);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:x,replace:v,go(_){return c.go(_)}};return w}var lv;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(lv||(lv={}));function FT(n,t,e){return e===void 0&&(e="/"),GT(n,t,e)}function GT(n,t,e,s){let a=typeof t=="string"?Ro(t):t,o=P_(a.pathname||"/",e);if(o==null)return null;let c=U_(n);$T(c);let u=null;for(let d=0;u==null&&d<c.length;++d){let h=nC(o);u=ZT(c[d],h)}return u}function U_(n,t,e,s){t===void 0&&(t=[]),e===void 0&&(e=[]),s===void 0&&(s="");let a=(o,c,u)=>{let d={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};d.relativePath.startsWith("/")&&(En(d.relativePath.startsWith(s),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(s.length));let h=ga([s,d.relativePath]),p=e.concat(d);o.children&&o.children.length>0&&(En(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),U_(o.children,t,p,h)),!(o.path==null&&!o.index)&&t.push({path:h,score:QT(h,o.index),routesMeta:p})};return n.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))a(o,c);else for(let d of z_(o.path))a(o,c,d)}),t}function z_(n){let t=n.split("/");if(t.length===0)return[];let[e,...s]=t,a=e.endsWith("?"),o=e.replace(/\?$/,"");if(s.length===0)return a?[o,""]:[o];let c=z_(s.join("/")),u=[];return u.push(...c.map(d=>d===""?o:[o,d].join("/"))),a&&u.push(...c),u.map(d=>n.startsWith("/")&&d===""?"/":d)}function $T(n){n.sort((t,e)=>t.score!==e.score?e.score-t.score:JT(t.routesMeta.map(s=>s.childrenIndex),e.routesMeta.map(s=>s.childrenIndex)))}const VT=/^:[\w-]+$/,WT=3,YT=2,XT=1,qT=10,KT=-2,cv=n=>n==="*";function QT(n,t){let e=n.split("/"),s=e.length;return e.some(cv)&&(s+=KT),t&&(s+=YT),e.filter(a=>!cv(a)).reduce((a,o)=>a+(VT.test(o)?WT:o===""?XT:qT),s)}function JT(n,t){return n.length===t.length&&n.slice(0,-1).every((s,a)=>s===t[a])?n[n.length-1]-t[t.length-1]:0}function ZT(n,t,e){let{routesMeta:s}=n,a={},o="/",c=[];for(let u=0;u<s.length;++u){let d=s[u],h=u===s.length-1,p=o==="/"?t:t.slice(o.length)||"/",y=tC({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},p),x=d.route;if(!y)return null;Object.assign(a,y.params),c.push({params:a,pathname:ga([o,y.pathname]),pathnameBase:oC(ga([o,y.pathnameBase])),route:x}),y.pathnameBase!=="/"&&(o=ga([o,y.pathnameBase]))}return c}function tC(n,t){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[e,s]=eC(n.path,n.caseSensitive,n.end),a=t.match(e);if(!a)return null;let o=a[0],c=o.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:s.reduce((h,p,y)=>{let{paramName:x,isOptional:v}=p;if(x==="*"){let w=u[y]||"";c=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const S=u[y];return v&&!S?h[x]=void 0:h[x]=(S||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:c,pattern:n}}function eC(n,t,e){t===void 0&&(t=!1),e===void 0&&(e=!0),Og(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let s=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,d)=>(s.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function nC(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Og(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),n}}function P_(n,t){if(t==="/")return n;if(!n.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,s=n.charAt(e);return s&&s!=="/"?null:n.slice(e)||"/"}const iC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sC=n=>iC.test(n);function rC(n,t){t===void 0&&(t="/");let{pathname:e,search:s="",hash:a=""}=typeof n=="string"?Ro(n):n,o;if(e)if(sC(e))o=e;else{if(e.includes("//")){let c=e;e=e.replace(/\/\/+/g,"/"),Og(!1,"Pathnames cannot have embedded double slashes - normalizing "+(c+" -> "+e))}e.startsWith("/")?o=uv(e.substring(1),"/"):o=uv(e,t)}else o=t;return{pathname:o,search:lC(s),hash:cC(a)}}function uv(n,t){let e=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function jp(n,t,e,s){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+e+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function aC(n){return n.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function H_(n,t){let e=aC(n);return t?e.map((s,a)=>a===e.length-1?s.pathname:s.pathnameBase):e.map(s=>s.pathnameBase)}function F_(n,t,e,s){s===void 0&&(s=!1);let a;typeof n=="string"?a=Ro(n):(a=rc({},n),En(!a.pathname||!a.pathname.includes("?"),jp("?","pathname","search",a)),En(!a.pathname||!a.pathname.includes("#"),jp("#","pathname","hash",a)),En(!a.search||!a.search.includes("#"),jp("#","search","hash",a)));let o=n===""||a.pathname==="",c=o?"/":a.pathname,u;if(c==null)u=e;else{let y=t.length-1;if(!s&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),y-=1;a.pathname=x.join("/")}u=y>=0?t[y]:"/"}let d=rC(a,u),h=c&&c!=="/"&&c.endsWith("/"),p=(o||c===".")&&e.endsWith("/");return!d.pathname.endsWith("/")&&(h||p)&&(d.pathname+="/"),d}const ga=n=>n.join("/").replace(/\/\/+/g,"/"),oC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),lC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,cC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function uC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const G_=["post","put","patch","delete"];new Set(G_);const fC=["get",...G_];new Set(fC);function ac(){return ac=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},ac.apply(this,arguments)}const Ng=E.createContext(null),dC=E.createContext(null),yc=E.createContext(null),Zf=E.createContext(null),Ir=E.createContext({outlet:null,matches:[],isDataRoute:!1}),$_=E.createContext(null);function bc(){return E.useContext(Zf)!=null}function li(){return bc()||En(!1),E.useContext(Zf).location}function V_(n){E.useContext(yc).static||E.useLayoutEffect(n)}function en(){let{isDataRoute:n}=E.useContext(Ir);return n?AC():hC()}function hC(){bc()||En(!1);let n=E.useContext(Ng),{basename:t,future:e,navigator:s}=E.useContext(yc),{matches:a}=E.useContext(Ir),{pathname:o}=li(),c=JSON.stringify(H_(a,e.v7_relativeSplatPath)),u=E.useRef(!1);return V_(()=>{u.current=!0}),E.useCallback(function(h,p){if(p===void 0&&(p={}),!u.current)return;if(typeof h=="number"){s.go(h);return}let y=F_(h,JSON.parse(c),o,p.relative==="path");n==null&&t!=="/"&&(y.pathname=y.pathname==="/"?t:ga([t,y.pathname])),(p.replace?s.replace:s.push)(y,p.state,p)},[t,s,c,o,n])}function td(){let{matches:n}=E.useContext(Ir),t=n[n.length-1];return t?t.params:{}}function pC(n,t){return mC(n,t)}function mC(n,t,e,s){bc()||En(!1);let{navigator:a}=E.useContext(yc),{matches:o}=E.useContext(Ir),c=o[o.length-1],u=c?c.params:{};c&&c.pathname;let d=c?c.pathnameBase:"/";c&&c.route;let h=li(),p;if(t){var y;let _=typeof t=="string"?Ro(t):t;d==="/"||(y=_.pathname)!=null&&y.startsWith(d)||En(!1),p=_}else p=h;let x=p.pathname||"/",v=x;if(d!=="/"){let _=d.replace(/^\//,"").split("/");v="/"+x.replace(/^\//,"").split("/").slice(_.length).join("/")}let S=FT(n,{pathname:v}),w=vC(S&&S.map(_=>Object.assign({},_,{params:Object.assign({},u,_.params),pathname:ga([d,a.encodeLocation?a.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?d:ga([d,a.encodeLocation?a.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),o,e,s);return t&&w?E.createElement(Zf.Provider,{value:{location:ac({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Ar.Pop}},w):w}function gC(){let n=EC(),t=uC(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),e=n instanceof Error?n.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},t),e?E.createElement("pre",{style:a},e):null,null)}const yC=E.createElement(gC,null);class bC extends E.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?E.createElement(Ir.Provider,{value:this.props.routeContext},E.createElement($_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xC(n){let{routeContext:t,match:e,children:s}=n,a=E.useContext(Ng);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),E.createElement(Ir.Provider,{value:t},s)}function vC(n,t,e,s){var a;if(t===void 0&&(t=[]),e===void 0&&(e=null),s===void 0&&(s=null),n==null){var o;if(!e)return null;if(e.errors)n=e.matches;else if((o=s)!=null&&o.v7_partialHydration&&t.length===0&&!e.initialized&&e.matches.length>0)n=e.matches;else return null}let c=n,u=(a=e)==null?void 0:a.errors;if(u!=null){let p=c.findIndex(y=>y.route.id&&u?.[y.route.id]!==void 0);p>=0||En(!1),c=c.slice(0,Math.min(c.length,p+1))}let d=!1,h=-1;if(e&&s&&s.v7_partialHydration)for(let p=0;p<c.length;p++){let y=c[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(h=p),y.route.id){let{loaderData:x,errors:v}=e,S=y.route.loader&&x[y.route.id]===void 0&&(!v||v[y.route.id]===void 0);if(y.route.lazy||S){d=!0,h>=0?c=c.slice(0,h+1):c=[c[0]];break}}}return c.reduceRight((p,y,x)=>{let v,S=!1,w=null,_=null;e&&(v=u&&y.route.id?u[y.route.id]:void 0,w=y.route.errorElement||yC,d&&(h<0&&x===0?(TC("route-fallback"),S=!0,_=null):h===x&&(S=!0,_=y.route.hydrateFallbackElement||null)));let A=t.concat(c.slice(0,x+1)),R=()=>{let C;return v?C=w:S?C=_:y.route.Component?C=E.createElement(y.route.Component,null):y.route.element?C=y.route.element:C=p,E.createElement(xC,{match:y,routeContext:{outlet:p,matches:A,isDataRoute:e!=null},children:C})};return e&&(y.route.ErrorBoundary||y.route.errorElement||x===0)?E.createElement(bC,{location:e.location,revalidation:e.revalidation,component:w,error:v,children:R(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):R()},null)}var W_=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(W_||{}),Y_=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(Y_||{});function SC(n){let t=E.useContext(Ng);return t||En(!1),t}function _C(n){let t=E.useContext(dC);return t||En(!1),t}function wC(n){let t=E.useContext(Ir);return t||En(!1),t}function X_(n){let t=wC(),e=t.matches[t.matches.length-1];return e.route.id||En(!1),e.route.id}function EC(){var n;let t=E.useContext($_),e=_C(),s=X_();return t!==void 0?t:(n=e.errors)==null?void 0:n[s]}function AC(){let{router:n}=SC(W_.UseNavigateStable),t=X_(Y_.UseNavigateStable),e=E.useRef(!1);return V_(()=>{e.current=!0}),E.useCallback(function(a,o){o===void 0&&(o={}),e.current&&(typeof a=="number"?n.navigate(a):n.navigate(a,ac({fromRouteId:t},o)))},[n,t])}const fv={};function TC(n,t,e){fv[n]||(fv[n]=!0)}function CC(n,t){n?.v7_startTransition,n?.v7_relativeSplatPath}function q_(n){let{to:t,replace:e,state:s,relative:a}=n;bc()||En(!1);let{future:o,static:c}=E.useContext(yc),{matches:u}=E.useContext(Ir),{pathname:d}=li(),h=en(),p=F_(t,H_(u,o.v7_relativeSplatPath),d,a==="path"),y=JSON.stringify(p);return E.useEffect(()=>h(JSON.parse(y),{replace:e,state:s,relative:a}),[h,y,a,e,s]),null}function Cn(n){En(!1)}function RC(n){let{basename:t="/",children:e=null,location:s,navigationType:a=Ar.Pop,navigator:o,static:c=!1,future:u}=n;bc()&&En(!1);let d=t.replace(/^\/*/,"/"),h=E.useMemo(()=>({basename:d,navigator:o,static:c,future:ac({v7_relativeSplatPath:!1},u)}),[d,u,o,c]);typeof s=="string"&&(s=Ro(s));let{pathname:p="/",search:y="",hash:x="",state:v=null,key:S="default"}=s,w=E.useMemo(()=>{let _=P_(p,d);return _==null?null:{location:{pathname:_,search:y,hash:x,state:v,key:S},navigationType:a}},[d,p,y,x,v,S,a]);return w==null?null:E.createElement(yc.Provider,{value:h},E.createElement(Zf.Provider,{children:e,value:w}))}function jC(n){let{children:t,location:e}=n;return pC(Um(t),e)}new Promise(()=>{});function Um(n,t){t===void 0&&(t=[]);let e=[];return E.Children.forEach(n,(s,a)=>{if(!E.isValidElement(s))return;let o=[...t,a];if(s.type===E.Fragment){e.push.apply(e,Um(s.props.children,o));return}s.type!==Cn&&En(!1),!s.props.index||!s.props.children||En(!1);let c={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=Um(s.props.children,o)),e.push(c)}),e}function zm(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((t,e)=>{let s=n[e];return t.concat(Array.isArray(s)?s.map(a=>[e,a]):[[e,s]])},[]))}function MC(n,t){let e=zm(n);return t&&t.forEach((s,a)=>{e.has(a)||t.getAll(a).forEach(o=>{e.append(a,o)})}),e}const kC="6";try{window.__reactRouterVersion=kC}catch{}const OC="startTransition",dv=OT[OC];function NC(n){let{basename:t,children:e,future:s,window:a}=n,o=E.useRef();o.current==null&&(o.current=zT({window:a,v5Compat:!0}));let c=o.current,[u,d]=E.useState({action:c.action,location:c.location}),{v7_startTransition:h}=s||{},p=E.useCallback(y=>{h&&dv?dv(()=>d(y)):d(y)},[d,h]);return E.useLayoutEffect(()=>c.listen(p),[c,p]),E.useEffect(()=>CC(s),[s]),E.createElement(RC,{basename:t,children:e,location:u.location,navigationType:u.action,navigator:c,future:s})}var hv;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(hv||(hv={}));var pv;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(pv||(pv={}));function K_(n){let t=E.useRef(zm(n)),e=E.useRef(!1),s=li(),a=E.useMemo(()=>MC(s.search,e.current?null:t.current),[s.search]),o=en(),c=E.useCallback((u,d)=>{const h=zm(typeof u=="function"?u(a):u);e.current=!0,o("?"+h,d)},[o,a]);return[a,c]}function Q_(n,t){return function(){return n.apply(t,arguments)}}const{toString:IC}=Object.prototype,{getPrototypeOf:Ig}=Object,{iterator:ed,toStringTag:J_}=Symbol,nd=(n=>t=>{const e=IC.call(t);return n[e]||(n[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),qi=n=>(n=n.toLowerCase(),t=>nd(t)===n),id=n=>t=>typeof t===n,{isArray:jo}=Array,So=id("undefined");function xc(n){return n!==null&&!So(n)&&n.constructor!==null&&!So(n.constructor)&&ai(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const Z_=qi("ArrayBuffer");function LC(n){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(n):t=n&&n.buffer&&Z_(n.buffer),t}const DC=id("string"),ai=id("function"),tw=id("number"),vc=n=>n!==null&&typeof n=="object",BC=n=>n===!0||n===!1,Af=n=>{if(nd(n)!=="object")return!1;const t=Ig(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(J_ in n)&&!(ed in n)},UC=n=>{if(!vc(n)||xc(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},zC=qi("Date"),PC=qi("File"),HC=qi("Blob"),FC=qi("FileList"),GC=n=>vc(n)&&ai(n.pipe),$C=n=>{let t;return n&&(typeof FormData=="function"&&n instanceof FormData||ai(n.append)&&((t=nd(n))==="formdata"||t==="object"&&ai(n.toString)&&n.toString()==="[object FormData]"))},VC=qi("URLSearchParams"),[WC,YC,XC,qC]=["ReadableStream","Request","Response","Headers"].map(qi),KC=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Sc(n,t,{allOwnKeys:e=!1}={}){if(n===null||typeof n>"u")return;let s,a;if(typeof n!="object"&&(n=[n]),jo(n))for(s=0,a=n.length;s<a;s++)t.call(null,n[s],s,n);else{if(xc(n))return;const o=e?Object.getOwnPropertyNames(n):Object.keys(n),c=o.length;let u;for(s=0;s<c;s++)u=o[s],t.call(null,n[u],u,n)}}function ew(n,t){if(xc(n))return null;t=t.toLowerCase();const e=Object.keys(n);let s=e.length,a;for(;s-- >0;)if(a=e[s],t===a.toLowerCase())return a;return null}const fa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,nw=n=>!So(n)&&n!==fa;function Pm(){const{caseless:n,skipUndefined:t}=nw(this)&&this||{},e={},s=(a,o)=>{const c=n&&ew(e,o)||o;Af(e[c])&&Af(a)?e[c]=Pm(e[c],a):Af(a)?e[c]=Pm({},a):jo(a)?e[c]=a.slice():(!t||!So(a))&&(e[c]=a)};for(let a=0,o=arguments.length;a<o;a++)arguments[a]&&Sc(arguments[a],s);return e}const QC=(n,t,e,{allOwnKeys:s}={})=>(Sc(t,(a,o)=>{e&&ai(a)?n[o]=Q_(a,e):n[o]=a},{allOwnKeys:s}),n),JC=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),ZC=(n,t,e,s)=>{n.prototype=Object.create(t.prototype,s),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:t.prototype}),e&&Object.assign(n.prototype,e)},tR=(n,t,e,s)=>{let a,o,c;const u={};if(t=t||{},n==null)return t;do{for(a=Object.getOwnPropertyNames(n),o=a.length;o-- >0;)c=a[o],(!s||s(c,n,t))&&!u[c]&&(t[c]=n[c],u[c]=!0);n=e!==!1&&Ig(n)}while(n&&(!e||e(n,t))&&n!==Object.prototype);return t},eR=(n,t,e)=>{n=String(n),(e===void 0||e>n.length)&&(e=n.length),e-=t.length;const s=n.indexOf(t,e);return s!==-1&&s===e},nR=n=>{if(!n)return null;if(jo(n))return n;let t=n.length;if(!tw(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=n[t];return e},iR=(n=>t=>n&&t instanceof n)(typeof Uint8Array<"u"&&Ig(Uint8Array)),sR=(n,t)=>{const s=(n&&n[ed]).call(n);let a;for(;(a=s.next())&&!a.done;){const o=a.value;t.call(n,o[0],o[1])}},rR=(n,t)=>{let e;const s=[];for(;(e=n.exec(t))!==null;)s.push(e);return s},aR=qi("HTMLFormElement"),oR=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,s,a){return s.toUpperCase()+a}),mv=(({hasOwnProperty:n})=>(t,e)=>n.call(t,e))(Object.prototype),lR=qi("RegExp"),iw=(n,t)=>{const e=Object.getOwnPropertyDescriptors(n),s={};Sc(e,(a,o)=>{let c;(c=t(a,o,n))!==!1&&(s[o]=c||a)}),Object.defineProperties(n,s)},cR=n=>{iw(n,(t,e)=>{if(ai(n)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const s=n[e];if(ai(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},uR=(n,t)=>{const e={},s=a=>{a.forEach(o=>{e[o]=!0})};return jo(n)?s(n):s(String(n).split(t)),e},fR=()=>{},dR=(n,t)=>n!=null&&Number.isFinite(n=+n)?n:t;function hR(n){return!!(n&&ai(n.append)&&n[J_]==="FormData"&&n[ed])}const pR=n=>{const t=new Array(10),e=(s,a)=>{if(vc(s)){if(t.indexOf(s)>=0)return;if(xc(s))return s;if(!("toJSON"in s)){t[a]=s;const o=jo(s)?[]:{};return Sc(s,(c,u)=>{const d=e(c,a+1);!So(d)&&(o[u]=d)}),t[a]=void 0,o}}return s};return e(n,0)},mR=qi("AsyncFunction"),gR=n=>n&&(vc(n)||ai(n))&&ai(n.then)&&ai(n.catch),sw=((n,t)=>n?setImmediate:t?((e,s)=>(fa.addEventListener("message",({source:a,data:o})=>{a===fa&&o===e&&s.length&&s.shift()()},!1),a=>{s.push(a),fa.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",ai(fa.postMessage)),yR=typeof queueMicrotask<"u"?queueMicrotask.bind(fa):typeof process<"u"&&process.nextTick||sw,bR=n=>n!=null&&ai(n[ed]),Z={isArray:jo,isArrayBuffer:Z_,isBuffer:xc,isFormData:$C,isArrayBufferView:LC,isString:DC,isNumber:tw,isBoolean:BC,isObject:vc,isPlainObject:Af,isEmptyObject:UC,isReadableStream:WC,isRequest:YC,isResponse:XC,isHeaders:qC,isUndefined:So,isDate:zC,isFile:PC,isBlob:HC,isRegExp:lR,isFunction:ai,isStream:GC,isURLSearchParams:VC,isTypedArray:iR,isFileList:FC,forEach:Sc,merge:Pm,extend:QC,trim:KC,stripBOM:JC,inherits:ZC,toFlatObject:tR,kindOf:nd,kindOfTest:qi,endsWith:eR,toArray:nR,forEachEntry:sR,matchAll:rR,isHTMLForm:aR,hasOwnProperty:mv,hasOwnProp:mv,reduceDescriptors:iw,freezeMethods:cR,toObjectSet:uR,toCamelCase:oR,noop:fR,toFiniteNumber:dR,findKey:ew,global:fa,isContextDefined:nw,isSpecCompliantForm:hR,toJSONObject:pR,isAsyncFn:mR,isThenable:gR,setImmediate:sw,asap:yR,isIterable:bR};function Qt(n,t,e,s,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),s&&(this.request=s),a&&(this.response=a,this.status=a.status?a.status:null)}Z.inherits(Qt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Z.toJSONObject(this.config),code:this.code,status:this.status}}});const rw=Qt.prototype,aw={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{aw[n]={value:n}});Object.defineProperties(Qt,aw);Object.defineProperty(rw,"isAxiosError",{value:!0});Qt.from=(n,t,e,s,a,o)=>{const c=Object.create(rw);Z.toFlatObject(n,c,function(p){return p!==Error.prototype},h=>h!=="isAxiosError");const u=n&&n.message?n.message:"Error",d=t==null&&n?n.code:t;return Qt.call(c,u,d,e,s,a),n&&c.cause==null&&Object.defineProperty(c,"cause",{value:n,configurable:!0}),c.name=n&&n.name||"Error",o&&Object.assign(c,o),c};const xR=null;function Hm(n){return Z.isPlainObject(n)||Z.isArray(n)}function ow(n){return Z.endsWith(n,"[]")?n.slice(0,-2):n}function gv(n,t,e){return n?n.concat(t).map(function(a,o){return a=ow(a),!e&&o?"["+a+"]":a}).join(e?".":""):t}function vR(n){return Z.isArray(n)&&!n.some(Hm)}const SR=Z.toFlatObject(Z,{},null,function(t){return/^is[A-Z]/.test(t)});function sd(n,t,e){if(!Z.isObject(n))throw new TypeError("target must be an object");t=t||new FormData,e=Z.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,_){return!Z.isUndefined(_[w])});const s=e.metaTokens,a=e.visitor||p,o=e.dots,c=e.indexes,d=(e.Blob||typeof Blob<"u"&&Blob)&&Z.isSpecCompliantForm(t);if(!Z.isFunction(a))throw new TypeError("visitor must be a function");function h(S){if(S===null)return"";if(Z.isDate(S))return S.toISOString();if(Z.isBoolean(S))return S.toString();if(!d&&Z.isBlob(S))throw new Qt("Blob is not supported. Use a Buffer instead.");return Z.isArrayBuffer(S)||Z.isTypedArray(S)?d&&typeof Blob=="function"?new Blob([S]):Buffer.from(S):S}function p(S,w,_){let A=S;if(S&&!_&&typeof S=="object"){if(Z.endsWith(w,"{}"))w=s?w:w.slice(0,-2),S=JSON.stringify(S);else if(Z.isArray(S)&&vR(S)||(Z.isFileList(S)||Z.endsWith(w,"[]"))&&(A=Z.toArray(S)))return w=ow(w),A.forEach(function(C,j){!(Z.isUndefined(C)||C===null)&&t.append(c===!0?gv([w],j,o):c===null?w:w+"[]",h(C))}),!1}return Hm(S)?!0:(t.append(gv(_,w,o),h(S)),!1)}const y=[],x=Object.assign(SR,{defaultVisitor:p,convertValue:h,isVisitable:Hm});function v(S,w){if(!Z.isUndefined(S)){if(y.indexOf(S)!==-1)throw Error("Circular reference detected in "+w.join("."));y.push(S),Z.forEach(S,function(A,R){(!(Z.isUndefined(A)||A===null)&&a.call(t,A,Z.isString(R)?R.trim():R,w,x))===!0&&v(A,w?w.concat(R):[R])}),y.pop()}}if(!Z.isObject(n))throw new TypeError("data must be an object");return v(n),t}function yv(n){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function Lg(n,t){this._pairs=[],n&&sd(n,this,t)}const lw=Lg.prototype;lw.append=function(t,e){this._pairs.push([t,e])};lw.toString=function(t){const e=t?function(s){return t.call(this,s,yv)}:yv;return this._pairs.map(function(a){return e(a[0])+"="+e(a[1])},"").join("&")};function _R(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function cw(n,t,e){if(!t)return n;const s=e&&e.encode||_R;Z.isFunction(e)&&(e={serialize:e});const a=e&&e.serialize;let o;if(a?o=a(t,e):o=Z.isURLSearchParams(t)?t.toString():new Lg(t,e).toString(s),o){const c=n.indexOf("#");c!==-1&&(n=n.slice(0,c)),n+=(n.indexOf("?")===-1?"?":"&")+o}return n}class bv{constructor(){this.handlers=[]}use(t,e,s){return this.handlers.push({fulfilled:t,rejected:e,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Z.forEach(this.handlers,function(s){s!==null&&t(s)})}}const uw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},wR=typeof URLSearchParams<"u"?URLSearchParams:Lg,ER=typeof FormData<"u"?FormData:null,AR=typeof Blob<"u"?Blob:null,TR={isBrowser:!0,classes:{URLSearchParams:wR,FormData:ER,Blob:AR},protocols:["http","https","file","blob","url","data"]},Dg=typeof window<"u"&&typeof document<"u",Fm=typeof navigator=="object"&&navigator||void 0,CR=Dg&&(!Fm||["ReactNative","NativeScript","NS"].indexOf(Fm.product)<0),RR=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",jR=Dg&&window.location.href||"http://localhost",MR=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Dg,hasStandardBrowserEnv:CR,hasStandardBrowserWebWorkerEnv:RR,navigator:Fm,origin:jR},Symbol.toStringTag,{value:"Module"})),$n={...MR,...TR};function kR(n,t){return sd(n,new $n.classes.URLSearchParams,{visitor:function(e,s,a,o){return $n.isNode&&Z.isBuffer(e)?(this.append(s,e.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...t})}function OR(n){return Z.matchAll(/\w+|\[(\w*)]/g,n).map(t=>t[0]==="[]"?"":t[1]||t[0])}function NR(n){const t={},e=Object.keys(n);let s;const a=e.length;let o;for(s=0;s<a;s++)o=e[s],t[o]=n[o];return t}function fw(n){function t(e,s,a,o){let c=e[o++];if(c==="__proto__")return!0;const u=Number.isFinite(+c),d=o>=e.length;return c=!c&&Z.isArray(a)?a.length:c,d?(Z.hasOwnProp(a,c)?a[c]=[a[c],s]:a[c]=s,!u):((!a[c]||!Z.isObject(a[c]))&&(a[c]=[]),t(e,s,a[c],o)&&Z.isArray(a[c])&&(a[c]=NR(a[c])),!u)}if(Z.isFormData(n)&&Z.isFunction(n.entries)){const e={};return Z.forEachEntry(n,(s,a)=>{t(OR(s),a,e,0)}),e}return null}function IR(n,t,e){if(Z.isString(n))try{return(t||JSON.parse)(n),Z.trim(n)}catch(s){if(s.name!=="SyntaxError")throw s}return(e||JSON.stringify)(n)}const _c={transitional:uw,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const s=e.getContentType()||"",a=s.indexOf("application/json")>-1,o=Z.isObject(t);if(o&&Z.isHTMLForm(t)&&(t=new FormData(t)),Z.isFormData(t))return a?JSON.stringify(fw(t)):t;if(Z.isArrayBuffer(t)||Z.isBuffer(t)||Z.isStream(t)||Z.isFile(t)||Z.isBlob(t)||Z.isReadableStream(t))return t;if(Z.isArrayBufferView(t))return t.buffer;if(Z.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let u;if(o){if(s.indexOf("application/x-www-form-urlencoded")>-1)return kR(t,this.formSerializer).toString();if((u=Z.isFileList(t))||s.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return sd(u?{"files[]":t}:t,d&&new d,this.formSerializer)}}return o||a?(e.setContentType("application/json",!1),IR(t)):t}],transformResponse:[function(t){const e=this.transitional||_c.transitional,s=e&&e.forcedJSONParsing,a=this.responseType==="json";if(Z.isResponse(t)||Z.isReadableStream(t))return t;if(t&&Z.isString(t)&&(s&&!this.responseType||a)){const c=!(e&&e.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(u){if(c)throw u.name==="SyntaxError"?Qt.from(u,Qt.ERR_BAD_RESPONSE,this,null,this.response):u}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$n.classes.FormData,Blob:$n.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Z.forEach(["delete","get","head","post","put","patch"],n=>{_c.headers[n]={}});const LR=Z.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),DR=n=>{const t={};let e,s,a;return n&&n.split(`
`).forEach(function(c){a=c.indexOf(":"),e=c.substring(0,a).trim().toLowerCase(),s=c.substring(a+1).trim(),!(!e||t[e]&&LR[e])&&(e==="set-cookie"?t[e]?t[e].push(s):t[e]=[s]:t[e]=t[e]?t[e]+", "+s:s)}),t},xv=Symbol("internals");function Ml(n){return n&&String(n).trim().toLowerCase()}function Tf(n){return n===!1||n==null?n:Z.isArray(n)?n.map(Tf):String(n)}function BR(n){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=e.exec(n);)t[s[1]]=s[2];return t}const UR=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Mp(n,t,e,s,a){if(Z.isFunction(s))return s.call(this,t,e);if(a&&(t=e),!!Z.isString(t)){if(Z.isString(s))return t.indexOf(s)!==-1;if(Z.isRegExp(s))return s.test(t)}}function zR(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,s)=>e.toUpperCase()+s)}function PR(n,t){const e=Z.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(n,s+e,{value:function(a,o,c){return this[s].call(this,t,a,o,c)},configurable:!0})})}let oi=class{constructor(t){t&&this.set(t)}set(t,e,s){const a=this;function o(u,d,h){const p=Ml(d);if(!p)throw new Error("header name must be a non-empty string");const y=Z.findKey(a,p);(!y||a[y]===void 0||h===!0||h===void 0&&a[y]!==!1)&&(a[y||d]=Tf(u))}const c=(u,d)=>Z.forEach(u,(h,p)=>o(h,p,d));if(Z.isPlainObject(t)||t instanceof this.constructor)c(t,e);else if(Z.isString(t)&&(t=t.trim())&&!UR(t))c(DR(t),e);else if(Z.isObject(t)&&Z.isIterable(t)){let u={},d,h;for(const p of t){if(!Z.isArray(p))throw TypeError("Object iterator must return a key-value pair");u[h=p[0]]=(d=u[h])?Z.isArray(d)?[...d,p[1]]:[d,p[1]]:p[1]}c(u,e)}else t!=null&&o(e,t,s);return this}get(t,e){if(t=Ml(t),t){const s=Z.findKey(this,t);if(s){const a=this[s];if(!e)return a;if(e===!0)return BR(a);if(Z.isFunction(e))return e.call(this,a,s);if(Z.isRegExp(e))return e.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Ml(t),t){const s=Z.findKey(this,t);return!!(s&&this[s]!==void 0&&(!e||Mp(this,this[s],s,e)))}return!1}delete(t,e){const s=this;let a=!1;function o(c){if(c=Ml(c),c){const u=Z.findKey(s,c);u&&(!e||Mp(s,s[u],u,e))&&(delete s[u],a=!0)}}return Z.isArray(t)?t.forEach(o):o(t),a}clear(t){const e=Object.keys(this);let s=e.length,a=!1;for(;s--;){const o=e[s];(!t||Mp(this,this[o],o,t,!0))&&(delete this[o],a=!0)}return a}normalize(t){const e=this,s={};return Z.forEach(this,(a,o)=>{const c=Z.findKey(s,o);if(c){e[c]=Tf(a),delete e[o];return}const u=t?zR(o):String(o).trim();u!==o&&delete e[o],e[u]=Tf(a),s[u]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return Z.forEach(this,(s,a)=>{s!=null&&s!==!1&&(e[a]=t&&Z.isArray(s)?s.join(", "):s)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const s=new this(t);return e.forEach(a=>s.set(a)),s}static accessor(t){const s=(this[xv]=this[xv]={accessors:{}}).accessors,a=this.prototype;function o(c){const u=Ml(c);s[u]||(PR(a,c),s[u]=!0)}return Z.isArray(t)?t.forEach(o):o(t),this}};oi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Z.reduceDescriptors(oi.prototype,({value:n},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(s){this[e]=s}}});Z.freezeMethods(oi);function kp(n,t){const e=this||_c,s=t||e,a=oi.from(s.headers);let o=s.data;return Z.forEach(n,function(u){o=u.call(e,o,a.normalize(),t?t.status:void 0)}),a.normalize(),o}function dw(n){return!!(n&&n.__CANCEL__)}function Mo(n,t,e){Qt.call(this,n??"canceled",Qt.ERR_CANCELED,t,e),this.name="CanceledError"}Z.inherits(Mo,Qt,{__CANCEL__:!0});function hw(n,t,e){const s=e.config.validateStatus;!e.status||!s||s(e.status)?n(e):t(new Qt("Request failed with status code "+e.status,[Qt.ERR_BAD_REQUEST,Qt.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function HR(n){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return t&&t[1]||""}function FR(n,t){n=n||10;const e=new Array(n),s=new Array(n);let a=0,o=0,c;return t=t!==void 0?t:1e3,function(d){const h=Date.now(),p=s[o];c||(c=h),e[a]=d,s[a]=h;let y=o,x=0;for(;y!==a;)x+=e[y++],y=y%n;if(a=(a+1)%n,a===o&&(o=(o+1)%n),h-c<t)return;const v=p&&h-p;return v?Math.round(x*1e3/v):void 0}}function GR(n,t){let e=0,s=1e3/t,a,o;const c=(h,p=Date.now())=>{e=p,a=null,o&&(clearTimeout(o),o=null),n(...h)};return[(...h)=>{const p=Date.now(),y=p-e;y>=s?c(h,p):(a=h,o||(o=setTimeout(()=>{o=null,c(a)},s-y)))},()=>a&&c(a)]}const Lf=(n,t,e=3)=>{let s=0;const a=FR(50,250);return GR(o=>{const c=o.loaded,u=o.lengthComputable?o.total:void 0,d=c-s,h=a(d),p=c<=u;s=c;const y={loaded:c,total:u,progress:u?c/u:void 0,bytes:d,rate:h||void 0,estimated:h&&u&&p?(u-c)/h:void 0,event:o,lengthComputable:u!=null,[t?"download":"upload"]:!0};n(y)},e)},vv=(n,t)=>{const e=n!=null;return[s=>t[0]({lengthComputable:e,total:n,loaded:s}),t[1]]},Sv=n=>(...t)=>Z.asap(()=>n(...t)),$R=$n.hasStandardBrowserEnv?((n,t)=>e=>(e=new URL(e,$n.origin),n.protocol===e.protocol&&n.host===e.host&&(t||n.port===e.port)))(new URL($n.origin),$n.navigator&&/(msie|trident)/i.test($n.navigator.userAgent)):()=>!0,VR=$n.hasStandardBrowserEnv?{write(n,t,e,s,a,o,c){if(typeof document>"u")return;const u=[`${n}=${encodeURIComponent(t)}`];Z.isNumber(e)&&u.push(`expires=${new Date(e).toUTCString()}`),Z.isString(s)&&u.push(`path=${s}`),Z.isString(a)&&u.push(`domain=${a}`),o===!0&&u.push("secure"),Z.isString(c)&&u.push(`SameSite=${c}`),document.cookie=u.join("; ")},read(n){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function WR(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function YR(n,t){return t?n.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):n}function pw(n,t,e){let s=!WR(t);return n&&(s||e==!1)?YR(n,t):t}const _v=n=>n instanceof oi?{...n}:n;function ba(n,t){t=t||{};const e={};function s(h,p,y,x){return Z.isPlainObject(h)&&Z.isPlainObject(p)?Z.merge.call({caseless:x},h,p):Z.isPlainObject(p)?Z.merge({},p):Z.isArray(p)?p.slice():p}function a(h,p,y,x){if(Z.isUndefined(p)){if(!Z.isUndefined(h))return s(void 0,h,y,x)}else return s(h,p,y,x)}function o(h,p){if(!Z.isUndefined(p))return s(void 0,p)}function c(h,p){if(Z.isUndefined(p)){if(!Z.isUndefined(h))return s(void 0,h)}else return s(void 0,p)}function u(h,p,y){if(y in t)return s(h,p);if(y in n)return s(void 0,h)}const d={url:o,method:o,data:o,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:u,headers:(h,p,y)=>a(_v(h),_v(p),y,!0)};return Z.forEach(Object.keys({...n,...t}),function(p){const y=d[p]||a,x=y(n[p],t[p],p);Z.isUndefined(x)&&y!==u||(e[p]=x)}),e}const mw=n=>{const t=ba({},n);let{data:e,withXSRFToken:s,xsrfHeaderName:a,xsrfCookieName:o,headers:c,auth:u}=t;if(t.headers=c=oi.from(c),t.url=cw(pw(t.baseURL,t.url,t.allowAbsoluteUrls),n.params,n.paramsSerializer),u&&c.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):""))),Z.isFormData(e)){if($n.hasStandardBrowserEnv||$n.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if(Z.isFunction(e.getHeaders)){const d=e.getHeaders(),h=["content-type","content-length"];Object.entries(d).forEach(([p,y])=>{h.includes(p.toLowerCase())&&c.set(p,y)})}}if($n.hasStandardBrowserEnv&&(s&&Z.isFunction(s)&&(s=s(t)),s||s!==!1&&$R(t.url))){const d=a&&o&&VR.read(o);d&&c.set(a,d)}return t},XR=typeof XMLHttpRequest<"u",qR=XR&&function(n){return new Promise(function(e,s){const a=mw(n);let o=a.data;const c=oi.from(a.headers).normalize();let{responseType:u,onUploadProgress:d,onDownloadProgress:h}=a,p,y,x,v,S;function w(){v&&v(),S&&S(),a.cancelToken&&a.cancelToken.unsubscribe(p),a.signal&&a.signal.removeEventListener("abort",p)}let _=new XMLHttpRequest;_.open(a.method.toUpperCase(),a.url,!0),_.timeout=a.timeout;function A(){if(!_)return;const C=oi.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),k={data:!u||u==="text"||u==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:C,config:n,request:_};hw(function(N){e(N),w()},function(N){s(N),w()},k),_=null}"onloadend"in _?_.onloadend=A:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(A)},_.onabort=function(){_&&(s(new Qt("Request aborted",Qt.ECONNABORTED,n,_)),_=null)},_.onerror=function(j){const k=j&&j.message?j.message:"Network Error",I=new Qt(k,Qt.ERR_NETWORK,n,_);I.event=j||null,s(I),_=null},_.ontimeout=function(){let j=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const k=a.transitional||uw;a.timeoutErrorMessage&&(j=a.timeoutErrorMessage),s(new Qt(j,k.clarifyTimeoutError?Qt.ETIMEDOUT:Qt.ECONNABORTED,n,_)),_=null},o===void 0&&c.setContentType(null),"setRequestHeader"in _&&Z.forEach(c.toJSON(),function(j,k){_.setRequestHeader(k,j)}),Z.isUndefined(a.withCredentials)||(_.withCredentials=!!a.withCredentials),u&&u!=="json"&&(_.responseType=a.responseType),h&&([x,S]=Lf(h,!0),_.addEventListener("progress",x)),d&&_.upload&&([y,v]=Lf(d),_.upload.addEventListener("progress",y),_.upload.addEventListener("loadend",v)),(a.cancelToken||a.signal)&&(p=C=>{_&&(s(!C||C.type?new Mo(null,n,_):C),_.abort(),_=null)},a.cancelToken&&a.cancelToken.subscribe(p),a.signal&&(a.signal.aborted?p():a.signal.addEventListener("abort",p)));const R=HR(a.url);if(R&&$n.protocols.indexOf(R)===-1){s(new Qt("Unsupported protocol "+R+":",Qt.ERR_BAD_REQUEST,n));return}_.send(o||null)})},KR=(n,t)=>{const{length:e}=n=n?n.filter(Boolean):[];if(t||e){let s=new AbortController,a;const o=function(h){if(!a){a=!0,u();const p=h instanceof Error?h:this.reason;s.abort(p instanceof Qt?p:new Mo(p instanceof Error?p.message:p))}};let c=t&&setTimeout(()=>{c=null,o(new Qt(`timeout ${t} of ms exceeded`,Qt.ETIMEDOUT))},t);const u=()=>{n&&(c&&clearTimeout(c),c=null,n.forEach(h=>{h.unsubscribe?h.unsubscribe(o):h.removeEventListener("abort",o)}),n=null)};n.forEach(h=>h.addEventListener("abort",o));const{signal:d}=s;return d.unsubscribe=()=>Z.asap(u),d}},QR=function*(n,t){let e=n.byteLength;if(e<t){yield n;return}let s=0,a;for(;s<e;)a=s+t,yield n.slice(s,a),s=a},JR=async function*(n,t){for await(const e of ZR(n))yield*QR(e,t)},ZR=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const t=n.getReader();try{for(;;){const{done:e,value:s}=await t.read();if(e)break;yield s}}finally{await t.cancel()}},wv=(n,t,e,s)=>{const a=JR(n,t);let o=0,c,u=d=>{c||(c=!0,s&&s(d))};return new ReadableStream({async pull(d){try{const{done:h,value:p}=await a.next();if(h){u(),d.close();return}let y=p.byteLength;if(e){let x=o+=y;e(x)}d.enqueue(new Uint8Array(p))}catch(h){throw u(h),h}},cancel(d){return u(d),a.return()}},{highWaterMark:2})},Ev=64*1024,{isFunction:Fu}=Z,tj=(({Request:n,Response:t})=>({Request:n,Response:t}))(Z.global),{ReadableStream:Av,TextEncoder:Tv}=Z.global,Cv=(n,...t)=>{try{return!!n(...t)}catch{return!1}},ej=n=>{n=Z.merge.call({skipUndefined:!0},tj,n);const{fetch:t,Request:e,Response:s}=n,a=t?Fu(t):typeof fetch=="function",o=Fu(e),c=Fu(s);if(!a)return!1;const u=a&&Fu(Av),d=a&&(typeof Tv=="function"?(S=>w=>S.encode(w))(new Tv):async S=>new Uint8Array(await new e(S).arrayBuffer())),h=o&&u&&Cv(()=>{let S=!1;const w=new e($n.origin,{body:new Av,method:"POST",get duplex(){return S=!0,"half"}}).headers.has("Content-Type");return S&&!w}),p=c&&u&&Cv(()=>Z.isReadableStream(new s("").body)),y={stream:p&&(S=>S.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(S=>{!y[S]&&(y[S]=(w,_)=>{let A=w&&w[S];if(A)return A.call(w);throw new Qt(`Response type '${S}' is not supported`,Qt.ERR_NOT_SUPPORT,_)})});const x=async S=>{if(S==null)return 0;if(Z.isBlob(S))return S.size;if(Z.isSpecCompliantForm(S))return(await new e($n.origin,{method:"POST",body:S}).arrayBuffer()).byteLength;if(Z.isArrayBufferView(S)||Z.isArrayBuffer(S))return S.byteLength;if(Z.isURLSearchParams(S)&&(S=S+""),Z.isString(S))return(await d(S)).byteLength},v=async(S,w)=>{const _=Z.toFiniteNumber(S.getContentLength());return _??x(w)};return async S=>{let{url:w,method:_,data:A,signal:R,cancelToken:C,timeout:j,onDownloadProgress:k,onUploadProgress:I,responseType:N,headers:L,withCredentials:H="same-origin",fetchOptions:B}=mw(S),U=t||fetch;N=N?(N+"").toLowerCase():"text";let z=KR([R,C&&C.toAbortSignal()],j),G=null;const V=z&&z.unsubscribe&&(()=>{z.unsubscribe()});let J;try{if(I&&h&&_!=="get"&&_!=="head"&&(J=await v(L,A))!==0){let D=new e(w,{method:"POST",body:A,duplex:"half"}),Y;if(Z.isFormData(A)&&(Y=D.headers.get("content-type"))&&L.setContentType(Y),D.body){const[at,lt]=vv(J,Lf(Sv(I)));A=wv(D.body,Ev,at,lt)}}Z.isString(H)||(H=H?"include":"omit");const O=o&&"credentials"in e.prototype,$={...B,signal:z,method:_.toUpperCase(),headers:L.normalize().toJSON(),body:A,duplex:"half",credentials:O?H:void 0};G=o&&new e(w,$);let rt=await(o?U(G,B):U(w,$));const it=p&&(N==="stream"||N==="response");if(p&&(k||it&&V)){const D={};["status","statusText","headers"].forEach(nt=>{D[nt]=rt[nt]});const Y=Z.toFiniteNumber(rt.headers.get("content-length")),[at,lt]=k&&vv(Y,Lf(Sv(k),!0))||[];rt=new s(wv(rt.body,Ev,at,()=>{lt&&lt(),V&&V()}),D)}N=N||"text";let ft=await y[Z.findKey(y,N)||"text"](rt,S);return!it&&V&&V(),await new Promise((D,Y)=>{hw(D,Y,{data:ft,headers:oi.from(rt.headers),status:rt.status,statusText:rt.statusText,config:S,request:G})})}catch(O){throw V&&V(),O&&O.name==="TypeError"&&/Load failed|fetch/i.test(O.message)?Object.assign(new Qt("Network Error",Qt.ERR_NETWORK,S,G),{cause:O.cause||O}):Qt.from(O,O&&O.code,S,G)}}},nj=new Map,gw=n=>{let t=n&&n.env||{};const{fetch:e,Request:s,Response:a}=t,o=[s,a,e];let c=o.length,u=c,d,h,p=nj;for(;u--;)d=o[u],h=p.get(d),h===void 0&&p.set(d,h=u?new Map:ej(t)),p=h;return h};gw();const Bg={http:xR,xhr:qR,fetch:{get:gw}};Z.forEach(Bg,(n,t)=>{if(n){try{Object.defineProperty(n,"name",{value:t})}catch{}Object.defineProperty(n,"adapterName",{value:t})}});const Rv=n=>`- ${n}`,ij=n=>Z.isFunction(n)||n===null||n===!1;function sj(n,t){n=Z.isArray(n)?n:[n];const{length:e}=n;let s,a;const o={};for(let c=0;c<e;c++){s=n[c];let u;if(a=s,!ij(s)&&(a=Bg[(u=String(s)).toLowerCase()],a===void 0))throw new Qt(`Unknown adapter '${u}'`);if(a&&(Z.isFunction(a)||(a=a.get(t))))break;o[u||"#"+c]=a}if(!a){const c=Object.entries(o).map(([d,h])=>`adapter ${d} `+(h===!1?"is not supported by the environment":"is not available in the build"));let u=e?c.length>1?`since :
`+c.map(Rv).join(`
`):" "+Rv(c[0]):"as no adapter specified";throw new Qt("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return a}const yw={getAdapter:sj,adapters:Bg};function Op(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Mo(null,n)}function jv(n){return Op(n),n.headers=oi.from(n.headers),n.data=kp.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),yw.getAdapter(n.adapter||_c.adapter,n)(n).then(function(s){return Op(n),s.data=kp.call(n,n.transformResponse,s),s.headers=oi.from(s.headers),s},function(s){return dw(s)||(Op(n),s&&s.response&&(s.response.data=kp.call(n,n.transformResponse,s.response),s.response.headers=oi.from(s.response.headers))),Promise.reject(s)})}const bw="1.13.2",rd={};["object","boolean","number","function","string","symbol"].forEach((n,t)=>{rd[n]=function(s){return typeof s===n||"a"+(t<1?"n ":" ")+n}});const Mv={};rd.transitional=function(t,e,s){function a(o,c){return"[Axios v"+bw+"] Transitional option '"+o+"'"+c+(s?". "+s:"")}return(o,c,u)=>{if(t===!1)throw new Qt(a(c," has been removed"+(e?" in "+e:"")),Qt.ERR_DEPRECATED);return e&&!Mv[c]&&(Mv[c]=!0,console.warn(a(c," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(o,c,u):!0}};rd.spelling=function(t){return(e,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function rj(n,t,e){if(typeof n!="object")throw new Qt("options must be an object",Qt.ERR_BAD_OPTION_VALUE);const s=Object.keys(n);let a=s.length;for(;a-- >0;){const o=s[a],c=t[o];if(c){const u=n[o],d=u===void 0||c(u,o,n);if(d!==!0)throw new Qt("option "+o+" must be "+d,Qt.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new Qt("Unknown option "+o,Qt.ERR_BAD_OPTION)}}const Cf={assertOptions:rj,validators:rd},cs=Cf.validators;let ya=class{constructor(t){this.defaults=t||{},this.interceptors={request:new bv,response:new bv}}async request(t,e){try{return await this._request(t,e)}catch(s){if(s instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const o=a.stack?a.stack.replace(/^.+\n/,""):"";try{s.stack?o&&!String(s.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+o):s.stack=o}catch{}}throw s}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=ba(this.defaults,e);const{transitional:s,paramsSerializer:a,headers:o}=e;s!==void 0&&Cf.assertOptions(s,{silentJSONParsing:cs.transitional(cs.boolean),forcedJSONParsing:cs.transitional(cs.boolean),clarifyTimeoutError:cs.transitional(cs.boolean)},!1),a!=null&&(Z.isFunction(a)?e.paramsSerializer={serialize:a}:Cf.assertOptions(a,{encode:cs.function,serialize:cs.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),Cf.assertOptions(e,{baseUrl:cs.spelling("baseURL"),withXsrfToken:cs.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let c=o&&Z.merge(o.common,o[e.method]);o&&Z.forEach(["delete","get","head","post","put","patch","common"],S=>{delete o[S]}),e.headers=oi.concat(c,o);const u=[];let d=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(e)===!1||(d=d&&w.synchronous,u.unshift(w.fulfilled,w.rejected))});const h=[];this.interceptors.response.forEach(function(w){h.push(w.fulfilled,w.rejected)});let p,y=0,x;if(!d){const S=[jv.bind(this),void 0];for(S.unshift(...u),S.push(...h),x=S.length,p=Promise.resolve(e);y<x;)p=p.then(S[y++],S[y++]);return p}x=u.length;let v=e;for(;y<x;){const S=u[y++],w=u[y++];try{v=S(v)}catch(_){w.call(this,_);break}}try{p=jv.call(this,v)}catch(S){return Promise.reject(S)}for(y=0,x=h.length;y<x;)p=p.then(h[y++],h[y++]);return p}getUri(t){t=ba(this.defaults,t);const e=pw(t.baseURL,t.url,t.allowAbsoluteUrls);return cw(e,t.params,t.paramsSerializer)}};Z.forEach(["delete","get","head","options"],function(t){ya.prototype[t]=function(e,s){return this.request(ba(s||{},{method:t,url:e,data:(s||{}).data}))}});Z.forEach(["post","put","patch"],function(t){function e(s){return function(o,c,u){return this.request(ba(u||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:o,data:c}))}}ya.prototype[t]=e(),ya.prototype[t+"Form"]=e(!0)});let aj=class xw{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(o){e=o});const s=this;this.promise.then(a=>{if(!s._listeners)return;let o=s._listeners.length;for(;o-- >0;)s._listeners[o](a);s._listeners=null}),this.promise.then=a=>{let o;const c=new Promise(u=>{s.subscribe(u),o=u}).then(a);return c.cancel=function(){s.unsubscribe(o)},c},t(function(o,c,u){s.reason||(s.reason=new Mo(o,c,u),e(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=s=>{t.abort(s)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new xw(function(a){t=a}),cancel:t}}};function oj(n){return function(e){return n.apply(null,e)}}function lj(n){return Z.isObject(n)&&n.isAxiosError===!0}const Gm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Gm).forEach(([n,t])=>{Gm[t]=n});function vw(n){const t=new ya(n),e=Q_(ya.prototype.request,t);return Z.extend(e,ya.prototype,t,{allOwnKeys:!0}),Z.extend(e,t,null,{allOwnKeys:!0}),e.create=function(a){return vw(ba(n,a))},e}const _e=vw(_c);_e.Axios=ya;_e.CanceledError=Mo;_e.CancelToken=aj;_e.isCancel=dw;_e.VERSION=bw;_e.toFormData=sd;_e.AxiosError=Qt;_e.Cancel=_e.CanceledError;_e.all=function(t){return Promise.all(t)};_e.spread=oj;_e.isAxiosError=lj;_e.mergeConfig=ba;_e.AxiosHeaders=oi;_e.formToJSON=n=>fw(Z.isHTMLForm(n)?new FormData(n):n);_e.getAdapter=yw.getAdapter;_e.HttpStatusCode=Gm;_e.default=_e;const{Axios:Oz,AxiosError:Nz,CanceledError:Iz,isCancel:Lz,CancelToken:Dz,VERSION:Bz,all:Uz,Cancel:zz,isAxiosError:Pz,spread:Hz,toFormData:Fz,AxiosHeaders:Gz,HttpStatusCode:$z,formToJSON:Vz,getAdapter:Wz,mergeConfig:Yz}=_e,vi=_e.create({baseURL:"http://localhost:8080",withCredentials:!0});async function cj(){return vi.post("/api/auth/logout")}async function _o(){return vi.get("/api/auth/login/status")}async function uj(){return vi.post("/api/user/deleteAccount")}async function Sw(n,t){return vi.post("/api/user/change-pw",{currentPw:n,loginPw:t,loginType:0})}function fj({open:n,settings:t,onChange:e,onApply:s,onClose:a,onReset:o}){if(!n)return null;const c=u=>e({...t,...u});return Jf.createPortal(m.jsx("div",{style:dj,onClick:a,children:m.jsxs("div",{style:hj,onClick:u=>u.stopPropagation(),children:[m.jsx("h2",{style:{marginBottom:12,color:"#5aeaff"},children:""}),m.jsxs(Np,{title:"",children:[m.jsx(Ip,{label:"BGM ",value:t.bgmVolume,muted:t.bgmMute,onMute:()=>c({bgmMute:!t.bgmMute}),onChange:u=>c({bgmVolume:u})}),m.jsx(Ip,{label:" ",value:t.previewVolume,muted:t.previewMute,onMute:()=>c({previewMute:!t.previewMute}),onChange:u=>c({previewVolume:u})}),m.jsx(Ip,{label:" ",value:t.sfxVolume,muted:t.sfxMute,onMute:()=>c({sfxMute:!t.sfxMute}),onChange:u=>c({sfxVolume:u})}),m.jsx(io,{label:" ",value:t.hitSound,onChange:u=>c({hitSound:u})})]}),m.jsxs(Np,{title:" ",children:[m.jsx(kv,{label:"  ",value:t.tapNoteColor,onChange:u=>c({tapNoteColor:u})}),m.jsx(kv,{label:"  ",value:t.longNoteColor,onChange:u=>c({longNoteColor:u})})]}),m.jsxs(Np,{title:"",children:[m.jsx(io,{label:"  (/ )",value:t.lowEffect,onChange:u=>{c({lowEffect:u,hitEffect:u?!1:t.hitEffect,visualizer:u?!1:t.visualizer,judgeText:u?!1:t.judgeText,comboText:u?!1:t.comboText})}}),m.jsx(io,{label:" ",value:t.hitEffect,onChange:u=>c({hitEffect:u})}),m.jsx(io,{label:" ",value:t.judgeText,onChange:u=>c({judgeText:u})}),m.jsx(io,{label:" ",value:t.comboText,onChange:u=>c({comboText:u})}),m.jsx(io,{label:"",value:t.visualizer,onChange:u=>c({visualizer:u})})]}),m.jsxs("div",{style:gj,children:[m.jsx("button",{style:Ov,onClick:o,children:" "}),m.jsx("div",{style:{flex:1}}),m.jsx("button",{style:Ov,onClick:a,children:""}),m.jsx("button",{style:yj,onClick:()=>{s(),window.location.reload()},children:""})]})]})}),document.body)}function Np({title:n,children:t}){return m.jsxs("div",{style:pj,children:[m.jsx("div",{style:mj,children:n}),t]})}function io({label:n,value:t,onChange:e}){return m.jsxs("div",{style:Ug,children:[m.jsx("span",{children:n}),m.jsx("input",{type:"checkbox",checked:!!t,onChange:s=>e(s.target.checked)})]})}function Ip({label:n,value:t,muted:e,onMute:s,onChange:a}){return m.jsxs("div",{style:Ug,children:[m.jsx("span",{style:{width:110},children:n}),m.jsx("button",{onClick:s,style:{width:24,textAlign:"center",background:"transparent",border:"none",color:e?"#ff5a5a":"#5aeaff",cursor:"pointer",fontSize:14,flexShrink:0},children:e?"":""}),m.jsx("input",{type:"range",min:0,max:100,value:e?0:t,disabled:e,onChange:o=>a(Number(o.target.value))}),m.jsx("span",{style:{width:36,textAlign:"right"},children:e?0:t})]})}function kv({label:n,value:t,onChange:e}){if(typeof t!="number")return null;const s=`#${t.toString(16).padStart(6,"0")}`;return m.jsxs("div",{style:Ug,children:[m.jsx("span",{children:n}),m.jsx("input",{type:"color",value:s,onChange:a=>{const o=parseInt(a.target.value.slice(1),16);e(o)}})]})}const dj={position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},hj={width:420,background:"rgba(10,20,30,0.95)",border:"2px solid rgba(90,234,255,0.5)",borderRadius:12,padding:16,color:"#fff"},pj={marginBottom:12,paddingBottom:8,borderBottom:"1px solid rgba(255,255,255,0.1)"},mj={fontWeight:600,marginBottom:6,color:"#5aeaff"},Ug={display:"flex",alignItems:"center",justifyContent:"space-between",gap:8,marginBottom:6},gj={display:"flex",alignItems:"center",gap:8,marginTop:12},Ov={padding:"6px 12px",borderRadius:6,border:"1px solid rgba(90,234,255,0.5)",background:"transparent",color:"#5aeaff",cursor:"pointer"},yj={padding:"6px 16px",borderRadius:8,border:"1.5px solid #5aeaff",background:"rgba(10,20,30,0.9)",color:"#5aeaff",fontWeight:600,cursor:"pointer",boxShadow:`
    0 0 6px rgba(90,234,255,0.6),
    inset 0 0 6px rgba(90,234,255,0.25)
  `};function $m(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,s=Array(t);e<t;e++)s[e]=n[e];return s}function bj(n){if(Array.isArray(n))return n}function xj(n){if(Array.isArray(n))return $m(n)}function vj(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function Sj(n,t){for(var e=0;e<t.length;e++){var s=t[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(n,_w(s.key),s)}}function _j(n,t,e){return t&&Sj(n.prototype,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Rf(n,t){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=zg(n))||t){e&&(n=e);var s=0,a=function(){};return{s:a,n:function(){return s>=n.length?{done:!0}:{done:!1,value:n[s++]}},e:function(d){throw d},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,c=!0,u=!1;return{s:function(){e=e.call(n)},n:function(){var d=e.next();return c=d.done,d},e:function(d){u=!0,o=d},f:function(){try{c||e.return==null||e.return()}finally{if(u)throw o}}}}function ee(n,t,e){return(t=_w(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function wj(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Ej(n,t){var e=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var s,a,o,c,u=[],d=!0,h=!1;try{if(o=(e=e.call(n)).next,t===0){if(Object(e)!==e)return;d=!1}else for(;!(d=(s=o.call(e)).done)&&(u.push(s.value),u.length!==t);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&e.return!=null&&(c=e.return(),Object(c)!==c))return}finally{if(h)throw a}}return u}}function Aj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tj(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nv(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),e.push.apply(e,s)}return e}function bt(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Nv(Object(e),!0).forEach(function(s){ee(n,s,e[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Nv(Object(e)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(e,s))})}return n}function ad(n,t){return bj(n)||Ej(n,t)||zg(n,t)||Aj()}function Yi(n){return xj(n)||wj(n)||zg(n)||Tj()}function Cj(n,t){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var s=e.call(n,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function _w(n){var t=Cj(n,"string");return typeof t=="symbol"?t:t+""}function Df(n){"@babel/helpers - typeof";return Df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Df(n)}function zg(n,t){if(n){if(typeof n=="string")return $m(n,t);var e={}.toString.call(n).slice(8,-1);return e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set"?Array.from(n):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?$m(n,t):void 0}}var Iv=function(){},Pg={},ww={},Ew=null,Aw={mark:Iv,measure:Iv};try{typeof window<"u"&&(Pg=window),typeof document<"u"&&(ww=document),typeof MutationObserver<"u"&&(Ew=MutationObserver),typeof performance<"u"&&(Aw=performance)}catch{}var Rj=Pg.navigator||{},Lv=Rj.userAgent,Dv=Lv===void 0?"":Lv,kr=Pg,We=ww,Bv=Ew,Gu=Aw;kr.document;var Ws=!!We.documentElement&&!!We.head&&typeof We.addEventListener=="function"&&typeof We.createElement=="function",Tw=~Dv.indexOf("MSIE")||~Dv.indexOf("Trident/"),Lp,jj=/fa(k|kd|s|r|l|t|d|dr|dl|dt|b|slr|slpr|wsb|tl|ns|nds|es|jr|jfr|jdr|usb|ufsb|udsb|cr|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,Mj=/Font ?Awesome ?([567 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit|Notdog Duo|Notdog|Chisel|Etch|Thumbprint|Jelly Fill|Jelly Duo|Jelly|Utility|Utility Fill|Utility Duo|Slab Press|Slab|Whiteboard)?.*/i,Cw={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"},slab:{"fa-regular":"regular",faslr:"regular"},"slab-press":{"fa-regular":"regular",faslpr:"regular"},thumbprint:{"fa-light":"light",fatl:"light"},whiteboard:{"fa-semibold":"semibold",fawsb:"semibold"},notdog:{"fa-solid":"solid",fans:"solid"},"notdog-duo":{"fa-solid":"solid",fands:"solid"},etch:{"fa-solid":"solid",faes:"solid"},jelly:{"fa-regular":"regular",fajr:"regular"},"jelly-fill":{"fa-regular":"regular",fajfr:"regular"},"jelly-duo":{"fa-regular":"regular",fajdr:"regular"},chisel:{"fa-regular":"regular",facr:"regular"},utility:{"fa-semibold":"semibold",fausb:"semibold"},"utility-duo":{"fa-semibold":"semibold",faudsb:"semibold"},"utility-fill":{"fa-semibold":"semibold",faufsb:"semibold"}},kj={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},Rw=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone","fa-thumbprint","fa-whiteboard","fa-notdog","fa-notdog-duo","fa-chisel","fa-etch","fa-jelly","fa-jelly-fill","fa-jelly-duo","fa-slab","fa-slab-press","fa-utility","fa-utility-duo","fa-utility-fill"],Hn="classic",wc="duotone",jw="sharp",Mw="sharp-duotone",kw="chisel",Ow="etch",Nw="jelly",Iw="jelly-duo",Lw="jelly-fill",Dw="notdog",Bw="notdog-duo",Uw="slab",zw="slab-press",Pw="thumbprint",Hw="utility",Fw="utility-duo",Gw="utility-fill",$w="whiteboard",Oj="Classic",Nj="Duotone",Ij="Sharp",Lj="Sharp Duotone",Dj="Chisel",Bj="Etch",Uj="Jelly",zj="Jelly Duo",Pj="Jelly Fill",Hj="Notdog",Fj="Notdog Duo",Gj="Slab",$j="Slab Press",Vj="Thumbprint",Wj="Utility",Yj="Utility Duo",Xj="Utility Fill",qj="Whiteboard",Vw=[Hn,wc,jw,Mw,kw,Ow,Nw,Iw,Lw,Dw,Bw,Uw,zw,Pw,Hw,Fw,Gw,$w];Lp={},ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(Lp,Hn,Oj),wc,Nj),jw,Ij),Mw,Lj),kw,Dj),Ow,Bj),Nw,Uj),Iw,zj),Lw,Pj),Dw,Hj),ee(ee(ee(ee(ee(ee(ee(ee(Lp,Bw,Fj),Uw,Gj),zw,$j),Pw,Vj),Hw,Wj),Fw,Yj),Gw,Xj),$w,qj);var Kj={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"},slab:{400:"faslr"},"slab-press":{400:"faslpr"},whiteboard:{600:"fawsb"},thumbprint:{300:"fatl"},notdog:{900:"fans"},"notdog-duo":{900:"fands"},etch:{900:"faes"},chisel:{400:"facr"},jelly:{400:"fajr"},"jelly-fill":{400:"fajfr"},"jelly-duo":{400:"fajdr"},utility:{600:"fausb"},"utility-duo":{600:"faudsb"},"utility-fill":{600:"faufsb"}},Qj={"Font Awesome 7 Free":{900:"fas",400:"far"},"Font Awesome 7 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 7 Brands":{400:"fab",normal:"fab"},"Font Awesome 7 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 7 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 7 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"},"Font Awesome 7 Jelly":{400:"fajr",normal:"fajr"},"Font Awesome 7 Jelly Fill":{400:"fajfr",normal:"fajfr"},"Font Awesome 7 Jelly Duo":{400:"fajdr",normal:"fajdr"},"Font Awesome 7 Slab":{400:"faslr",normal:"faslr"},"Font Awesome 7 Slab Press":{400:"faslpr",normal:"faslpr"},"Font Awesome 7 Thumbprint":{300:"fatl",normal:"fatl"},"Font Awesome 7 Notdog":{900:"fans",normal:"fans"},"Font Awesome 7 Notdog Duo":{900:"fands",normal:"fands"},"Font Awesome 7 Etch":{900:"faes",normal:"faes"},"Font Awesome 7 Chisel":{400:"facr",normal:"facr"},"Font Awesome 7 Whiteboard":{600:"fawsb",normal:"fawsb"},"Font Awesome 7 Utility":{600:"fausb",normal:"fausb"},"Font Awesome 7 Utility Duo":{600:"faudsb",normal:"faudsb"},"Font Awesome 7 Utility Fill":{600:"faufsb",normal:"faufsb"}},Jj=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["chisel",{defaultShortPrefixId:"facr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["etch",{defaultShortPrefixId:"faes",defaultStyleId:"solid",styleIds:["solid"],futureStyleIds:[],defaultFontWeight:900}],["jelly",{defaultShortPrefixId:"fajr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["jelly-duo",{defaultShortPrefixId:"fajdr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["jelly-fill",{defaultShortPrefixId:"fajfr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["notdog",{defaultShortPrefixId:"fans",defaultStyleId:"solid",styleIds:["solid"],futureStyleIds:[],defaultFontWeight:900}],["notdog-duo",{defaultShortPrefixId:"fands",defaultStyleId:"solid",styleIds:["solid"],futureStyleIds:[],defaultFontWeight:900}],["slab",{defaultShortPrefixId:"faslr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["slab-press",{defaultShortPrefixId:"faslpr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["thumbprint",{defaultShortPrefixId:"fatl",defaultStyleId:"light",styleIds:["light"],futureStyleIds:[],defaultFontWeight:300}],["utility",{defaultShortPrefixId:"fausb",defaultStyleId:"semibold",styleIds:["semibold"],futureStyleIds:[],defaultFontWeight:600}],["utility-duo",{defaultShortPrefixId:"faudsb",defaultStyleId:"semibold",styleIds:["semibold"],futureStyleIds:[],defaultFontWeight:600}],["utility-fill",{defaultShortPrefixId:"faufsb",defaultStyleId:"semibold",styleIds:["semibold"],futureStyleIds:[],defaultFontWeight:600}],["whiteboard",{defaultShortPrefixId:"fawsb",defaultStyleId:"semibold",styleIds:["semibold"],futureStyleIds:[],defaultFontWeight:600}]]),Zj={chisel:{regular:"facr"},classic:{brands:"fab",light:"fal",regular:"far",solid:"fas",thin:"fat"},duotone:{light:"fadl",regular:"fadr",solid:"fad",thin:"fadt"},etch:{solid:"faes"},jelly:{regular:"fajr"},"jelly-duo":{regular:"fajdr"},"jelly-fill":{regular:"fajfr"},notdog:{solid:"fans"},"notdog-duo":{solid:"fands"},sharp:{light:"fasl",regular:"fasr",solid:"fass",thin:"fast"},"sharp-duotone":{light:"fasdl",regular:"fasdr",solid:"fasds",thin:"fasdt"},slab:{regular:"faslr"},"slab-press":{regular:"faslpr"},thumbprint:{light:"fatl"},utility:{semibold:"fausb"},"utility-duo":{semibold:"faudsb"},"utility-fill":{semibold:"faufsb"},whiteboard:{semibold:"fawsb"}},Ww=["fak","fa-kit","fakd","fa-kit-duotone"],Uv={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},tM=["kit"],eM="kit",nM="kit-duotone",iM="Kit",sM="Kit Duotone";ee(ee({},eM,iM),nM,sM);var rM={kit:{"fa-kit":"fak"}},aM={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},oM={kit:{fak:"fa-kit"}},zv={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},Dp,$u={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},lM=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone","fa-thumbprint","fa-whiteboard","fa-notdog","fa-notdog-duo","fa-chisel","fa-etch","fa-jelly","fa-jelly-fill","fa-jelly-duo","fa-slab","fa-slab-press","fa-utility","fa-utility-duo","fa-utility-fill"],cM="classic",uM="duotone",fM="sharp",dM="sharp-duotone",hM="chisel",pM="etch",mM="jelly",gM="jelly-duo",yM="jelly-fill",bM="notdog",xM="notdog-duo",vM="slab",SM="slab-press",_M="thumbprint",wM="utility",EM="utility-duo",AM="utility-fill",TM="whiteboard",CM="Classic",RM="Duotone",jM="Sharp",MM="Sharp Duotone",kM="Chisel",OM="Etch",NM="Jelly",IM="Jelly Duo",LM="Jelly Fill",DM="Notdog",BM="Notdog Duo",UM="Slab",zM="Slab Press",PM="Thumbprint",HM="Utility",FM="Utility Duo",GM="Utility Fill",$M="Whiteboard";Dp={},ee(ee(ee(ee(ee(ee(ee(ee(ee(ee(Dp,cM,CM),uM,RM),fM,jM),dM,MM),hM,kM),pM,OM),mM,NM),gM,IM),yM,LM),bM,DM),ee(ee(ee(ee(ee(ee(ee(ee(Dp,xM,BM),vM,UM),SM,zM),_M,PM),wM,HM),EM,FM),AM,GM),TM,$M);var VM="kit",WM="kit-duotone",YM="Kit",XM="Kit Duotone";ee(ee({},VM,YM),WM,XM);var qM={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"},slab:{"fa-regular":"faslr"},"slab-press":{"fa-regular":"faslpr"},whiteboard:{"fa-semibold":"fawsb"},thumbprint:{"fa-light":"fatl"},notdog:{"fa-solid":"fans"},"notdog-duo":{"fa-solid":"fands"},etch:{"fa-solid":"faes"},jelly:{"fa-regular":"fajr"},"jelly-fill":{"fa-regular":"fajfr"},"jelly-duo":{"fa-regular":"fajdr"},chisel:{"fa-regular":"facr"},utility:{"fa-semibold":"fausb"},"utility-duo":{"fa-semibold":"faudsb"},"utility-fill":{"fa-semibold":"faufsb"}},KM={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"],slab:["faslr"],"slab-press":["faslpr"],whiteboard:["fawsb"],thumbprint:["fatl"],notdog:["fans"],"notdog-duo":["fands"],etch:["faes"],jelly:["fajr"],"jelly-fill":["fajfr"],"jelly-duo":["fajdr"],chisel:["facr"],utility:["fausb"],"utility-duo":["faudsb"],"utility-fill":["faufsb"]},Vm={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"},slab:{faslr:"fa-regular"},"slab-press":{faslpr:"fa-regular"},whiteboard:{fawsb:"fa-semibold"},thumbprint:{fatl:"fa-light"},notdog:{fans:"fa-solid"},"notdog-duo":{fands:"fa-solid"},etch:{faes:"fa-solid"},jelly:{fajr:"fa-regular"},"jelly-fill":{fajfr:"fa-regular"},"jelly-duo":{fajdr:"fa-regular"},chisel:{facr:"fa-regular"},utility:{fausb:"fa-semibold"},"utility-duo":{faudsb:"fa-semibold"},"utility-fill":{faufsb:"fa-semibold"}},QM=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands","fa-semibold"],Yw=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt","faslr","faslpr","fawsb","fatl","fans","fands","faes","fajr","fajfr","fajdr","facr","fausb","faudsb","faufsb"].concat(lM,QM),JM=["solid","regular","light","thin","duotone","brands","semibold"],Xw=[1,2,3,4,5,6,7,8,9,10],ZM=Xw.concat([11,12,13,14,15,16,17,18,19,20]),tk=["aw","fw","pull-left","pull-right"],ek=[].concat(Yi(Object.keys(KM)),JM,tk,["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","inverse","layers","layers-bottom-left","layers-bottom-right","layers-counter","layers-text","layers-top-left","layers-top-right","li","pull-end","pull-start","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul","width-auto","width-fixed",$u.GROUP,$u.SWAP_OPACITY,$u.PRIMARY,$u.SECONDARY]).concat(Xw.map(function(n){return"".concat(n,"x")})).concat(ZM.map(function(n){return"w-".concat(n)})),nk={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}},Gs="___FONT_AWESOME___",Wm=16,qw="fa",Kw="svg-inline--fa",xa="data-fa-i2svg",Ym="data-fa-pseudo-element",ik="data-fa-pseudo-element-pending",Hg="data-prefix",Fg="data-icon",Pv="fontawesome-i2svg",sk="async",rk=["HTML","HEAD","STYLE","SCRIPT"],Qw=["::before","::after",":before",":after"],Jw=(function(){try{return!0}catch{return!1}})();function Ec(n){return new Proxy(n,{get:function(e,s){return s in e?e[s]:e[Hn]}})}var Zw=bt({},Cw);Zw[Hn]=bt(bt(bt(bt({},{"fa-duotone":"duotone"}),Cw[Hn]),Uv.kit),Uv["kit-duotone"]);var ak=Ec(Zw),Xm=bt({},Zj);Xm[Hn]=bt(bt(bt(bt({},{duotone:"fad"}),Xm[Hn]),zv.kit),zv["kit-duotone"]);var Hv=Ec(Xm),qm=bt({},Vm);qm[Hn]=bt(bt({},qm[Hn]),oM.kit);var Gg=Ec(qm),Km=bt({},qM);Km[Hn]=bt(bt({},Km[Hn]),rM.kit);Ec(Km);var ok=jj,t2="fa-layers-text",lk=Mj,ck=bt({},Kj);Ec(ck);var uk=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Bp=kj,fk=[].concat(Yi(tM),Yi(ek)),Ql=kr.FontAwesomeConfig||{};function dk(n){var t=We.querySelector("script["+n+"]");if(t)return t.getAttribute(n)}function hk(n){return n===""?!0:n==="false"?!1:n==="true"?!0:n}if(We&&typeof We.querySelector=="function"){var pk=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-search-pseudo-elements","searchPseudoElements"],["data-search-pseudo-elements-warnings","searchPseudoElementsWarnings"],["data-search-pseudo-elements-full-scan","searchPseudoElementsFullScan"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];pk.forEach(function(n){var t=ad(n,2),e=t[0],s=t[1],a=hk(dk(e));a!=null&&(Ql[s]=a)})}var e2={styleDefault:"solid",familyDefault:Hn,cssPrefix:qw,replacementClass:Kw,autoReplaceSvg:!0,autoAddCss:!0,searchPseudoElements:!1,searchPseudoElementsWarnings:!0,searchPseudoElementsFullScan:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Ql.familyPrefix&&(Ql.cssPrefix=Ql.familyPrefix);var wo=bt(bt({},e2),Ql);wo.autoReplaceSvg||(wo.observeMutations=!1);var zt={};Object.keys(e2).forEach(function(n){Object.defineProperty(zt,n,{enumerable:!0,set:function(e){wo[n]=e,Jl.forEach(function(s){return s(zt)})},get:function(){return wo[n]}})});Object.defineProperty(zt,"familyPrefix",{enumerable:!0,set:function(t){wo.cssPrefix=t,Jl.forEach(function(e){return e(zt)})},get:function(){return wo.cssPrefix}});kr.FontAwesomeConfig=zt;var Jl=[];function mk(n){return Jl.push(n),function(){Jl.splice(Jl.indexOf(n),1)}}var so=Wm,hs={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function gk(n){if(!(!n||!Ws)){var t=We.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=n;for(var e=We.head.childNodes,s=null,a=e.length-1;a>-1;a--){var o=e[a],c=(o.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(c)>-1&&(s=o)}return We.head.insertBefore(t,s),n}}var yk="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Fv(){for(var n=12,t="";n-- >0;)t+=yk[Math.random()*62|0];return t}function ko(n){for(var t=[],e=(n||[]).length>>>0;e--;)t[e]=n[e];return t}function $g(n){return n.classList?ko(n.classList):(n.getAttribute("class")||"").split(" ").filter(function(t){return t})}function n2(n){return"".concat(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function bk(n){return Object.keys(n||{}).reduce(function(t,e){return t+"".concat(e,'="').concat(n2(n[e]),'" ')},"").trim()}function od(n){return Object.keys(n||{}).reduce(function(t,e){return t+"".concat(e,": ").concat(n[e].trim(),";")},"")}function Vg(n){return n.size!==hs.size||n.x!==hs.x||n.y!==hs.y||n.rotate!==hs.rotate||n.flipX||n.flipY}function xk(n){var t=n.transform,e=n.containerWidth,s=n.iconWidth,a={transform:"translate(".concat(e/2," 256)")},o="translate(".concat(t.x*32,", ").concat(t.y*32,") "),c="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),u="rotate(".concat(t.rotate," 0 0)"),d={transform:"".concat(o," ").concat(c," ").concat(u)},h={transform:"translate(".concat(s/2*-1," -256)")};return{outer:a,inner:d,path:h}}function vk(n){var t=n.transform,e=n.width,s=e===void 0?Wm:e,a=n.height,o=a===void 0?Wm:a,c="";return Tw?c+="translate(".concat(t.x/so-s/2,"em, ").concat(t.y/so-o/2,"em) "):c+="translate(calc(-50% + ".concat(t.x/so,"em), calc(-50% + ").concat(t.y/so,"em)) "),c+="scale(".concat(t.size/so*(t.flipX?-1:1),", ").concat(t.size/so*(t.flipY?-1:1),") "),c+="rotate(".concat(t.rotate,"deg) "),c}var Sk=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 7 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 7 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 7 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 7 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 7 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 7 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 7 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 7 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 7 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 7 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 7 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 7 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 7 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 7 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 7 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 7 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 7 Sharp Duotone";
  --fa-font-slab-regular: normal 400 1em/1 "Font Awesome 7 Slab";
  --fa-font-slab-press-regular: normal 400 1em/1 "Font Awesome 7 Slab Press";
  --fa-font-whiteboard-semibold: normal 600 1em/1 "Font Awesome 7 Whiteboard";
  --fa-font-thumbprint-light: normal 300 1em/1 "Font Awesome 7 Thumbprint";
  --fa-font-notdog-solid: normal 900 1em/1 "Font Awesome 7 Notdog";
  --fa-font-notdog-duo-solid: normal 900 1em/1 "Font Awesome 7 Notdog Duo";
  --fa-font-etch-solid: normal 900 1em/1 "Font Awesome 7 Etch";
  --fa-font-jelly-regular: normal 400 1em/1 "Font Awesome 7 Jelly";
  --fa-font-jelly-fill-regular: normal 400 1em/1 "Font Awesome 7 Jelly Fill";
  --fa-font-jelly-duo-regular: normal 400 1em/1 "Font Awesome 7 Jelly Duo";
  --fa-font-chisel-regular: normal 400 1em/1 "Font Awesome 7 Chisel";
  --fa-font-utility-semibold: normal 600 1em/1 "Font Awesome 7 Utility";
  --fa-font-utility-duo-semibold: normal 600 1em/1 "Font Awesome 7 Utility Duo";
  --fa-font-utility-fill-semibold: normal 600 1em/1 "Font Awesome 7 Utility Fill";
}

.svg-inline--fa {
  box-sizing: content-box;
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
  width: var(--fa-width, 1.25em);
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285714em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left,
.svg-inline--fa .fa-pull-start {
  float: inline-start;
  margin-inline-end: var(--fa-pull-margin, 0.3em);
}
.svg-inline--fa.fa-pull-right,
.svg-inline--fa .fa-pull-end {
  float: inline-end;
  margin-inline-start: var(--fa-pull-margin, 0.3em);
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  inset-inline-start: calc(-1 * var(--fa-li-width, 2em));
  inset-block-start: 0.25em; /* syncing vertical alignment with Web Font rendering */
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: var(--fa-width, 1.25em);
}
.fa-layers .svg-inline--fa {
  inset: 0;
  margin: auto;
  position: absolute;
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: calc(10 / 16 * 1em); /* converts a 10px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 10 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 10 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-xs {
  font-size: calc(12 / 16 * 1em); /* converts a 12px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 12 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 12 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-sm {
  font-size: calc(14 / 16 * 1em); /* converts a 14px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 14 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 14 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-lg {
  font-size: calc(20 / 16 * 1em); /* converts a 20px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 20 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 20 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-xl {
  font-size: calc(24 / 16 * 1em); /* converts a 24px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 24 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 24 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-2xl {
  font-size: calc(32 / 16 * 1em); /* converts a 32px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 32 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 32 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-width-auto {
  --fa-width: auto;
}

.fa-fw,
.fa-width-fixed {
  --fa-width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-inline-start: var(--fa-li-margin, 2.5em);
  padding-inline-start: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  inset-inline-start: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

/* Heads Up: Bordered Icons will not be supported in the future!
  - This feature will be deprecated in the next major release of Font Awesome (v8)!
  - You may continue to use it in this version *v7), but it will not be supported in Font Awesome v8.
*/
/* Notes:
* --@{v.$css-prefix}-border-width = 1/16 by default (to render as ~1px based on a 16px default font-size)
* --@{v.$css-prefix}-border-padding =
  ** 3/16 for vertical padding (to give ~2px of vertical whitespace around an icon considering it's vertical alignment)
  ** 4/16 for horizontal padding (to give ~4px of horizontal whitespace around an icon)
*/
.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.0625em);
  box-sizing: var(--fa-border-box-sizing, content-box);
  padding: var(--fa-border-padding, 0.1875em 0.25em);
}

.fa-pull-left,
.fa-pull-start {
  float: inline-start;
  margin-inline-end: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right,
.fa-pull-end {
  float: inline-end;
  margin-inline-start: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
  .fa-bounce,
  .fa-fade,
  .fa-beat-fade,
  .fa-flip,
  .fa-pulse,
  .fa-shake,
  .fa-spin,
  .fa-spin-pulse {
    animation: none !important;
    transition: none !important;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.svg-inline--fa.fa-inverse {
  fill: var(--fa-inverse, #fff);
}

.fa-stack {
  display: inline-block;
  height: 2em;
  line-height: 2em;
  position: relative;
  vertical-align: middle;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.svg-inline--fa.fa-stack-1x {
  --fa-width: 1.25em;
  height: 1em;
  width: var(--fa-width);
}
.svg-inline--fa.fa-stack-2x {
  --fa-width: 2.5em;
  height: 2em;
  width: var(--fa-width);
}

.fa-stack-1x,
.fa-stack-2x {
  inset: 0;
  margin: auto;
  position: absolute;
  z-index: var(--fa-stack-z-index, auto);
}`;function i2(){var n=qw,t=Kw,e=zt.cssPrefix,s=zt.replacementClass,a=Sk;if(e!==n||s!==t){var o=new RegExp("\\.".concat(n,"\\-"),"g"),c=new RegExp("\\--".concat(n,"\\-"),"g"),u=new RegExp("\\.".concat(t),"g");a=a.replace(o,".".concat(e,"-")).replace(c,"--".concat(e,"-")).replace(u,".".concat(s))}return a}var Gv=!1;function Up(){zt.autoAddCss&&!Gv&&(gk(i2()),Gv=!0)}var _k={mixout:function(){return{dom:{css:i2,insertCss:Up}}},hooks:function(){return{beforeDOMElementCreation:function(){Up()},beforeI2svg:function(){Up()}}}},$s=kr||{};$s[Gs]||($s[Gs]={});$s[Gs].styles||($s[Gs].styles={});$s[Gs].hooks||($s[Gs].hooks={});$s[Gs].shims||($s[Gs].shims=[]);var Vi=$s[Gs],s2=[],r2=function(){We.removeEventListener("DOMContentLoaded",r2),Bf=1,s2.map(function(t){return t()})},Bf=!1;Ws&&(Bf=(We.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(We.readyState),Bf||We.addEventListener("DOMContentLoaded",r2));function wk(n){Ws&&(Bf?setTimeout(n,0):s2.push(n))}function Ac(n){var t=n.tag,e=n.attributes,s=e===void 0?{}:e,a=n.children,o=a===void 0?[]:a;return typeof n=="string"?n2(n):"<".concat(t," ").concat(bk(s),">").concat(o.map(Ac).join(""),"</").concat(t,">")}function $v(n,t,e){if(n&&n[t]&&n[t][e])return{prefix:t,iconName:e,icon:n[t][e]}}var zp=function(t,e,s,a){var o=Object.keys(t),c=o.length,u=e,d,h,p;for(s===void 0?(d=1,p=t[o[0]]):(d=0,p=s);d<c;d++)h=o[d],p=u(p,t[h],h,t);return p};function a2(n){return Yi(n).length!==1?null:n.codePointAt(0).toString(16)}function Vv(n){return Object.keys(n).reduce(function(t,e){var s=n[e],a=!!s.icon;return a?t[s.iconName]=s.icon:t[e]=s,t},{})}function Qm(n,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=e.skipHooks,a=s===void 0?!1:s,o=Vv(t);typeof Vi.hooks.addPack=="function"&&!a?Vi.hooks.addPack(n,Vv(t)):Vi.styles[n]=bt(bt({},Vi.styles[n]||{}),o),n==="fas"&&Qm("fa",t)}var oc=Vi.styles,Ek=Vi.shims,o2=Object.keys(Gg),Ak=o2.reduce(function(n,t){return n[t]=Object.keys(Gg[t]),n},{}),Wg=null,l2={},c2={},u2={},f2={},d2={};function Tk(n){return~fk.indexOf(n)}function Ck(n,t){var e=t.split("-"),s=e[0],a=e.slice(1).join("-");return s===n&&a!==""&&!Tk(a)?a:null}var h2=function(){var t=function(o){return zp(oc,function(c,u,d){return c[d]=zp(u,o,{}),c},{})};l2=t(function(a,o,c){if(o[3]&&(a[o[3]]=c),o[2]){var u=o[2].filter(function(d){return typeof d=="number"});u.forEach(function(d){a[d.toString(16)]=c})}return a}),c2=t(function(a,o,c){if(a[c]=c,o[2]){var u=o[2].filter(function(d){return typeof d=="string"});u.forEach(function(d){a[d]=c})}return a}),d2=t(function(a,o,c){var u=o[2];return a[c]=c,u.forEach(function(d){a[d]=c}),a});var e="far"in oc||zt.autoFetchSvg,s=zp(Ek,function(a,o){var c=o[0],u=o[1],d=o[2];return u==="far"&&!e&&(u="fas"),typeof c=="string"&&(a.names[c]={prefix:u,iconName:d}),typeof c=="number"&&(a.unicodes[c.toString(16)]={prefix:u,iconName:d}),a},{names:{},unicodes:{}});u2=s.names,f2=s.unicodes,Wg=ld(zt.styleDefault,{family:zt.familyDefault})};mk(function(n){Wg=ld(n.styleDefault,{family:zt.familyDefault})});h2();function Yg(n,t){return(l2[n]||{})[t]}function Rk(n,t){return(c2[n]||{})[t]}function da(n,t){return(d2[n]||{})[t]}function p2(n){return u2[n]||{prefix:null,iconName:null}}function jk(n){var t=f2[n],e=Yg("fas",n);return t||(e?{prefix:"fas",iconName:e}:null)||{prefix:null,iconName:null}}function Or(){return Wg}var m2=function(){return{prefix:null,iconName:null,rest:[]}};function Mk(n){var t=Hn,e=o2.reduce(function(s,a){return s[a]="".concat(zt.cssPrefix,"-").concat(a),s},{});return Vw.forEach(function(s){(n.includes(e[s])||n.some(function(a){return Ak[s].includes(a)}))&&(t=s)}),t}function ld(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=t.family,s=e===void 0?Hn:e,a=ak[s][n];if(s===wc&&!n)return"fad";var o=Hv[s][n]||Hv[s][a],c=n in Vi.styles?n:null,u=o||c||null;return u}function kk(n){var t=[],e=null;return n.forEach(function(s){var a=Ck(zt.cssPrefix,s);a?e=a:s&&t.push(s)}),{iconName:e,rest:t}}function Wv(n){return n.sort().filter(function(t,e,s){return s.indexOf(t)===e})}var Yv=Yw.concat(Ww);function cd(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=t.skipLookups,s=e===void 0?!1:e,a=null,o=Wv(n.filter(function(v){return Yv.includes(v)})),c=Wv(n.filter(function(v){return!Yv.includes(v)})),u=o.filter(function(v){return a=v,!Rw.includes(v)}),d=ad(u,1),h=d[0],p=h===void 0?null:h,y=Mk(o),x=bt(bt({},kk(c)),{},{prefix:ld(p,{family:y})});return bt(bt(bt({},x),Lk({values:n,family:y,styles:oc,config:zt,canonical:x,givenPrefix:a})),Ok(s,a,x))}function Ok(n,t,e){var s=e.prefix,a=e.iconName;if(n||!s||!a)return{prefix:s,iconName:a};var o=t==="fa"?p2(a):{},c=da(s,a);return a=o.iconName||c||a,s=o.prefix||s,s==="far"&&!oc.far&&oc.fas&&!zt.autoFetchSvg&&(s="fas"),{prefix:s,iconName:a}}var Nk=Vw.filter(function(n){return n!==Hn||n!==wc}),Ik=Object.keys(Vm).filter(function(n){return n!==Hn}).map(function(n){return Object.keys(Vm[n])}).flat();function Lk(n){var t=n.values,e=n.family,s=n.canonical,a=n.givenPrefix,o=a===void 0?"":a,c=n.styles,u=c===void 0?{}:c,d=n.config,h=d===void 0?{}:d,p=e===wc,y=t.includes("fa-duotone")||t.includes("fad"),x=h.familyDefault==="duotone",v=s.prefix==="fad"||s.prefix==="fa-duotone";if(!p&&(y||x||v)&&(s.prefix="fad"),(t.includes("fa-brands")||t.includes("fab"))&&(s.prefix="fab"),!s.prefix&&Nk.includes(e)){var S=Object.keys(u).find(function(_){return Ik.includes(_)});if(S||h.autoFetchSvg){var w=Jj.get(e).defaultShortPrefixId;s.prefix=w,s.iconName=da(s.prefix,s.iconName)||s.iconName}}return(s.prefix==="fa"||o==="fa")&&(s.prefix=Or()||"fas"),s}var Dk=(function(){function n(){vj(this,n),this.definitions={}}return _j(n,[{key:"add",value:function(){for(var e=this,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];var c=a.reduce(this._pullDefinitions,{});Object.keys(c).forEach(function(u){e.definitions[u]=bt(bt({},e.definitions[u]||{}),c[u]),Qm(u,c[u]);var d=Gg[Hn][u];d&&Qm(d,c[u]),h2()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,s){var a=s.prefix&&s.iconName&&s.icon?{0:s}:s;return Object.keys(a).map(function(o){var c=a[o],u=c.prefix,d=c.iconName,h=c.icon,p=h[2];e[u]||(e[u]={}),p.length>0&&p.forEach(function(y){typeof y=="string"&&(e[u][y]=h)}),e[u][d]=h}),e}}])})(),Xv=[],fo={},po={},Bk=Object.keys(po);function Uk(n,t){var e=t.mixoutsTo;return Xv=n,fo={},Object.keys(po).forEach(function(s){Bk.indexOf(s)===-1&&delete po[s]}),Xv.forEach(function(s){var a=s.mixout?s.mixout():{};if(Object.keys(a).forEach(function(c){typeof a[c]=="function"&&(e[c]=a[c]),Df(a[c])==="object"&&Object.keys(a[c]).forEach(function(u){e[c]||(e[c]={}),e[c][u]=a[c][u]})}),s.hooks){var o=s.hooks();Object.keys(o).forEach(function(c){fo[c]||(fo[c]=[]),fo[c].push(o[c])})}s.provides&&s.provides(po)}),e}function Jm(n,t){for(var e=arguments.length,s=new Array(e>2?e-2:0),a=2;a<e;a++)s[a-2]=arguments[a];var o=fo[n]||[];return o.forEach(function(c){t=c.apply(null,[t].concat(s))}),t}function va(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),s=1;s<t;s++)e[s-1]=arguments[s];var a=fo[n]||[];a.forEach(function(o){o.apply(null,e)})}function Nr(){var n=arguments[0],t=Array.prototype.slice.call(arguments,1);return po[n]?po[n].apply(null,t):void 0}function Zm(n){n.prefix==="fa"&&(n.prefix="fas");var t=n.iconName,e=n.prefix||Or();if(t)return t=da(e,t)||t,$v(g2.definitions,e,t)||$v(Vi.styles,e,t)}var g2=new Dk,zk=function(){zt.autoReplaceSvg=!1,zt.observeMutations=!1,va("noAuto")},Pk={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ws?(va("beforeI2svg",t),Nr("pseudoElements2svg",t),Nr("i2svg",t)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.autoReplaceSvgRoot;zt.autoReplaceSvg===!1&&(zt.autoReplaceSvg=!0),zt.observeMutations=!0,wk(function(){Fk({autoReplaceSvgRoot:e}),va("watch",t)})}},Hk={icon:function(t){if(t===null)return null;if(Df(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:da(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var e=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],s=ld(t[0]);return{prefix:s,iconName:da(s,e)||e}}if(typeof t=="string"&&(t.indexOf("".concat(zt.cssPrefix,"-"))>-1||t.match(ok))){var a=cd(t.split(" "),{skipLookups:!0});return{prefix:a.prefix||Or(),iconName:da(a.prefix,a.iconName)||a.iconName}}if(typeof t=="string"){var o=Or();return{prefix:o,iconName:da(o,t)||t}}}},wi={noAuto:zk,config:zt,dom:Pk,parse:Hk,library:g2,findIconDefinition:Zm,toHtml:Ac},Fk=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.autoReplaceSvgRoot,s=e===void 0?We:e;(Object.keys(Vi.styles).length>0||zt.autoFetchSvg)&&Ws&&zt.autoReplaceSvg&&wi.dom.i2svg({node:s})};function ud(n,t){return Object.defineProperty(n,"abstract",{get:t}),Object.defineProperty(n,"html",{get:function(){return n.abstract.map(function(s){return Ac(s)})}}),Object.defineProperty(n,"node",{get:function(){if(Ws){var s=We.createElement("div");return s.innerHTML=n.html,s.children}}}),n}function Gk(n){var t=n.children,e=n.main,s=n.mask,a=n.attributes,o=n.styles,c=n.transform;if(Vg(c)&&e.found&&!s.found){var u=e.width,d=e.height,h={x:u/d/2,y:.5};a.style=od(bt(bt({},o),{},{"transform-origin":"".concat(h.x+c.x/16,"em ").concat(h.y+c.y/16,"em")}))}return[{tag:"svg",attributes:a,children:t}]}function $k(n){var t=n.prefix,e=n.iconName,s=n.children,a=n.attributes,o=n.symbol,c=o===!0?"".concat(t,"-").concat(zt.cssPrefix,"-").concat(e):o;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:bt(bt({},a),{},{id:c}),children:s}]}]}function Vk(n){var t=["aria-label","aria-labelledby","title","role"];return t.some(function(e){return e in n})}function Xg(n){var t=n.icons,e=t.main,s=t.mask,a=n.prefix,o=n.iconName,c=n.transform,u=n.symbol,d=n.maskId,h=n.extra,p=n.watchable,y=p===void 0?!1:p,x=s.found?s:e,v=x.width,S=x.height,w=[zt.replacementClass,o?"".concat(zt.cssPrefix,"-").concat(o):""].filter(function(k){return h.classes.indexOf(k)===-1}).filter(function(k){return k!==""||!!k}).concat(h.classes).join(" "),_={children:[],attributes:bt(bt({},h.attributes),{},{"data-prefix":a,"data-icon":o,class:w,role:h.attributes.role||"img",viewBox:"0 0 ".concat(v," ").concat(S)})};!Vk(h.attributes)&&!h.attributes["aria-hidden"]&&(_.attributes["aria-hidden"]="true"),y&&(_.attributes[xa]="");var A=bt(bt({},_),{},{prefix:a,iconName:o,main:e,mask:s,maskId:d,transform:c,symbol:u,styles:bt({},h.styles)}),R=s.found&&e.found?Nr("generateAbstractMask",A)||{children:[],attributes:{}}:Nr("generateAbstractIcon",A)||{children:[],attributes:{}},C=R.children,j=R.attributes;return A.children=C,A.attributes=j,u?$k(A):Gk(A)}function qv(n){var t=n.content,e=n.width,s=n.height,a=n.transform,o=n.extra,c=n.watchable,u=c===void 0?!1:c,d=bt(bt({},o.attributes),{},{class:o.classes.join(" ")});u&&(d[xa]="");var h=bt({},o.styles);Vg(a)&&(h.transform=vk({transform:a,width:e,height:s}),h["-webkit-transform"]=h.transform);var p=od(h);p.length>0&&(d.style=p);var y=[];return y.push({tag:"span",attributes:d,children:[t]}),y}function Wk(n){var t=n.content,e=n.extra,s=bt(bt({},e.attributes),{},{class:e.classes.join(" ")}),a=od(e.styles);a.length>0&&(s.style=a);var o=[];return o.push({tag:"span",attributes:s,children:[t]}),o}var Pp=Vi.styles;function tg(n){var t=n[0],e=n[1],s=n.slice(4),a=ad(s,1),o=a[0],c=null;return Array.isArray(o)?c={tag:"g",attributes:{class:"".concat(zt.cssPrefix,"-").concat(Bp.GROUP)},children:[{tag:"path",attributes:{class:"".concat(zt.cssPrefix,"-").concat(Bp.SECONDARY),fill:"currentColor",d:o[0]}},{tag:"path",attributes:{class:"".concat(zt.cssPrefix,"-").concat(Bp.PRIMARY),fill:"currentColor",d:o[1]}}]}:c={tag:"path",attributes:{fill:"currentColor",d:o}},{found:!0,width:t,height:e,icon:c}}var Yk={found:!1,width:512,height:512};function Xk(n,t){!Jw&&!zt.showMissingIcons&&n&&console.error('Icon with name "'.concat(n,'" and prefix "').concat(t,'" is missing.'))}function eg(n,t){var e=t;return t==="fa"&&zt.styleDefault!==null&&(t=Or()),new Promise(function(s,a){if(e==="fa"){var o=p2(n)||{};n=o.iconName||n,t=o.prefix||t}if(n&&t&&Pp[t]&&Pp[t][n]){var c=Pp[t][n];return s(tg(c))}Xk(n,t),s(bt(bt({},Yk),{},{icon:zt.showMissingIcons&&n?Nr("missingIconAbstract")||{}:{}}))})}var Kv=function(){},ng=zt.measurePerformance&&Gu&&Gu.mark&&Gu.measure?Gu:{mark:Kv,measure:Kv},Hl='FA "7.1.0"',qk=function(t){return ng.mark("".concat(Hl," ").concat(t," begins")),function(){return y2(t)}},y2=function(t){ng.mark("".concat(Hl," ").concat(t," ends")),ng.measure("".concat(Hl," ").concat(t),"".concat(Hl," ").concat(t," begins"),"".concat(Hl," ").concat(t," ends"))},qg={begin:qk,end:y2},jf=function(){};function Qv(n){var t=n.getAttribute?n.getAttribute(xa):null;return typeof t=="string"}function Kk(n){var t=n.getAttribute?n.getAttribute(Hg):null,e=n.getAttribute?n.getAttribute(Fg):null;return t&&e}function Qk(n){return n&&n.classList&&n.classList.contains&&n.classList.contains(zt.replacementClass)}function Jk(){if(zt.autoReplaceSvg===!0)return Mf.replace;var n=Mf[zt.autoReplaceSvg];return n||Mf.replace}function Zk(n){return We.createElementNS("http://www.w3.org/2000/svg",n)}function t3(n){return We.createElement(n)}function b2(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=t.ceFn,s=e===void 0?n.tag==="svg"?Zk:t3:e;if(typeof n=="string")return We.createTextNode(n);var a=s(n.tag);Object.keys(n.attributes||[]).forEach(function(c){a.setAttribute(c,n.attributes[c])});var o=n.children||[];return o.forEach(function(c){a.appendChild(b2(c,{ceFn:s}))}),a}function e3(n){var t=" ".concat(n.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var Mf={replace:function(t){var e=t[0];if(e.parentNode)if(t[1].forEach(function(a){e.parentNode.insertBefore(b2(a),e)}),e.getAttribute(xa)===null&&zt.keepOriginalSource){var s=We.createComment(e3(e));e.parentNode.replaceChild(s,e)}else e.remove()},nest:function(t){var e=t[0],s=t[1];if(~$g(e).indexOf(zt.replacementClass))return Mf.replace(t);var a=new RegExp("".concat(zt.cssPrefix,"-.*"));if(delete s[0].attributes.id,s[0].attributes.class){var o=s[0].attributes.class.split(" ").reduce(function(u,d){return d===zt.replacementClass||d.match(a)?u.toSvg.push(d):u.toNode.push(d),u},{toNode:[],toSvg:[]});s[0].attributes.class=o.toSvg.join(" "),o.toNode.length===0?e.removeAttribute("class"):e.setAttribute("class",o.toNode.join(" "))}var c=s.map(function(u){return Ac(u)}).join(`
`);e.setAttribute(xa,""),e.innerHTML=c}};function Jv(n){n()}function x2(n,t){var e=typeof t=="function"?t:jf;if(n.length===0)e();else{var s=Jv;zt.mutateApproach===sk&&(s=kr.requestAnimationFrame||Jv),s(function(){var a=Jk(),o=qg.begin("mutate");n.map(a),o(),e()})}}var Kg=!1;function v2(){Kg=!0}function ig(){Kg=!1}var Uf=null;function Zv(n){if(Bv&&zt.observeMutations){var t=n.treeCallback,e=t===void 0?jf:t,s=n.nodeCallback,a=s===void 0?jf:s,o=n.pseudoElementsCallback,c=o===void 0?jf:o,u=n.observeMutationsRoot,d=u===void 0?We:u;Uf=new Bv(function(h){if(!Kg){var p=Or();ko(h).forEach(function(y){if(y.type==="childList"&&y.addedNodes.length>0&&!Qv(y.addedNodes[0])&&(zt.searchPseudoElements&&c(y.target),e(y.target)),y.type==="attributes"&&y.target.parentNode&&zt.searchPseudoElements&&c([y.target],!0),y.type==="attributes"&&Qv(y.target)&&~uk.indexOf(y.attributeName))if(y.attributeName==="class"&&Kk(y.target)){var x=cd($g(y.target)),v=x.prefix,S=x.iconName;y.target.setAttribute(Hg,v||p),S&&y.target.setAttribute(Fg,S)}else Qk(y.target)&&a(y.target)})}}),Ws&&Uf.observe(d,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function n3(){Uf&&Uf.disconnect()}function i3(n){var t=n.getAttribute("style"),e=[];return t&&(e=t.split(";").reduce(function(s,a){var o=a.split(":"),c=o[0],u=o.slice(1);return c&&u.length>0&&(s[c]=u.join(":").trim()),s},{})),e}function s3(n){var t=n.getAttribute("data-prefix"),e=n.getAttribute("data-icon"),s=n.innerText!==void 0?n.innerText.trim():"",a=cd($g(n));return a.prefix||(a.prefix=Or()),t&&e&&(a.prefix=t,a.iconName=e),a.iconName&&a.prefix||(a.prefix&&s.length>0&&(a.iconName=Rk(a.prefix,n.innerText)||Yg(a.prefix,a2(n.innerText))),!a.iconName&&zt.autoFetchSvg&&n.firstChild&&n.firstChild.nodeType===Node.TEXT_NODE&&(a.iconName=n.firstChild.data)),a}function r3(n){var t=ko(n.attributes).reduce(function(e,s){return e.name!=="class"&&e.name!=="style"&&(e[s.name]=s.value),e},{});return t}function a3(){return{iconName:null,prefix:null,transform:hs,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function t1(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},e=s3(n),s=e.iconName,a=e.prefix,o=e.rest,c=r3(n),u=Jm("parseNodeAttributes",{},n),d=t.styleParser?i3(n):[];return bt({iconName:s,prefix:a,transform:hs,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:o,styles:d,attributes:c}},u)}var o3=Vi.styles;function S2(n){var t=zt.autoReplaceSvg==="nest"?t1(n,{styleParser:!1}):t1(n);return~t.extra.classes.indexOf(t2)?Nr("generateLayersText",n,t):Nr("generateSvgReplacementMutation",n,t)}function l3(){return[].concat(Yi(Ww),Yi(Yw))}function e1(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Ws)return Promise.resolve();var e=We.documentElement.classList,s=function(y){return e.add("".concat(Pv,"-").concat(y))},a=function(y){return e.remove("".concat(Pv,"-").concat(y))},o=zt.autoFetchSvg?l3():Rw.concat(Object.keys(o3));o.includes("fa")||o.push("fa");var c=[".".concat(t2,":not([").concat(xa,"])")].concat(o.map(function(p){return".".concat(p,":not([").concat(xa,"])")})).join(", ");if(c.length===0)return Promise.resolve();var u=[];try{u=ko(n.querySelectorAll(c))}catch{}if(u.length>0)s("pending"),a("complete");else return Promise.resolve();var d=qg.begin("onTree"),h=u.reduce(function(p,y){try{var x=S2(y);x&&p.push(x)}catch(v){Jw||v.name==="MissingIcon"&&console.error(v)}return p},[]);return new Promise(function(p,y){Promise.all(h).then(function(x){x2(x,function(){s("active"),s("complete"),a("pending"),typeof t=="function"&&t(),d(),p()})}).catch(function(x){d(),y(x)})})}function c3(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;S2(n).then(function(e){e&&x2([e],t)})}function u3(n){return function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=(t||{}).icon?t:Zm(t||{}),a=e.mask;return a&&(a=(a||{}).icon?a:Zm(a||{})),n(s,bt(bt({},e),{},{mask:a}))}}var f3=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=e.transform,a=s===void 0?hs:s,o=e.symbol,c=o===void 0?!1:o,u=e.mask,d=u===void 0?null:u,h=e.maskId,p=h===void 0?null:h,y=e.classes,x=y===void 0?[]:y,v=e.attributes,S=v===void 0?{}:v,w=e.styles,_=w===void 0?{}:w;if(t){var A=t.prefix,R=t.iconName,C=t.icon;return ud(bt({type:"icon"},t),function(){return va("beforeDOMElementCreation",{iconDefinition:t,params:e}),Xg({icons:{main:tg(C),mask:d?tg(d.icon):{found:!1,width:null,height:null,icon:{}}},prefix:A,iconName:R,transform:bt(bt({},hs),a),symbol:c,maskId:p,extra:{attributes:S,styles:_,classes:x}})})}},d3={mixout:function(){return{icon:u3(f3)}},hooks:function(){return{mutationObserverCallbacks:function(e){return e.treeCallback=e1,e.nodeCallback=c3,e}}},provides:function(t){t.i2svg=function(e){var s=e.node,a=s===void 0?We:s,o=e.callback,c=o===void 0?function(){}:o;return e1(a,c)},t.generateSvgReplacementMutation=function(e,s){var a=s.iconName,o=s.prefix,c=s.transform,u=s.symbol,d=s.mask,h=s.maskId,p=s.extra;return new Promise(function(y,x){Promise.all([eg(a,o),d.iconName?eg(d.iconName,d.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(v){var S=ad(v,2),w=S[0],_=S[1];y([e,Xg({icons:{main:w,mask:_},prefix:o,iconName:a,transform:c,symbol:u,maskId:h,extra:p,watchable:!0})])}).catch(x)})},t.generateAbstractIcon=function(e){var s=e.children,a=e.attributes,o=e.main,c=e.transform,u=e.styles,d=od(u);d.length>0&&(a.style=d);var h;return Vg(c)&&(h=Nr("generateAbstractTransformGrouping",{main:o,transform:c,containerWidth:o.width,iconWidth:o.width})),s.push(h||o.icon),{children:s,attributes:a}}}},h3={mixout:function(){return{layer:function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.classes,o=a===void 0?[]:a;return ud({type:"layer"},function(){va("beforeDOMElementCreation",{assembler:e,params:s});var c=[];return e(function(u){Array.isArray(u)?u.map(function(d){c=c.concat(d.abstract)}):c=c.concat(u.abstract)}),[{tag:"span",attributes:{class:["".concat(zt.cssPrefix,"-layers")].concat(Yi(o)).join(" ")},children:c}]})}}}},p3={mixout:function(){return{counter:function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s.title;var a=s.classes,o=a===void 0?[]:a,c=s.attributes,u=c===void 0?{}:c,d=s.styles,h=d===void 0?{}:d;return ud({type:"counter",content:e},function(){return va("beforeDOMElementCreation",{content:e,params:s}),Wk({content:e.toString(),extra:{attributes:u,styles:h,classes:["".concat(zt.cssPrefix,"-layers-counter")].concat(Yi(o))}})})}}}},m3={mixout:function(){return{text:function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.transform,o=a===void 0?hs:a,c=s.classes,u=c===void 0?[]:c,d=s.attributes,h=d===void 0?{}:d,p=s.styles,y=p===void 0?{}:p;return ud({type:"text",content:e},function(){return va("beforeDOMElementCreation",{content:e,params:s}),qv({content:e,transform:bt(bt({},hs),o),extra:{attributes:h,styles:y,classes:["".concat(zt.cssPrefix,"-layers-text")].concat(Yi(u))}})})}}},provides:function(t){t.generateLayersText=function(e,s){var a=s.transform,o=s.extra,c=null,u=null;if(Tw){var d=parseInt(getComputedStyle(e).fontSize,10),h=e.getBoundingClientRect();c=h.width/d,u=h.height/d}return Promise.resolve([e,qv({content:e.innerHTML,width:c,height:u,transform:a,extra:o,watchable:!0})])}}},_2=new RegExp('"',"ug"),n1=[1105920,1112319],i1=bt(bt(bt(bt({},{FontAwesome:{normal:"fas",400:"fas"}}),Qj),nk),aM),sg=Object.keys(i1).reduce(function(n,t){return n[t.toLowerCase()]=i1[t],n},{}),g3=Object.keys(sg).reduce(function(n,t){var e=sg[t];return n[t]=e[900]||Yi(Object.entries(e))[0][1],n},{});function y3(n){var t=n.replace(_2,"");return a2(Yi(t)[0]||"")}function b3(n){var t=n.getPropertyValue("font-feature-settings").includes("ss01"),e=n.getPropertyValue("content"),s=e.replace(_2,""),a=s.codePointAt(0),o=a>=n1[0]&&a<=n1[1],c=s.length===2?s[0]===s[1]:!1;return o||c||t}function x3(n,t){var e=n.replace(/^['"]|['"]$/g,"").toLowerCase(),s=parseInt(t),a=isNaN(s)?"normal":s;return(sg[e]||{})[a]||g3[e]}function s1(n,t){var e="".concat(ik).concat(t.replace(":","-"));return new Promise(function(s,a){if(n.getAttribute(e)!==null)return s();var o=ko(n.children),c=o.filter(function(I){return I.getAttribute(Ym)===t})[0],u=kr.getComputedStyle(n,t),d=u.getPropertyValue("font-family"),h=d.match(lk),p=u.getPropertyValue("font-weight"),y=u.getPropertyValue("content");if(c&&!h)return n.removeChild(c),s();if(h&&y!=="none"&&y!==""){var x=u.getPropertyValue("content"),v=x3(d,p),S=y3(x),w=h[0].startsWith("FontAwesome"),_=b3(u),A=Yg(v,S),R=A;if(w){var C=jk(S);C.iconName&&C.prefix&&(A=C.iconName,v=C.prefix)}if(A&&!_&&(!c||c.getAttribute(Hg)!==v||c.getAttribute(Fg)!==R)){n.setAttribute(e,R),c&&n.removeChild(c);var j=a3(),k=j.extra;k.attributes[Ym]=t,eg(A,v).then(function(I){var N=Xg(bt(bt({},j),{},{icons:{main:I,mask:m2()},prefix:v,iconName:R,extra:k,watchable:!0})),L=We.createElementNS("http://www.w3.org/2000/svg","svg");t==="::before"?n.insertBefore(L,n.firstChild):n.appendChild(L),L.outerHTML=N.map(function(H){return Ac(H)}).join(`
`),n.removeAttribute(e),s()}).catch(a)}else s()}else s()})}function v3(n){return Promise.all([s1(n,"::before"),s1(n,"::after")])}function S3(n){return n.parentNode!==document.head&&!~rk.indexOf(n.tagName.toUpperCase())&&!n.getAttribute(Ym)&&(!n.parentNode||n.parentNode.tagName!=="svg")}var _3=function(t){return!!t&&Qw.some(function(e){return t.includes(e)})},w3=function(t){if(!t)return[];var e=new Set,s=t.split(/,(?![^()]*\))/).map(function(d){return d.trim()});s=s.flatMap(function(d){return d.includes("(")?d:d.split(",").map(function(h){return h.trim()})});var a=Rf(s),o;try{for(a.s();!(o=a.n()).done;){var c=o.value;if(_3(c)){var u=Qw.reduce(function(d,h){return d.replace(h,"")},c);u!==""&&u!=="*"&&e.add(u)}}}catch(d){a.e(d)}finally{a.f()}return e};function r1(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Ws){var e;if(t)e=n;else if(zt.searchPseudoElementsFullScan)e=n.querySelectorAll("*");else{var s=new Set,a=Rf(document.styleSheets),o;try{for(a.s();!(o=a.n()).done;){var c=o.value;try{var u=Rf(c.cssRules),d;try{for(u.s();!(d=u.n()).done;){var h=d.value,p=w3(h.selectorText),y=Rf(p),x;try{for(y.s();!(x=y.n()).done;){var v=x.value;s.add(v)}}catch(w){y.e(w)}finally{y.f()}}}catch(w){u.e(w)}finally{u.f()}}catch(w){zt.searchPseudoElementsWarnings&&console.warn("Font Awesome: cannot parse stylesheet: ".concat(c.href," (").concat(w.message,`)
If it declares any Font Awesome CSS pseudo-elements, they will not be rendered as SVG icons. Add crossorigin="anonymous" to the <link>, enable searchPseudoElementsFullScan for slower but more thorough DOM parsing, or suppress this warning by setting searchPseudoElementsWarnings to false.`))}}}catch(w){a.e(w)}finally{a.f()}if(!s.size)return;var S=Array.from(s).join(", ");try{e=n.querySelectorAll(S)}catch{}}return new Promise(function(w,_){var A=ko(e).filter(S3).map(v3),R=qg.begin("searchPseudoElements");v2(),Promise.all(A).then(function(){R(),ig(),w()}).catch(function(){R(),ig(),_()})})}}var E3={hooks:function(){return{mutationObserverCallbacks:function(e){return e.pseudoElementsCallback=r1,e}}},provides:function(t){t.pseudoElements2svg=function(e){var s=e.node,a=s===void 0?We:s;zt.searchPseudoElements&&r1(a)}}},a1=!1,A3={mixout:function(){return{dom:{unwatch:function(){v2(),a1=!0}}}},hooks:function(){return{bootstrap:function(){Zv(Jm("mutationObserverCallbacks",{}))},noAuto:function(){n3()},watch:function(e){var s=e.observeMutationsRoot;a1?ig():Zv(Jm("mutationObserverCallbacks",{observeMutationsRoot:s}))}}}},o1=function(t){var e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(s,a){var o=a.toLowerCase().split("-"),c=o[0],u=o.slice(1).join("-");if(c&&u==="h")return s.flipX=!0,s;if(c&&u==="v")return s.flipY=!0,s;if(u=parseFloat(u),isNaN(u))return s;switch(c){case"grow":s.size=s.size+u;break;case"shrink":s.size=s.size-u;break;case"left":s.x=s.x-u;break;case"right":s.x=s.x+u;break;case"up":s.y=s.y-u;break;case"down":s.y=s.y+u;break;case"rotate":s.rotate=s.rotate+u;break}return s},e)},T3={mixout:function(){return{parse:{transform:function(e){return o1(e)}}}},hooks:function(){return{parseNodeAttributes:function(e,s){var a=s.getAttribute("data-fa-transform");return a&&(e.transform=o1(a)),e}}},provides:function(t){t.generateAbstractTransformGrouping=function(e){var s=e.main,a=e.transform,o=e.containerWidth,c=e.iconWidth,u={transform:"translate(".concat(o/2," 256)")},d="translate(".concat(a.x*32,", ").concat(a.y*32,") "),h="scale(".concat(a.size/16*(a.flipX?-1:1),", ").concat(a.size/16*(a.flipY?-1:1),") "),p="rotate(".concat(a.rotate," 0 0)"),y={transform:"".concat(d," ").concat(h," ").concat(p)},x={transform:"translate(".concat(c/2*-1," -256)")},v={outer:u,inner:y,path:x};return{tag:"g",attributes:bt({},v.outer),children:[{tag:"g",attributes:bt({},v.inner),children:[{tag:s.icon.tag,children:s.icon.children,attributes:bt(bt({},s.icon.attributes),v.path)}]}]}}}},Hp={x:0,y:0,width:"100%",height:"100%"};function l1(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n.attributes&&(n.attributes.fill||t)&&(n.attributes.fill="black"),n}function C3(n){return n.tag==="g"?n.children:[n]}var R3={hooks:function(){return{parseNodeAttributes:function(e,s){var a=s.getAttribute("data-fa-mask"),o=a?cd(a.split(" ").map(function(c){return c.trim()})):m2();return o.prefix||(o.prefix=Or()),e.mask=o,e.maskId=s.getAttribute("data-fa-mask-id"),e}}},provides:function(t){t.generateAbstractMask=function(e){var s=e.children,a=e.attributes,o=e.main,c=e.mask,u=e.maskId,d=e.transform,h=o.width,p=o.icon,y=c.width,x=c.icon,v=xk({transform:d,containerWidth:y,iconWidth:h}),S={tag:"rect",attributes:bt(bt({},Hp),{},{fill:"white"})},w=p.children?{children:p.children.map(l1)}:{},_={tag:"g",attributes:bt({},v.inner),children:[l1(bt({tag:p.tag,attributes:bt(bt({},p.attributes),v.path)},w))]},A={tag:"g",attributes:bt({},v.outer),children:[_]},R="mask-".concat(u||Fv()),C="clip-".concat(u||Fv()),j={tag:"mask",attributes:bt(bt({},Hp),{},{id:R,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[S,A]},k={tag:"defs",children:[{tag:"clipPath",attributes:{id:C},children:C3(x)},j]};return s.push(k,{tag:"rect",attributes:bt({fill:"currentColor","clip-path":"url(#".concat(C,")"),mask:"url(#".concat(R,")")},Hp)}),{children:s,attributes:a}}}},j3={provides:function(t){var e=!1;kr.matchMedia&&(e=kr.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var s=[],a={fill:"currentColor"},o={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};s.push({tag:"path",attributes:bt(bt({},a),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var c=bt(bt({},o),{},{attributeName:"opacity"}),u={tag:"circle",attributes:bt(bt({},a),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||u.children.push({tag:"animate",attributes:bt(bt({},o),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:bt(bt({},c),{},{values:"1;0;1;1;0;1;"})}),s.push(u),s.push({tag:"path",attributes:bt(bt({},a),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:bt(bt({},c),{},{values:"1;0;0;0;0;1;"})}]}),e||s.push({tag:"path",attributes:bt(bt({},a),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:bt(bt({},c),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:s}}}},M3={hooks:function(){return{parseNodeAttributes:function(e,s){var a=s.getAttribute("data-fa-symbol"),o=a===null?!1:a===""?!0:a;return e.symbol=o,e}}}},k3=[_k,d3,h3,p3,m3,E3,A3,T3,R3,j3,M3];Uk(k3,{mixoutsTo:wi});wi.noAuto;var lc=wi.config;wi.library;wi.dom;var w2=wi.parse;wi.findIconDefinition;wi.toHtml;var O3=wi.icon;wi.layer;wi.text;wi.counter;function N3(n){return n=n-0,n===n}function E2(n){return N3(n)?n:(n=n.replace(/[_-]+(.)?/g,(t,e)=>e?e.toUpperCase():""),n.charAt(0).toLowerCase()+n.slice(1))}function I3(n){return n.charAt(0).toUpperCase()+n.slice(1)}var ro=new Map,L3=1e3;function D3(n){if(ro.has(n))return ro.get(n);const t={};let e=0;const s=n.length;for(;e<s;){const a=n.indexOf(";",e),o=a===-1?s:a,c=n.slice(e,o).trim();if(c){const u=c.indexOf(":");if(u>0){const d=c.slice(0,u).trim(),h=c.slice(u+1).trim();if(d&&h){const p=E2(d);t[p.startsWith("webkit")?I3(p):p]=h}}}e=o+1}if(ro.size===L3){const a=ro.keys().next().value;a&&ro.delete(a)}return ro.set(n,t),t}function A2(n,t,e={}){if(typeof t=="string")return t;const s=(t.children||[]).map(p=>A2(n,p)),a=t.attributes||{},o={};for(const[p,y]of Object.entries(a))switch(!0){case p==="class":{o.className=y;break}case p==="style":{o.style=D3(String(y));break}case p.startsWith("aria-"):case p.startsWith("data-"):{o[p.toLowerCase()]=y;break}default:o[E2(p)]=y}const{style:c,role:u,"aria-label":d,...h}=e;return c&&(o.style=o.style?{...o.style,...c}:c),u&&(o.role=u),d&&(o["aria-label"]=d,o["aria-hidden"]="false"),n(t.tag,{...h,...o},...s)}var B3=A2.bind(null,Qf.createElement),c1=(n,t)=>{const e=E.useId();return n||(t?e:void 0)},U3=class{constructor(n="react-fontawesome"){this.enabled=!1;let t=!1;try{t=typeof process<"u"&&!1}catch{}this.scope=n,this.enabled=t}log(...n){this.enabled&&console.log(`[${this.scope}]`,...n)}warn(...n){this.enabled&&console.warn(`[${this.scope}]`,...n)}error(...n){this.enabled&&console.error(`[${this.scope}]`,...n)}},z3="searchPseudoElementsFullScan"in lc?"7.0.0":"6.0.0",P3=Number.parseInt(z3)>=7,Zl="fa",Ds={beat:"fa-beat",fade:"fa-fade",beatFade:"fa-beat-fade",bounce:"fa-bounce",shake:"fa-shake",spin:"fa-spin",spinPulse:"fa-spin-pulse",spinReverse:"fa-spin-reverse",pulse:"fa-pulse"},H3={left:"fa-pull-left",right:"fa-pull-right"},F3={90:"fa-rotate-90",180:"fa-rotate-180",270:"fa-rotate-270"},G3={"2xs":"fa-2xs",xs:"fa-xs",sm:"fa-sm",lg:"fa-lg",xl:"fa-xl","2xl":"fa-2xl","1x":"fa-1x","2x":"fa-2x","3x":"fa-3x","4x":"fa-4x","5x":"fa-5x","6x":"fa-6x","7x":"fa-7x","8x":"fa-8x","9x":"fa-9x","10x":"fa-10x"},Bs={border:"fa-border",fixedWidth:"fa-fw",flip:"fa-flip",flipHorizontal:"fa-flip-horizontal",flipVertical:"fa-flip-vertical",inverse:"fa-inverse",rotateBy:"fa-rotate-by",swapOpacity:"fa-swap-opacity",widthAuto:"fa-width-auto"};function $3(n){const t=lc.cssPrefix||lc.familyPrefix||Zl;return t===Zl?n:n.replace(new RegExp(String.raw`(?<=^|\s)${Zl}-`,"g"),`${t}-`)}function V3(n){const{beat:t,fade:e,beatFade:s,bounce:a,shake:o,spin:c,spinPulse:u,spinReverse:d,pulse:h,fixedWidth:p,inverse:y,border:x,flip:v,size:S,rotation:w,pull:_,swapOpacity:A,rotateBy:R,widthAuto:C,className:j}=n,k=[];return j&&k.push(...j.split(" ")),t&&k.push(Ds.beat),e&&k.push(Ds.fade),s&&k.push(Ds.beatFade),a&&k.push(Ds.bounce),o&&k.push(Ds.shake),c&&k.push(Ds.spin),d&&k.push(Ds.spinReverse),u&&k.push(Ds.spinPulse),h&&k.push(Ds.pulse),p&&k.push(Bs.fixedWidth),y&&k.push(Bs.inverse),x&&k.push(Bs.border),v===!0&&k.push(Bs.flip),(v==="horizontal"||v==="both")&&k.push(Bs.flipHorizontal),(v==="vertical"||v==="both")&&k.push(Bs.flipVertical),S!=null&&k.push(G3[S]),w!=null&&w!==0&&k.push(F3[w]),_!=null&&k.push(H3[_]),A&&k.push(Bs.swapOpacity),P3?(R&&k.push(Bs.rotateBy),C&&k.push(Bs.widthAuto),(lc.cssPrefix||lc.familyPrefix||Zl)===Zl?k:k.map($3)):k}var W3=n=>typeof n=="object"&&"icon"in n&&!!n.icon;function u1(n){if(n)return W3(n)?n:w2.icon(n)}function Y3(n){return Object.keys(n)}var f1=new U3("FontAwesomeIcon"),T2={border:!1,className:"",mask:void 0,maskId:void 0,fixedWidth:!1,inverse:!1,flip:!1,icon:void 0,listItem:!1,pull:void 0,pulse:!1,rotation:void 0,rotateBy:!1,size:void 0,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:void 0,transform:void 0,swapOpacity:!1,widthAuto:!1},X3=new Set(Object.keys(T2)),Qg=Qf.forwardRef((n,t)=>{const e={...T2,...n},{icon:s,mask:a,symbol:o,title:c,titleId:u,maskId:d,transform:h}=e,p=c1(d,!!a),y=c1(u,!!c),x=u1(s);if(!x)return f1.error("Icon lookup is undefined",s),null;const v=V3(e),S=typeof h=="string"?w2.transform(h):h,w=u1(a),_=O3(x,{...v.length>0&&{classes:v},...S&&{transform:S},...w&&{mask:w},symbol:o,title:c,titleId:y,maskId:p});if(!_)return f1.error("Could not find icon",x),null;const{abstract:A}=_,R={ref:t};for(const C of Y3(e))X3.has(C)||(R[C]=e[C]);return B3(A[0],R)});Qg.displayName="FontAwesomeIcon";var q3={prefix:"fas",iconName:"exclamation",icon:[128,512,[10069,10071,61738],"21","M64 432c22.1 0 40 17.9 40 40s-17.9 40-40 40-40-17.9-40-40c0-22.1 17.9-40 40-40zM64 0c26.5 0 48 21.5 48 48 0 .6 0 1.1 0 1.7l-16 304c-.9 17-15 30.3-32 30.3S33 370.7 32 353.7L16 49.7c0-.6 0-1.1 0-1.7 0-26.5 21.5-48 48-48z"]},K3={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144,62470,"user-alt","user-large"],"f007","M224 248a120 120 0 1 0 0-240 120 120 0 1 0 0 240zm-29.7 56C95.8 304 16 383.8 16 482.3 16 498.7 29.3 512 45.7 512l356.6 0c16.4 0 29.7-13.3 29.7-29.7 0-98.5-79.8-178.3-178.3-178.3l-59.4 0z"]};function Jg({profileImg:n,userId:t,size:e=28,marginRight:s=0}){const a=(Number(t)||0)%8,o=["linear-gradient(135deg, #008c8c, #00b4b4)","linear-gradient(135deg, #6a11cb, #2575fc)","linear-gradient(135deg, #f093fb, #f5576c)","linear-gradient(135deg, #4facfe, #00f2fe)","linear-gradient(135deg, #43e97b, #38f9d7)","linear-gradient(135deg, #fa709a, #fee140)","linear-gradient(135deg, #30cfd0, #330867)","linear-gradient(135deg, #a8edea, #fed6e3)"],[c,u]=E.useState(!1),d=E.useMemo(()=>{if(!n)return null;const h=String(n).trim();return h.startsWith("http://")||h.startsWith("https://")?h:h.startsWith("/")?`http://localhost:8080${h}`:`http://localhost:8080/upload/${h}`},[n]);if(d&&!c){const h=d.startsWith("http://localhost:8080")?`${d}${d.includes("?")?"&":"?"}t=${Date.now()}`:d;return m.jsx("img",{src:h,alt:"profile",onError:()=>u(!0),style:{width:e,height:e,borderRadius:"50%",objectFit:"cover",display:"block",border:"2px solid #008c8c",marginRight:s}})}return m.jsx("div",{style:{background:o[a],width:e,height:e,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",border:"2px solid #008c8c",marginRight:s},children:m.jsx(Qg,{icon:K3,style:{fontSize:e*.6,color:"#ffffff"}})})}const C2={normal:1,accent:1};function Zg(){try{const n=localStorage.getItem("userSettings");return n?JSON.parse(n):null}catch{return null}}function Oo(n,t=1){const e=Zg();if(e&&e.hitSound===!1)return;const s=new Audio(n),a=e&&e.sfxMute?0:e?e.sfxVolume/100:1;s.volume=t*a,s.play().catch(()=>{})}function Q3(n=1){Oo("/sound/hit/hit_tap.wav",C2.normal*n)}function J3(n=1){Oo("/sound/hit/hit_tap_accent.wav",C2.accent*n)}const Vu=["/sound/bgm/menu1.mp3","/sound/bgm/menu2.mp3","/sound/bgm/menu3.mp3","/sound/bgm/menu4.mp3","/sound/bgm/menu5.mp3","/sound/bgm/menu6.mp3","/sound/bgm/menu7.mp3"];let Nn=null,mo=!1,cc=!1,d1=-1,rg=.4,Gn=null,lo=null,ha=null,h1=!1;function Z3(n){if(Gn||(Gn=new(window.AudioContext||window.webkitAudioContext)),Gn.state==="suspended"&&Gn.resume().catch(()=>{}),ha)try{ha.disconnect()}catch{}ha=Gn.createMediaElementSource(n),lo||(lo=Gn.createAnalyser(),lo.fftSize=256),ha.connect(lo),h1||(lo.connect(Gn.destination),h1=!0)}function t4(){Nn&&(Nn.volume=0)}function e4(){Nn&&(Nn.volume=rg)}function No(){fd(),cc=!1;let n=Math.floor(Math.random()*Vu.length);if(Vu.length>1)for(;n===d1;)n=Math.floor(Math.random()*Vu.length);d1=n,Nn=new Audio(Vu[n]),Nn.crossOrigin="anonymous",Nn.loop=!1;const t=Zg();rg=.4*(t&&t.bgmMute?0:t?t.bgmVolume/100:1),Nn.volume=rg,Z3(Nn),Nn.play().catch(()=>{}),Nn.onended=()=>{cc||No()},mo=!0}function n4(){Nn&&(mo?(Nn.pause(),mo=!1,cc=!0):(Gn&&Gn.state==="suspended"&&Gn.resume(),Nn.play().catch(()=>{}),mo=!0,cc=!1))}function fd(){if(Nn&&(Nn.pause(),Nn.currentTime=0,Nn=null,mo=!1,cc=!1,ha)){try{ha.disconnect()}catch{}ha=null}}function go(){return mo}function p1(){Oo("/sound/ui/menu_move.wav",.5)}function yo(){Oo("/sound/ui/menu_confirm.wav",.6)}function i4(){Oo("/sound/ui/count_tick.wav",.6)}function s4(){Oo("/sound/ui/count_start.wav",.8)}let na=null,Tr=null;function r4(){na&&(na.pause(),na.currentTime=0,na=null),na=new Audio("/sound/ui/result_enter.wav"),na.volume=.7,na.play().catch(()=>{})}function a4(){ag(),Tr=new Audio("/sound/ui/result_loop.wav"),Tr.loop=!0,Tr.volume=.35,Tr.play().catch(()=>{})}function ag(){Tr&&(Tr.pause(),Tr.currentTime=0,Tr=null)}let Fl=null,kf=null;function Gi(){kf&&(clearTimeout(kf),kf=null),Fl&&(Fl.pause(),Fl.currentTime=0,Fl=null,e4())}function o4(n,{startSec:t=0,durationSec:e=8,volume:s=.8}={}){const a=Zg();if(a&&a.previewMute)return;Gi();const o=a?a.previewVolume/100:1,c=new Audio(n);c.volume=s*o,c.currentTime=t,Fl=c,t4(),c.play().catch(()=>{}),kf=setTimeout(()=>{Gi()},e*1e3)}let Wu=null;function Gl(){Gn||(Gn=new(window.AudioContext||window.webkitAudioContext)),Gn.state==="suspended"&&Gn.resume().catch(()=>{}),Wu||(Wu=Gn.createGain(),Wu.gain.value=0,Wu.connect(Gn.destination))}function dd(){return lo}const m1={game:{GAIN:6,MIN_SCALE:.08,MAX_SCALE:3.6,WOBBLE:.25,BAR_COUNT:48},menu:{GAIN:3.2,MIN_SCALE:.05,MAX_SCALE:1.8,WOBBLE:.15,BAR_COUNT:48}};function Ea({size:n="small",active:t=!1,analyserRef:e,preset:s,style:a}){const o=n==="game",u=m1[s??(o?"game":"menu")]??m1.game,{GAIN:d,MIN_SCALE:h,MAX_SCALE:p,WOBBLE:y,BAR_COUNT:x}=u,v=E.useRef([]),S=E.useRef(t),w=E.useRef(0),_=E.useRef(new Uint8Array(128)),A=E.useRef(0);E.useEffect(()=>{S.current=t},[t]);const R=E.useMemo(()=>Array.from({length:x},(j,k)=>{const I=Math.sin(k*127.1)*43758.5453,N=I-Math.floor(I),L=N,H=(.7+k*73%100/100*.6)*(.6+N*.9),B=1+Math.sin(k*.7)*y,U=d*H*B;return{bandRatio:L,gain:U}}),[x,d,y]);E.useEffect(()=>{if(!o)return;const j=()=>{const k=e?.current;if(!k||!S.current){A.current=requestAnimationFrame(j);return}const I=_.current;k.getByteFrequencyData(I);let N=0;for(let H=0;H<I.length;H++)I[H]>N&&(N=I[H]);let L=0;for(let H=0;H<I.length;H++)L+=I[H];w.current=L/I.length/255;for(let H=0;H<x;H++){const B=v.current[H];if(!B)continue;const U=R[H],z=Math.floor(U.bandRatio*I.length),V=I[z]/255*.45+w.current*.55,J=h+V*U.gain,O=J>p?p:J;B.style.transform=`scaleY(${O})`}A.current=requestAnimationFrame(j)};return A.current=requestAnimationFrame(j),()=>cancelAnimationFrame(A.current)},[o,e,x,R,h,p]);const C=m.jsx("div",{className:["visualizer",`visualizer--${n}`,t?"is-active":""].join(" "),style:a,"aria-hidden":"true",children:Array.from({length:o?x:4}).map((j,k)=>m.jsx("span",{ref:I=>v.current[k]=I},k))});return o?Jf.createPortal(C,document.body):C}const ia={judgeText:!0,comboText:!0,hitEffect:!0,hitSound:!0,bgmVolume:80,previewVolume:80,sfxVolume:80,tapNoteColor:371893,longNoteColor:11863369,fps:60,lowEffect:!1,visualizer:!0};function Ys({onLogout:n=()=>{}}){const e=en(),s=li(),o=["/login","/join","/re-password","/terms","/"].includes(s.pathname),c=s.pathname.startsWith("/game"),u=s.pathname.startsWith("/song/editor")||s.pathname.includes("/note/edit"),d=!c&&!u,[h,p]=E.useState(!1),[y,x]=E.useState(!1),[v,S]=E.useState(!1),[w,_]=E.useState(()=>{try{const U=localStorage.getItem("userSettings");if(!U)return{...ia};const z=JSON.parse(U);return{...ia,...z,tapNoteColor:typeof z.tapNoteColor=="number"?z.tapNoteColor:parseInt(String(z.tapNoteColor||"").replace("#",""),16)||ia.tapNoteColor,longNoteColor:typeof z.longNoteColor=="number"?z.longNoteColor:parseInt(String(z.longNoteColor||"").replace("#",""),16)||ia.longNoteColor}}catch{return{...ia}}}),[A,R]=E.useState(null),[C,j]=E.useState(!0),k=A?.loginUserRole==="BLOCK",[I,N]=E.useState({messages:!1,admin:!1,friend:!1}),L=I.messages||I.admin||I.friend,H=I.messages,B=()=>{n4(),p(go())};return E.useEffect(()=>{(async()=>{try{const z=await _o();z.data?.ok?R({loginUserId:z.data.loginUserId,loginUser:z.data.loginUser,loginUserNickName:z.data.loginUserNickName,loginUserRole:z.data.loginUserRole}):R(null)}catch{R(null)}finally{j(!1)}})()},[s.pathname]),E.useEffect(()=>{const U=V=>{const J=Number(V?.detail?.count??0),O=Number.isFinite(J)&&J>0;N($=>$.messages===O?$:{...$,messages:O})},z=V=>{const J=Number(V?.detail?.count??0),O=Number.isFinite(J)&&J>0;N($=>$.admin===O?$:{...$,admin:O})},G=V=>{const J=Number(V?.detail?.count??0),O=Number.isFinite(J)&&J>0;N($=>$.friend===O?$:{...$,friend:O})};return window.addEventListener("pm:unread",U),window.addEventListener("admin:alert",z),window.addEventListener("friend:alert",G),()=>{window.removeEventListener("pm:unread",U),window.removeEventListener("admin:alert",z),window.removeEventListener("friend:alert",G)}},[]),E.useEffect(()=>{d||(fd(),p(!1),x(!1))},[d]),E.useEffect(()=>{if(!d)return;const U=setInterval(()=>{p(go())},300);return()=>clearInterval(U)},[d]),m.jsxs(m.Fragment,{children:[!o&&m.jsxs("header",{style:{position:"fixed",top:0,left:0,width:"100%",height:"64px",background:"rgba(10, 20, 30, 0.6)",zIndex:1e3},children:[m.jsx("div",{style:{position:"absolute",left:"-20px",top:"55%",transform:"translateY(-50%)",display:"flex",alignItems:"center"},children:m.jsx("img",{src:"/images/logo.png",alt:"V-BEAT",style:{height:"130px",objectFit:"contain"}})}),d&&m.jsxs("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",display:"flex",alignItems:"center",gap:"12px"},children:[m.jsx(Ea,{active:h,size:"small"}),m.jsx("button",{className:"neon-btn",onClick:B,"aria-label":"toggle bgm",children:h?m.jsxs("svg",{viewBox:"0 0 24 24",width:"22",height:"22",children:[m.jsx("path",{d:"M8 5v14M16 5v14",fill:"none",stroke:"url(#grad-toggle)",strokeWidth:"2",strokeLinecap:"round"}),m.jsx("defs",{children:m.jsxs("linearGradient",{id:"grad-toggle",x1:"0",y1:"0",x2:"0",y2:"1",children:[m.jsx("stop",{offset:"0%",stopColor:"#5aeaff"}),m.jsx("stop",{offset:"100%",stopColor:"#ff0080"})]})})]}):m.jsxs("svg",{viewBox:"0 0 24 24",width:"22",height:"22",children:[m.jsx("path",{d:"M7 4l12 8-12 8V4z",fill:"none",stroke:"url(#grad-toggle)",strokeWidth:"2",strokeLinejoin:"round"}),m.jsx("defs",{children:m.jsxs("linearGradient",{id:"grad-toggle",x1:"0",y1:"0",x2:"0",y2:"1",children:[m.jsx("stop",{offset:"0%",stopColor:"#5aeaff"}),m.jsx("stop",{offset:"100%",stopColor:"#ff0080"})]})})]})}),m.jsx("button",{className:"neon-btn",onClick:()=>{No(),p(go())},"aria-label":"random bgm",children:m.jsxs("svg",{viewBox:"0 0 24 24",width:"22",height:"22",children:[m.jsx("path",{d:"M5 4l7 8-7 8V4zm8 0l7 8-7 8V4z",fill:"none",stroke:"url(#grad-next)",strokeWidth:"2",strokeLinejoin:"round"}),m.jsx("defs",{children:m.jsxs("linearGradient",{id:"grad-next",x1:"0",y1:"0",x2:"0",y2:"1",children:[m.jsx("stop",{offset:"0%",stopColor:"#5aeaff"}),m.jsx("stop",{offset:"100%",stopColor:"#ff0080"})]})})]})})]}),!C&&A&&m.jsxs("div",{style:{position:"absolute",right:230,top:"50%",transform:"translateY(-50%)",display:"flex",alignItems:"center",gap:"10px",zIndex:1100,maxWidth:"260px",overflow:"hidden"},children:[m.jsx(Jg,{profileImg:A.loginUser?.profileImg,userId:A.loginUserId,size:50}),m.jsx("div",{style:{color:"#5aeaff",fontSize:25,fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:A.loginUserNickName,children:A.loginUserNickName})]}),d&&m.jsx("div",{style:{position:"absolute",right:"70px",top:"50%",transform:"translateY(-50%)"},children:m.jsxs("div",{style:{position:"relative"},children:[m.jsx("button",{className:"neon-btn",onClick:()=>x(U=>!U),"aria-label":"mobile menu",children:m.jsxs("svg",{viewBox:"0 0 24 24",width:"30",height:"30",children:[m.jsx("path",{d:"M4 6h16M4 12h16M4 18h16",fill:"none",stroke:"url(#grad-mobile)",strokeWidth:"2",strokeLinecap:"round"}),m.jsx("defs",{children:m.jsxs("linearGradient",{id:"grad-mobile",x1:"0",y1:"0",x2:"0",y2:"1",children:[m.jsx("stop",{offset:"0%",stopColor:"#5aeaff"}),m.jsx("stop",{offset:"100%",stopColor:"#ff0040"})]})})]})}),L&&m.jsx("span",{style:{position:"absolute",top:-2,right:-2,width:10,height:10,borderRadius:"50%",background:"#ff4d4f"}})]})}),d&&y&&m.jsxs("div",{style:{position:"absolute",right:"38px",top:70,background:"rgba(10,20,30,0.95)",border:"2px solid rgba(90,234,255,0.4)",borderRadius:"10px",padding:"10px",display:"flex",flexDirection:"column",gap:"8px",zIndex:1100},children:[m.jsx("button",{className:"neon-btn",onClick:()=>{x(!1),e("/main")},children:""}),A&&!k&&m.jsx("button",{className:"neon-btn",onClick:()=>{x(!1),e("/song/upload")},children:" "}),m.jsx("button",{className:"neon-btn",onClick:()=>{x(!1),S(!0)},children:""}),!C&&A&&m.jsxs(m.Fragment,{children:[m.jsx("button",{className:"neon-btn",onClick:()=>e("/mypage"),children:""}),!k&&m.jsxs("button",{className:"neon-btn",onClick:()=>{x(!1),e("/mypage",{state:{tab:"messages"}})},children:[" ",H?"":""]}),m.jsx("button",{className:"neon-btn",onClick:()=>{x(!1),R(null),n()},children:""})]}),!A&&!C&&m.jsx("button",{className:"neon-btn",onClick:()=>e("/login"),children:""})]}),m.jsx("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",height:"4px",background:"linear-gradient(to right,#ff0000ff, #ff00eaff, #5aeaff)"}})]}),m.jsx(fj,{open:v,settings:w,onChange:_,onClose:()=>S(!1),onApply:()=>{localStorage.setItem("userSettings",JSON.stringify(w)),window.dispatchEvent(new Event("settings:changed")),S(!1)},onReset:()=>{_(ia),localStorage.setItem("userSettings",JSON.stringify(ia)),window.dispatchEvent(new Event("settings:changed"))}})]})}function l4({onLoginSuccess:n}){E.useEffect(()=>{Gl(),localStorage.setItem("bgmUnlocked","true")},[]);const[t,e]=E.useState(""),[s,a]=E.useState(""),[o,c]=E.useState(!1),[u,d]=E.useState(""),[h,p]=E.useState(0),y=E.useRef(null),x=E.useRef(null),v=E.useRef(null),S=en(),w=A=>{Gl();const R="";A==="google"?window.location.href=`${R}/oauth/google`:A==="kakao"&&(window.location.href=`${R}/oauth/kakao`)},_=async()=>{if(Gl(),!t){d(" ."),y.current?.focus(),y.current?.classList.add("is-error"),setTimeout(()=>y.current?.classList.remove("is-error"),300);return}if(!s.trim()){d(" ."),x.current?.focus(),x.current?.classList.add("is-error"),setTimeout(()=>x.current?.classList.remove("is-error"),300);return}d(""),c(!0);try{const R=await(await fetch("/api/auth/doLogin",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:t,loginPw:s})})).json();if(!R.ok){d(R.message||" .");return}n?.(),S("/start",{state:{target:"/main",needPwChange:R.needPwChange===!0}})}catch{d("  .")}finally{c(!1)}};return E.useEffect(()=>{const A=v.current;if(!A)return;const R=(j,k)=>Math.random()*(k-j)+j,C=setInterval(()=>{const j=R(-10,10),k=R(-1.5,1.5),I=R(-40,40);A.style.setProperty("--gx",`${j}px`),A.style.setProperty("--gy",`${k}px`),A.style.setProperty("--hue",`${I}deg`),p(Math.random()>.8?R(10,20):R(0,3))},120);return()=>clearInterval(C)},[]),m.jsx("div",{className:"login-form-wrap",children:m.jsxs("div",{className:"login-form",style:{padding:"56px 48px",borderRadius:18,width:450,transform:"translateY(-30px)",scale:1.2,position:"relative",zIndex:20,background:"rgb(38, 38, 38)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.6), inset 0 0 0 1px rgba(255, 255, 255, 0.05)",color:"#fff",textAlign:"center"},children:[m.jsx("div",{className:"hero-logo",style:{display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",marginBottom:30},children:m.jsx("div",{className:"logo-glitch-wrap glitch",ref:v,style:{filter:"url(#glitch-filter)"},children:m.jsx("img",{src:"/images/mainlogo.png",alt:"V-BEAT",style:{height:110,maxWidth:"100%",objectFit:"contain",transform:"scale(2.5)",filter:"drop-shadow(0 0 18px rgba(255,255,255,0.35))"}})})}),m.jsxs("form",{onSubmit:A=>{A.preventDefault(),_()},children:[m.jsxs("div",{className:"login-form__fields",style:{display:"flex",flexDirection:"column",gap:12},children:[m.jsx("input",{type:"email",placeholder:"",className:"login-input",ref:y,value:t,onChange:A=>e(A.target.value),style:{height:48,borderRadius:10,border:"1px solid rgba(255,255,255,0.12)",background:"rgba(0,0,0,0.4)",color:"#fff",fontSize:16,padding:"0 14px"}}),m.jsx("input",{type:"password",placeholder:"",className:"login-input",ref:x,value:s,onChange:A=>a(A.target.value),style:{height:48,borderRadius:10,border:"1px solid rgba(255,255,255,0.12)",background:"rgba(0,0,0,0.4)",color:"#fff",fontSize:16,padding:"0 14px"}})]}),m.jsx("div",{style:{height:20,marginTop:10,position:"relative"},children:m.jsx("div",{style:{color:"#ff6b6b",fontSize:13,opacity:u?1:0,transition:"opacity 0.2s"},children:u||""})}),m.jsx("div",{className:"login-form__actions",style:{marginTop:12},children:m.jsx("button",{className:"login-btn primary",type:"submit",disabled:o,style:{width:"100%",height:48,background:"linear-gradient(135deg, #00aeffff, #00ccffff)",color:"#000",borderRadius:12,fontWeight:600,cursor:"pointer",border:"none"},children:o?" ...":""})})]}),m.jsxs("div",{className:"login-form__links",style:{marginTop:20,fontSize:13,color:"#aaa",display:"flex",justifyContent:"center",gap:"15px"},children:[m.jsx("span",{style:{cursor:"pointer",transition:"color 0.2s"},onMouseOver:A=>A.target.style.color="#00ccff",onMouseOut:A=>A.target.style.color="#aaa",onClick:()=>S("/terms"),children:""}),m.jsx("span",{style:{color:"#555",cursor:"default"},children:"|"}),m.jsx("span",{style:{cursor:"pointer",transition:"color 0.2s"},onMouseOver:A=>A.target.style.color="#00ccff",onMouseOut:A=>A.target.style.color="#aaa",onClick:()=>S("/re-password"),children:" "})]}),m.jsxs("div",{style:{marginTop:24,display:"flex",flexDirection:"column",alignItems:"center",gap:10},children:[m.jsxs("button",{className:"btn bg-white text-black",style:{width:260,height:44,fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:8,borderRadius:8,border:"1px solid #e5e5e5",cursor:"pointer"},onClick:()=>w("google"),disabled:o,children:[m.jsx("svg",{width:"16",height:"16",viewBox:"0 0 512 512",children:m.jsxs("g",{children:[m.jsx("path",{d:"m0 0H512V512H0",fill:"#fff"}),m.jsx("path",{fill:"#34a853",d:"M153 292c30 82 118 95 171 60h62v48A192 192 0 0190 341"}),m.jsx("path",{fill:"#4285f4",d:"m386 400a140 175 0 0053-179H260v74h102q-7 37-38 57"}),m.jsx("path",{fill:"#fbbc02",d:"m90 341a208 200 0 010-171l63 49q-12 37 0 73"}),m.jsx("path",{fill:"#ea4335",d:"m153 219c22-69 116-109 179-50l55-54c-78-75-230-72-297 55"})]})}),"Login with Google"]}),m.jsxs("button",{className:"btn bg-[#FEE502] text-[#181600]",style:{width:260,height:44,fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:8,borderRadius:8,border:"1px solid #f1d800",cursor:"pointer"},onClick:()=>w("kakao"),disabled:o,children:[m.jsx("svg",{width:"16",height:"16",viewBox:"0 0 512 512",children:m.jsx("path",{fill:"#181600",d:"M255.5 48C299.345 48 339.897 56.5332 377.156 73.5996C414.415 90.666 443.871 113.873 465.522 143.22C487.174 172.566 498 204.577 498 239.252C498 273.926 487.174 305.982 465.522 335.42C443.871 364.857 414.46 388.109 377.291 405.175C340.122 422.241 299.525 430.775 255.5 430.775C241.607 430.775 227.262 429.781 212.467 427.795C148.233 472.402 114.042 494.977 109.892 495.518C107.907 496.241 106.012 496.15 104.208 495.248C103.486 494.706 102.945 493.983 102.584 493.08C102.223 492.177 102.043 491.365 102.043 490.642V489.559C103.126 482.515 111.335 453.169 126.672 401.518C91.8486 384.181 64.1974 361.2 43.7185 332.575C23.2395 303.951 13 272.843 13 239.252C13 204.577 23.8259 172.566 45.4777 143.22C67.1295 113.873 96.5849 90.666 133.844 73.5996C171.103 56.5332 211.655 48 255.5 48Z"})}),"Kakao "]})]}),m.jsx("div",{style:{marginTop:20,display:"flex",justifyContent:"center"},children:m.jsx("button",{onClick:()=>{Gl(),S("/start",{state:{target:"/main",needPwChange:!0}})},style:{width:260,height:44,borderRadius:8,background:"rgba(255,255,255,0.06)",border:"1px solid rgba(255,255,255,0.18)",color:"#ddd",fontSize:15,cursor:"pointer",fontWeight:"bold",transition:"all 0.15s ease"},children:"  "})}),m.jsx("svg",{width:"0",height:"0",style:{position:"absolute"},children:m.jsxs("filter",{id:"glitch-filter",children:[m.jsx("feTurbulence",{type:"fractalNoise",baseFrequency:"0.015",numOctaves:"2",result:"noise"}),m.jsx("feDisplacementMap",{in:"SourceGraphic",in2:"noise",scale:h,xChannelSelector:"R",yChannelSelector:"G"})]})})]})})}const c4=60,g1=120,u4=280,y1=20,f4=24,b1=30,d4=60,h4=120;function hd(){const n=E.useRef(null),t=E.useRef([]),e=E.useRef(0),s=E.useRef(0);return E.useEffect(()=>{const a=n.current,o=a.getContext("2d"),c=()=>{a.width=window.innerWidth,a.height=window.innerHeight};c(),window.addEventListener("resize",c);let u=performance.now();const d=()=>{if(t.current.length>=c4)return;const p=y1+Math.random()*(f4-y1),y=b1+Math.random()*(d4-b1);t.current.push({x:Math.random()*a.width,y:-y,width:p,height:y,speed:g1+Math.random()*(u4-g1),alpha:.4+Math.random()*.6})},h=p=>{const y=(p-u)/1e3;u=p,o.clearRect(0,0,a.width,a.height),p-e.current>h4&&(e.current=p,d());const x=[];for(const v of t.current)if(v.y+=v.speed*y,v.y-v.height<a.height){x.push(v);const S=v.y+v.height*.5,w=a.height*.35,_=a.height*.8;let A=1;S>=w&&(A=1-(S-w)/(_-w),A=Math.max(0,Math.min(1,A))),o.globalAlpha=v.alpha*A,o.fillStyle="#00e1ff",o.beginPath(),o.roundRect(v.x,v.y,v.width,v.height,4),o.fill()}o.globalAlpha=1,t.current=x,s.current=requestAnimationFrame(h)};return s.current=requestAnimationFrame(h),()=>{cancelAnimationFrame(s.current),window.removeEventListener("resize",c)}},[]),m.jsx("canvas",{ref:n,style:{position:"fixed",inset:0,pointerEvents:"none",zIndex:1}})}function p4({onLoginSuccess:n}){return m.jsxs("div",{className:"login-page",children:[m.jsx(hd,{}),m.jsxs("section",{className:"login-hero",children:[m.jsx("div",{className:"hero-bg",style:{background:`
              linear-gradient(
                180deg,
                #8f0015 0%,
                #120000 50%,
                #007a86 100%
              )
            `}}),m.jsx("div",{className:"hero-overlay",style:{background:`
              radial-gradient(
                circle at center,
                rgba(0,0,0,0.05) 0%,
                rgba(0,0,0,0.15) 60%,
                rgba(0,0,0,0.30) 100%
              )
            `}}),m.jsx("div",{className:"hero-content",style:{paddingTop:80,paddingBottom:48,paddingInline:24,gap:8},children:m.jsx(l4,{onLoginSuccess:n})})]})]})}function Xs(){return m.jsx("div",{style:{position:"fixed",inset:0,background:`
          linear-gradient(
            180deg,
            #5e0000ff 0%,
            #000000ff 55%,
            #004750ff 100%
          )
        `,zIndex:-10,pointerEvents:"none"}})}const m4=n=>{if(!n)return null;let t=String(n).trim();return t.startsWith("http://")||t.startsWith("https://")?t:t.startsWith("/upload/")?`http://localhost:8080${t}`:(t.startsWith("profileImg/")&&(t=t.replace(/^profileImg\//,"")),t.includes("\\")&&(t=t.split("\\").pop()),`http://localhost:8080/upload/profileImg/${encodeURIComponent(t)}`)};function g4({ranking:n=[],loading:t=!1}){const e=(()=>{const s=new Map;for(const a of n){const o=a.userId;if(!s.has(o)){s.set(o,a);continue}const c=s.get(o);(a.score>c.score||a.score===c.score&&a.maxCombo>c.maxCombo)&&s.set(o,a)}return Array.from(s.values()).sort((a,o)=>o.score-a.score)})();return m.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[m.jsx("div",{style:{padding:"10px 8px",textAlign:"center",color:"#fff",fontWeight:700,fontSize:"19px",letterSpacing:"0.08em"},children:""}),m.jsxs("div",{style:{display:"grid",gridTemplateColumns:"36px 1.0fr 1.2fr .9fr .8fr 1fr",gap:"10px",fontSize:"12px",color:"#ffb3b3",padding:"4px 12px",borderBottom:"1px solid rgba(255,255,255,0.12)"},children:[m.jsx("div",{}),m.jsx("div",{children:"NICKNAME"}),m.jsx("div",{style:{textAlign:"right"},children:"SCORE"}),m.jsx("div",{style:{textAlign:"center"},children:"ACC"}),m.jsx("div",{style:{textAlign:"center"},children:"GRADE"}),m.jsx("div",{style:{textAlign:"right"},children:"COMBO"})]}),m.jsxs("div",{style:{flex:1,overflowY:"auto"},children:[t&&m.jsx("div",{style:{padding:12},children:"Loading..."}),!t&&e.length===0&&m.jsx("div",{style:{textAlign:"center",padding:28,opacity:.6},children:"No Records"}),!t&&e.slice(0,100).map((s,a)=>{const o=a<3,c=s.grade==="S"?"#ffd86b":s.grade==="A"?"#7cf3ff":s.grade==="B"?"#9fa8ff":"#aaa";return m.jsxs("div",{style:{display:"grid",gridTemplateColumns:"36px 1.6fr 1.2fr .9fr .8fr 1fr",gap:"10px",padding:"7px 7px",fontSize:"12px",color:"#fff",borderBottom:"1px solid rgba(255,255,255,0.08)",background:o?"linear-gradient(90deg, rgba(255,200,80,0.25), rgba(255,80,80,0.12))":"transparent",fontWeight:o?600:400},children:[m.jsx("div",{children:s.profileImg?m.jsx("img",{src:(()=>{const u=m4(s.profileImg);return u?`${u}?t=${Date.now()}`:""})(),alt:"",style:{width:28,height:28,borderRadius:"50%",objectFit:"cover"}}):m.jsx("div",{style:{width:28,height:28,borderRadius:"50%",background:"radial-gradient(circle at 30% 30%, #666, #222)"}})}),m.jsx("div",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:s.nickname}),m.jsx("div",{style:{textAlign:"right"},children:s.score}),m.jsxs("div",{style:{textAlign:"center"},children:[s.accuracy,"%"]}),m.jsx("div",{style:{textAlign:"center",color:c,fontWeight:700},children:s.grade}),m.jsx("div",{style:{textAlign:"right"},children:s.maxCombo})]},`${s.songId}-${s.userId}`)})]})]})}const y4={CONTENT:["",""],USER:["","",""],MESSAGE:["",""]},b4={CONTENT:{:[" "," "],:[],:[""]},USER:{:[" /","  "],:["/",""," "],:[""]}},x4={" ":")         "," ":")    /   "," /":")       ","  ":")    ,    ","/":")    ,   ",:") ,  ,    "," ":") , ,     ",:"     ."};function R2({open:n,type:t,targetId:e,targetName:s,targetProfileImg:a,onClose:o,onSubmit:c,isAdminUser:u}){const[d,h]=E.useState(""),[p,y]=E.useState(""),[x,v]=E.useState("");if(!n)return null;function S(){if(u){alert("   ");return}if(!d){alert("  .");return}if(!x.trim()){alert("  .");return}const w=t,_=p||d,A=C=>String(C).trim().replace(/\s+/g,"_").replace(/[/]/g,"_"),R=`${A(d)}_${A(_)}`;c?.({targetType:w,targetId:e,reasonCode:R,description:x}),h(""),y(""),v(""),o()}return Jf.createPortal(m.jsx("div",{style:v4,children:m.jsxs("div",{style:S4,children:[m.jsx("h3",{style:{marginBottom:8},children:""}),u&&m.jsx("div",{style:{color:"#f55",marginBottom:12},children:"   ."}),m.jsxs("section",{style:Yu,children:[m.jsx("span",{style:Xu,children:" "}),m.jsx("div",{style:{display:"flex",alignItems:"center",gap:10},children:m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:2},children:m.jsx("div",{children:s})})})]}),m.jsxs("section",{style:Yu,children:[m.jsx("span",{style:Xu,children:""}),m.jsx("div",{style:{display:"flex",gap:8},children:(y4[t]||[]).map(w=>m.jsx("button",{type:"button",onClick:()=>{h(w),y("")},style:{...x1,...d===w?v1:{}},children:w},w))})]}),d&&m.jsxs("section",{style:Yu,children:[m.jsx("span",{style:Xu,children:" "}),m.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:(b4[t]?.[d]||[]).map(w=>m.jsx("button",{onClick:()=>y(w),style:{...x1,...p===w?v1:{}},children:w},w))})]}),m.jsxs("section",{style:Yu,children:[m.jsx("span",{style:Xu,children:" "}),m.jsx("textarea",{value:x,onChange:w=>v(w.target.value),style:_4,placeholder:p?x4[p]||"     .":"    ."})]}),m.jsxs("div",{style:w4,children:[m.jsx("button",{type:"button",style:j2,onClick:o,children:""}),m.jsx("button",{type:"button",style:{...E4,cursor:u?"not-allowed":"pointer",opacity:u?.35:1},onClick:S,children:""})]})]})}),document.body)}const v4={position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:9999},S4={width:460,background:"#0b0b0b",border:"1px solid #333",borderRadius:12,padding:16,display:"flex",flexDirection:"column",gap:12},Yu={display:"flex",flexDirection:"column",gap:6},Xu={fontWeight:600,color:"#5aeaff"},_4={background:"#111",border:"1px solid #333",borderRadius:6,padding:8,color:"#fff",minHeight:70,resize:"none"},x1={padding:"6px 12px",borderRadius:6,border:"1px solid rgba(255,255,255,0.25)",background:"transparent",color:"#ccc",cursor:"pointer"},v1={border:"1px solid #5aeaff",color:"#5aeaff",background:"rgba(90,234,255,0.15)"},w4={display:"flex",justifyContent:"flex-end",gap:10,marginTop:6},j2={minWidth:72,height:34,borderRadius:8,border:"1px solid rgba(255,255,255,0.25)",background:"transparent",color:"#ccc",cursor:"pointer"},E4={...j2,border:"1px solid #5aeaff",color:"#5aeaff",background:"rgba(90,234,255,0.15)"};function t0({open:n,user:t,onClose:e}){const[s,a]=E.useState(!1);if(!n||!t)return null;const o=d=>{if(!d)return null;let h=String(d).trim();if(h.startsWith("http://")||h.startsWith("https://"))return h;if(h.startsWith("/"))return`http://localhost:8080${h}`;if(h.startsWith("profileImg/"))h=h.replace(/^profileImg\//,"");else if(h.includes("upload/profileImg/"))return`http://localhost:8080/${h}`;return`http://localhost:8080/upload/profileImg/${encodeURIComponent(h)}`},c=t?.profileImg||null,u=async d=>{const h={targetType:d.targetType,targetId:Number(d.targetId),reasonCode:String(d.reasonCode??"").trim(),description:String(d.description??"")};if(!h.targetType||!Number.isFinite(h.targetId)||!h.reasonCode)throw new Error("   .");const p=await fetch("/api/report",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(h)}),y=await p.json().catch(()=>({}));if(!p.ok||y?.ok===!1)throw new Error(y?.message??` . (${p.status})`);return y};return Jf.createPortal(m.jsxs(m.Fragment,{children:[m.jsx("div",{style:A4,onClick:()=>{a(!1),e()}}),m.jsxs("div",{style:T4,children:[m.jsxs("div",{style:C4,children:[m.jsx("div",{style:R4,children:c?m.jsx("img",{src:o(c),alt:"target profile",style:j4}):m.jsx("div",{style:M4})}),m.jsx("div",{style:k4,children:t?.otherNickName??t?.nickname??t?.nickName??"Unknown"})]}),m.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:10,alignItems:"center",marginTop:8},children:[m.jsx("button",{style:{...M2,height:100,width:"100%",border:"1px solid #5aeaff",color:"#5aeaff"},onClick:()=>{console.log("[ADD FRIEND]",t?.userId??t?.id),alert("   .  .")},children:""}),m.jsx("button",{style:{...O4,width:"100%"},onClick:()=>a(!0),children:""}),m.jsx("button",{style:{...N4,width:"80%",alignSelf:"center",marginTop:6},onClick:e,children:""})]})]}),m.jsx(R2,{open:s,type:"USER",targetId:t?.userId??t?.id,targetName:t?.otherNickName??t?.nickname??t?.nickName,targetProfileImg:o(c),onClose:()=>a(!1),onSubmit:async d=>{try{await u(d),alert("  ."),a(!1),e()}catch(h){alert(h?.message??"    .")}}})]}),document.body)}const A4={position:"fixed",inset:0,background:"rgba(0,0,0,0.75)",zIndex:9998},T4={position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:300,maxWidth:"90vw",background:"#0b0b0b",border:"1px solid #333",borderRadius:14,padding:16,zIndex:9999},C4={display:"flex",flexDirection:"column",alignItems:"center",gap:8},R4={width:72,height:72,borderRadius:"50%",background:"linear-gradient(135deg, #5aeaff, #8b5cff)",display:"flex",justifyContent:"center",alignItems:"center"},j4={width:64,height:64,borderRadius:"50%",objectFit:"cover",background:"#000"},M4={width:64,height:64,borderRadius:"50%",background:"#111"},k4={fontSize:16,fontWeight:600},M2={flex:1,height:34,borderRadius:8,border:"1px solid rgba(255,255,255,0.25)",background:"transparent",color:"#ccc",cursor:"pointer"},O4={...M2,border:"1px solid #ff6b6b",color:"#ff6b6b"},N4={height:32,borderRadius:8,border:"1px solid rgba(255,255,255,0.25)",background:"transparent",color:"#aaa",cursor:"pointer"};function I4({onClose:n}){const[t,e]=E.useState(""),[s,a]=E.useState(""),[o,c]=E.useState(""),[u,d]=E.useState(!1),h=E.useRef(null),p=E.useRef(null),y=async()=>{if(!t){c(" ."),h.current?.focus();return}if(t!==s){c("  ."),p.current?.focus();return}d(!0),c("");try{const x=await Sw("",t);x.data?.ok?(alert(x.data.message||" ."),n()):c(x.data?.message||"  .")}catch(x){c(x?.response?.data?.message||"  .")}finally{d(!1)}};return m.jsx("div",{style:L4,children:m.jsxs("div",{style:D4,children:[m.jsx("h3",{style:{marginBottom:16},children:" "}),m.jsx("input",{ref:h,type:"password",placeholder:" ",value:t,onChange:x=>e(x.target.value),style:S1}),m.jsx("input",{ref:p,type:"password",placeholder:"  ",value:s,onChange:x=>a(x.target.value),style:S1}),m.jsx("div",{style:{height:18,color:"#ff6b6b",fontSize:13},children:o||""}),m.jsx("div",{style:{display:"flex",gap:10,marginTop:10},children:m.jsx("button",{onClick:y,disabled:u,style:B4,children:u?" ...":""})})]})})}const L4={position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:99999},D4={width:360,padding:24,borderRadius:14,background:"#1c1f26",color:"#fff",boxShadow:"0 20px 60px rgba(0,0,0,0.6)",display:"flex",flexDirection:"column"},S1={height:44,borderRadius:10,border:"1px solid rgba(255,255,255,0.15)",background:"rgba(0,0,0,0.4)",color:"#fff",padding:"0 14px",marginBottom:10},B4={flex:1,height:40,borderRadius:10,border:"none",background:"linear-gradient(135deg, #00aeff, #00ccff)",fontWeight:700,cursor:"pointer"};function U4(n,t){n.terminate=function(){const e=()=>{};this.onerror=e,this.onmessage=e,this.onopen=e;const s=new Date,a=Math.random().toString().substring(2,8),o=this.onclose;this.onclose=c=>{const u=new Date().getTime()-s.getTime();t(`Discarded socket (#${a})  closed after ${u}ms, with code/reason: ${c.code}/${c.reason}`)},this.close(),o?.call(n,{code:4001,reason:`Quick discarding socket (#${a}) without waiting for the shutdown sequence.`,wasClean:!1})}}const $l={LF:`
`,NULL:"\0"};class wr{get body(){return!this._body&&this.isBinaryBody&&(this._body=new TextDecoder().decode(this._binaryBody)),this._body||""}get binaryBody(){return!this._binaryBody&&!this.isBinaryBody&&(this._binaryBody=new TextEncoder().encode(this._body)),this._binaryBody}constructor(t){const{command:e,headers:s,body:a,binaryBody:o,escapeHeaderValues:c,skipContentLengthHeader:u}=t;this.command=e,this.headers=Object.assign({},s||{}),o?(this._binaryBody=o,this.isBinaryBody=!0):(this._body=a||"",this.isBinaryBody=!1),this.escapeHeaderValues=c||!1,this.skipContentLengthHeader=u||!1}static fromRawFrame(t,e){const s={},a=o=>o.replace(/^\s+|\s+$/g,"");for(const o of t.headers.reverse()){o.indexOf(":");const c=a(o[0]);let u=a(o[1]);e&&t.command!=="CONNECT"&&t.command!=="CONNECTED"&&(u=wr.hdrValueUnEscape(u)),s[c]=u}return new wr({command:t.command,headers:s,binaryBody:t.binaryBody,escapeHeaderValues:e})}toString(){return this.serializeCmdAndHeaders()}serialize(){const t=this.serializeCmdAndHeaders();return this.isBinaryBody?wr.toUnit8Array(t,this._binaryBody).buffer:t+this._body+$l.NULL}serializeCmdAndHeaders(){const t=[this.command];this.skipContentLengthHeader&&delete this.headers["content-length"];for(const e of Object.keys(this.headers||{})){const s=this.headers[e];this.escapeHeaderValues&&this.command!=="CONNECT"&&this.command!=="CONNECTED"?t.push(`${e}:${wr.hdrValueEscape(`${s}`)}`):t.push(`${e}:${s}`)}return(this.isBinaryBody||!this.isBodyEmpty()&&!this.skipContentLengthHeader)&&t.push(`content-length:${this.bodyLength()}`),t.join($l.LF)+$l.LF+$l.LF}isBodyEmpty(){return this.bodyLength()===0}bodyLength(){const t=this.binaryBody;return t?t.length:0}static sizeOfUTF8(t){return t?new TextEncoder().encode(t).length:0}static toUnit8Array(t,e){const s=new TextEncoder().encode(t),a=new Uint8Array([0]),o=new Uint8Array(s.length+e.length+a.length);return o.set(s),o.set(e,s.length),o.set(a,s.length+e.length),o}static marshall(t){return new wr(t).serialize()}static hdrValueEscape(t){return t.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")}static hdrValueUnEscape(t){return t.replace(/\\r/g,"\r").replace(/\\n/g,`
`).replace(/\\c/g,":").replace(/\\\\/g,"\\")}}const _1=0,qu=10,Ku=13,z4=58;class P4{constructor(t,e){this.onFrame=t,this.onIncomingPing=e,this._encoder=new TextEncoder,this._decoder=new TextDecoder,this._token=[],this._initState()}parseChunk(t,e=!1){let s;if(typeof t=="string"?s=this._encoder.encode(t):s=new Uint8Array(t),e&&s[s.length-1]!==0){const a=new Uint8Array(s.length+1);a.set(s,0),a[s.length]=0,s=a}for(let a=0;a<s.length;a++){const o=s[a];this._onByte(o)}}_collectFrame(t){if(t!==_1&&t!==Ku){if(t===qu){this.onIncomingPing();return}this._onByte=this._collectCommand,this._reinjectByte(t)}}_collectCommand(t){if(t!==Ku){if(t===qu){this._results.command=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaders;return}this._consumeByte(t)}}_collectHeaders(t){if(t!==Ku){if(t===qu){this._setupCollectBody();return}this._onByte=this._collectHeaderKey,this._reinjectByte(t)}}_reinjectByte(t){this._onByte(t)}_collectHeaderKey(t){if(t===z4){this._headerKey=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaderValue;return}this._consumeByte(t)}_collectHeaderValue(t){if(t!==Ku){if(t===qu){this._results.headers.push([this._headerKey,this._consumeTokenAsUTF8()]),this._headerKey=void 0,this._onByte=this._collectHeaders;return}this._consumeByte(t)}}_setupCollectBody(){const t=this._results.headers.filter(e=>e[0]==="content-length")[0];t?(this._bodyBytesRemaining=parseInt(t[1],10),this._onByte=this._collectBodyFixedSize):this._onByte=this._collectBodyNullTerminated}_collectBodyNullTerminated(t){if(t===_1){this._retrievedBody();return}this._consumeByte(t)}_collectBodyFixedSize(t){if(this._bodyBytesRemaining--===0){this._retrievedBody();return}this._consumeByte(t)}_retrievedBody(){this._results.binaryBody=this._consumeTokenAsRaw();try{this.onFrame(this._results)}catch(t){console.log("Ignoring an exception thrown by a frame handler. Original exception: ",t)}this._initState()}_consumeByte(t){this._token.push(t)}_consumeTokenAsUTF8(){return this._decoder.decode(this._consumeTokenAsRaw())}_consumeTokenAsRaw(){const t=new Uint8Array(this._token);return this._token=[],t}_initState(){this._results={command:void 0,headers:[],binaryBody:void 0},this._token=[],this._headerKey=void 0,this._onByte=this._collectFrame}}var Er;(function(n){n[n.CONNECTING=0]="CONNECTING",n[n.OPEN=1]="OPEN",n[n.CLOSING=2]="CLOSING",n[n.CLOSED=3]="CLOSED"})(Er||(Er={}));var Fi;(function(n){n[n.ACTIVE=0]="ACTIVE",n[n.DEACTIVATING=1]="DEACTIVATING",n[n.INACTIVE=2]="INACTIVE"})(Fi||(Fi={}));var zf;(function(n){n[n.LINEAR=0]="LINEAR",n[n.EXPONENTIAL=1]="EXPONENTIAL"})(zf||(zf={}));var uc;(function(n){n.Interval="interval",n.Worker="worker"})(uc||(uc={}));let H4=class{constructor(t,e=uc.Interval,s){this._interval=t,this._strategy=e,this._debug=s,this._workerScript=`
    var startTime = Date.now();
    setInterval(function() {
        self.postMessage(Date.now() - startTime);
    }, ${this._interval});
  `}start(t){this.stop(),this.shouldUseWorker()?this.runWorker(t):this.runInterval(t)}stop(){this.disposeWorker(),this.disposeInterval()}shouldUseWorker(){return typeof Worker<"u"&&this._strategy===uc.Worker}runWorker(t){this._debug("Using runWorker for outgoing pings"),this._worker||(this._worker=new Worker(URL.createObjectURL(new Blob([this._workerScript],{type:"text/javascript"}))),this._worker.onmessage=e=>t(e.data))}runInterval(t){if(this._debug("Using runInterval for outgoing pings"),!this._timer){const e=Date.now();this._timer=setInterval(()=>{t(Date.now()-e)},this._interval)}}disposeWorker(){this._worker&&(this._worker.terminate(),delete this._worker,this._debug("Outgoing ping disposeWorker"))}disposeInterval(){this._timer&&(clearInterval(this._timer),delete this._timer,this._debug("Outgoing ping disposeInterval"))}};class Qn{constructor(t){this.versions=t}supportedVersions(){return this.versions.join(",")}protocolVersions(){return this.versions.map(t=>`v${t.replace(".","")}.stomp`)}}Qn.V1_0="1.0";Qn.V1_1="1.1";Qn.V1_2="1.2";Qn.default=new Qn([Qn.V1_2,Qn.V1_1,Qn.V1_0]);class F4{get connectedVersion(){return this._connectedVersion}get connected(){return this._connected}constructor(t,e,s){this._client=t,this._webSocket=e,this._connected=!1,this._serverFrameHandlers={CONNECTED:a=>{this.debug(`connected to server ${a.headers.server}`),this._connected=!0,this._connectedVersion=a.headers.version,this._connectedVersion===Qn.V1_2&&(this._escapeHeaderValues=!0),this._setupHeartbeat(a.headers),this.onConnect(a)},MESSAGE:a=>{const o=a.headers.subscription,c=this._subscriptions[o]||this.onUnhandledMessage,u=a,d=this,h=this._connectedVersion===Qn.V1_2?u.headers.ack:u.headers["message-id"];u.ack=(p={})=>d.ack(h,o,p),u.nack=(p={})=>d.nack(h,o,p),c(u)},RECEIPT:a=>{const o=this._receiptWatchers[a.headers["receipt-id"]];o?(o(a),delete this._receiptWatchers[a.headers["receipt-id"]]):this.onUnhandledReceipt(a)},ERROR:a=>{this.onStompError(a)}},this._counter=0,this._subscriptions={},this._receiptWatchers={},this._partialData="",this._escapeHeaderValues=!1,this._lastServerActivityTS=Date.now(),this.debug=s.debug,this.stompVersions=s.stompVersions,this.connectHeaders=s.connectHeaders,this.disconnectHeaders=s.disconnectHeaders,this.heartbeatIncoming=s.heartbeatIncoming,this.heartbeatToleranceMultiplier=s.heartbeatGracePeriods,this.heartbeatOutgoing=s.heartbeatOutgoing,this.splitLargeFrames=s.splitLargeFrames,this.maxWebSocketChunkSize=s.maxWebSocketChunkSize,this.forceBinaryWSFrames=s.forceBinaryWSFrames,this.logRawCommunication=s.logRawCommunication,this.appendMissingNULLonIncoming=s.appendMissingNULLonIncoming,this.discardWebsocketOnCommFailure=s.discardWebsocketOnCommFailure,this.onConnect=s.onConnect,this.onDisconnect=s.onDisconnect,this.onStompError=s.onStompError,this.onWebSocketClose=s.onWebSocketClose,this.onWebSocketError=s.onWebSocketError,this.onUnhandledMessage=s.onUnhandledMessage,this.onUnhandledReceipt=s.onUnhandledReceipt,this.onUnhandledFrame=s.onUnhandledFrame,this.onHeartbeatReceived=s.onHeartbeatReceived,this.onHeartbeatLost=s.onHeartbeatLost}start(){const t=new P4(e=>{const s=wr.fromRawFrame(e,this._escapeHeaderValues);this.logRawCommunication||this.debug(`<<< ${s}`),(this._serverFrameHandlers[s.command]||this.onUnhandledFrame)(s)},()=>{this.debug("<<< PONG"),this.onHeartbeatReceived()});this._webSocket.onmessage=e=>{if(this.debug("Received data"),this._lastServerActivityTS=Date.now(),this.logRawCommunication){const s=e.data instanceof ArrayBuffer?new TextDecoder().decode(e.data):e.data;this.debug(`<<< ${s}`)}t.parseChunk(e.data,this.appendMissingNULLonIncoming)},this._webSocket.onclose=e=>{this.debug(`Connection closed to ${this._webSocket.url}`),this._cleanUp(),this.onWebSocketClose(e)},this._webSocket.onerror=e=>{this.onWebSocketError(e)},this._webSocket.onopen=()=>{const e=Object.assign({},this.connectHeaders);this.debug("Web Socket Opened..."),e["accept-version"]=this.stompVersions.supportedVersions(),e["heart-beat"]=[this.heartbeatOutgoing,this.heartbeatIncoming].join(","),this._transmit({command:"CONNECT",headers:e})}}_setupHeartbeat(t){if(t.version!==Qn.V1_1&&t.version!==Qn.V1_2||!t["heart-beat"])return;const[e,s]=t["heart-beat"].split(",").map(a=>parseInt(a,10));if(this.heartbeatOutgoing!==0&&s!==0){const a=Math.max(this.heartbeatOutgoing,s);this.debug(`send PING every ${a}ms`),this._pinger=new H4(a,this._client.heartbeatStrategy,this.debug),this._pinger.start(()=>{this._webSocket.readyState===Er.OPEN&&(this._webSocket.send($l.LF),this.debug(">>> PING"))})}if(this.heartbeatIncoming!==0&&e!==0){const a=Math.max(this.heartbeatIncoming,e);this.debug(`check PONG every ${a}ms`),this._ponger=setInterval(()=>{const o=Date.now()-this._lastServerActivityTS;o>a*this.heartbeatToleranceMultiplier&&(this.debug(`did not receive server activity for the last ${o}ms`),this.onHeartbeatLost(),this._closeOrDiscardWebsocket())},a)}}_closeOrDiscardWebsocket(){this.discardWebsocketOnCommFailure?(this.debug("Discarding websocket, the underlying socket may linger for a while"),this.discardWebsocket()):(this.debug("Issuing close on the websocket"),this._closeWebsocket())}forceDisconnect(){this._webSocket&&(this._webSocket.readyState===Er.CONNECTING||this._webSocket.readyState===Er.OPEN)&&this._closeOrDiscardWebsocket()}_closeWebsocket(){this._webSocket.onmessage=()=>{},this._webSocket.close()}discardWebsocket(){typeof this._webSocket.terminate!="function"&&U4(this._webSocket,t=>this.debug(t)),this._webSocket.terminate()}_transmit(t){const{command:e,headers:s,body:a,binaryBody:o,skipContentLengthHeader:c}=t,u=new wr({command:e,headers:s,body:a,binaryBody:o,escapeHeaderValues:this._escapeHeaderValues,skipContentLengthHeader:c});let d=u.serialize();if(this.logRawCommunication?this.debug(`>>> ${d}`):this.debug(`>>> ${u}`),this.forceBinaryWSFrames&&typeof d=="string"&&(d=new TextEncoder().encode(d)),typeof d!="string"||!this.splitLargeFrames)this._webSocket.send(d);else{let h=d;for(;h.length>0;){const p=h.substring(0,this.maxWebSocketChunkSize);h=h.substring(this.maxWebSocketChunkSize),this._webSocket.send(p),this.debug(`chunk sent = ${p.length}, remaining = ${h.length}`)}}}dispose(){if(this.connected)try{const t=Object.assign({},this.disconnectHeaders);t.receipt||(t.receipt=`close-${this._counter++}`),this.watchForReceipt(t.receipt,e=>{this._closeWebsocket(),this._cleanUp(),this.onDisconnect(e)}),this._transmit({command:"DISCONNECT",headers:t})}catch(t){this.debug(`Ignoring error during disconnect ${t}`)}else(this._webSocket.readyState===Er.CONNECTING||this._webSocket.readyState===Er.OPEN)&&this._closeWebsocket()}_cleanUp(){this._connected=!1,this._pinger&&(this._pinger.stop(),this._pinger=void 0),this._ponger&&(clearInterval(this._ponger),this._ponger=void 0)}publish(t){const{destination:e,headers:s,body:a,binaryBody:o,skipContentLengthHeader:c}=t,u=Object.assign({destination:e},s);this._transmit({command:"SEND",headers:u,body:a,binaryBody:o,skipContentLengthHeader:c})}watchForReceipt(t,e){this._receiptWatchers[t]=e}subscribe(t,e,s={}){s=Object.assign({},s),s.id||(s.id=`sub-${this._counter++}`),s.destination=t,this._subscriptions[s.id]=e,this._transmit({command:"SUBSCRIBE",headers:s});const a=this;return{id:s.id,unsubscribe(o){return a.unsubscribe(s.id,o)}}}unsubscribe(t,e={}){e=Object.assign({},e),delete this._subscriptions[t],e.id=t,this._transmit({command:"UNSUBSCRIBE",headers:e})}begin(t){const e=t||`tx-${this._counter++}`;this._transmit({command:"BEGIN",headers:{transaction:e}});const s=this;return{id:e,commit(){s.commit(e)},abort(){s.abort(e)}}}commit(t){this._transmit({command:"COMMIT",headers:{transaction:t}})}abort(t){this._transmit({command:"ABORT",headers:{transaction:t}})}ack(t,e,s={}){s=Object.assign({},s),this._connectedVersion===Qn.V1_2?s.id=t:s["message-id"]=t,s.subscription=e,this._transmit({command:"ACK",headers:s})}nack(t,e,s={}){return s=Object.assign({},s),this._connectedVersion===Qn.V1_2?s.id=t:s["message-id"]=t,s.subscription=e,this._transmit({command:"NACK",headers:s})}}class e0{get webSocket(){return this._stompHandler?._webSocket}get disconnectHeaders(){return this._disconnectHeaders}set disconnectHeaders(t){this._disconnectHeaders=t,this._stompHandler&&(this._stompHandler.disconnectHeaders=this._disconnectHeaders)}get connected(){return!!this._stompHandler&&this._stompHandler.connected}get connectedVersion(){return this._stompHandler?this._stompHandler.connectedVersion:void 0}get active(){return this.state===Fi.ACTIVE}_changeState(t){this.state=t,this.onChangeState(t)}constructor(t={}){this.stompVersions=Qn.default,this.connectionTimeout=0,this.reconnectDelay=5e3,this._nextReconnectDelay=0,this.maxReconnectDelay=900*1e3,this.reconnectTimeMode=zf.LINEAR,this.heartbeatIncoming=1e4,this.heartbeatToleranceMultiplier=2,this.heartbeatOutgoing=1e4,this.heartbeatStrategy=uc.Interval,this.splitLargeFrames=!1,this.maxWebSocketChunkSize=8*1024,this.forceBinaryWSFrames=!1,this.appendMissingNULLonIncoming=!1,this.discardWebsocketOnCommFailure=!1,this.state=Fi.INACTIVE;const e=()=>{};this.debug=e,this.beforeConnect=e,this.onConnect=e,this.onDisconnect=e,this.onUnhandledMessage=e,this.onUnhandledReceipt=e,this.onUnhandledFrame=e,this.onHeartbeatReceived=e,this.onHeartbeatLost=e,this.onStompError=e,this.onWebSocketClose=e,this.onWebSocketError=e,this.logRawCommunication=!1,this.onChangeState=e,this.connectHeaders={},this._disconnectHeaders={},this.configure(t)}configure(t){Object.assign(this,t),this.maxReconnectDelay>0&&this.maxReconnectDelay<this.reconnectDelay&&(this.debug(`Warning: maxReconnectDelay (${this.maxReconnectDelay}ms) is less than reconnectDelay (${this.reconnectDelay}ms). Using reconnectDelay as the maxReconnectDelay delay.`),this.maxReconnectDelay=this.reconnectDelay)}activate(){const t=()=>{if(this.active){this.debug("Already ACTIVE, ignoring request to activate");return}this._changeState(Fi.ACTIVE),this._nextReconnectDelay=this.reconnectDelay,this._connect()};this.state===Fi.DEACTIVATING?(this.debug("Waiting for deactivation to finish before activating"),this.deactivate().then(()=>{t()})):t()}async _connect(){if(await this.beforeConnect(this),this._stompHandler){this.debug("There is already a stompHandler, skipping the call to connect");return}if(!this.active){this.debug("Client has been marked inactive, will not attempt to connect");return}this.connectionTimeout>0&&(this._connectionWatcher&&clearTimeout(this._connectionWatcher),this._connectionWatcher=setTimeout(()=>{this.connected||(this.debug(`Connection not established in ${this.connectionTimeout}ms, closing socket`),this.forceDisconnect())},this.connectionTimeout)),this.debug("Opening Web Socket...");const t=this._createWebSocket();this._stompHandler=new F4(this,t,{debug:this.debug,stompVersions:this.stompVersions,connectHeaders:this.connectHeaders,disconnectHeaders:this._disconnectHeaders,heartbeatIncoming:this.heartbeatIncoming,heartbeatGracePeriods:this.heartbeatToleranceMultiplier,heartbeatOutgoing:this.heartbeatOutgoing,heartbeatStrategy:this.heartbeatStrategy,splitLargeFrames:this.splitLargeFrames,maxWebSocketChunkSize:this.maxWebSocketChunkSize,forceBinaryWSFrames:this.forceBinaryWSFrames,logRawCommunication:this.logRawCommunication,appendMissingNULLonIncoming:this.appendMissingNULLonIncoming,discardWebsocketOnCommFailure:this.discardWebsocketOnCommFailure,onConnect:e=>{if(this._connectionWatcher&&(clearTimeout(this._connectionWatcher),this._connectionWatcher=void 0),this._nextReconnectDelay=this.reconnectDelay,!this.active){this.debug("STOMP got connected while deactivate was issued, will disconnect now"),this._disposeStompHandler();return}this.onConnect(e)},onDisconnect:e=>{this.onDisconnect(e)},onStompError:e=>{this.onStompError(e)},onWebSocketClose:e=>{this._stompHandler=void 0,this.state===Fi.DEACTIVATING&&this._changeState(Fi.INACTIVE),this.onWebSocketClose(e),this.active&&this._schedule_reconnect()},onWebSocketError:e=>{this.onWebSocketError(e)},onUnhandledMessage:e=>{this.onUnhandledMessage(e)},onUnhandledReceipt:e=>{this.onUnhandledReceipt(e)},onUnhandledFrame:e=>{this.onUnhandledFrame(e)},onHeartbeatReceived:()=>{this.onHeartbeatReceived()},onHeartbeatLost:()=>{this.onHeartbeatLost()}}),this._stompHandler.start()}_createWebSocket(){let t;if(this.webSocketFactory)t=this.webSocketFactory();else if(this.brokerURL)t=new WebSocket(this.brokerURL,this.stompVersions.protocolVersions());else throw new Error("Either brokerURL or webSocketFactory must be provided");return t.binaryType="arraybuffer",t}_schedule_reconnect(){this._nextReconnectDelay>0&&(this.debug(`STOMP: scheduling reconnection in ${this._nextReconnectDelay}ms`),this._reconnector=setTimeout(()=>{this.reconnectTimeMode===zf.EXPONENTIAL&&(this._nextReconnectDelay=this._nextReconnectDelay*2,this.maxReconnectDelay!==0&&(this._nextReconnectDelay=Math.min(this._nextReconnectDelay,this.maxReconnectDelay))),this._connect()},this._nextReconnectDelay))}async deactivate(t={}){const e=t.force||!1,s=this.active;let a;if(this.state===Fi.INACTIVE)return this.debug("Already INACTIVE, nothing more to do"),Promise.resolve();if(this._changeState(Fi.DEACTIVATING),this._nextReconnectDelay=0,this._reconnector&&(clearTimeout(this._reconnector),this._reconnector=void 0),this._stompHandler&&this.webSocket.readyState!==Er.CLOSED){const o=this._stompHandler.onWebSocketClose;a=new Promise((c,u)=>{this._stompHandler.onWebSocketClose=d=>{o(d),c()}})}else return this._changeState(Fi.INACTIVE),Promise.resolve();return e?this._stompHandler?.discardWebsocket():s&&this._disposeStompHandler(),a}forceDisconnect(){this._stompHandler&&this._stompHandler.forceDisconnect()}_disposeStompHandler(){this._stompHandler&&this._stompHandler.dispose()}publish(t){this._checkConnection(),this._stompHandler.publish(t)}_checkConnection(){if(!this.connected)throw new TypeError("There is no underlying STOMP connection")}watchForReceipt(t,e){this._checkConnection(),this._stompHandler.watchForReceipt(t,e)}subscribe(t,e,s={}){return this._checkConnection(),this._stompHandler.subscribe(t,e,s)}unsubscribe(t,e={}){this._checkConnection(),this._stompHandler.unsubscribe(t,e)}begin(t){return this._checkConnection(),this._stompHandler.begin(t)}commit(t){this._checkConnection(),this._stompHandler.commit(t)}abort(t){this._checkConnection(),this._stompHandler.abort(t)}ack(t,e,s={}){this._checkConnection(),this._stompHandler.ack(t,e,s)}nack(t,e,s={}){this._checkConnection(),this._stompHandler.nack(t,e,s)}}function Qu(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Fp={exports:{}},w1;function G4(){return w1||(w1=1,(function(n,t){(function(e){n.exports=e()})(function(){return(function e(s,a,o){function c(h,p){if(!a[h]){if(!s[h]){var y=typeof Qu=="function"&&Qu;if(!p&&y)return y(h,!0);if(u)return u(h,!0);var x=new Error("Cannot find module '"+h+"'");throw x.code="MODULE_NOT_FOUND",x}var v=a[h]={exports:{}};s[h][0].call(v.exports,function(S){return c(s[h][1][S]||S)},v,v.exports,e,s,a,o)}return a[h].exports}for(var u=typeof Qu=="function"&&Qu,d=0;d<o.length;d++)c(o[d]);return c})({1:[function(e,s,a){(function(o){(function(){var c=e("./transport-list");s.exports=e("./main")(c),"_sockjs_onload"in o&&setTimeout(o._sockjs_onload,1)}).call(this)}).call(this,typeof ne<"u"?ne:typeof self<"u"?self:typeof window<"u"?window:{})},{"./main":14,"./transport-list":16}],2:[function(e,s,a){var o=e("inherits"),c=e("./event");function u(){c.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}o(u,c),s.exports=u},{"./event":4,inherits:54}],3:[function(e,s,a){var o=e("inherits"),c=e("./eventtarget");function u(){c.call(this)}o(u,c),u.prototype.removeAllListeners=function(d){d?delete this._listeners[d]:this._listeners={}},u.prototype.once=function(d,h){var p=this,y=!1;this.on(d,function x(){p.removeListener(d,x),y||(y=!0,h.apply(this,arguments))})},u.prototype.emit=function(){var d=arguments[0],h=this._listeners[d];if(h){for(var p=arguments.length,y=new Array(p-1),x=1;x<p;x++)y[x-1]=arguments[x];for(var v=0;v<h.length;v++)h[v].apply(this,y)}},u.prototype.on=u.prototype.addListener=c.prototype.addEventListener,u.prototype.removeListener=c.prototype.removeEventListener,s.exports.EventEmitter=u},{"./eventtarget":5,inherits:54}],4:[function(e,s,a){function o(c){this.type=c}o.prototype.initEvent=function(c,u,d){return this.type=c,this.bubbles=u,this.cancelable=d,this.timeStamp=+new Date,this},o.prototype.stopPropagation=function(){},o.prototype.preventDefault=function(){},o.CAPTURING_PHASE=1,o.AT_TARGET=2,o.BUBBLING_PHASE=3,s.exports=o},{}],5:[function(e,s,a){function o(){this._listeners={}}o.prototype.addEventListener=function(c,u){c in this._listeners||(this._listeners[c]=[]);var d=this._listeners[c];d.indexOf(u)===-1&&(d=d.concat([u])),this._listeners[c]=d},o.prototype.removeEventListener=function(c,u){var d=this._listeners[c];if(d){var h=d.indexOf(u);h===-1||(1<d.length?this._listeners[c]=d.slice(0,h).concat(d.slice(h+1)):delete this._listeners[c])}},o.prototype.dispatchEvent=function(){var c=arguments[0],u=c.type,d=arguments.length===1?[c]:Array.apply(null,arguments);if(this["on"+u]&&this["on"+u].apply(this,d),u in this._listeners)for(var h=this._listeners[u],p=0;p<h.length;p++)h[p].apply(this,d)},s.exports=o},{}],6:[function(e,s,a){var o=e("inherits"),c=e("./event");function u(d){c.call(this),this.initEvent("message",!1,!1),this.data=d}o(u,c),s.exports=u},{"./event":4,inherits:54}],7:[function(e,s,a){var o=e("./utils/iframe");function c(u){(this._transport=u).on("message",this._transportMessage.bind(this)),u.on("close",this._transportClose.bind(this))}c.prototype._transportClose=function(u,d){o.postMessage("c",JSON.stringify([u,d]))},c.prototype._transportMessage=function(u){o.postMessage("t",u)},c.prototype._send=function(u){this._transport.send(u)},c.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},s.exports=c},{"./utils/iframe":47}],8:[function(e,s,a){var o=e("./utils/url"),c=e("./utils/event"),u=e("./facade"),d=e("./info-iframe-receiver"),h=e("./utils/iframe"),p=e("./location"),y=function(){};s.exports=function(x,v){var S,w={};v.forEach(function(_){_.facadeTransport&&(w[_.facadeTransport.transportName]=_.facadeTransport)}),w[d.transportName]=d,x.bootstrap_iframe=function(){var _;h.currentWindowId=p.hash.slice(1),c.attachEvent("message",function(A){if(A.source===parent&&(S===void 0&&(S=A.origin),A.origin===S)){var R;try{R=JSON.parse(A.data)}catch{return void y("bad json",A.data)}if(R.windowId===h.currentWindowId)switch(R.type){case"s":var C;try{C=JSON.parse(R.data)}catch{y("bad json",R.data);break}var j=C[0],k=C[1],I=C[2],N=C[3];if(j!==x.version)throw new Error('Incompatible SockJS! Main site uses: "'+j+'", the iframe: "'+x.version+'".');if(!o.isOriginEqual(I,p.href)||!o.isOriginEqual(N,p.href))throw new Error("Can't connect to different domain from within an iframe. ("+p.href+", "+I+", "+N+")");_=new u(new w[k](I,N));break;case"m":_._send(R.data);break;case"c":_&&_._close(),_=null}}}),h.postMessage("s")}}},{"./facade":7,"./info-iframe-receiver":10,"./location":13,"./utils/event":46,"./utils/iframe":47,"./utils/url":52,debug:void 0}],9:[function(e,s,a){var o=e("events").EventEmitter,c=e("inherits"),u=e("./utils/object");function d(h,p){o.call(this);var y=this,x=+new Date;this.xo=new p("GET",h),this.xo.once("finish",function(v,S){var w,_;if(v===200){if(_=+new Date-x,S)try{w=JSON.parse(S)}catch{}u.isObject(w)||(w={})}y.emit("finish",w,_),y.removeAllListeners()})}c(d,o),d.prototype.close=function(){this.removeAllListeners(),this.xo.close()},s.exports=d},{"./utils/object":49,debug:void 0,events:3,inherits:54}],10:[function(e,s,a){var o=e("inherits"),c=e("events").EventEmitter,u=e("./transport/sender/xhr-local"),d=e("./info-ajax");function h(p){var y=this;c.call(this),this.ir=new d(p,u),this.ir.once("finish",function(x,v){y.ir=null,y.emit("message",JSON.stringify([x,v]))})}o(h,c),h.transportName="iframe-info-receiver",h.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},s.exports=h},{"./info-ajax":9,"./transport/sender/xhr-local":37,events:3,inherits:54}],11:[function(e,s,a){(function(o){(function(){var c=e("events").EventEmitter,u=e("inherits"),d=e("./utils/event"),h=e("./transport/iframe"),p=e("./info-iframe-receiver");function y(x,v){var S=this;c.call(this);function w(){var _=S.ifr=new h(p.transportName,v,x);_.once("message",function(A){if(A){var R;try{R=JSON.parse(A)}catch{return S.emit("finish"),void S.close()}var C=R[0],j=R[1];S.emit("finish",C,j)}S.close()}),_.once("close",function(){S.emit("finish"),S.close()})}o.document.body?w():d.attachEvent("load",w)}u(y,c),y.enabled=function(){return h.enabled()},y.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},s.exports=y}).call(this)}).call(this,typeof ne<"u"?ne:typeof self<"u"?self:typeof window<"u"?window:{})},{"./info-iframe-receiver":10,"./transport/iframe":22,"./utils/event":46,debug:void 0,events:3,inherits:54}],12:[function(e,s,a){var o=e("events").EventEmitter,c=e("inherits"),u=e("./utils/url"),d=e("./transport/sender/xdr"),h=e("./transport/sender/xhr-cors"),p=e("./transport/sender/xhr-local"),y=e("./transport/sender/xhr-fake"),x=e("./info-iframe"),v=e("./info-ajax");function S(w,_){var A=this;o.call(this),setTimeout(function(){A.doXhr(w,_)},0)}c(S,o),S._getReceiver=function(w,_,A){return A.sameOrigin?new v(_,p):h.enabled?new v(_,h):d.enabled&&A.sameScheme?new v(_,d):x.enabled()?new x(w,_):new v(_,y)},S.prototype.doXhr=function(w,_){var A=this,R=u.addPath(w,"/info");this.xo=S._getReceiver(w,R,_),this.timeoutRef=setTimeout(function(){A._cleanup(!1),A.emit("finish")},S.timeout),this.xo.once("finish",function(C,j){A._cleanup(!0),A.emit("finish",C,j)})},S.prototype._cleanup=function(w){clearTimeout(this.timeoutRef),this.timeoutRef=null,!w&&this.xo&&this.xo.close(),this.xo=null},S.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},S.timeout=8e3,s.exports=S},{"./info-ajax":9,"./info-iframe":11,"./transport/sender/xdr":34,"./transport/sender/xhr-cors":35,"./transport/sender/xhr-fake":36,"./transport/sender/xhr-local":37,"./utils/url":52,debug:void 0,events:3,inherits:54}],13:[function(e,s,a){(function(o){(function(){s.exports=o.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}}).call(this)}).call(this,typeof ne<"u"?ne:typeof self<"u"?self:typeof window<"u"?window:{})},{}],14:[function(e,s,a){(function(o){(function(){e("./shims");var c,u=e("url-parse"),d=e("inherits"),h=e("./utils/random"),p=e("./utils/escape"),y=e("./utils/url"),x=e("./utils/event"),v=e("./utils/transport"),S=e("./utils/object"),w=e("./utils/browser"),_=e("./utils/log"),A=e("./event/event"),R=e("./event/eventtarget"),C=e("./location"),j=e("./event/close"),k=e("./event/trans-message"),I=e("./info-receiver"),N=function(){};function L(B,U,z){if(!(this instanceof L))return new L(B,U,z);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");R.call(this),this.readyState=L.CONNECTING,this.extensions="",this.protocol="",(z=z||{}).protocols_whitelist&&_.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=z.transports,this._transportOptions=z.transportOptions||{},this._timeout=z.timeout||0;var G=z.sessionId||8;if(typeof G=="function")this._generateSessionId=G;else{if(typeof G!="number")throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return h.string(G)}}this._server=z.server||h.numberString(1e3);var V=new u(B);if(!V.host||!V.protocol)throw new SyntaxError("The URL '"+B+"' is invalid");if(V.hash)throw new SyntaxError("The URL must not contain a fragment");if(V.protocol!=="http:"&&V.protocol!=="https:")throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+V.protocol+"' is not allowed.");var J=V.protocol==="https:";if(C.protocol==="https:"&&!J&&!y.isLoopbackAddr(V.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");U?Array.isArray(U)||(U=[U]):U=[];var O=U.sort();O.forEach(function(rt,it){if(!rt)throw new SyntaxError("The protocols entry '"+rt+"' is invalid.");if(it<O.length-1&&rt===O[it+1])throw new SyntaxError("The protocols entry '"+rt+"' is duplicated.")});var $=y.getOrigin(C.href);this._origin=$?$.toLowerCase():null,V.set("pathname",V.pathname.replace(/\/+$/,"")),this.url=V.href,N("using url",this.url),this._urlInfo={nullOrigin:!w.hasDomain(),sameOrigin:y.isOriginEqual(this.url,C.href),sameScheme:y.isSchemeEqual(this.url,C.href)},this._ir=new I(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function H(B){return B===1e3||3e3<=B&&B<=4999}d(L,R),L.prototype.close=function(B,U){if(B&&!H(B))throw new Error("InvalidAccessError: Invalid code");if(U&&123<U.length)throw new SyntaxError("reason argument has an invalid length");this.readyState!==L.CLOSING&&this.readyState!==L.CLOSED&&this._close(B||1e3,U||"Normal closure",!0)},L.prototype.send=function(B){if(typeof B!="string"&&(B=""+B),this.readyState===L.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===L.OPEN&&this._transport.send(p.quote(B))},L.version=e("./version"),L.CONNECTING=0,L.OPEN=1,L.CLOSING=2,L.CLOSED=3,L.prototype._receiveInfo=function(B,U){if(this._ir=null,B){this._rto=this.countRTO(U),this._transUrl=B.base_url?B.base_url:this.url,B=S.extend(B,this._urlInfo);var z=c.filterToEnabled(this._transportsWhitelist,B);this._transports=z.main,N(this._transports.length+" enabled transports"),this._connect()}else this._close(1002,"Cannot connect to server")},L.prototype._connect=function(){for(var B=this._transports.shift();B;B=this._transports.shift()){if(N("attempt",B.transportName),B.needBody&&(!o.document.body||o.document.readyState!==void 0&&o.document.readyState!=="complete"&&o.document.readyState!=="interactive"))return this._transports.unshift(B),void x.attachEvent("load",this._connect.bind(this));var U=Math.max(this._timeout,this._rto*B.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),U);var z=y.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),G=this._transportOptions[B.transportName],V=new B(z,this._transUrl,G);return V.on("message",this._transportMessage.bind(this)),V.once("close",this._transportClose.bind(this)),V.transportName=B.transportName,void(this._transport=V)}this._close(2e3,"All transports failed",!1)},L.prototype._transportTimeout=function(){this.readyState===L.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},L.prototype._transportMessage=function(B){var U,z=this,G=B.slice(0,1),V=B.slice(1);switch(G){case"o":return void this._open();case"h":return this.dispatchEvent(new A("heartbeat")),void N("heartbeat",this.transport)}if(V)try{U=JSON.parse(V)}catch{}if(U!==void 0)switch(G){case"a":Array.isArray(U)&&U.forEach(function(J){N("message",z.transport),z.dispatchEvent(new k(J))});break;case"m":N("message",this.transport),this.dispatchEvent(new k(U));break;case"c":Array.isArray(U)&&U.length===2&&this._close(U[0],U[1],!0)}},L.prototype._transportClose=function(B,U){N("_transportClose",this.transport),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),H(B)||B===2e3||this.readyState!==L.CONNECTING?this._close(B,U):this._connect()},L.prototype._open=function(){N("_open",this._transport&&this._transport.transportName,this.readyState),this.readyState===L.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=L.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new A("open")),N("connected",this.transport)):this._close(1006,"Server lost session")},L.prototype._close=function(B,U,z){N("_close",this.transport,B,U,z,this.readyState);var G=!1;if(this._ir&&(G=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===L.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=L.CLOSING,setTimeout((function(){this.readyState=L.CLOSED,G&&this.dispatchEvent(new A("error"));var V=new j("close");V.wasClean=z||!1,V.code=B||1e3,V.reason=U,this.dispatchEvent(V),this.onmessage=this.onclose=this.onerror=null}).bind(this),0)},L.prototype.countRTO=function(B){return 100<B?4*B:300+B},s.exports=function(B){return c=v(B),e("./iframe-bootstrap")(L,B),L}}).call(this)}).call(this,typeof ne<"u"?ne:typeof self<"u"?self:typeof window<"u"?window:{})},{"./event/close":2,"./event/event":4,"./event/eventtarget":5,"./event/trans-message":6,"./iframe-bootstrap":8,"./info-receiver":12,"./location":13,"./shims":15,"./utils/browser":44,"./utils/escape":45,"./utils/event":46,"./utils/log":48,"./utils/object":49,"./utils/random":50,"./utils/transport":51,"./utils/url":52,"./version":53,debug:void 0,inherits:54,"url-parse":57}],15:[function(e,s,a){function o(z){return h.toString.call(z)==="[object Function]"}function c(z){return v.call(z)==="[object String]"}var u,d=Array.prototype,h=Object.prototype,p=Function.prototype,y=String.prototype,x=d.slice,v=h.toString,S=Object.defineProperty&&(function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}})();u=S?function(z,G,V,J){!J&&G in z||Object.defineProperty(z,G,{configurable:!0,enumerable:!1,writable:!0,value:V})}:function(z,G,V,J){!J&&G in z||(z[G]=V)};function w(z,G,V){for(var J in G)h.hasOwnProperty.call(G,J)&&u(z,J,G[J],V)}function _(z){if(z==null)throw new TypeError("can't convert "+z+" to object");return Object(z)}function A(){}w(p,{bind:function(z){var G=this;if(!o(G))throw new TypeError("Function.prototype.bind called on incompatible "+G);for(var V=x.call(arguments,1),J=Math.max(0,G.length-V.length),O=[],$=0;$<J;$++)O.push("$"+$);var rt=Function("binder","return function ("+O.join(",")+"){ return binder.apply(this, arguments); }")(function(){if(this instanceof rt){var it=G.apply(this,V.concat(x.call(arguments)));return Object(it)===it?it:this}return G.apply(z,V.concat(x.call(arguments)))});return G.prototype&&(A.prototype=G.prototype,rt.prototype=new A,A.prototype=null),rt}}),w(Array,{isArray:function(z){return v.call(z)==="[object Array]"}});var R,C,j,k=Object("a"),I=k[0]!=="a"||!(0 in k);w(d,{forEach:function(z,G){var V=_(this),J=I&&c(this)?this.split(""):V,O=G,$=-1,rt=J.length>>>0;if(!o(z))throw new TypeError;for(;++$<rt;)$ in J&&z.call(O,J[$],$,V)}},(R=d.forEach,j=C=!0,R&&(R.call("foo",function(z,G,V){typeof V!="object"&&(C=!1)}),R.call([1],function(){j=typeof this=="string"},"x")),!(R&&C&&j)));var N=Array.prototype.indexOf&&[0,1].indexOf(1,2)!==-1;w(d,{indexOf:function(z,G){var V=I&&c(this)?this.split(""):_(this),J=V.length>>>0;if(!J)return-1;var O=0;for(1<arguments.length&&(O=(function($){var rt=+$;return rt!=rt?rt=0:rt!==0&&rt!==1/0&&rt!==-1/0&&(rt=(0<rt||-1)*Math.floor(Math.abs(rt))),rt})(G)),O=0<=O?O:Math.max(0,J+O);O<J;O++)if(O in V&&V[O]===z)return O;return-1}},N);var L,H=y.split;"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||1<".".split(/()()/).length?(L=/()??/.exec("")[1]===void 0,y.split=function(z,G){var V=this;if(z===void 0&&G===0)return[];if(v.call(z)!=="[object RegExp]")return H.call(this,z,G);var J,O,$,rt,it=[],ft=(z.ignoreCase?"i":"")+(z.multiline?"m":"")+(z.extended?"x":"")+(z.sticky?"y":""),D=0;for(z=new RegExp(z.source,ft+"g"),V+="",L||(J=new RegExp("^"+z.source+"$(?!\\s)",ft)),G=G===void 0?-1>>>0:(function(Y){return Y>>>0})(G);(O=z.exec(V))&&!(D<($=O.index+O[0].length)&&(it.push(V.slice(D,O.index)),!L&&1<O.length&&O[0].replace(J,function(){for(var Y=1;Y<arguments.length-2;Y++)arguments[Y]===void 0&&(O[Y]=void 0)}),1<O.length&&O.index<V.length&&d.push.apply(it,O.slice(1)),rt=O[0].length,D=$,it.length>=G));)z.lastIndex===O.index&&z.lastIndex++;return D===V.length?!rt&&z.test("")||it.push(""):it.push(V.slice(D)),it.length>G?it.slice(0,G):it}):"0".split(void 0,0).length&&(y.split=function(z,G){return z===void 0&&G===0?[]:H.call(this,z,G)});var B=y.substr,U="".substr&&"0b".substr(-1)!=="b";w(y,{substr:function(z,G){return B.call(this,z<0&&(z=this.length+z)<0?0:z,G)}},U)},{}],16:[function(e,s,a){s.exports=[e("./transport/websocket"),e("./transport/xhr-streaming"),e("./transport/xdr-streaming"),e("./transport/eventsource"),e("./transport/lib/iframe-wrap")(e("./transport/eventsource")),e("./transport/htmlfile"),e("./transport/lib/iframe-wrap")(e("./transport/htmlfile")),e("./transport/xhr-polling"),e("./transport/xdr-polling"),e("./transport/lib/iframe-wrap")(e("./transport/xhr-polling")),e("./transport/jsonp-polling")]},{"./transport/eventsource":20,"./transport/htmlfile":21,"./transport/jsonp-polling":23,"./transport/lib/iframe-wrap":26,"./transport/websocket":38,"./transport/xdr-polling":39,"./transport/xdr-streaming":40,"./transport/xhr-polling":41,"./transport/xhr-streaming":42}],17:[function(e,s,a){(function(o){(function(){var c=e("events").EventEmitter,u=e("inherits"),d=e("../../utils/event"),h=e("../../utils/url"),p=o.XMLHttpRequest,y=function(){};function x(w,_,A,R){var C=this;c.call(this),setTimeout(function(){C._start(w,_,A,R)},0)}u(x,c),x.prototype._start=function(w,_,A,R){var C=this;try{this.xhr=new p}catch{}if(!this.xhr)return this.emit("finish",0,"no xhr support"),void this._cleanup();_=h.addQuery(_,"t="+ +new Date),this.unloadRef=d.unloadAdd(function(){C._cleanup(!0)});try{this.xhr.open(w,_,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){y("xhr timeout"),C.emit("finish",0,""),C._cleanup(!1)})}catch{return this.emit("finish",0,""),void this._cleanup(!1)}if(R&&R.noCredentials||!x.supportsCORS||(this.xhr.withCredentials=!0),R&&R.headers)for(var j in R.headers)this.xhr.setRequestHeader(j,R.headers[j]);this.xhr.onreadystatechange=function(){if(C.xhr){var k,I,N=C.xhr;switch(y("readyState",N.readyState),N.readyState){case 3:try{I=N.status,k=N.responseText}catch{}I===1223&&(I=204),I===200&&k&&0<k.length&&C.emit("chunk",I,k);break;case 4:I=N.status,I===1223&&(I=204),I!==12005&&I!==12029||(I=0),y("finish",I,N.responseText),C.emit("finish",I,N.responseText),C._cleanup(!1)}}};try{C.xhr.send(A)}catch{C.emit("finish",0,""),C._cleanup(!1)}},x.prototype._cleanup=function(w){if(this.xhr){if(this.removeAllListeners(),d.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),w)try{this.xhr.abort()}catch{}this.unloadRef=this.xhr=null}},x.prototype.close=function(){this._cleanup(!0)},x.enabled=!!p;var v=["Active"].concat("Object").join("X");!x.enabled&&v in o&&(x.enabled=!!new(p=function(){try{return new o[v]("Microsoft.XMLHTTP")}catch{return null}}));var S=!1;try{S="withCredentials"in new p}catch{}x.supportsCORS=S,s.exports=x}).call(this)}).call(this,typeof ne<"u"?ne:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../utils/event":46,"../../utils/url":52,debug:void 0,events:3,inherits:54}],18:[function(e,s,a){(function(o){(function(){s.exports=o.EventSource}).call(this)}).call(this,typeof ne<"u"?ne:typeof self<"u"?self:typeof window<"u"?window:{})},{}],19:[function(e,s,a){(function(o){(function(){var c=o.WebSocket||o.MozWebSocket;s.exports=c?function(u){return new c(u)}:void 0}).call(this)}).call(this,typeof ne<"u"?ne:typeof self<"u"?self:typeof window<"u"?window:{})},{}],20:[function(e,s,a){var o=e("inherits"),c=e("./lib/ajax-based"),u=e("./receiver/eventsource"),d=e("./sender/xhr-cors"),h=e("eventsource");function p(y){if(!p.enabled())throw new Error("Transport created when disabled");c.call(this,y,"/eventsource",u,d)}o(p,c),p.enabled=function(){return!!h},p.transportName="eventsource",p.roundTrips=2,s.exports=p},{"./lib/ajax-based":24,"./receiver/eventsource":29,"./sender/xhr-cors":35,eventsource:18,inherits:54}],21:[function(e,s,a){var o=e("inherits"),c=e("./receiver/htmlfile"),u=e("./sender/xhr-local"),d=e("./lib/ajax-based");function h(p){if(!c.enabled)throw new Error("Transport created when disabled");d.call(this,p,"/htmlfile",c,u)}o(h,d),h.enabled=function(p){return c.enabled&&p.sameOrigin},h.transportName="htmlfile",h.roundTrips=2,s.exports=h},{"./lib/ajax-based":24,"./receiver/htmlfile":30,"./sender/xhr-local":37,inherits:54}],22:[function(e,s,a){var o=e("inherits"),c=e("events").EventEmitter,u=e("../version"),d=e("../utils/url"),h=e("../utils/iframe"),p=e("../utils/event"),y=e("../utils/random"),x=function(){};function v(S,w,_){if(!v.enabled())throw new Error("Transport created when disabled");c.call(this);var A=this;this.origin=d.getOrigin(_),this.baseUrl=_,this.transUrl=w,this.transport=S,this.windowId=y.string(8);var R=d.addPath(_,"/iframe.html")+"#"+this.windowId;this.iframeObj=h.createIframe(R,function(C){A.emit("close",1006,"Unable to load an iframe ("+C+")"),A.close()}),this.onmessageCallback=this._message.bind(this),p.attachEvent("message",this.onmessageCallback)}o(v,c),v.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){p.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch{}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},v.prototype._message=function(S){if(x("message",S.data),d.isOriginEqual(S.origin,this.origin)){var w;try{w=JSON.parse(S.data)}catch{return void x("bad json",S.data)}if(w.windowId===this.windowId)switch(w.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([u,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",w.data);break;case"c":var _;try{_=JSON.parse(w.data)}catch{return void x("bad json",w.data)}this.emit("close",_[0],_[1]),this.close()}else x("mismatched window id",w.windowId,this.windowId)}else x("not same origin",S.origin,this.origin)},v.prototype.postMessage=function(S,w){this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:S,data:w||""}),this.origin)},v.prototype.send=function(S){this.postMessage("m",S)},v.enabled=function(){return h.iframeEnabled},v.transportName="iframe",v.roundTrips=2,s.exports=v},{"../utils/event":46,"../utils/iframe":47,"../utils/random":50,"../utils/url":52,"../version":53,debug:void 0,events:3,inherits:54}],23:[function(e,s,a){(function(o){(function(){var c=e("inherits"),u=e("./lib/sender-receiver"),d=e("./receiver/jsonp"),h=e("./sender/jsonp");function p(y){if(!p.enabled())throw new Error("Transport created when disabled");u.call(this,y,"/jsonp",h,d)}c(p,u),p.enabled=function(){return!!o.document},p.transportName="jsonp-polling",p.roundTrips=1,p.needBody=!0,s.exports=p}).call(this)}).call(this,typeof ne<"u"?ne:typeof self<"u"?self:typeof window<"u"?window:{})},{"./lib/sender-receiver":28,"./receiver/jsonp":31,"./sender/jsonp":33,inherits:54}],24:[function(e,s,a){var o=e("inherits"),c=e("../../utils/url"),u=e("./sender-receiver");function d(h,p,y,x){u.call(this,h,p,(function(v){return function(S,w,_){var A={};typeof w=="string"&&(A.headers={"Content-type":"text/plain"});var R=c.addPath(S,"/xhr_send"),C=new v("POST",R,w,A);return C.once("finish",function(j){if(C=null,j!==200&&j!==204)return _(new Error("http status "+j));_()}),function(){C.close(),C=null;var j=new Error("Aborted");j.code=1e3,_(j)}}})(x),y,x)}o(d,u),s.exports=d},{"../../utils/url":52,"./sender-receiver":28,debug:void 0,inherits:54}],25:[function(e,s,a){var o=e("inherits"),c=e("events").EventEmitter,u=function(){};function d(h,p){c.call(this),this.sendBuffer=[],this.sender=p,this.url=h}o(d,c),d.prototype.send=function(h){this.sendBuffer.push(h),this.sendStop||this.sendSchedule()},d.prototype.sendScheduleWait=function(){var h,p=this;this.sendStop=function(){p.sendStop=null,clearTimeout(h)},h=setTimeout(function(){p.sendStop=null,p.sendSchedule()},25)},d.prototype.sendSchedule=function(){u("sendSchedule",this.sendBuffer.length);var h=this;if(0<this.sendBuffer.length){var p="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,p,function(y){h.sendStop=null,y?(h.emit("close",y.code||1006,"Sending error: "+y),h.close()):h.sendScheduleWait()}),this.sendBuffer=[]}},d.prototype._cleanup=function(){this.removeAllListeners()},d.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},s.exports=d},{debug:void 0,events:3,inherits:54}],26:[function(e,s,a){(function(o){(function(){var c=e("inherits"),u=e("../iframe"),d=e("../../utils/object");s.exports=function(h){function p(y,x){u.call(this,h.transportName,y,x)}return c(p,u),p.enabled=function(y,x){if(!o.document)return!1;var v=d.extend({},x);return v.sameOrigin=!0,h.enabled(v)&&u.enabled()},p.transportName="iframe-"+h.transportName,p.needBody=!0,p.roundTrips=u.roundTrips+h.roundTrips-1,p.facadeTransport=h,p}}).call(this)}).call(this,typeof ne<"u"?ne:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../utils/object":49,"../iframe":22,inherits:54}],27:[function(e,s,a){var o=e("inherits"),c=e("events").EventEmitter,u=function(){};function d(h,p,y){c.call(this),this.Receiver=h,this.receiveUrl=p,this.AjaxObject=y,this._scheduleReceiver()}o(d,c),d.prototype._scheduleReceiver=function(){var h=this,p=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);p.on("message",function(y){h.emit("message",y)}),p.once("close",function(y,x){u("close",y,x,h.pollIsClosing),h.poll=p=null,h.pollIsClosing||(x==="network"?h._scheduleReceiver():(h.emit("close",y||1006,x),h.removeAllListeners()))})},d.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},s.exports=d},{debug:void 0,events:3,inherits:54}],28:[function(e,s,a){var o=e("inherits"),c=e("../../utils/url"),u=e("./buffered-sender"),d=e("./polling");function h(p,y,x,v,S){var w=c.addPath(p,y),_=this;u.call(this,p,x),this.poll=new d(v,w,S),this.poll.on("message",function(A){_.emit("message",A)}),this.poll.once("close",function(A,R){_.poll=null,_.emit("close",A,R),_.close()})}o(h,u),h.prototype.close=function(){u.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},s.exports=h},{"../../utils/url":52,"./buffered-sender":25,"./polling":27,debug:void 0,inherits:54}],29:[function(e,s,a){var o=e("inherits"),c=e("events").EventEmitter,u=e("eventsource"),d=function(){};function h(p){c.call(this);var y=this,x=this.es=new u(p);x.onmessage=function(v){d("message",v.data),y.emit("message",decodeURI(v.data))},x.onerror=function(v){d("error",x.readyState);var S=x.readyState!==2?"network":"permanent";y._cleanup(),y._close(S)}}o(h,c),h.prototype.abort=function(){this._cleanup(),this._close("user")},h.prototype._cleanup=function(){var p=this.es;p&&(p.onmessage=p.onerror=null,p.close(),this.es=null)},h.prototype._close=function(p){var y=this;setTimeout(function(){y.emit("close",null,p),y.removeAllListeners()},200)},s.exports=h},{debug:void 0,events:3,eventsource:18,inherits:54}],30:[function(e,s,a){(function(o){(function(){var c=e("inherits"),u=e("../../utils/iframe"),d=e("../../utils/url"),h=e("events").EventEmitter,p=e("../../utils/random"),y=function(){};function x(S){h.call(this);var w=this;u.polluteGlobalNamespace(),this.id="a"+p.string(6),S=d.addQuery(S,"c="+decodeURIComponent(u.WPrefix+"."+this.id)),y("using htmlfile",x.htmlfileEnabled);var _=x.htmlfileEnabled?u.createHtmlfile:u.createIframe;o[u.WPrefix][this.id]={start:function(){w.iframeObj.loaded()},message:function(A){w.emit("message",A)},stop:function(){w._cleanup(),w._close("network")}},this.iframeObj=_(S,function(){w._cleanup(),w._close("permanent")})}c(x,h),x.prototype.abort=function(){this._cleanup(),this._close("user")},x.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete o[u.WPrefix][this.id]},x.prototype._close=function(S){this.emit("close",null,S),this.removeAllListeners()},x.htmlfileEnabled=!1;var v=["Active"].concat("Object").join("X");if(v in o)try{x.htmlfileEnabled=!!new o[v]("htmlfile")}catch{}x.enabled=x.htmlfileEnabled||u.iframeEnabled,s.exports=x}).call(this)}).call(this,typeof ne<"u"?ne:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,debug:void 0,events:3,inherits:54}],31:[function(e,s,a){(function(o){(function(){var c=e("../../utils/iframe"),u=e("../../utils/random"),d=e("../../utils/browser"),h=e("../../utils/url"),p=e("inherits"),y=e("events").EventEmitter,x=function(){};function v(S){var w=this;y.call(this),c.polluteGlobalNamespace(),this.id="a"+u.string(6);var _=h.addQuery(S,"c="+encodeURIComponent(c.WPrefix+"."+this.id));o[c.WPrefix][this.id]=this._callback.bind(this),this._createScript(_),this.timeoutId=setTimeout(function(){w._abort(new Error("JSONP script loaded abnormally (timeout)"))},v.timeout)}p(v,y),v.prototype.abort=function(){if(o[c.WPrefix][this.id]){var S=new Error("JSONP user aborted read");S.code=1e3,this._abort(S)}},v.timeout=35e3,v.scriptErrorTimeout=1e3,v.prototype._callback=function(S){this._cleanup(),this.aborting||(S&&this.emit("message",S),this.emit("close",null,"network"),this.removeAllListeners())},v.prototype._abort=function(S){this._cleanup(),this.aborting=!0,this.emit("close",S.code,S.message),this.removeAllListeners()},v.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var S=this.script;S.parentNode.removeChild(S),S.onreadystatechange=S.onerror=S.onload=S.onclick=null,this.script=null}delete o[c.WPrefix][this.id]},v.prototype._scriptError=function(){var S=this;this.errorTimer||(this.errorTimer=setTimeout(function(){S.loadedOkay||S._abort(new Error("JSONP script loaded abnormally (onerror)"))},v.scriptErrorTimeout))},v.prototype._createScript=function(S){var w,_=this,A=this.script=o.document.createElement("script");if(A.id="a"+u.string(8),A.src=S,A.type="text/javascript",A.charset="UTF-8",A.onerror=this._scriptError.bind(this),A.onload=function(){_._abort(new Error("JSONP script loaded abnormally (onload)"))},A.onreadystatechange=function(){if(x("onreadystatechange",A.readyState),/loaded|closed/.test(A.readyState)){if(A&&A.htmlFor&&A.onclick){_.loadedOkay=!0;try{A.onclick()}catch{}}A&&_._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},A.async===void 0&&o.document.attachEvent)if(d.isOpera())(w=this.script2=o.document.createElement("script")).text="try{var a = document.getElementById('"+A.id+"'); if(a)a.onerror();}catch(x){};",A.async=w.async=!1;else{try{A.htmlFor=A.id,A.event="onclick"}catch{}A.async=!0}A.async!==void 0&&(A.async=!0);var R=o.document.getElementsByTagName("head")[0];R.insertBefore(A,R.firstChild),w&&R.insertBefore(w,R.firstChild)},s.exports=v}).call(this)}).call(this,typeof ne<"u"?ne:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../utils/browser":44,"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,debug:void 0,events:3,inherits:54}],32:[function(e,s,a){var o=e("inherits"),c=e("events").EventEmitter;function u(d,h){c.call(this);var p=this;this.bufferPosition=0,this.xo=new h("POST",d,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(y,x){p._chunkHandler(y,x),p.xo=null;var v=y===200?"network":"permanent";p.emit("close",null,v),p._cleanup()})}o(u,c),u.prototype._chunkHandler=function(d,h){if(d===200&&h)for(var p=-1;;this.bufferPosition+=p+1){var y=h.slice(this.bufferPosition);if((p=y.indexOf(`
`))===-1)break;var x=y.slice(0,p);x&&this.emit("message",x)}},u.prototype._cleanup=function(){this.removeAllListeners()},u.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()},s.exports=u},{debug:void 0,events:3,inherits:54}],33:[function(e,s,a){(function(o){(function(){var c,u,d=e("../../utils/random"),h=e("../../utils/url"),p=function(){};s.exports=function(y,x,v){c||((c=o.document.createElement("form")).style.display="none",c.style.position="absolute",c.method="POST",c.enctype="application/x-www-form-urlencoded",c.acceptCharset="UTF-8",(u=o.document.createElement("textarea")).name="d",c.appendChild(u),o.document.body.appendChild(c));var S="a"+d.string(8);c.target=S,c.action=h.addQuery(h.addPath(y,"/jsonp_send"),"i="+S);var w=(function(A){try{return o.document.createElement('<iframe name="'+A+'">')}catch{var R=o.document.createElement("iframe");return R.name=A,R}})(S);w.id=S,w.style.display="none",c.appendChild(w);try{u.value=x}catch{}c.submit();function _(A){w.onerror&&(w.onreadystatechange=w.onerror=w.onload=null,setTimeout(function(){w.parentNode.removeChild(w),w=null},500),u.value="",v(A))}return w.onerror=function(){_()},w.onload=function(){_()},w.onreadystatechange=function(A){p("onreadystatechange",S,w.readyState),w.readyState==="complete"&&_()},function(){_(new Error("Aborted"))}}}).call(this)}).call(this,typeof ne<"u"?ne:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../utils/random":50,"../../utils/url":52,debug:void 0}],34:[function(e,s,a){(function(o){(function(){var c=e("events").EventEmitter,u=e("inherits"),d=e("../../utils/event"),h=e("../../utils/browser"),p=e("../../utils/url"),y=function(){};function x(v,S,w){var _=this;c.call(this),setTimeout(function(){_._start(v,S,w)},0)}u(x,c),x.prototype._start=function(v,S,w){var _=this,A=new o.XDomainRequest;S=p.addQuery(S,"t="+ +new Date),A.onerror=function(){_._error()},A.ontimeout=function(){_._error()},A.onprogress=function(){y("progress",A.responseText),_.emit("chunk",200,A.responseText)},A.onload=function(){_.emit("finish",200,A.responseText),_._cleanup(!1)},this.xdr=A,this.unloadRef=d.unloadAdd(function(){_._cleanup(!0)});try{this.xdr.open(v,S),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(w)}catch{this._error()}},x.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},x.prototype._cleanup=function(v){if(this.xdr){if(this.removeAllListeners(),d.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,v)try{this.xdr.abort()}catch{}this.unloadRef=this.xdr=null}},x.prototype.close=function(){this._cleanup(!0)},x.enabled=!(!o.XDomainRequest||!h.hasDomain()),s.exports=x}).call(this)}).call(this,typeof ne<"u"?ne:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../utils/browser":44,"../../utils/event":46,"../../utils/url":52,debug:void 0,events:3,inherits:54}],35:[function(e,s,a){var o=e("inherits"),c=e("../driver/xhr");function u(d,h,p,y){c.call(this,d,h,p,y)}o(u,c),u.enabled=c.enabled&&c.supportsCORS,s.exports=u},{"../driver/xhr":17,inherits:54}],36:[function(e,s,a){var o=e("events").EventEmitter;function c(){var u=this;o.call(this),this.to=setTimeout(function(){u.emit("finish",200,"{}")},c.timeout)}e("inherits")(c,o),c.prototype.close=function(){clearTimeout(this.to)},c.timeout=2e3,s.exports=c},{events:3,inherits:54}],37:[function(e,s,a){var o=e("inherits"),c=e("../driver/xhr");function u(d,h,p){c.call(this,d,h,p,{noCredentials:!0})}o(u,c),u.enabled=c.enabled,s.exports=u},{"../driver/xhr":17,inherits:54}],38:[function(e,s,a){var o=e("../utils/event"),c=e("../utils/url"),u=e("inherits"),d=e("events").EventEmitter,h=e("./driver/websocket"),p=function(){};function y(x,v,S){if(!y.enabled())throw new Error("Transport created when disabled");d.call(this);var w=this,_=c.addPath(x,"/websocket");_=_.slice(0,5)==="https"?"wss"+_.slice(5):"ws"+_.slice(4),this.url=_,this.ws=new h(this.url,[],S),this.ws.onmessage=function(A){p("message event",A.data),w.emit("message",A.data)},this.unloadRef=o.unloadAdd(function(){w.ws.close()}),this.ws.onclose=function(A){p("close event",A.code,A.reason),w.emit("close",A.code,A.reason),w._cleanup()},this.ws.onerror=function(A){w.emit("close",1006,"WebSocket connection broken"),w._cleanup()}}u(y,d),y.prototype.send=function(x){var v="["+x+"]";this.ws.send(v)},y.prototype.close=function(){var x=this.ws;this._cleanup(),x&&x.close()},y.prototype._cleanup=function(){var x=this.ws;x&&(x.onmessage=x.onclose=x.onerror=null),o.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},y.enabled=function(){return!!h},y.transportName="websocket",y.roundTrips=2,s.exports=y},{"../utils/event":46,"../utils/url":52,"./driver/websocket":19,debug:void 0,events:3,inherits:54}],39:[function(e,s,a){var o=e("inherits"),c=e("./lib/ajax-based"),u=e("./xdr-streaming"),d=e("./receiver/xhr"),h=e("./sender/xdr");function p(y){if(!h.enabled)throw new Error("Transport created when disabled");c.call(this,y,"/xhr",d,h)}o(p,c),p.enabled=u.enabled,p.transportName="xdr-polling",p.roundTrips=2,s.exports=p},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,"./xdr-streaming":40,inherits:54}],40:[function(e,s,a){var o=e("inherits"),c=e("./lib/ajax-based"),u=e("./receiver/xhr"),d=e("./sender/xdr");function h(p){if(!d.enabled)throw new Error("Transport created when disabled");c.call(this,p,"/xhr_streaming",u,d)}o(h,c),h.enabled=function(p){return!p.cookie_needed&&!p.nullOrigin&&d.enabled&&p.sameScheme},h.transportName="xdr-streaming",h.roundTrips=2,s.exports=h},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,inherits:54}],41:[function(e,s,a){var o=e("inherits"),c=e("./lib/ajax-based"),u=e("./receiver/xhr"),d=e("./sender/xhr-cors"),h=e("./sender/xhr-local");function p(y){if(!h.enabled&&!d.enabled)throw new Error("Transport created when disabled");c.call(this,y,"/xhr",u,d)}o(p,c),p.enabled=function(y){return!y.nullOrigin&&(!(!h.enabled||!y.sameOrigin)||d.enabled)},p.transportName="xhr-polling",p.roundTrips=2,s.exports=p},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,inherits:54}],42:[function(e,s,a){(function(o){(function(){var c=e("inherits"),u=e("./lib/ajax-based"),d=e("./receiver/xhr"),h=e("./sender/xhr-cors"),p=e("./sender/xhr-local"),y=e("../utils/browser");function x(v){if(!p.enabled&&!h.enabled)throw new Error("Transport created when disabled");u.call(this,v,"/xhr_streaming",d,h)}c(x,u),x.enabled=function(v){return!v.nullOrigin&&!y.isOpera()&&h.enabled},x.transportName="xhr-streaming",x.roundTrips=2,x.needBody=!!o.document,s.exports=x}).call(this)}).call(this,typeof ne<"u"?ne:typeof self<"u"?self:typeof window<"u"?window:{})},{"../utils/browser":44,"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,inherits:54}],43:[function(e,s,a){(function(o){(function(){o.crypto&&o.crypto.getRandomValues?s.exports.randomBytes=function(c){var u=new Uint8Array(c);return o.crypto.getRandomValues(u),u}:s.exports.randomBytes=function(c){for(var u=new Array(c),d=0;d<c;d++)u[d]=Math.floor(256*Math.random());return u}}).call(this)}).call(this,typeof ne<"u"?ne:typeof self<"u"?self:typeof window<"u"?window:{})},{}],44:[function(e,s,a){(function(o){(function(){s.exports={isOpera:function(){return o.navigator&&/opera/i.test(o.navigator.userAgent)},isKonqueror:function(){return o.navigator&&/konqueror/i.test(o.navigator.userAgent)},hasDomain:function(){if(!o.document)return!0;try{return!!o.document.domain}catch{return!1}}}}).call(this)}).call(this,typeof ne<"u"?ne:typeof self<"u"?self:typeof window<"u"?window:{})},{}],45:[function(e,s,a){var o,c=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g;s.exports={quote:function(u){var d=JSON.stringify(u);return c.lastIndex=0,c.test(d)?(o=o||(function(h){var p,y={},x=[];for(p=0;p<65536;p++)x.push(String.fromCharCode(p));return h.lastIndex=0,x.join("").replace(h,function(v){return y[v]="\\u"+("0000"+v.charCodeAt(0).toString(16)).slice(-4),""}),h.lastIndex=0,y})(c),d.replace(c,function(h){return o[h]})):d}}},{}],46:[function(e,s,a){(function(o){(function(){var c=e("./random"),u={},d=!1,h=o.chrome&&o.chrome.app&&o.chrome.app.runtime;s.exports={attachEvent:function(p,y){o.addEventListener!==void 0?o.addEventListener(p,y,!1):o.document&&o.attachEvent&&(o.document.attachEvent("on"+p,y),o.attachEvent("on"+p,y))},detachEvent:function(p,y){o.addEventListener!==void 0?o.removeEventListener(p,y,!1):o.document&&o.detachEvent&&(o.document.detachEvent("on"+p,y),o.detachEvent("on"+p,y))},unloadAdd:function(p){if(h)return null;var y=c.string(8);return u[y]=p,d&&setTimeout(this.triggerUnloadCallbacks,0),y},unloadDel:function(p){p in u&&delete u[p]},triggerUnloadCallbacks:function(){for(var p in u)u[p](),delete u[p]}},h||s.exports.attachEvent("unload",function(){d||(d=!0,s.exports.triggerUnloadCallbacks())})}).call(this)}).call(this,typeof ne<"u"?ne:typeof self<"u"?self:typeof window<"u"?window:{})},{"./random":50}],47:[function(e,s,a){(function(o){(function(){var c=e("./event"),u=e("./browser"),d=function(){};s.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){s.exports.WPrefix in o||(o[s.exports.WPrefix]={})},postMessage:function(h,p){o.parent!==o?o.parent.postMessage(JSON.stringify({windowId:s.exports.currentWindowId,type:h,data:p||""}),"*"):d()},createIframe:function(h,p){function y(){clearTimeout(S);try{_.onload=null}catch{}_.onerror=null}function x(){_&&(y(),setTimeout(function(){_&&_.parentNode.removeChild(_),_=null},0),c.unloadDel(w))}function v(A){_&&(x(),p(A))}var S,w,_=o.document.createElement("iframe");return _.src=h,_.style.display="none",_.style.position="absolute",_.onerror=function(){v("onerror")},_.onload=function(){clearTimeout(S),S=setTimeout(function(){v("onload timeout")},2e3)},o.document.body.appendChild(_),S=setTimeout(function(){v("timeout")},15e3),w=c.unloadAdd(x),{post:function(A,R){setTimeout(function(){try{_&&_.contentWindow&&_.contentWindow.postMessage(A,R)}catch{}},0)},cleanup:x,loaded:y}},createHtmlfile:function(h,p){function y(){clearTimeout(S),_.onerror=null}function x(){R&&(y(),c.unloadDel(w),_.parentNode.removeChild(_),_=R=null,CollectGarbage())}function v(j){R&&(x(),p(j))}var S,w,_,A=["Active"].concat("Object").join("X"),R=new o[A]("htmlfile");R.open(),R.write('<html><script>document.domain="'+o.document.domain+'";<\/script></html>'),R.close(),R.parentWindow[s.exports.WPrefix]=o[s.exports.WPrefix];var C=R.createElement("div");return R.body.appendChild(C),_=R.createElement("iframe"),C.appendChild(_),_.src=h,_.onerror=function(){v("onerror")},S=setTimeout(function(){v("timeout")},15e3),w=c.unloadAdd(x),{post:function(j,k){try{setTimeout(function(){_&&_.contentWindow&&_.contentWindow.postMessage(j,k)},0)}catch{}},cleanup:x,loaded:y}}},s.exports.iframeEnabled=!1,o.document&&(s.exports.iframeEnabled=(typeof o.postMessage=="function"||typeof o.postMessage=="object")&&!u.isKonqueror())}).call(this)}).call(this,typeof ne<"u"?ne:typeof self<"u"?self:typeof window<"u"?window:{})},{"./browser":44,"./event":46,debug:void 0}],48:[function(e,s,a){(function(o){(function(){var c={};["log","debug","warn"].forEach(function(u){var d;try{d=o.console&&o.console[u]&&o.console[u].apply}catch{}c[u]=d?function(){return o.console[u].apply(o.console,arguments)}:u==="log"?function(){}:c.log}),s.exports=c}).call(this)}).call(this,typeof ne<"u"?ne:typeof self<"u"?self:typeof window<"u"?window:{})},{}],49:[function(e,s,a){s.exports={isObject:function(o){var c=typeof o;return c=="function"||c=="object"&&!!o},extend:function(o){if(!this.isObject(o))return o;for(var c,u,d=1,h=arguments.length;d<h;d++)for(u in c=arguments[d])Object.prototype.hasOwnProperty.call(c,u)&&(o[u]=c[u]);return o}}},{}],50:[function(e,s,a){var o=e("crypto"),c="abcdefghijklmnopqrstuvwxyz012345";s.exports={string:function(u){for(var d=c.length,h=o.randomBytes(u),p=[],y=0;y<u;y++)p.push(c.substr(h[y]%d,1));return p.join("")},number:function(u){return Math.floor(Math.random()*u)},numberString:function(u){var d=(""+(u-1)).length;return(new Array(d+1).join("0")+this.number(u)).slice(-d)}}},{crypto:43}],51:[function(e,s,a){var o=function(){};s.exports=function(c){return{filterToEnabled:function(u,d){var h={main:[],facade:[]};return u?typeof u=="string"&&(u=[u]):u=[],c.forEach(function(p){p&&(p.transportName!=="websocket"||d.websocket!==!1?u.length&&u.indexOf(p.transportName)===-1?o("not in whitelist",p.transportName):p.enabled(d)?(o("enabled",p.transportName),h.main.push(p),p.facadeTransport&&h.facade.push(p.facadeTransport)):o("disabled",p.transportName):o())}),h}}}},{debug:void 0}],52:[function(e,s,a){var o=e("url-parse");s.exports={getOrigin:function(c){if(!c)return null;var u=new o(c);if(u.protocol==="file:")return null;var d=u.port;return d=d||(u.protocol==="https:"?"443":"80"),u.protocol+"//"+u.hostname+":"+d},isOriginEqual:function(c,u){var d=this.getOrigin(c)===this.getOrigin(u);return d},isSchemeEqual:function(c,u){return c.split(":")[0]===u.split(":")[0]},addPath:function(c,u){var d=c.split("?");return d[0]+u+(d[1]?"?"+d[1]:"")},addQuery:function(c,u){return c+(c.indexOf("?")===-1?"?"+u:"&"+u)},isLoopbackAddr:function(c){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(c)||/^\[::1\]$/.test(c)}}},{debug:void 0,"url-parse":57}],53:[function(e,s,a){s.exports="1.6.1"},{}],54:[function(e,s,a){typeof Object.create=="function"?s.exports=function(o,c){c&&(o.super_=c,o.prototype=Object.create(c.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}))}:s.exports=function(o,c){if(c){let u=function(){};o.super_=c,u.prototype=c.prototype,o.prototype=new u,o.prototype.constructor=o}}},{}],55:[function(e,s,a){var o=Object.prototype.hasOwnProperty;function c(u){try{return decodeURIComponent(u.replace(/\+/g," "))}catch{return null}}a.stringify=function(u,d){d=d||"";var h,p,y=[];for(p in typeof d!="string"&&(d="?"),u)if(o.call(u,p)){if((h=u[p])||h!=null&&!isNaN(h)||(h=""),p=encodeURIComponent(p),h=encodeURIComponent(h),p===null||h===null)continue;y.push(p+"="+h)}return y.length?d+y.join("&"):""},a.parse=function(u){for(var d,h=/([^=?&]+)=?([^&]*)/g,p={};d=h.exec(u);){var y=c(d[1]),x=c(d[2]);y===null||x===null||y in p||(p[y]=x)}return p}},{}],56:[function(e,s,a){s.exports=function(o,c){if(c=c.split(":")[0],!(o=+o))return!1;switch(c){case"http":case"ws":return o!==80;case"https":case"wss":return o!==443;case"ftp":return o!==21;case"gopher":return o!==70;case"file":return!1}return o!==0}},{}],57:[function(e,s,a){(function(o){(function(){var c=e("requires-port"),u=e("querystringify"),d=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,h=/[\n\r\t]/g,p=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,y=/:\d+$/,x=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,v=/^[a-zA-Z]:/;function S(k){return(k||"").toString().replace(d,"")}var w=[["#","hash"],["?","query"],function(k,I){return R(I.protocol)?k.replace(/\\/g,"/"):k},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],_={hash:1,query:1};function A(k){var I,N=(typeof window<"u"?window:o!==void 0?o:typeof self<"u"?self:{}).location||{},L={},H=typeof(k=k||N);if(k.protocol==="blob:")L=new j(unescape(k.pathname),{});else if(H=="string")for(I in L=new j(k,{}),_)delete L[I];else if(H=="object"){for(I in k)I in _||(L[I]=k[I]);L.slashes===void 0&&(L.slashes=p.test(k.href))}return L}function R(k){return k==="file:"||k==="ftp:"||k==="http:"||k==="https:"||k==="ws:"||k==="wss:"}function C(k,I){k=(k=S(k)).replace(h,""),I=I||{};var N,L=x.exec(k),H=L[1]?L[1].toLowerCase():"",B=!!L[2],U=!!L[3],z=0;return B?z=U?(N=L[2]+L[3]+L[4],L[2].length+L[3].length):(N=L[2]+L[4],L[2].length):U?(N=L[3]+L[4],z=L[3].length):N=L[4],H==="file:"?2<=z&&(N=N.slice(2)):R(H)?N=L[4]:H?B&&(N=N.slice(2)):2<=z&&R(I.protocol)&&(N=L[4]),{protocol:H,slashes:B||R(H),slashesCount:z,rest:N}}function j(k,I,N){if(k=(k=S(k)).replace(h,""),!(this instanceof j))return new j(k,I,N);var L,H,B,U,z,G,V=w.slice(),J=typeof I,O=this,$=0;for(J!="object"&&J!="string"&&(N=I,I=null),N&&typeof N!="function"&&(N=u.parse),L=!(H=C(k||"",I=A(I))).protocol&&!H.slashes,O.slashes=H.slashes||L&&I.slashes,O.protocol=H.protocol||I.protocol||"",k=H.rest,(H.protocol==="file:"&&(H.slashesCount!==2||v.test(k))||!H.slashes&&(H.protocol||H.slashesCount<2||!R(O.protocol)))&&(V[3]=[/(.*)/,"pathname"]);$<V.length;$++)typeof(U=V[$])!="function"?(B=U[0],G=U[1],B!=B?O[G]=k:typeof B=="string"?~(z=B==="@"?k.lastIndexOf(B):k.indexOf(B))&&(k=typeof U[2]=="number"?(O[G]=k.slice(0,z),k.slice(z+U[2])):(O[G]=k.slice(z),k.slice(0,z))):(z=B.exec(k))&&(O[G]=z[1],k=k.slice(0,z.index)),O[G]=O[G]||L&&U[3]&&I[G]||"",U[4]&&(O[G]=O[G].toLowerCase())):k=U(k,O);N&&(O.query=N(O.query)),L&&I.slashes&&O.pathname.charAt(0)!=="/"&&(O.pathname!==""||I.pathname!=="")&&(O.pathname=(function(rt,it){if(rt==="")return it;for(var ft=(it||"/").split("/").slice(0,-1).concat(rt.split("/")),D=ft.length,Y=ft[D-1],at=!1,lt=0;D--;)ft[D]==="."?ft.splice(D,1):ft[D]===".."?(ft.splice(D,1),lt++):lt&&(D===0&&(at=!0),ft.splice(D,1),lt--);return at&&ft.unshift(""),Y!=="."&&Y!==".."||ft.push(""),ft.join("/")})(O.pathname,I.pathname)),O.pathname.charAt(0)!=="/"&&R(O.protocol)&&(O.pathname="/"+O.pathname),c(O.port,O.protocol)||(O.host=O.hostname,O.port=""),O.username=O.password="",O.auth&&(~(z=O.auth.indexOf(":"))?(O.username=O.auth.slice(0,z),O.username=encodeURIComponent(decodeURIComponent(O.username)),O.password=O.auth.slice(z+1),O.password=encodeURIComponent(decodeURIComponent(O.password))):O.username=encodeURIComponent(decodeURIComponent(O.auth)),O.auth=O.password?O.username+":"+O.password:O.username),O.origin=O.protocol!=="file:"&&R(O.protocol)&&O.host?O.protocol+"//"+O.host:"null",O.href=O.toString()}j.prototype={set:function(k,I,N){var L=this;switch(k){case"query":typeof I=="string"&&I.length&&(I=(N||u.parse)(I)),L[k]=I;break;case"port":L[k]=I,c(I,L.protocol)?I&&(L.host=L.hostname+":"+I):(L.host=L.hostname,L[k]="");break;case"hostname":L[k]=I,L.port&&(I+=":"+L.port),L.host=I;break;case"host":L[k]=I,y.test(I)?(I=I.split(":"),L.port=I.pop(),L.hostname=I.join(":")):(L.hostname=I,L.port="");break;case"protocol":L.protocol=I.toLowerCase(),L.slashes=!N;break;case"pathname":case"hash":if(I){var H=k==="pathname"?"/":"#";L[k]=I.charAt(0)!==H?H+I:I}else L[k]=I;break;case"username":case"password":L[k]=encodeURIComponent(I);break;case"auth":var B=I.indexOf(":");~B?(L.username=I.slice(0,B),L.username=encodeURIComponent(decodeURIComponent(L.username)),L.password=I.slice(B+1),L.password=encodeURIComponent(decodeURIComponent(L.password))):L.username=encodeURIComponent(decodeURIComponent(I))}for(var U=0;U<w.length;U++){var z=w[U];z[4]&&(L[z[1]]=L[z[1]].toLowerCase())}return L.auth=L.password?L.username+":"+L.password:L.username,L.origin=L.protocol!=="file:"&&R(L.protocol)&&L.host?L.protocol+"//"+L.host:"null",L.href=L.toString(),L},toString:function(k){k&&typeof k=="function"||(k=u.stringify);var I,N=this,L=N.host,H=N.protocol;H&&H.charAt(H.length-1)!==":"&&(H+=":");var B=H+(N.protocol&&N.slashes||R(N.protocol)?"//":"");return N.username?(B+=N.username,N.password&&(B+=":"+N.password),B+="@"):N.password?(B+=":"+N.password,B+="@"):N.protocol!=="file:"&&R(N.protocol)&&!L&&N.pathname!=="/"&&(B+="@"),(L[L.length-1]===":"||y.test(N.hostname)&&!N.port)&&(L+=":"),B+=L+N.pathname,(I=typeof N.query=="object"?k(N.query):N.query)&&(B+=I.charAt(0)!=="?"?"?"+I:I),N.hash&&(B+=N.hash),B}},j.extractProtocol=C,j.location=A,j.trimLeft=S,j.qs=u,s.exports=j}).call(this)}).call(this,typeof ne<"u"?ne:typeof self<"u"?self:typeof window<"u"?window:{})},{querystringify:55,"requires-port":56}]},{},[1])(1)})})(Fp)),Fp.exports}var $4=G4();const n0=Kf($4);let Jn=null,jr=!1,Pf=null,pa=null,kn={room:null,score:null,rtc:null,leave:null,roomClosed:null},fc=null,Ge={onConnect:null,onDisconnect:null,onRoomMessage:null,onScoreMessage:null,onRtcMessage:null,onLeaveMessage:null,onRoomClosed:null,onStompError:null,onWsClose:null};const og=[];function V4(...n){}function co(n){try{return JSON.parse(n)}catch{return null}}function W4(){if(!Jn||!jr||!og.length)return;const n=og.splice(0);for(const t of n)try{Jn.publish({destination:t.destination,body:t.body,headers:t.headers??{}})}catch{}V4("flushPublishes",n.length)}function Y4(){try{kn.room?.unsubscribe?.()}catch{}try{kn.score?.unsubscribe?.()}catch{}try{kn.rtc?.unsubscribe?.()}catch{}try{kn.leave?.unsubscribe?.()}catch{}try{kn.roomClosed?.unsubscribe?.()}catch{}kn.roomClosed=null,kn.room=null,kn.score=null,kn.rtc=null,kn.leave=null,Pf=null}function k2(n){!Jn||!jr||n&&(Pf===n&&kn.room||(Y4(),Pf=n,kn.room=Jn.subscribe(`/topic/multi/room/${n}`,t=>{const e=co(t.body);if(e?.type==="ROOM_STATE"&&(fc=e),Ge.onRoomMessage?.(e,t),e?.type==="ROOM_STATE"&&e?.started===!0){const s=e.players||[],a=e.myUserId,o=s.find(c=>Number(c.userId)!==Number(a))||null;window.dispatchEvent(new CustomEvent("multi:start",{detail:{type:"MULTI_START",roomId:n,rival:o}}))}}),kn.score=Jn.subscribe(`/topic/multi/room/${n}/score`,t=>{const e=co(t.body);Ge.onScoreMessage?.(e,t)}),kn.rtc=Jn.subscribe(`/topic/multi/room/${n}/rtc`,t=>{const e=co(t.body);Ge.onRtcMessage?.(e,t)}),kn.leave=Jn.subscribe(`/topic/multi/room/${n}/leave`,t=>{const e=co(t.body);Ge.onLeaveMessage?.(e,t)}),kn.roomClosed=Jn.subscribe(`/topic/multi/room/${n}/closed`,t=>{const e=co(t.body);Ge.onRoomClosed?.(e,t)})))}function X4(){!Jn||!jr||kn.roomClosed||(kn.roomClosed=Jn.subscribe("/user/queue/room-closed",n=>{const t=co(n.body);Ge.onRoomClosed?.(t,n)}))}function q4(){Jn||(Jn=new e0({webSocketFactory:()=>new n0("http://localhost:8080/ws",null,{withCredentials:!0}),reconnectDelay:3e3,debug:()=>{},onConnect:()=>{jr=!0,Pf=null,X4(),pa&&k2(pa),Wi("/app/multi/enter",{roomId:pa}),W4(),Ge.onConnect?.()},onDisconnect:()=>{jr=!1,Ge.onDisconnect?.()},onStompError:n=>{Ge.onStompError?.(n)},onWebSocketClose:n=>{jr=!1,Ge.onWsClose?.(n)}}),Jn.activate())}function O2(n={}){Ge={onConnect:n.onConnect??null,onDisconnect:n.onDisconnect??null,onRoomMessage:n.onRoomMessage??null,onScoreMessage:n.onScoreMessage??null,onRtcMessage:n.onRtcMessage??null,onLeaveMessage:n.onLeaveMessage??null,onRoomClosed:n.onRoomClosed??null,onStompError:n.onStompError??null,onWsClose:n.onWsClose??null},fc&&Ge.onRoomMessage&&Ge.onRoomMessage(fc,null)}function i0({roomId:n,onConnect:t,onDisconnect:e,onRoomMessage:s,onScoreMessage:a,onRtcMessage:o,onLeaveMessage:c,onRoomClosed:u,onStompError:d,onWsClose:h,replaceHandlers:p=!1}={}){p?O2({onConnect:t,onDisconnect:e,onRoomMessage:s,onScoreMessage:a,onRtcMessage:o,onLeaveMessage:c,onRoomClosed:u,onStompError:d,onWsClose:h}):(Ge={onConnect:t??Ge.onConnect,onDisconnect:e??Ge.onDisconnect,onRoomMessage:s??Ge.onRoomMessage,onScoreMessage:a??Ge.onScoreMessage,onRtcMessage:o??Ge.onRtcMessage,onLeaveMessage:c??Ge.onLeaveMessage,onRoomClosed:u??Ge.onRoomClosed,onStompError:d??Ge.onStompError,onWsClose:h??Ge.onWsClose},fc&&Ge.onRoomMessage&&Ge.onRoomMessage(fc,null)),pa=n??pa,q4(),jr&&pa&&k2(pa)}function Wi(n,t,e={}){const s=JSON.stringify(t??{}),a={destination:n,body:s,headers:e};return!Jn||!jr?(og.push(a),!1):(Jn.publish({destination:n,body:s,headers:e}),!0)}function K4(n,t){return Wi("/app/multi/ready",{roomId:n},t)}function Q4(n,t){return Wi("/app/multi/start",{roomId:n},t)}function E1(n){console.log("[LEAVE TX]",n),Wi("/app/multi/leave",{roomId:n})}function J4(n,t,e){return Wi("/app/multi/rtc/offer",{roomId:n,offer:t},e)}function A1(n,t,e){return Wi("/app/multi/rtc/answer",{roomId:n,answer:t},e)}function Z4(n,t,e){return Wi("/app/multi/rtc/candidate",{roomId:n,candidate:t},e)}const tO=n=>{const t=Number(n);if(!t||t<=0)return"--:--";const e=Math.floor(t/60),s=Math.floor(t%60);return`${e}:${String(s).padStart(2,"0")}`},kl=72,T1=50;function eO({auth:n,showPwChangeModal:t,onClosePwChangeModal:e}){const s=en(),a=E.useRef(!1),o=E.useRef(!1),c=E.useRef(null),[u,d]=E.useState(0),h=E.useRef(null),[p,y]=E.useState([]),[x,v]=E.useState(!1),[S,w]=E.useState(!1),[_,A]=E.useState(!1),[R,C]=E.useState(!1),[j,k]=E.useState("PUBLIC"),[I,N]=E.useState(""),[L,H]=E.useState(null),[B,U]=E.useState(!1),[z,G]=E.useState([]),[V,J]=E.useState(!1),[O,$]=E.useState(""),[rt,it]=E.useState(""),[ft,D]=E.useState(!1),[Y,at]=E.useState(""),[lt,nt]=E.useState(null),[xt,Rt]=E.useState(!1),[yt,Mt]=E.useState("");E.useEffect(()=>{sessionStorage.getItem("roomClosed")==="true"&&(sessionStorage.removeItem("roomClosed"),alert(" ."))},[]),E.useEffect(()=>{let X=!0;return(async()=>{try{const vt=await _o();if(!X)return;vt.data?.ok?(H(Number(vt.data.loginUserId)),U(vt.data.loginUserRole==="BLOCK")):(H(null),U(!1))}catch{if(!X)return;H(null)}finally{X&&Rt(!0)}})(),()=>{X=!1}},[]);const Et=E.useCallback(async()=>{try{const X=await fetch("/api/multi/rooms",{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(!X.ok)throw new Error(`    (${X.status})`);const vt=await X.json();G(Array.isArray(vt.rooms)?vt.rooms:[])}catch(X){console.error(X),G([])}},[]);E.useEffect(()=>{j==="MULTI"&&Et()},[j,Et]),E.useEffect(()=>{let X=!0;return(async()=>{try{const vt=await _o();if(!X)return;vt.data?.ok?(H(Number(vt.data.loginUserId)),U(vt.data.loginUserRole==="BLOCK")):(H(null),U(!1))}catch{if(!X)return;H(null)}})(),()=>{X=!1}},[]),E.useEffect(()=>{localStorage.getItem("bgmUnlocked")==="true"&&!go()&&No()},[]),E.useEffect(()=>{const X=setInterval(()=>{const vt=dd();vt&&(h.current=vt,clearInterval(X))},50);return()=>clearInterval(X)},[]);const[Tt,qt]=E.useState(!0),[Gt,Vt]=E.useState(""),[Ct,Wn]=E.useState([]);E.useEffect(()=>{let X=!0;return(async()=>{try{qt(!0),Vt("");const Zt=await fetch(j==="MY"?"/api/songs/my":"/api/songs",{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(!Zt.ok)throw new Error(`    (${Zt.status})`);const Ht=await Zt.json(),fe=(Array.isArray(Ht)?Ht:[]).map(ut=>{const _t=ut.length??ut.duration??ut.lengthSec;return{id:ut.id,title:(ut.title??"(no title)").replace(/\.mp3$/i,""),artist:ut.artist??"unknown",cover:ut.coverPath?`/api/songs/${ut.id}/cover`:null,previewUrl:`/api/songs/${ut.id}/preview`,lengthSec:Number.isFinite(Number(_t))?Number(_t):null,diff:ut.diff?String(ut.diff).toUpperCase():"NORMAL",uploaderUserId:ut.uploaderUserId!=null?Number(ut.uploaderUserId):ut.userId!=null?Number(ut.userId):ut.ownerId!=null?Number(ut.ownerId):null,nickname:ut.nickname??"unknown",profileImg:ut.profileImg?encodeURI(ut.profileImg):null}});if(!X)return;const mt={EASY:1,NORMAL:2,HARD:3,HELL:4};fe.sort((ut,_t)=>(mt[ut.diff]??99)-(mt[_t.diff]??99)),Wn(fe),d(0)}catch(kt){if(!X)return;Vt(kt?.message??"   ")}finally{X&&qt(!1)}})(),()=>{X=!1}},[j]),E.useEffect(()=>{if(!Ct.length){d(0);return}d(X=>Math.max(0,Math.min(Ct.length-1,X)))},[Ct.length]);const Yn=E.useCallback(X=>{if(j==="MULTI"||j==="LINK"||(X.preventDefault(),a.current)||!Ct.length)return;const vt=Math.sign(X.deltaY);if(vt===0)return;const kt=Math.max(0,Math.min(Ct.length-1,u+vt));kt!==u&&(a.current=!0,d(kt),p1(),setTimeout(()=>{a.current=!1},T1))},[Ct.length,u,j]);E.useEffect(()=>{const X=c.current;if(!X)return;const vt=kt=>{kt.preventDefault(),Yn(kt)};return X.addEventListener("wheel",vt,{passive:!1}),()=>{X.removeEventListener("wheel",vt)}},[Yn]),E.useEffect(()=>{const X=vt=>{if(!(j==="MULTI"||j==="LINK")&&!o.current){if(vt.key==="ArrowDown"||vt.key==="ArrowUp"){if(vt.preventDefault(),!Ct.length)return;const kt=vt.key==="ArrowDown"?1:-1,Zt=Math.max(0,Math.min(Ct.length-1,u+kt));if(Zt===u)return;o.current=!0,d(Zt),p1(),setTimeout(()=>{o.current=!1},T1)}if(vt.key==="Enter"){vt.preventDefault();const kt=Ct[u];if(!kt?.id)return;yo(),Gi(),s(`/game/play?songId=${kt.id}&diff=${String(kt.diff).toLowerCase()}`)}}};return window.addEventListener("keydown",X),()=>window.removeEventListener("keydown",X)},[u,Ct,s,j]),E.useEffect(()=>{if(j==="MULTI"||j==="LINK"){Gi();return}if(!Ct||Ct.length===0){Gi();return}const X=Ct[u];if(!X?.id||!X.previewUrl){Gi();return}const vt=X.previewUrl;return o4(vt,{durationSec:8}),()=>Gi()},[u,Ct,j]);const he=["EASY","NORMAL","HARD","HELL"],Jt=[];he.forEach(X=>{const vt=Ct.filter(kt=>(kt.diff??"NORMAL")===X);vt.length&&(Jt.push({id:`__HEADER__${X}`,type:"header",diff:X}),vt.forEach(kt=>{Jt.push({...kt,type:"song",songIndex:Ct.findIndex(Zt=>Zt.id===kt.id)})}))});const Te=(()=>{const X=Ct[u]?.id;return X?Jt.findIndex(vt=>vt.id===X):0})(),Xt=Ct[u],Ue=!!n?.user||L!=null,mn=j==="LINK",Ye=j==="MULTI",Xe=z.filter(X=>X.roomName?.toLowerCase().includes(O.toLowerCase())),ln=L!=null&&Xt?.uploaderUserId!=null&&Number(L)===Number(Xt.uploaderUserId),Ze=X=>{const vt=String(X?.mainReason??"").trim(),kt=String(X?.subReason??"").trim();return`${vt}:${kt}`},cn=async X=>{const vt={targetType:"SONG",targetId:Number(Xt?.id),reasonCode:Ze(X),description:String(X?.description??"")},kt=await fetch("/api/report",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(vt)}),Zt=await kt.json().catch(()=>null);if(kt.status===401)throw new Error(Zt?.message||"  .");if(kt.status===409)throw Zt?.code==="ALREADY_REPORTED"?new Error("  ."):new Error(Zt?.message||"  .");if(!kt.ok)throw new Error(Zt?.message||`  (${kt.status})`);if(Zt?.ok===!1)throw new Error(Zt?.message??" ");return Zt},Xn=async(X,vt)=>{try{const kt=await Sw(X,vt);kt.data?.ok?(alert(kt.data.message||" ."),e()):alert(kt.data?.message||"  .")}catch(kt){console.error(kt),alert(kt?.response?.data?.message||"    .")}};return E.useEffect(()=>{!Ue&&j!=="PUBLIC"&&k("PUBLIC")},[Ue,j]),E.useEffect(()=>{const X=Xt;if(!X?.id||!X?.diff){y([]);return}let vt=!0;return(async()=>{try{v(!0);const Zt=String(X.diff).toUpperCase(),Ht=await fetch(`/api/ranking/${X.id}/${Zt}`,{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(!Ht.ok)throw new Error(`   (${Ht.status})`);const Ie=await Ht.json();if(!vt)return;y(Array.isArray(Ie.ranking)?Ie.ranking:[])}catch{if(!vt)return;y([])}finally{if(!vt)return;v(!1)}})(),()=>{vt=!1}},[Xt?.id,Xt?.diff,Xt]),E.useEffect(()=>{const X=sessionStorage.getItem("lastRoomId");X&&i0({roomId:X,onRoomClosed:vt=>{console.log("[ROOM_CLOSED RX - MAIN]",vt),sessionStorage.setItem("roomClosed","true"),s("/main",{replace:!0})},replaceHandlers:!0})},[]),m.jsxs("div",{style:{position:"absolute",inset:0},children:[m.jsx(Ys,{}),m.jsxs("main",{style:{position:"absolute",top:64,left:20,right:0,bottom:0},children:[m.jsxs("div",{style:{position:"absolute",left:"5%",top:"50%",transform:"translateY(-50%)",width:"57%",height:"62%",display:"flex"},children:[m.jsxs("div",{style:{width:"400px",display:"flex",flexDirection:"column",gap:"14px",flexShrink:0,marginLeft:"40px"},children:[m.jsx("div",{style:{aspectRatio:"1 / 1",borderRadius:"12px",background:Xt?.cover?`url(${Xt.cover}) center / cover no-repeat`:"linear-gradient(135deg, #2a2f3a, #1c2028)",boxShadow:"0 20px 40px rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",color:"#9aa6b2",fontSize:"12px"},children:!Xt?.cover&&(Tt?"LOADING...":"ALBUM")}),m.jsx("div",{style:{padding:"14px",borderRadius:"10px",background:"rgba(20,22,28,0.65)",boxShadow:"0 10px 24px rgba(0,0,0,0.35)",display:"flex",flexDirection:"column",gap:"10px"},children:Xt?m.jsxs(m.Fragment,{children:[m.jsx("div",{style:{fontSize:"18px",fontWeight:600,color:"#ffffff"},children:Xt.title}),m.jsx("div",{style:{fontSize:"13px",color:"#9aa6b2"},children:Xt.artist}),m.jsx("div",{style:{height:"1px",background:"rgba(255,255,255,0.1)",margin:"4px 0"}}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",fontSize:"12px",color:"#9aa6b2",flexWrap:"wrap"},children:[m.jsxs("span",{children:[m.jsx("strong",{style:{color:"#cfd8e3"},children:"LENGTH"})," "," ",tO(Xt.lengthSec)]}),m.jsx("span",{style:{opacity:.4},children:""}),m.jsx("span",{style:{display:"flex",gap:"6px"},children:["EASY","NORMAL","HARD","HELL"].map(X=>{const vt=String(Xt?.difficulty??Xt?.diff??"NORMAL").toUpperCase(),kt=X===vt;return m.jsx("span",{style:{padding:"2px 6px",borderRadius:"4px",background:"rgba(255,255,255,0.08)",fontSize:"11px",opacity:kt?1:.4,fontWeight:kt?600:400},children:X},X)})}),j==="PUBLIC"&&m.jsxs("div",{style:{position:"relative",marginLeft:"auto"},children:[m.jsx("button",{style:{...nO,cursor:!L||B||ln?"not-allowed":"pointer",opacity:!L||B||ln?.35:1},onClick:X=>{if(X.stopPropagation(),!L||B||ln){(!L||B)&&alert("  .");return}A(vt=>!vt)},children:""}),_&&!ln&&m.jsxs("div",{style:iO,children:[m.jsx("div",{style:{...C1,color:"#cfd8e3",cursor:"pointer"},onClick:X=>{X.stopPropagation(),A(!1),w(!0)},children:" "}),m.jsx("div",{style:{...C1,color:"#ff6b6b",cursor:"pointer"},onClick:X=>{X.stopPropagation(),A(!1),C(!0)},children:""})]})]}),m.jsx(t0,{open:S,user:{id:Xt?.uploaderUserId,nickname:Xt?.nickname,profileImg:Xt?.profileImg??null},onClose:()=>w(!1)}),m.jsx(R2,{open:R,type:"CONTENT",targetId:Xt?.id,targetName:Xt?.title,onClose:()=>C(!1),onSubmit:async X=>{try{const vt=String(X?.description??"").trim();await cn(X),C(!1),alert("  .")}catch(vt){alert(vt?.message??"    .")}}})]})]}):m.jsx("div",{style:{opacity:.6},children:" "})})]}),m.jsxs("section",{ref:j==="PUBLIC"||j==="MY"?c:null,style:{position:"relative",flex:1,overflow:"hidden",perspective:"900px",left:80,display:"flex",flexDirection:"column"},children:[m.jsxs("div",{style:{display:"flex",gap:15,justifyContent:"flex-end",flexWrap:"wrap",paddingBottom:10,marginLeft:"auto",zIndex:5,position:"relative"},children:[[["PUBLIC"," "],...Ue?[["MY"," "]]:[]].map(([X,vt])=>{const kt=j===X,Zt=X==="MY"&&B;return m.jsx("div",{onClick:()=>{if(Zt){alert("  .");return}k(X)},style:{padding:"6px 14px",borderRadius:12,cursor:"pointer",fontSize:13,opacity:Zt?.35:1,color:kt?"#0ff":"#cfd8e3",border:kt?"2px solid rgba(90,234,255,0.9)":"2px solid rgba(90,234,255,0.3)",background:kt?"linear-gradient(180deg, rgba(90,234,255,0.25), rgba(10,20,30,0.9))":"linear-gradient(180deg, #0e141b, #0a0f15)"},children:vt},X)}),xt&&m.jsx("div",{onClick:()=>{if(!Ue||B){alert("  .");return}Gi(),k("LINK")},style:{padding:"6px 14px",borderRadius:12,cursor:!Ue||B?"not-allowed":"pointer",opacity:!Ue||B?.35:1,fontSize:13,color:mn?"#0ff":"#cfd8e3",border:mn?"2px solid rgba(90,234,255,0.9)":"2px solid rgba(90,234,255,0.3)",background:mn?"linear-gradient(180deg, rgba(90,234,255,0.25), rgba(10,20,30,0.9))":"linear-gradient(180deg, #0e141b, #0a0f15)"},children:" "}),xt&&m.jsx("div",{onClick:()=>{if(!Ue||B){alert("  .");return}Gi(),k("MULTI")},style:{padding:"6px 14px",borderRadius:12,cursor:!Ue||B?"not-allowed":"pointer",opacity:!Ue||B?.35:1,fontSize:13,color:Ye?"#0ff":"#cfd8e3",border:Ye?"2px solid rgba(90,234,255,0.9)":"2px solid rgba(90,234,255,0.3)",background:Ye?"linear-gradient(180deg, rgba(90,234,255,0.25), rgba(10,20,30,0.9))":"linear-gradient(180deg, #0e141b, #0a0f15)"},children:" "})]}),m.jsxs("div",{style:{position:"relative",flex:1,overflow:"hidden",display:"flex",flexDirection:"column"},children:[j==="MULTI"&&m.jsxs("div",{style:{padding:12,borderRadius:12,background:"rgba(0,0,0,0.25)",display:"flex",alignItems:"center",gap:8,flexShrink:0},children:[m.jsx("input",{value:O,onChange:X=>$(X.target.value),placeholder:" ",style:{flex:1,maxWidth:260,padding:"8px 12px",borderRadius:10,background:"rgba(0,0,0,0.35)",border:"1px solid rgba(90,234,255,0.35)",color:"#cfd8e3",fontSize:13,outline:"none"}}),m.jsxs("div",{style:{display:"flex",gap:8,marginLeft:"auto"},children:[m.jsx("button",{style:lg,onClick:Et,children:""}),m.jsx("button",{style:R1,onClick:()=>{nt(null),J(!0)},children:" "})]})]}),j==="LINK"&&m.jsx("div",{style:{height:"70%",display:"flex",alignItems:"center",justifyContent:"center"},children:m.jsxs("div",{style:{width:420,padding:24,borderRadius:14,background:"rgba(10,20,30,0.85)",border:"2px solid rgba(90,234,255,0.45)",boxShadow:"0 0 20px rgba(90,234,255,0.4)",display:"flex",flexDirection:"column",gap:14},children:[m.jsx("h3",{style:{color:"#5aeaff",textAlign:"center"},children:"  "}),m.jsx("input",{value:I,onChange:X=>N(X.target.value),placeholder:"  ",style:{padding:"10px 12px",borderRadius:8,background:"#0b1118",border:"1px solid rgba(90,234,255,0.4)",color:"#e6f7ff",fontSize:14}}),m.jsx("button",{onClick:async()=>{try{let X=I.trim();try{X=new URL(I).searchParams.get("token")||X}catch{}if(X=decodeURIComponent(X),!X){alert(" .");return}let vt="/game/play";try{const Ht=new URL(I);vt=Ht.pathname,X=Ht.searchParams.get("token")||X}catch{}const kt=await fetch(`/api/songs/info?token=${X}`,{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(!kt.ok){kt.status===404?alert("  ."):alert(`     (${kt.status})`);return}if(!(await kt.json())?.id){alert("  .");return}s(`/game/play?token=${X}`)}catch(X){console.error(X),alert("   .")}},style:{padding:"10px",borderRadius:8,border:"1px solid rgba(90,234,255,0.6)",background:"rgba(90,234,255,0.15)",color:"#5aeaff",cursor:"pointer"},children:""})]})}),(j==="PUBLIC"||j==="MY")&&m.jsxs(m.Fragment,{children:[!Tt&&Ct.length===0&&m.jsx("div",{style:{position:"absolute",top:"50%",left:0,right:0,transform:"translateY(-50%)",textAlign:"center",fontSize:16,opacity:.45},children:j==="MY"?"   .":"    ."}),Ct.length>0&&m.jsxs("div",{style:{position:"absolute",left:0,right:0,top:"42%",height:0,pointerEvents:"none",zIndex:3},children:[m.jsx("div",{style:{height:"1px",background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.6), transparent)"}}),m.jsx("div",{style:{position:"absolute",top:-25,left:"50%",transform:"translateX(-50%)",fontSize:16,fontWeight:700,letterSpacing:"0.14em",color:"#cfd8e3",opacity:.85,whiteSpace:"nowrap"},children:Xt?.diff})]}),Ct.length>0&&m.jsx("div",{style:{position:"absolute",left:0,right:0,top:"50%",height:kl,transform:"translateY(-50%)",pointerEvents:"none",background:"rgba(255,255,255,0.06)",borderRadius:"6px",zIndex:2}}),m.jsx("div",{style:{position:"absolute",top:"50%",left:0,right:0,transform:`translateY(calc(-${Te*kl}px - ${kl/2}px))`,transition:"transform 0.25s ease-out"},children:Jt.map((X,vt)=>{const kt=vt-Te,Zt=Math.abs(kt),Ht=Math.max(.8,1-Zt*.12),Ie=-Zt*60,fe=kt*10,mt=Math.max(.35,1-Zt*.25);if(X.type==="header"){const _t=Math.abs(vt-Te)<=1;return m.jsx("div",{style:{height:kl,paddingLeft:12,display:"flex",alignItems:"center",fontSize:15,fontWeight:700,letterSpacing:"0.12em",color:"#cfd8e3",opacity:_t?0:.7,pointerEvents:"none"},children:!_t&&X.diff},X.id)}return m.jsxs("div",{onClick:()=>{d(X.songIndex),yo(),Gi(),s(`/game/play?songId=${X.id}&diff=${String(X.diff??"NORMAL").toLowerCase()}`)},style:{height:kl,boxSizing:"border-box",padding:"12px",display:"flex",flexDirection:"column",justifyContent:"center",borderBottom:"1px solid rgba(255,255,255,0.1)",transform:`translateY(${fe}px) translateZ(${Ie}px) scale(${Ht})`,opacity:mt,transition:"transform 0.2s, opacity 0.2s",cursor:"pointer",background:X.songIndex===u?"rgba(255,255,255,0.08)":"transparent"},children:[m.jsx("div",{style:{fontSize:X.songIndex===u?"25px":"18px",color:X.songIndex===u?"#ffffff":"#b8c4d6",fontWeight:X.songIndex===u?600:400},children:X.title}),m.jsx("div",{style:{fontSize:"14px",color:X.songIndex===u?"#cfd8e3":"#7f8fa6"},children:X.artist})]},X.id)})})]}),j==="MULTI"&&m.jsxs("div",{style:{padding:12,borderRadius:12,background:"rgba(0,0,0,0.25)",flex:1,minHeight:0,overflowY:"auto"},children:[z.length===0&&m.jsx("div",{style:{textAlign:"center",opacity:.5,padding:20},children:"  ."}),Xe.map(X=>{const vt=(X.players?.length??0)>=X.maxPlayers;return m.jsxs("div",{onClick:()=>{if(vt){alert("  .");return}yo();const kt=X.roomId??X.id;s(`/multi/room/${kt}`)},style:{position:"relative",padding:14,borderRadius:12,border:"1px solid rgba(255,255,255,0.15)",marginBottom:10,cursor:vt?"not-allowed":"pointer",opacity:vt?.55:1,filter:vt?"grayscale(100%)":"none",pointerEvents:"auto",background:vt?"rgba(50,50,50,0.55)":"linear-gradient(180deg, rgba(255,255,255,0.06), rgba(0,0,0,0.25))",display:"flex",flexDirection:"column",gap:6},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[m.jsx("div",{style:{fontWeight:700,fontSize:20,letterSpacing:"0.02em"},children:X.roomName}),vt&&m.jsx("span",{style:{color:"#ff6b6b",fontSize:13},children:" FULL"})]}),m.jsxs("div",{style:{fontSize:18,opacity:.7},children:[" ",X.songTitle]}),m.jsx("div",{style:{display:"flex",gap:10,fontSize:15,opacity:.75},children:m.jsxs("span",{children:[X.players?.length??0," / ",X.maxPlayers," "]})}),X.hostUserId&&m.jsxs("div",{style:{position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",fontSize:11,padding:"4px 8px",borderRadius:8,background:"rgba(90,234,255,0.18)",border:"1px solid rgba(90,234,255,0.6)",color:"#5aeaff",fontWeight:700,letterSpacing:"0.1em",pointerEvents:"none"},children:["PING ",typeof X.hostPing=="number"?`${X.hostPing}ms`:"--"]})]},X.roomId??X.id)})]})]})]})]}),Ue&&m.jsx("div",{style:{position:"absolute",right:"8%",top:"50%",transform:"translateY(-50%)",width:"22%",height:"70%",borderRadius:"14px",background:"rgba(120,0,0,0.35)",boxShadow:"0 0 0 2px rgba(255,80,80,0.6), 0 20px 40px rgba(0,0,0,0.45)",padding:"12px"},children:m.jsx(g4,{ranking:p,loading:x})})]}),m.jsx(Ea,{size:"game",preset:"menu",analyserRef:h,active:!0,style:{position:"fixed",left:0,right:0,bottom:0,height:"28vh",zIndex:-2,pointerEvents:"none"}}),m.jsx("div",{style:{position:"fixed",left:0,right:0,bottom:0,height:"100vh",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",background:"rgba(255,255,255,0.03)",zIndex:-1,pointerEvents:"none"}}),t&&m.jsx(I4,{onClose:e,onSubmit:Xn}),V&&m.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},onClick:()=>{J(!1),it(""),D(!1),at(""),nt(null)},children:m.jsxs("div",{onClick:X=>X.stopPropagation(),style:{width:420,padding:20,borderRadius:14,background:"rgba(10,20,30,0.95)",border:"2px solid rgba(90,234,255,0.6)",boxShadow:"0 0 24px rgba(90,234,255,0.4)",display:"flex",flexDirection:"column",gap:12},children:[m.jsx("h3",{style:{color:"#5aeaff",textAlign:"center"},children:" "}),m.jsx("input",{value:rt,onChange:X=>it(X.target.value),placeholder:" ",style:sO}),m.jsx("div",{style:{fontSize:13,marginBottom:6,color:"#5aeaff"},children:"   (PUBLIC)"}),m.jsx("div",{style:{maxHeight:160,overflowY:"auto",border:"1px solid rgba(90,234,255,0.4)",borderRadius:8},children:Ct.map(X=>{const vt=lt===X.id;return m.jsx("div",{onClick:()=>nt(X.id),style:{padding:"6px 10px",fontSize:13,cursor:"pointer",background:vt?"rgba(90,234,255,0.25)":"transparent"},children:X.title},X.id)})}),m.jsxs("div",{style:{display:"flex",gap:10,marginTop:10,justifyContent:"center"},children:[m.jsx("button",{style:lg,onClick:()=>J(!1),children:""}),m.jsx("button",{style:R1,onClick:async()=>{if(!rt.trim()){alert("   .");return}if(!lt){alert("  .");return}const X={roomName:rt.trim(),songId:lt,isPrivate:ft,password:ft?Y:null};try{const vt=await fetch("/api/multi/rooms",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(X)});if(!vt.ok)throw new Error(`   (${vt.status})`);const kt=await vt.json();if(!kt.roomId)throw new Error(" ID  .");J(!1),it(""),D(!1),at(""),nt(null),s(`/multi/room/${kt.roomId}`)}catch(vt){console.error(vt),alert(vt?.message||"    .")}},children:""})]})]})})]})}const nO={height:22,padding:"0 8px",borderRadius:6,border:"1px solid rgba(255,255,255,0.25)",background:"transparent",color:"#aaa",cursor:"pointer"},iO={position:"absolute",right:0,top:"100%",marginTop:6,background:"#0b0b0b",border:"1px solid #333",borderRadius:8,overflow:"hidden",zIndex:20},C1={padding:"8px 14px",fontSize:13,cursor:"pointer",whiteSpace:"nowrap"},lg={padding:"6px 12px",borderRadius:8,background:"rgba(255,255,255,0.06)",border:"1px solid rgba(90,234,255,0.35)",color:"#cfd8e3",fontSize:12,cursor:"pointer"},R1={...lg,background:"rgba(90,234,255,0.18)",border:"1px solid rgba(90,234,255,0.8)",color:"#5aeaff",fontWeight:600},sO={padding:"10px 12px",borderRadius:8,background:"#0b1118",border:"1px solid rgba(90,234,255,0.4)",color:"#e6f7ff",fontSize:14};function rO({onLogout:n}){const{state:t}=li(),[e,s]=E.useState(!1);return E.useEffect(()=>{No()},[]),E.useEffect(()=>{(async()=>{try{const a=await _o();a.data?.ok&&a.data.needPwChange===!0&&s(!0)}catch{}})()},[]),m.jsxs(m.Fragment,{children:[m.jsx(Ys,{onLogout:n})," ",m.jsx(Xs,{}),m.jsx(eO,{showPwChangeModal:e,onClosePwChangeModal:()=>s(!1)})]})}const gt={LANES:7,LANE_WIDTHS:[160,160,160,240,160,160,160],JUDGEMENT:{PERFECT:30,GREAT:50,GOOD:100,MISS:200},SCORE:{PERFECT:300,GREAT:150,GOOD:100,MISS:0,LONG_BONUS:100},CANVAS:{WIDTH:1200,HEIGHT:1120,NOTE_HEIGHT:40,HIT_LINE_Y:1e3},PERSPECTIVE:{SCALE_MIN:.2,SCALE_MAX:1},SPEED:1.2,DIFFICULTY:{EASY:{SPEED:1},NORMAL:{SPEED:1.2},HARD:{SPEED:1.6},HELL:{SPEED:2}}},aO=["A","S","D","SPACE","J","K","L"];function oO({currentTime:n,pressedKeys:t=new Set,onCanvasReady:e}){const s=E.useRef(null),a=E.useRef(t),o=E.useRef(n);return E.useEffect(()=>{const c=s.current;c&&e?.(c)},[]),E.useEffect(()=>{a.current=t},[t]),E.useEffect(()=>{o.current=n},[n]),E.useEffect(()=>{const u=s.current.getContext("2d");let d;function h(){u.clearRect(0,0,gt.CANVAS.WIDTH,gt.CANVAS.HEIGHT),cO(u),uO(u),lO(u,a.current),d=requestAnimationFrame(h)}return h(),()=>cancelAnimationFrame(d)},[]),m.jsx("canvas",{ref:s,width:gt.CANVAS.WIDTH,height:gt.CANVAS.HEIGHT,style:{display:"block",position:"absolute",top:0,left:0,zIndex:1}})}function lO(n,t){const{CANVAS:e,LANES:s}=gt,a=e.HIT_LINE_Y+35,o=20;for(let c=0;c<s;c++){const u=t.has(c),d=Hf(c),h=I2(c),p=Ii(d,a),y=Ii(h,a),v=(y.x-p.x)*.98,S=(y.x-p.x-v)/2,w=50;if(u){n.fillStyle="rgba(180, 240, 255, 0.9)",n.shadowColor="rgba(180, 240, 255, 0.9)",n.shadowBlur=18;const A=a+o,R=A-w,C=d+S,j=h-S,k=Ii(C,R),I=Ii(j,R),N=Ii(C,A),L=Ii(j,A);n.beginPath(),n.moveTo(k.x,R),n.lineTo(I.x,R),n.lineTo(L.x,A),n.lineTo(N.x,A),n.closePath(),n.fill(),n.shadowBlur=0}const _=aO[c]??"";n.font="bold 25px Arial",n.textAlign="center",n.textBaseline="middle",u?(n.fillStyle="#c02f5fee",n.shadowColor="rgba(255, 255, 255, 0.9)",n.shadowBlur=10):(n.fillStyle="rgba(255,255,255,0.45)",n.shadowBlur=0),n.fillText(_,p.x+S+v/2,a-1),n.shadowBlur=0}}function N2(n){const{SCALE_MIN:t,SCALE_MAX:e}=gt.PERSPECTIVE,{HEIGHT:s}=gt.CANVAS;return t+n/s*(e-t)}function Ii(n,t){const{WIDTH:e}=gt.CANVAS,s=e/2,a=N2(t);return{x:s+(n-s)*a,scale:a}}function cO(n){const{LANES:t,CANVAS:e}=gt;for(let s=0;s<t;s++){const a=Hf(s),o=I2(s),c=Ii(a,0),u=Ii(o,0),d=Ii(a,e.HEIGHT),h=Ii(o,e.HEIGHT);n.fillStyle=s%2===0?"rgba(82,82,82,0.3)":"rgba(179, 0, 0, 0.18)",n.beginPath(),n.moveTo(c.x,0),n.lineTo(u.x,0),n.lineTo(h.x,e.HEIGHT),n.lineTo(d.x,e.HEIGHT),n.closePath(),n.fill()}for(let s=0;s<=t;s++){const a=s===t?gt.CANVAS.WIDTH:Hf(s),o=Ii(a,0),c=Ii(a,e.HEIGHT);s===0||s===t?(n.strokeStyle="#ff3355",n.shadowColor="rgba(255, 80, 140, 1)",n.shadowBlur=22,n.lineWidth=3):(n.strokeStyle="#7df9ff",n.shadowColor="rgba(125, 249, 255, 0.9)",n.shadowBlur=14,n.lineWidth=2),n.beginPath(),n.moveTo(o.x,0),n.lineTo(c.x,e.HEIGHT),n.stroke(),n.shadowBlur=0}}function uO(n){const{CANVAS:t}=gt,e=t.WIDTH/2,s=t.HIT_LINE_Y,a=N2(s);n.strokeStyle="#ff4c20ff",n.lineWidth=3,n.beginPath(),n.moveTo(e+-e*a,s),n.lineTo(e+e*a,s),n.stroke()}function Hf(n){return gt.LANE_WIDTHS.slice(0,n).reduce((t,e)=>t+e,0)}function I2(n){return Hf(n)+gt.LANE_WIDTHS[n]}const fO="modulepreload",dO=function(n){return"/"+n},j1={},Ff=function(t,e,s){let a=Promise.resolve();if(e&&e.length>0){let d=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");a=d(e.map(h=>{if(h=dO(h),h in j1)return;j1[h]=!0;const p=h.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${y}`))return;const x=document.createElement("link");if(x.rel=p?"stylesheet":fO,p||(x.as="script"),x.crossOrigin="",x.href=h,u&&x.setAttribute("nonce",u),document.head.appendChild(x),p)return new Promise((v,S)=>{x.addEventListener("load",v),x.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return a.then(c=>{for(const u of c||[])u.status==="rejected"&&o(u.reason);return t().catch(o)})};var Pt=(n=>(n.Application="application",n.WebGLPipes="webgl-pipes",n.WebGLPipesAdaptor="webgl-pipes-adaptor",n.WebGLSystem="webgl-system",n.WebGPUPipes="webgpu-pipes",n.WebGPUPipesAdaptor="webgpu-pipes-adaptor",n.WebGPUSystem="webgpu-system",n.CanvasSystem="canvas-system",n.CanvasPipesAdaptor="canvas-pipes-adaptor",n.CanvasPipes="canvas-pipes",n.Asset="asset",n.LoadParser="load-parser",n.ResolveParser="resolve-parser",n.CacheParser="cache-parser",n.DetectionParser="detection-parser",n.MaskEffect="mask-effect",n.BlendMode="blend-mode",n.TextureSource="texture-source",n.Environment="environment",n.ShapeBuilder="shape-builder",n.Batcher="batcher",n))(Pt||{});const cg=n=>{if(typeof n=="function"||typeof n=="object"&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");n={...typeof n.extension!="object"?{type:n.extension}:n.extension,ref:n}}if(typeof n=="object")n={...n};else throw new Error("Invalid extension type");return typeof n.type=="string"&&(n.type=[n.type]),n},Ju=(n,t)=>cg(n).priority??t,Pn={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...n){return n.map(cg).forEach(t=>{t.type.forEach(e=>this._removeHandlers[e]?.(t))}),this},add(...n){return n.map(cg).forEach(t=>{t.type.forEach(e=>{const s=this._addHandlers,a=this._queue;s[e]?s[e]?.(t):(a[e]=a[e]||[],a[e]?.push(t))})}),this},handle(n,t,e){const s=this._addHandlers,a=this._removeHandlers;if(s[n]||a[n])throw new Error(`Extension type ${n} already has a handler`);s[n]=t,a[n]=e;const o=this._queue;return o[n]&&(o[n]?.forEach(c=>t(c)),delete o[n]),this},handleByMap(n,t){return this.handle(n,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByNamedList(n,t,e=-1){return this.handle(n,s=>{t.findIndex(o=>o.name===s.name)>=0||(t.push({name:s.name,value:s.ref}),t.sort((o,c)=>Ju(c.value,e)-Ju(o.value,e)))},s=>{const a=t.findIndex(o=>o.name===s.name);a!==-1&&t.splice(a,1)})},handleByList(n,t,e=-1){return this.handle(n,s=>{t.includes(s.ref)||(t.push(s.ref),t.sort((a,o)=>Ju(o,e)-Ju(a,e)))},s=>{const a=t.indexOf(s.ref);a!==-1&&t.splice(a,1)})},mixin(n,...t){for(const e of t)Object.defineProperties(n.prototype,Object.getOwnPropertyDescriptors(e))}},hO={extension:{type:Pt.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Ff(()=>import("./browserAll-CtwlOLW4.js"),__vite__mapDeps([0,1,2]))}},pO={extension:{type:Pt.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await Ff(()=>import("./webworkerAll-DRs3jmjf.js"),__vite__mapDeps([1,2]))}};class zn{constructor(t,e,s){this._x=e||0,this._y=s||0,this._observer=t}clone(t){return new zn(t??this._observer,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this._observer._onUpdate(this)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this._observer._onUpdate(this)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._observer._onUpdate(this))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._observer._onUpdate(this))}}var Gp={exports:{}},M1;function mO(){return M1||(M1=1,(function(n){var t=Object.prototype.hasOwnProperty,e="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(e=!1));function a(d,h,p){this.fn=d,this.context=h,this.once=p||!1}function o(d,h,p,y,x){if(typeof p!="function")throw new TypeError("The listener must be a function");var v=new a(p,y||d,x),S=e?e+h:h;return d._events[S]?d._events[S].fn?d._events[S]=[d._events[S],v]:d._events[S].push(v):(d._events[S]=v,d._eventsCount++),d}function c(d,h){--d._eventsCount===0?d._events=new s:delete d._events[h]}function u(){this._events=new s,this._eventsCount=0}u.prototype.eventNames=function(){var h=[],p,y;if(this._eventsCount===0)return h;for(y in p=this._events)t.call(p,y)&&h.push(e?y.slice(1):y);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},u.prototype.listeners=function(h){var p=e?e+h:h,y=this._events[p];if(!y)return[];if(y.fn)return[y.fn];for(var x=0,v=y.length,S=new Array(v);x<v;x++)S[x]=y[x].fn;return S},u.prototype.listenerCount=function(h){var p=e?e+h:h,y=this._events[p];return y?y.fn?1:y.length:0},u.prototype.emit=function(h,p,y,x,v,S){var w=e?e+h:h;if(!this._events[w])return!1;var _=this._events[w],A=arguments.length,R,C;if(_.fn){switch(_.once&&this.removeListener(h,_.fn,void 0,!0),A){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,p),!0;case 3:return _.fn.call(_.context,p,y),!0;case 4:return _.fn.call(_.context,p,y,x),!0;case 5:return _.fn.call(_.context,p,y,x,v),!0;case 6:return _.fn.call(_.context,p,y,x,v,S),!0}for(C=1,R=new Array(A-1);C<A;C++)R[C-1]=arguments[C];_.fn.apply(_.context,R)}else{var j=_.length,k;for(C=0;C<j;C++)switch(_[C].once&&this.removeListener(h,_[C].fn,void 0,!0),A){case 1:_[C].fn.call(_[C].context);break;case 2:_[C].fn.call(_[C].context,p);break;case 3:_[C].fn.call(_[C].context,p,y);break;case 4:_[C].fn.call(_[C].context,p,y,x);break;default:if(!R)for(k=1,R=new Array(A-1);k<A;k++)R[k-1]=arguments[k];_[C].fn.apply(_[C].context,R)}}return!0},u.prototype.on=function(h,p,y){return o(this,h,p,y,!1)},u.prototype.once=function(h,p,y){return o(this,h,p,y,!0)},u.prototype.removeListener=function(h,p,y,x){var v=e?e+h:h;if(!this._events[v])return this;if(!p)return c(this,v),this;var S=this._events[v];if(S.fn)S.fn===p&&(!x||S.once)&&(!y||S.context===y)&&c(this,v);else{for(var w=0,_=[],A=S.length;w<A;w++)(S[w].fn!==p||x&&!S[w].once||y&&S[w].context!==y)&&_.push(S[w]);_.length?this._events[v]=_.length===1?_[0]:_:c(this,v)}return this},u.prototype.removeAllListeners=function(h){var p;return h?(p=e?e+h:h,this._events[p]&&c(this,p)):(this._events=new s,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=e,u.EventEmitter=u,n.exports=u})(Gp)),Gp.exports}var gO=mO();const Ki=Kf(gO),yO=Math.PI*2,bO=180/Math.PI,xO=Math.PI/180;class Vn{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new Vn(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return $p.x=0,$p.y=0,$p}}const $p=new Vn;class ue{constructor(t=1,e=0,s=0,a=1,o=0,c=0){this.array=null,this.a=t,this.b=e,this.c=s,this.d=a,this.tx=o,this.ty=c}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,s,a,o,c){return this.a=t,this.b=e,this.c=s,this.d=a,this.tx=o,this.ty=c,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const s=e||this.array;return t?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(t,e){e=e||new Vn;const s=t.x,a=t.y;return e.x=this.a*s+this.c*a+this.tx,e.y=this.b*s+this.d*a+this.ty,e}applyInverse(t,e){e=e||new Vn;const s=this.a,a=this.b,o=this.c,c=this.d,u=this.tx,d=this.ty,h=1/(s*c+o*-a),p=t.x,y=t.y;return e.x=c*h*p+-o*h*y+(d*o-u*c)*h,e.y=s*h*y+-a*h*p+(-d*s+u*a)*h,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),s=Math.sin(t),a=this.a,o=this.c,c=this.tx;return this.a=a*e-this.b*s,this.b=a*s+this.b*e,this.c=o*e-this.d*s,this.d=o*s+this.d*e,this.tx=c*e-this.ty*s,this.ty=c*s+this.ty*e,this}append(t){const e=this.a,s=this.b,a=this.c,o=this.d;return this.a=t.a*e+t.b*a,this.b=t.a*s+t.b*o,this.c=t.c*e+t.d*a,this.d=t.c*s+t.d*o,this.tx=t.tx*e+t.ty*a+this.tx,this.ty=t.tx*s+t.ty*o+this.ty,this}appendFrom(t,e){const s=t.a,a=t.b,o=t.c,c=t.d,u=t.tx,d=t.ty,h=e.a,p=e.b,y=e.c,x=e.d;return this.a=s*h+a*y,this.b=s*p+a*x,this.c=o*h+c*y,this.d=o*p+c*x,this.tx=u*h+d*y+e.tx,this.ty=u*p+d*x+e.ty,this}setTransform(t,e,s,a,o,c,u,d,h){return this.a=Math.cos(u+h)*o,this.b=Math.sin(u+h)*o,this.c=-Math.sin(u-d)*c,this.d=Math.cos(u-d)*c,this.tx=t-(s*this.a+a*this.c),this.ty=e-(s*this.b+a*this.d),this}prepend(t){const e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const s=this.a,a=this.c;this.a=s*t.a+this.b*t.c,this.b=s*t.b+this.b*t.d,this.c=a*t.a+this.d*t.c,this.d=a*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,s=this.b,a=this.c,o=this.d,c=t.pivot,u=-Math.atan2(-a,o),d=Math.atan2(s,e),h=Math.abs(u+d);return h<1e-5||Math.abs(yO-h)<1e-5?(t.rotation=d,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=u,t.skew.y=d),t.scale.x=Math.sqrt(e*e+s*s),t.scale.y=Math.sqrt(a*a+o*o),t.position.x=this.tx+(c.x*e+c.y*a),t.position.y=this.ty+(c.x*s+c.y*o),t}invert(){const t=this.a,e=this.b,s=this.c,a=this.d,o=this.tx,c=t*a-e*s;return this.a=a/c,this.b=-e/c,this.c=-s/c,this.d=t/c,this.tx=(s*this.ty-a*o)/c,this.ty=-(t*this.ty-e*o)/c,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new ue;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}equals(t){return t.a===this.a&&t.b===this.b&&t.c===this.c&&t.d===this.d&&t.tx===this.tx&&t.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return SO.identity()}static get shared(){return vO.identity()}}const vO=new ue,SO=new ue,aa=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],oa=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],la=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],ca=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],ug=[],L2=[],Zu=Math.sign;function _O(){for(let n=0;n<16;n++){const t=[];ug.push(t);for(let e=0;e<16;e++){const s=Zu(aa[n]*aa[e]+la[n]*oa[e]),a=Zu(oa[n]*aa[e]+ca[n]*oa[e]),o=Zu(aa[n]*la[e]+la[n]*ca[e]),c=Zu(oa[n]*la[e]+ca[n]*ca[e]);for(let u=0;u<16;u++)if(aa[u]===s&&oa[u]===a&&la[u]===o&&ca[u]===c){t.push(u);break}}}for(let n=0;n<16;n++){const t=new ue;t.set(aa[n],oa[n],la[n],ca[n],0,0),L2.push(t)}}_O();const Oe={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:n=>aa[n],uY:n=>oa[n],vX:n=>la[n],vY:n=>ca[n],inv:n=>n&8?n&15:-n&7,add:(n,t)=>ug[n][t],sub:(n,t)=>ug[n][Oe.inv(t)],rotate180:n=>n^4,isVertical:n=>(n&3)===2,byDirection:(n,t)=>Math.abs(n)*2<=Math.abs(t)?t>=0?Oe.S:Oe.N:Math.abs(t)*2<=Math.abs(n)?n>0?Oe.E:Oe.W:t>0?n>0?Oe.SE:Oe.SW:n>0?Oe.NE:Oe.NW,matrixAppendRotationInv:(n,t,e=0,s=0)=>{const a=L2[Oe.inv(t)];a.tx=e,a.ty=s,n.append(a)},transformRectCoords:(n,t,e,s)=>{const{x:a,y:o,width:c,height:u}=n,{x:d,y:h,width:p,height:y}=t;return e===Oe.E?(s.set(a+d,o+h,c,u),s):e===Oe.S?s.set(p-o-u+d,a+h,u,c):e===Oe.W?s.set(p-a-c+d,y-o-u+h,c,u):e===Oe.N?s.set(o+d,y-a-c+h,u,c):s.set(a+d,o+h,c,u)}},tf=[new Vn,new Vn,new Vn,new Vn];class Je{constructor(t=0,e=0,s=0,a=0){this.type="rectangle",this.x=Number(t),this.y=Number(e),this.width=Number(s),this.height=Number(a)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new Je(0,0,0,0)}clone(){return new Je(this.x,this.y,this.width,this.height)}copyFromBounds(t){return this.x=t.minX,this.y=t.minY,this.width=t.maxX-t.minX,this.height=t.maxY-t.minY,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}strokeContains(t,e,s,a=.5){const{width:o,height:c}=this;if(o<=0||c<=0)return!1;const u=this.x,d=this.y,h=s*(1-a),p=s-h,y=u-h,x=u+o+h,v=d-h,S=d+c+h,w=u+p,_=u+o-p,A=d+p,R=d+c-p;return t>=y&&t<=x&&e>=v&&e<=S&&!(t>w&&t<_&&e>A&&e<R)}intersects(t,e){if(!e){const L=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=L)return!1;const B=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>B}const s=this.left,a=this.right,o=this.top,c=this.bottom;if(a<=s||c<=o)return!1;const u=tf[0].set(t.left,t.top),d=tf[1].set(t.left,t.bottom),h=tf[2].set(t.right,t.top),p=tf[3].set(t.right,t.bottom);if(h.x<=u.x||d.y<=u.y)return!1;const y=Math.sign(e.a*e.d-e.b*e.c);if(y===0||(e.apply(u,u),e.apply(d,d),e.apply(h,h),e.apply(p,p),Math.max(u.x,d.x,h.x,p.x)<=s||Math.min(u.x,d.x,h.x,p.x)>=a||Math.max(u.y,d.y,h.y,p.y)<=o||Math.min(u.y,d.y,h.y,p.y)>=c))return!1;const x=y*(d.y-u.y),v=y*(u.x-d.x),S=x*s+v*o,w=x*a+v*o,_=x*s+v*c,A=x*a+v*c;if(Math.max(S,w,_,A)<=x*u.x+v*u.y||Math.min(S,w,_,A)>=x*p.x+v*p.y)return!1;const R=y*(u.y-h.y),C=y*(h.x-u.x),j=R*s+C*o,k=R*a+C*o,I=R*s+C*c,N=R*a+C*c;return!(Math.max(j,k,I,N)<=R*u.x+C*u.y||Math.min(j,k,I,N)>=R*p.x+C*p.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){const e=Math.max(this.x,t.x),s=Math.min(this.x+this.width,t.x+t.width),a=Math.max(this.y,t.y),o=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(s-e,0),this.y=a,this.height=Math.max(o-a,0),this}ceil(t=1,e=.001){const s=Math.ceil((this.x+this.width-e)*t)/t,a=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=s-this.x,this.height=a-this.y,this}scale(t,e=t){return this.x*=t,this.y*=e,this.width*=t,this.height*=e,this}enlarge(t){const e=Math.min(this.x,t.x),s=Math.max(this.x+this.width,t.x+t.width),a=Math.min(this.y,t.y),o=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=s-e,this.y=a,this.height=o-a,this}getBounds(t){return t||(t=new Je),t.copyFrom(this),t}containsRect(t){if(this.width<=0||this.height<=0)return!1;const e=t.x,s=t.y,a=t.x+t.width,o=t.y+t.height;return e>=this.x&&e<this.x+this.width&&s>=this.y&&s<this.y+this.height&&a>=this.x&&a<this.x+this.width&&o>=this.y&&o<this.y+this.height}set(t,e,s,a){return this.x=t,this.y=e,this.width=s,this.height=a,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const Vp={default:-1};function on(n="default"){return Vp[n]===void 0&&(Vp[n]=-1),++Vp[n]}const k1=new Set,Qe="8.0.0",wO="8.3.4",ho={quiet:!1,noColor:!1},ye=(n,t,e=3)=>{if(ho.quiet||k1.has(t))return;let s=new Error().stack;const a=`${t}
Deprecated since v${n}`,o=typeof console.groupCollapsed=="function"&&!ho.noColor;typeof s>"u"?console.warn("PixiJS Deprecation Warning: ",a):(s=s.split(`
`).splice(e).join(`
`),o?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",a),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",a),console.warn(s))),k1.add(t)};Object.defineProperties(ye,{quiet:{get:()=>ho.quiet,set:n=>{ho.quiet=n},enumerable:!0,configurable:!1},noColor:{get:()=>ho.noColor,set:n=>{ho.noColor=n},enumerable:!0,configurable:!1}});const D2=()=>{};function Eo(n){return n+=n===0?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1}function O1(n){return!(n&n-1)&&!!n}function B2(n){const t={};for(const e in n)n[e]!==void 0&&(t[e]=n[e]);return t}const N1=Object.create(null);function EO(n){const t=N1[n];return t===void 0&&(N1[n]=on("resource")),t}const U2=class z2 extends Ki{constructor(t={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,t={...z2.defaultOptions,...t},this.addressMode=t.addressMode,this.addressModeU=t.addressModeU??this.addressModeU,this.addressModeV=t.addressModeV??this.addressModeV,this.addressModeW=t.addressModeW??this.addressModeW,this.scaleMode=t.scaleMode,this.magFilter=t.magFilter??this.magFilter,this.minFilter=t.minFilter??this.minFilter,this.mipmapFilter=t.mipmapFilter??this.mipmapFilter,this.lodMinClamp=t.lodMinClamp,this.lodMaxClamp=t.lodMaxClamp,this.compare=t.compare,this.maxAnisotropy=t.maxAnisotropy??1}set addressMode(t){this.addressModeU=t,this.addressModeV=t,this.addressModeW=t}get addressMode(){return this.addressModeU}set wrapMode(t){ye(Qe,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=t}get wrapMode(){return this.addressMode}set scaleMode(t){this.magFilter=t,this.minFilter=t,this.mipmapFilter=t}get scaleMode(){return this.magFilter}set maxAnisotropy(t){this._maxAnisotropy=Math.min(t,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this._sharedResourceId=null,this.emit("change",this)}_generateResourceId(){const t=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=EO(t),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};U2.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let Ao=U2;const P2=class H2 extends Ki{constructor(t={}){super(),this.options=t,this._gpuData=Object.create(null),this._gcLastUsed=-1,this.uid=on("textureSource"),this._resourceType="textureSource",this._resourceId=on("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,t={...H2.defaultOptions,...t},this.label=t.label??"",this.resource=t.resource,this.autoGarbageCollect=t.autoGarbageCollect,this._resolution=t.resolution,t.width?this.pixelWidth=t.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,t.height?this.pixelHeight=t.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=t.format,this.dimension=t.dimensions,this.mipLevelCount=t.mipLevelCount,this.autoGenerateMipmaps=t.autoGenerateMipmaps,this.sampleCount=t.sampleCount,this.antialias=t.antialias,this.alphaMode=t.alphaMode,this.style=new Ao(B2(t)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(t){this.style!==t&&(this._style?.off("change",this._onStyleChange,this),this._style=t,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(t){this._style.maxAnisotropy=t}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(t){this._style.addressMode=t}get repeatMode(){return this._style.addressMode}set repeatMode(t){this._style.addressMode=t}get magFilter(){return this._style.magFilter}set magFilter(t){this._style.magFilter=t}get minFilter(){return this._style.minFilter}set minFilter(t){this._style.minFilter=t}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(t){this._style.mipmapFilter=t}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(t){this._style.lodMinClamp=t}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(t){this._style.lodMaxClamp=t}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const t=this._resolution;if(this.resize(this.resourceWidth/t,this.resourceHeight/t))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.unload(),this.emit("destroy",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=on("resource"),this.emit("change",this),this.emit("unload",this);for(const t in this._gpuData)this._gpuData[t]?.destroy?.();this._gpuData=Object.create(null)}get resourceWidth(){const{resource:t}=this;return t.naturalWidth||t.videoWidth||t.displayWidth||t.width}get resourceHeight(){const{resource:t}=this;return t.naturalHeight||t.videoHeight||t.displayHeight||t.height}get resolution(){return this._resolution}set resolution(t){this._resolution!==t&&(this._resolution=t,this.width=this.pixelWidth/t,this.height=this.pixelHeight/t)}resize(t,e,s){s||(s=this._resolution),t||(t=this.width),e||(e=this.height);const a=Math.round(t*s),o=Math.round(e*s);return this.width=a/s,this.height=o/s,this._resolution=s,this.pixelWidth===a&&this.pixelHeight===o?!1:(this._refreshPOT(),this.pixelWidth=a,this.pixelHeight=o,this.emit("resize",this),this._resourceId=on("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(t){this._style.wrapMode=t}get wrapMode(){return this._style.wrapMode}set scaleMode(t){this._style.scaleMode=t}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=O1(this.pixelWidth)&&O1(this.pixelHeight)}static test(t){throw new Error("Unimplemented")}};P2.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let Qi=P2;class s0 extends Qi{constructor(t){const e=t.resource||new Float32Array(t.width*t.height*4);let s=t.format;s||(e instanceof Float32Array?s="rgba32float":e instanceof Int32Array||e instanceof Uint32Array?s="rgba32uint":e instanceof Int16Array||e instanceof Uint16Array?s="rgba16uint":(e instanceof Int8Array,s="bgra8unorm")),super({...t,resource:e,format:s}),this.uploadMethodId="buffer"}static test(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}s0.extension=Pt.TextureSource;const I1=new ue;class AO{constructor(t,e){this.mapCoord=new ue,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof e>"u"?this.clampMargin=t.width<10?0:.5:this.clampMargin=e,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){this.texture!==t&&(this._texture?.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,e){e===void 0&&(e=t);const s=this.mapCoord;for(let a=0;a<t.length;a+=2){const o=t[a],c=t[a+1];e[a]=o*s.a+c*s.c+s.tx,e[a+1]=o*s.b+c*s.d+s.ty}return e}update(){const t=this._texture;this._updateID++;const e=t.uvs;this.mapCoord.set(e.x1-e.x0,e.y1-e.y0,e.x3-e.x0,e.y3-e.y0,e.x0,e.y0);const s=t.orig,a=t.trim;a&&(I1.set(s.width/a.width,0,0,s.height/a.height,-a.x/a.width,-a.y/a.height),this.mapCoord.append(I1));const o=t.source,c=this.uClampFrame,u=this.clampMargin/o._resolution,d=this.clampOffset/o._resolution;return c[0]=(t.frame.x+u+d)/o.width,c[1]=(t.frame.y+u+d)/o.height,c[2]=(t.frame.x+t.frame.width-u+d)/o.width,c[3]=(t.frame.y+t.frame.height-u+d)/o.height,this.uClampOffset[0]=this.clampOffset/o.pixelWidth,this.uClampOffset[1]=this.clampOffset/o.pixelHeight,this.isSimple=t.frame.width===o.width&&t.frame.height===o.height&&t.rotate===0,!0}}class Wt extends Ki{constructor({source:t,label:e,frame:s,orig:a,trim:o,defaultAnchor:c,defaultBorders:u,rotate:d,dynamic:h}={}){if(super(),this.uid=on("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new Je,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=e,this.source=t?.source??new Qi,this.noFrame=!s,s)this.frame.copyFrom(s);else{const{width:p,height:y}=this._source;this.frame.width=p,this.frame.height=y}this.orig=a||this.frame,this.trim=o,this.rotate=d??0,this.defaultAnchor=c,this.defaultBorders=u,this.destroyed=!1,this.dynamic=h||!1,this.updateUvs()}set source(t){this._source&&this._source.off("resize",this.update,this),this._source=t,t.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new AO(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:t,frame:e}=this,{width:s,height:a}=this._source,o=e.x/s,c=e.y/a,u=e.width/s,d=e.height/a;let h=this.rotate;if(h){const p=u/2,y=d/2,x=o+p,v=c+y;h=Oe.add(h,Oe.NW),t.x0=x+p*Oe.uX(h),t.y0=v+y*Oe.uY(h),h=Oe.add(h,2),t.x1=x+p*Oe.uX(h),t.y1=v+y*Oe.uY(h),h=Oe.add(h,2),t.x2=x+p*Oe.uX(h),t.y2=v+y*Oe.uY(h),h=Oe.add(h,2),t.x3=x+p*Oe.uX(h),t.y3=v+y*Oe.uY(h)}else t.x0=o,t.y0=c,t.x1=o+u,t.y1=c,t.x2=o+u,t.y2=c+d,t.x3=o,t.y3=c+d}destroy(t=!1){this._source&&(this._source.off("resize",this.update,this),t&&(this._source.destroy(),this._source=null)),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return ye(Qe,"Texture.baseTexture is now Texture.source"),this._source}}Wt.EMPTY=new Wt({label:"EMPTY",source:new Qi({label:"EMPTY"})});Wt.EMPTY.destroy=D2;Wt.WHITE=new Wt({source:new s0({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});Wt.WHITE.destroy=D2;function TO(n,t,e){const{width:s,height:a}=e.orig,o=e.trim;if(o){const c=o.width,u=o.height;n.minX=o.x-t._x*s,n.maxX=n.minX+c,n.minY=o.y-t._y*a,n.maxY=n.minY+u}else n.minX=-t._x*s,n.maxX=n.minX+s,n.minY=-t._y*a,n.maxY=n.minY+a}const L1=new ue;class Xi{constructor(t=1/0,e=1/0,s=-1/0,a=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=L1,this.minX=t,this.minY=e,this.maxX=s,this.maxY=a}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new Je);const t=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(t.x=0,t.y=0,t.width=0,t.height=0):t.copyFromBounds(this),t}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=L1,this}set(t,e,s,a){this.minX=t,this.minY=e,this.maxX=s,this.maxY=a}addFrame(t,e,s,a,o){o||(o=this.matrix);const c=o.a,u=o.b,d=o.c,h=o.d,p=o.tx,y=o.ty;let x=this.minX,v=this.minY,S=this.maxX,w=this.maxY,_=c*t+d*e+p,A=u*t+h*e+y;_<x&&(x=_),A<v&&(v=A),_>S&&(S=_),A>w&&(w=A),_=c*s+d*e+p,A=u*s+h*e+y,_<x&&(x=_),A<v&&(v=A),_>S&&(S=_),A>w&&(w=A),_=c*t+d*a+p,A=u*t+h*a+y,_<x&&(x=_),A<v&&(v=A),_>S&&(S=_),A>w&&(w=A),_=c*s+d*a+p,A=u*s+h*a+y,_<x&&(x=_),A<v&&(v=A),_>S&&(S=_),A>w&&(w=A),this.minX=x,this.minY=v,this.maxX=S,this.maxY=w}addRect(t,e){this.addFrame(t.x,t.y,t.x+t.width,t.y+t.height,e)}addBounds(t,e){this.addFrame(t.minX,t.minY,t.maxX,t.maxY,e)}addBoundsMask(t){this.minX=this.minX>t.minX?this.minX:t.minX,this.minY=this.minY>t.minY?this.minY:t.minY,this.maxX=this.maxX<t.maxX?this.maxX:t.maxX,this.maxY=this.maxY<t.maxY?this.maxY:t.maxY}applyMatrix(t){const e=this.minX,s=this.minY,a=this.maxX,o=this.maxY,{a:c,b:u,c:d,d:h,tx:p,ty:y}=t;let x=c*e+d*s+p,v=u*e+h*s+y;this.minX=x,this.minY=v,this.maxX=x,this.maxY=v,x=c*a+d*s+p,v=u*a+h*s+y,this.minX=x<this.minX?x:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=x>this.maxX?x:this.maxX,this.maxY=v>this.maxY?v:this.maxY,x=c*e+d*o+p,v=u*e+h*o+y,this.minX=x<this.minX?x:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=x>this.maxX?x:this.maxX,this.maxY=v>this.maxY?v:this.maxY,x=c*a+d*o+p,v=u*a+h*o+y,this.minX=x<this.minX?x:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=x>this.maxX?x:this.maxX,this.maxY=v>this.maxY?v:this.maxY}fit(t){return this.minX<t.left&&(this.minX=t.left),this.maxX>t.right&&(this.maxX=t.right),this.minY<t.top&&(this.minY=t.top),this.maxY>t.bottom&&(this.maxY=t.bottom),this}fitBounds(t,e,s,a){return this.minX<t&&(this.minX=t),this.maxX>e&&(this.maxX=e),this.minY<s&&(this.minY=s),this.maxY>a&&(this.maxY=a),this}pad(t,e=t){return this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new Xi(this.minX,this.minY,this.maxX,this.maxY)}scale(t,e=t){return this.minX*=t,this.minY*=e,this.maxX*=t,this.maxY*=e,this}get x(){return this.minX}set x(t){const e=this.maxX-this.minX;this.minX=t,this.maxX=t+e}get y(){return this.minY}set y(t){const e=this.maxY-this.minY;this.minY=t,this.maxY=t+e}get width(){return this.maxX-this.minX}set width(t){this.maxX=this.minX+t}get height(){return this.maxY-this.minY}set height(t){this.maxY=this.minY+t}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(t,e,s,a){let o=this.minX,c=this.minY,u=this.maxX,d=this.maxY;a||(a=this.matrix);const h=a.a,p=a.b,y=a.c,x=a.d,v=a.tx,S=a.ty;for(let w=e;w<s;w+=2){const _=t[w],A=t[w+1],R=h*_+y*A+v,C=p*_+x*A+S;o=R<o?R:o,c=C<c?C:c,u=R>u?R:u,d=C>d?C:d}this.minX=o,this.minY=c,this.maxX=u,this.maxY=d}containsPoint(t,e){return this.minX<=t&&this.minY<=e&&this.maxX>=t&&this.maxY>=e}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(t){return this.minX=t.minX,this.minY=t.minY,this.maxX=t.maxX,this.maxY=t.maxY,this}}var CO={grad:.9,turn:360,rad:360/(2*Math.PI)},Us=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},On=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*n)/e+0},Li=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),n>e?e:n>t?n:t},F2=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},D1=function(n){return{r:Li(n.r,0,255),g:Li(n.g,0,255),b:Li(n.b,0,255),a:Li(n.a)}},Wp=function(n){return{r:On(n.r),g:On(n.g),b:On(n.b),a:On(n.a,3)}},RO=/^#([0-9a-f]{3,8})$/i,ef=function(n){var t=n.toString(16);return t.length<2?"0"+t:t},G2=function(n){var t=n.r,e=n.g,s=n.b,a=n.a,o=Math.max(t,e,s),c=o-Math.min(t,e,s),u=c?o===t?(e-s)/c:o===e?2+(s-t)/c:4+(t-e)/c:0;return{h:60*(u<0?u+6:u),s:o?c/o*100:0,v:o/255*100,a}},$2=function(n){var t=n.h,e=n.s,s=n.v,a=n.a;t=t/360*6,e/=100,s/=100;var o=Math.floor(t),c=s*(1-e),u=s*(1-(t-o)*e),d=s*(1-(1-t+o)*e),h=o%6;return{r:255*[s,u,c,c,d,s][h],g:255*[d,s,s,u,c,c][h],b:255*[c,c,d,s,s,u][h],a}},B1=function(n){return{h:F2(n.h),s:Li(n.s,0,100),l:Li(n.l,0,100),a:Li(n.a)}},U1=function(n){return{h:On(n.h),s:On(n.s),l:On(n.l),a:On(n.a,3)}},z1=function(n){return $2((e=(t=n).s,{h:t.h,s:(e*=((s=t.l)<50?s:100-s)/100)>0?2*e/(s+e)*100:0,v:s+e,a:t.a}));var t,e,s},tc=function(n){return{h:(t=G2(n)).h,s:(a=(200-(e=t.s))*(s=t.v)/100)>0&&a<200?e*s/100/(a<=100?a:200-a)*100:0,l:a/2,a:t.a};var t,e,s,a},jO=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,MO=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,kO=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,OO=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,fg={string:[[function(n){var t=RO.exec(n);return t?(n=t[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?On(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?On(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var t=kO.exec(n)||OO.exec(n);return t?t[2]!==t[4]||t[4]!==t[6]?null:D1({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(n){var t=jO.exec(n)||MO.exec(n);if(!t)return null;var e,s,a=B1({h:(e=t[1],s=t[2],s===void 0&&(s="deg"),Number(e)*(CO[s]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return z1(a)},"hsl"]],object:[[function(n){var t=n.r,e=n.g,s=n.b,a=n.a,o=a===void 0?1:a;return Us(t)&&Us(e)&&Us(s)?D1({r:Number(t),g:Number(e),b:Number(s),a:Number(o)}):null},"rgb"],[function(n){var t=n.h,e=n.s,s=n.l,a=n.a,o=a===void 0?1:a;if(!Us(t)||!Us(e)||!Us(s))return null;var c=B1({h:Number(t),s:Number(e),l:Number(s),a:Number(o)});return z1(c)},"hsl"],[function(n){var t=n.h,e=n.s,s=n.v,a=n.a,o=a===void 0?1:a;if(!Us(t)||!Us(e)||!Us(s))return null;var c=(function(u){return{h:F2(u.h),s:Li(u.s,0,100),v:Li(u.v,0,100),a:Li(u.a)}})({h:Number(t),s:Number(e),v:Number(s),a:Number(o)});return $2(c)},"hsv"]]},P1=function(n,t){for(var e=0;e<t.length;e++){var s=t[e][0](n);if(s)return[s,t[e][1]]}return[null,void 0]},NO=function(n){return typeof n=="string"?P1(n.trim(),fg.string):typeof n=="object"&&n!==null?P1(n,fg.object):[null,void 0]},Yp=function(n,t){var e=tc(n);return{h:e.h,s:Li(e.s+100*t,0,100),l:e.l,a:e.a}},Xp=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},H1=function(n,t){var e=tc(n);return{h:e.h,s:e.s,l:Li(e.l+100*t,0,100),a:e.a}},dg=(function(){function n(t){this.parsed=NO(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return On(Xp(this.rgba),2)},n.prototype.isDark=function(){return Xp(this.rgba)<.5},n.prototype.isLight=function(){return Xp(this.rgba)>=.5},n.prototype.toHex=function(){return t=Wp(this.rgba),e=t.r,s=t.g,a=t.b,c=(o=t.a)<1?ef(On(255*o)):"","#"+ef(e)+ef(s)+ef(a)+c;var t,e,s,a,o,c},n.prototype.toRgb=function(){return Wp(this.rgba)},n.prototype.toRgbString=function(){return t=Wp(this.rgba),e=t.r,s=t.g,a=t.b,(o=t.a)<1?"rgba("+e+", "+s+", "+a+", "+o+")":"rgb("+e+", "+s+", "+a+")";var t,e,s,a,o},n.prototype.toHsl=function(){return U1(tc(this.rgba))},n.prototype.toHslString=function(){return t=U1(tc(this.rgba)),e=t.h,s=t.s,a=t.l,(o=t.a)<1?"hsla("+e+", "+s+"%, "+a+"%, "+o+")":"hsl("+e+", "+s+"%, "+a+"%)";var t,e,s,a,o},n.prototype.toHsv=function(){return t=G2(this.rgba),{h:On(t.h),s:On(t.s),v:On(t.v),a:On(t.a,3)};var t},n.prototype.invert=function(){return us({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},n.prototype.saturate=function(t){return t===void 0&&(t=.1),us(Yp(this.rgba,t))},n.prototype.desaturate=function(t){return t===void 0&&(t=.1),us(Yp(this.rgba,-t))},n.prototype.grayscale=function(){return us(Yp(this.rgba,-1))},n.prototype.lighten=function(t){return t===void 0&&(t=.1),us(H1(this.rgba,t))},n.prototype.darken=function(t){return t===void 0&&(t=.1),us(H1(this.rgba,-t))},n.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},n.prototype.alpha=function(t){return typeof t=="number"?us({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):On(this.rgba.a,3);var e},n.prototype.hue=function(t){var e=tc(this.rgba);return typeof t=="number"?us({h:t,s:e.s,l:e.l,a:e.a}):On(e.h)},n.prototype.isEqual=function(t){return this.toHex()===us(t).toHex()},n})(),us=function(n){return n instanceof dg?n:new dg(n)},F1=[],IO=function(n){n.forEach(function(t){F1.indexOf(t)<0&&(t(dg,fg),F1.push(t))})};function LO(n,t){var e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var a in e)s[e[a]]=a;var o={};n.prototype.toName=function(c){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var u,d,h=s[this.toHex()];if(h)return h;if(c?.closest){var p=this.toRgb(),y=1/0,x="black";if(!o.length)for(var v in e)o[v]=new n(e[v]).toRgb();for(var S in e){var w=(u=p,d=o[S],Math.pow(u.r-d.r,2)+Math.pow(u.g-d.g,2)+Math.pow(u.b-d.b,2));w<y&&(y=w,x=S)}return x}},t.string.push([function(c){var u=c.toLowerCase(),d=u==="transparent"?"#0000":e[u];return d?new n(d).toRgb():null},"name"])}IO([LO]);const To=class Vl{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof Vl)this._value=this._cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,t))&&(this._value=this._cloneSource(t),this._normalize(this._value))}}get value(){return this._value}_cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}_isSourceEqual(t,e){const s=typeof t;if(s!==typeof e)return!1;if(s==="number"||s==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((o,c)=>o===e[c]);if(t!==null&&e!==null){const o=Object.keys(t),c=Object.keys(e);return o.length!==c.length?!1:o.every(u=>t[u]===e[u])}return t===e}toRgba(){const[t,e,s,a]=this._components;return{r:t,g:e,b:s,a}}toRgb(){const[t,e,s]=this._components;return{r:t,g:e,b:s}}toRgbaString(){const[t,e,s]=this.toUint8RgbArray();return`rgba(${t},${e},${s},${this.alpha})`}toUint8RgbArray(t){const[e,s,a]=this._components;return this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb),t[0]=Math.round(e*255),t[1]=Math.round(s*255),t[2]=Math.round(a*255),t}toArray(t){this._arrayRgba||(this._arrayRgba=[]),t||(t=this._arrayRgba);const[e,s,a,o]=this._components;return t[0]=e,t[1]=s,t[2]=a,t[3]=o,t}toRgbArray(t){this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb);const[e,s,a]=this._components;return t[0]=e,t[1]=s,t[2]=a,t}toNumber(){return this._int}toBgrNumber(){const[t,e,s]=this.toUint8RgbArray();return(s<<16)+(e<<8)+t}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[e,s,a,o]=Vl._temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=s,this._components[2]*=a,this._components[3]*=o,this._refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this._refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let s=this._int>>16&255,a=this._int>>8&255,o=this._int&255;return e&&(s=s*t+.5|0,a=a*t+.5|0,o=o*t+.5|0),(t*255<<24)+(s<<16)+(a<<8)+o}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(t){return this._components[3]=this._clamp(t),this}_normalize(t){let e,s,a,o;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const c=t;e=(c>>16&255)/255,s=(c>>8&255)/255,a=(c&255)/255,o=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,s,a,o=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,s,a,o=255]=t,e/=255,s/=255,a/=255,o/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const u=Vl.HEX_PATTERN.exec(t);u&&(t=`#${u[2]}`)}const c=us(t);c.isValid()&&({r:e,g:s,b:a,a:o}=c.rgba,e/=255,s/=255,a/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=s,this._components[2]=a,this._components[3]=o,this._refreshInt();else throw new Error(`Unable to convert color ${t}`)}_refreshInt(){this._clamp(this._components);const[t,e,s]=this._components;this._int=(t*255<<16)+(e*255<<8)+(s*255|0)}_clamp(t,e=0,s=1){return typeof t=="number"?Math.min(Math.max(t,e),s):(t.forEach((a,o)=>{t[o]=Math.min(Math.max(a,e),s)}),t)}static isColorLike(t){return typeof t=="number"||typeof t=="string"||t instanceof Number||t instanceof Vl||Array.isArray(t)||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t.r!==void 0&&t.g!==void 0&&t.b!==void 0||t.r!==void 0&&t.g!==void 0&&t.b!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0&&t.a!==void 0}};To.shared=new To;To._temp=new To;To.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let An=To;const DO={cullArea:null,cullable:!1,cullableChildren:!0};let qp=0;const G1=500;function Ve(...n){qp!==G1&&(qp++,qp===G1?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...n))}const Tc={_registeredResources:new Set,register(n){this._registeredResources.add(n)},unregister(n){this._registeredResources.delete(n)},release(){this._registeredResources.forEach(n=>n.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(n){return this._registeredResources.has(n)},reset(){this._registeredResources.clear()}};class BO{constructor(t,e){this._pool=[],this._count=0,this._index=0,this._classType=t,e&&this.prepopulate(e)}prepopulate(t){for(let e=0;e<t;e++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){let e;return this._index>0?e=this._pool[--this._index]:(e=new this._classType,this._count++),e.init?.(t),e}return(t){t.reset?.(),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let t=0;t<this._index;t++)this._pool[t].destroy();this._pool.length=0,this._count=0,this._index=0}}class UO{constructor(){this._poolsByClass=new Map}prepopulate(t,e){this.getPool(t).prepopulate(e)}get(t,e){return this.getPool(t).get(e)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new BO(t)),this._poolsByClass.get(t)}stats(){const t={};return this._poolsByClass.forEach(e=>{const s=t[e._classType.name]?e._classType.name+e._classType.ID:e._classType.name;t[s]={free:e.totalFree,used:e.totalUsed,size:e.totalSize}}),t}clear(){this._poolsByClass.forEach(t=>t.clear()),this._poolsByClass.clear()}}const Di=new UO;Tc.register(Di);const zO={get isCachedAsTexture(){return!!this.renderGroup?.isCachedAsTexture},cacheAsTexture(n){typeof n=="boolean"&&n===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(n===!0?{}:n))},updateCacheTexture(){this.renderGroup?.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(n){ye("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(n)}};function PO(n,t,e){const s=n.length;let a;if(t>=s||e===0)return;e=t+e>s?s-t:e;const o=s-e;for(a=t;a<o;++a)n[a]=n[a+e];n.length=o}const HO={allowChildren:!0,removeChildren(n=0,t){const e=t??this.children.length,s=e-n,a=[];if(s>0&&s<=e){for(let c=e-1;c>=n;c--){const u=this.children[c];u&&(a.push(u),u.parent=null)}PO(this.children,n,e);const o=this.renderGroup||this.parentRenderGroup;o&&o.removeChildren(a);for(let c=0;c<a.length;++c){const u=a[c];u.parentRenderLayer?.detach(u),this.emit("childRemoved",u,this,c),a[c].emit("removed",this)}return a.length>0&&this._didViewChangeTick++,a}else if(s===0&&this.children.length===0)return a;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(n){const t=this.getChildAt(n);return this.removeChild(t)},getChildAt(n){if(n<0||n>=this.children.length)throw new Error(`getChildAt: Index (${n}) does not exist.`);return this.children[n]},setChildIndex(n,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);this.getChildIndex(n),this.addChildAt(n,t)},getChildIndex(n){const t=this.children.indexOf(n);if(t===-1)throw new Error("The supplied Container must be a child of the caller");return t},addChildAt(n,t){this.allowChildren||ye(Qe,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:e}=this;if(t<0||t>e.length)throw new Error(`${n}addChildAt: The index ${t} supplied is out of bounds ${e.length}`);if(n.parent){const a=n.parent.children.indexOf(n);if(n.parent===this&&a===t)return n;a!==-1&&n.parent.children.splice(a,1)}t===e.length?e.push(n):e.splice(t,0,n),n.parent=this,n.didChange=!0,n._updateFlags=15;const s=this.renderGroup||this.parentRenderGroup;return s&&s.addChild(n),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",n,this,t),n.emit("added",this),n},swapChildren(n,t){if(n===t)return;const e=this.getChildIndex(n),s=this.getChildIndex(t);this.children[e]=t,this.children[s]=n;const a=this.renderGroup||this.parentRenderGroup;a&&(a.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){this.parent?.removeChild(this)},reparentChild(...n){return n.length===1?this.reparentChildAt(n[0],this.children.length):(n.forEach(t=>this.reparentChildAt(t,this.children.length)),n[0])},reparentChildAt(n,t){if(n.parent===this)return this.setChildIndex(n,t),n;const e=n.worldTransform.clone();n.removeFromParent(),this.addChildAt(n,t);const s=this.worldTransform.clone();return s.invert(),e.prepend(s),n.setFromMatrix(e),n},replaceChild(n,t){n.updateLocalTransform(),this.addChildAt(t,this.getChildIndex(n)),t.setFromMatrix(n.localTransform),t.updateLocalTransform(),this.removeChild(n)}},FO={collectRenderables(n,t,e){this.parentRenderLayer&&this.parentRenderLayer!==e||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(n,t,e):this.renderGroup?t.renderPipes.renderGroup.addRenderGroup(this.renderGroup,n):this.collectRenderablesWithEffects(n,t,e))},collectRenderablesSimple(n,t,e){const s=this.children,a=s.length;for(let o=0;o<a;o++)s[o].collectRenderables(n,t,e)},collectRenderablesWithEffects(n,t,e){const{renderPipes:s}=t;for(let a=0;a<this.effects.length;a++){const o=this.effects[a];s[o.pipe].push(o,this,n)}this.collectRenderablesSimple(n,t,e);for(let a=this.effects.length-1;a>=0;a--){const o=this.effects[a];s[o.pipe].pop(o,this,n)}}};class $1{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null,this.filterArea=null}}class GO{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(t=>{this.add({test:t.test,maskClass:t})}))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let e=0;e<this._tests.length;e++){const s=this._tests[e];if(s.test(t))return Di.get(s.maskClass,t)}return t}returnMaskEffect(t){Di.return(t)}}const hg=new GO;Pn.handleByList(Pt.MaskEffect,hg._effectClasses);const $O={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const n=this.renderGroup||this.parentRenderGroup;n&&(n.structureDidChange=!0)},addEffect(n){this.effects.indexOf(n)===-1&&(this.effects.push(n),this.effects.sort((e,s)=>e.priority-s.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(n){const t=this.effects.indexOf(n);t!==-1&&(this.effects.splice(t,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(n){const t=this._maskEffect;t?.mask!==n&&(t&&(this.removeEffect(t),hg.returnMaskEffect(t),this._maskEffect=null),n!=null&&(this._maskEffect=hg.getMaskEffect(n),this.addEffect(this._maskEffect)))},get mask(){return this._maskEffect?.mask},setMask(n){this._maskOptions={...this._maskOptions,...n},n.mask&&(this.mask=n.mask),this._markStructureAsChanged()},set filters(n){!Array.isArray(n)&&n&&(n=[n]);const t=this._filterEffect||(this._filterEffect=new $1);n=n;const e=n?.length>0,s=t.filters?.length>0,a=e!==s;n=Array.isArray(n)?n.slice(0):n,t.filters=Object.freeze(n),a&&(e?this.addEffect(t):(this.removeEffect(t),t.filters=n??null))},get filters(){return this._filterEffect?.filters},set filterArea(n){this._filterEffect||(this._filterEffect=new $1),this._filterEffect.filterArea=n},get filterArea(){return this._filterEffect?.filterArea}},VO={label:null,get name(){return ye(Qe,"Container.name property has been removed, use Container.label instead"),this.label},set name(n){ye(Qe,"Container.name property has been removed, use Container.label instead"),this.label=n},getChildByName(n,t=!1){return this.getChildByLabel(n,t)},getChildByLabel(n,t=!1){const e=this.children;for(let s=0;s<e.length;s++){const a=e[s];if(a.label===n||n instanceof RegExp&&n.test(a.label))return a}if(t)for(let s=0;s<e.length;s++){const o=e[s].getChildByLabel(n,!0);if(o)return o}return null},getChildrenByLabel(n,t=!1,e=[]){const s=this.children;for(let a=0;a<s.length;a++){const o=s[a];(o.label===n||n instanceof RegExp&&n.test(o.label))&&e.push(o)}if(t)for(let a=0;a<s.length;a++)s[a].getChildrenByLabel(n,!0,e);return e}},Zn=Di.getPool(ue),Ps=Di.getPool(Xi),WO=new ue,YO={getFastGlobalBounds(n,t){t||(t=new Xi),t.clear(),this._getGlobalBoundsRecursive(!!n,t,this.parentRenderLayer),t.isValid||t.set(0,0,0,0);const e=this.renderGroup||this.parentRenderGroup;return t.applyMatrix(e.worldTransform),t},_getGlobalBoundsRecursive(n,t,e){let s=t;if(n&&this.parentRenderLayer&&this.parentRenderLayer!==e||this.localDisplayStatus!==7||!this.measurable)return;const a=!!this.effects.length;if((this.renderGroup||a)&&(s=Ps.get().clear()),this.boundsArea)t.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const c=this.bounds;s.addFrame(c.minX,c.minY,c.maxX,c.maxY,this.groupTransform)}const o=this.children;for(let c=0;c<o.length;c++)o[c]._getGlobalBoundsRecursive(n,s,e)}if(a){let o=!1;const c=this.renderGroup||this.parentRenderGroup;for(let u=0;u<this.effects.length;u++)this.effects[u].addBounds&&(o||(o=!0,s.applyMatrix(c.worldTransform)),this.effects[u].addBounds(s,!0));o&&s.applyMatrix(c.worldTransform.copyTo(WO).invert()),t.addBounds(s),Ps.return(s)}else this.renderGroup&&(t.addBounds(s,this.relativeGroupTransform),Ps.return(s))}};function V2(n,t,e){e.clear();let s,a;return n.parent?t?s=n.parent.worldTransform:(a=Zn.get().identity(),s=r0(n,a)):s=ue.IDENTITY,W2(n,e,s,t),a&&Zn.return(a),e.isValid||e.set(0,0,0,0),e}function W2(n,t,e,s){if(!n.visible||!n.measurable)return;let a;s?a=n.worldTransform:(n.updateLocalTransform(),a=Zn.get(),a.appendFrom(n.localTransform,e));const o=t,c=!!n.effects.length;if(c&&(t=Ps.get().clear()),n.boundsArea)t.addRect(n.boundsArea,a);else{const u=n.bounds;u&&!u.isEmpty()&&(t.matrix=a,t.addBounds(u));for(let d=0;d<n.children.length;d++)W2(n.children[d],t,a,s)}if(c){for(let u=0;u<n.effects.length;u++)n.effects[u].addBounds?.(t);o.addBounds(t,ue.IDENTITY),Ps.return(t)}s||Zn.return(a)}function r0(n,t){const e=n.parent;return e&&(r0(e,t),e.updateLocalTransform(),t.append(e.localTransform)),t}function Y2(n,t){if(n===16777215||!t)return t;if(t===16777215||!n)return n;const e=n>>16&255,s=n>>8&255,a=n&255,o=t>>16&255,c=t>>8&255,u=t&255,d=e*o/255|0,h=s*c/255|0,p=a*u/255|0;return(d<<16)+(h<<8)+p}const V1=16777215;function W1(n,t){return n===V1?t:t===V1?n:Y2(n,t)}function Of(n){return((n&255)<<16)+(n&65280)+(n>>16&255)}const XO={getGlobalAlpha(n){if(n)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let t=this.alpha,e=this.parent;for(;e;)t*=e.alpha,e=e.parent;return t},getGlobalTransform(n=new ue,t){if(t)return n.copyFrom(this.worldTransform);this.updateLocalTransform();const e=r0(this,Zn.get().identity());return n.appendFrom(this.localTransform,e),Zn.return(e),n},getGlobalTint(n){if(n)return this.renderGroup?Of(this.renderGroup.worldColor):this.parentRenderGroup?Of(W1(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let t=this.localColor,e=this.parent;for(;e;)t=W1(t,e.localColor),e=e.parent;return Of(t)}};function X2(n,t,e){return t.clear(),e||(e=ue.IDENTITY),q2(n,t,e,n,!0),t.isValid||t.set(0,0,0,0),t}function q2(n,t,e,s,a){let o;if(a)o=Zn.get(),o=e.copyTo(o);else{if(!n.visible||!n.measurable)return;n.updateLocalTransform();const d=n.localTransform;o=Zn.get(),o.appendFrom(d,e)}const c=t,u=!!n.effects.length;if(u&&(t=Ps.get().clear()),n.boundsArea)t.addRect(n.boundsArea,o);else{n.renderPipeId&&(t.matrix=o,t.addBounds(n.bounds));const d=n.children;for(let h=0;h<d.length;h++)q2(d[h],t,o,s,!1)}if(u){for(let d=0;d<n.effects.length;d++)n.effects[d].addLocalBounds?.(t,s);c.addBounds(t,ue.IDENTITY),Ps.return(t)}Zn.return(o)}function K2(n,t){const e=n.children;for(let s=0;s<e.length;s++){const a=e[s],o=a.uid,c=(a._didViewChangeTick&65535)<<16|a._didContainerChangeTick&65535,u=t.index;(t.data[u]!==o||t.data[u+1]!==c)&&(t.data[t.index]=o,t.data[t.index+1]=c,t.didChange=!0),t.index=u+2,a.children.length&&K2(a,t)}return t.didChange}const qO=new ue,KO={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(n,t){const e=Math.sign(this.scale.x)||1;t!==0?this.scale.x=n/t*e:this.scale.x=e},_setHeight(n,t){const e=Math.sign(this.scale.y)||1;t!==0?this.scale.y=n/t*e:this.scale.y=e},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Xi});const n=this._localBoundsCacheData;return n.index=1,n.didChange=!1,n.data[0]!==this._didViewChangeTick&&(n.didChange=!0,n.data[0]=this._didViewChangeTick),K2(this,n),n.didChange&&X2(this,n.localBounds,qO),n.localBounds},getBounds(n,t){return V2(this,n,t||new Xi)}},QO={_onRender:null,set onRender(n){const t=this.renderGroup||this.parentRenderGroup;if(!n){this._onRender&&t?.removeOnRender(this),this._onRender=null;return}this._onRender||t?.addOnRender(this),this._onRender=n},get onRender(){return this._onRender}},JO={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(n){this._zIndex!==n&&(this._zIndex=n,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(ZO))}};function ZO(n,t){return n._zIndex-t._zIndex}const tN={getGlobalPosition(n=new Vn,t=!1){return this.parent?this.parent.toGlobal(this._position,n,t):(n.x=this._position.x,n.y=this._position.y),n},toGlobal(n,t,e=!1){const s=this.getGlobalTransform(Zn.get(),e);return t=s.apply(n,t),Zn.return(s),t},toLocal(n,t,e,s){t&&(n=t.toGlobal(n,e,s));const a=this.getGlobalTransform(Zn.get(),s);return e=a.applyInverse(n,e),Zn.return(a),e}};class Q2{constructor(){this.uid=on("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let eN=0;class nN{constructor(t){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this.textureStyle=new Ao(this.textureOptions)}createTexture(t,e,s){const a=new Qi({...this.textureOptions,width:t,height:e,resolution:1,antialias:s,autoGarbageCollect:!1});return new Wt({source:a,label:`texturePool_${eN++}`})}getOptimalTexture(t,e,s=1,a){let o=Math.ceil(t*s-1e-6),c=Math.ceil(e*s-1e-6);o=Eo(o),c=Eo(c);const u=(o<<17)+(c<<1)+(a?1:0);this._texturePool[u]||(this._texturePool[u]=[]);let d=this._texturePool[u].pop();return d||(d=this.createTexture(o,c,a)),d.source._resolution=s,d.source.width=o/s,d.source.height=c/s,d.source.pixelWidth=o,d.source.pixelHeight=c,d.frame.x=0,d.frame.y=0,d.frame.width=t,d.frame.height=e,d.updateUvs(),this._poolKeyHash[d.uid]=u,d}getSameSizeTexture(t,e=!1){const s=t.source;return this.getOptimalTexture(t.width,t.height,s._resolution,e)}returnTexture(t,e=!1){const s=this._poolKeyHash[t.uid];e&&(t.source.style=this.textureStyle),this._texturePool[s].push(t)}clear(t){if(t=t!==!1,t)for(const e in this._texturePool){const s=this._texturePool[e];if(s)for(let a=0;a<s.length;a++)s[a].destroy(!0)}this._texturePool={}}}const J2=new nN;Tc.register(J2);class iN{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new ue,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new Q2,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(t){this.root=t,t._onRender&&this.addOnRender(t),t.didChange=!0;const e=t.children;for(let s=0;s<e.length;s++){const a=e[s];a._updateFlags=15,this.addChild(a)}}enableCacheAsTexture(t={}){this.textureOptions=t,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(J2.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0;const t=this._parentCacheAsTextureRenderGroup;t&&!t.textureNeedsUpdate&&t.updateCacheTexture()}reset(){this.renderGroupChildren.length=0;for(const t in this.childrenToUpdate){const e=this.childrenToUpdate[t];e.list.fill(null),e.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(t){t.renderGroupParent&&t.renderGroupParent._removeRenderGroupChild(t),t.renderGroupParent=this,this.renderGroupChildren.push(t)}_removeRenderGroupChild(t){const e=this.renderGroupChildren.indexOf(t);e>-1&&this.renderGroupChildren.splice(e,1),t.renderGroupParent=null}addChild(t){if(this.structureDidChange=!0,t.parentRenderGroup=this,t.updateTick=-1,t.parent===this.root?t.relativeRenderGroupDepth=1:t.relativeRenderGroupDepth=t.parent.relativeRenderGroupDepth+1,t.didChange=!0,this.onChildUpdate(t),t.renderGroup){this.addRenderGroupChild(t.renderGroup);return}t._onRender&&this.addOnRender(t);const e=t.children;for(let s=0;s<e.length;s++)this.addChild(e[s])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&(t.renderGroup||this.removeOnRender(t)),t.parentRenderGroup=null,t.renderGroup){this._removeRenderGroupChild(t.renderGroup);return}const e=t.children;for(let s=0;s<e.length;s++)this.removeChild(e[s])}removeChildren(t){for(let e=0;e<t.length;e++)this.removeChild(t[e])}onChildUpdate(t){let e=this.childrenToUpdate[t.relativeRenderGroupDepth];e||(e=this.childrenToUpdate[t.relativeRenderGroupDepth]={index:0,list:[]}),e.list[e.index++]=t}updateRenderable(t){t.globalDisplayStatus<7||(this.instructionSet.renderPipes[t.renderPipeId].updateRenderable(t),t.didViewUpdate=!1)}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(t){for(let e=0;e<this._onRenderContainers.length;e++)this._onRenderContainers[e]._onRender(t)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(t=[]){const e=this.root.children;for(let s=0;s<e.length;s++)this._getChildren(e[s],t);return t}_getChildren(t,e=[]){if(e.push(t),t.renderGroup)return e;const s=t.children;for(let a=0;a<s.length;a++)this._getChildren(s[a],e);return e}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new ue),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new ue),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const t=this._parentCacheAsTextureRenderGroup;return t?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new ue),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(t.inverseWorldTransform).translate(-t._textureBounds.x,-t._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function sN(n,t,e={}){for(const s in t)!e[s]&&t[s]!==void 0&&(n[s]=t[s])}const Kp=new zn(null),nf=new zn(null),Qp=new zn(null,1,1),sf=new zn(null),Y1=1,rN=2,Jp=4;class _i extends Ki{constructor(t={}){super(),this.uid=on("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new ue,this.relativeGroupTransform=new ue,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new zn(this,0,0),this._scale=Qp,this._pivot=nf,this._origin=sf,this._skew=Kp,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],sN(this,t,{children:!0,parent:!0,effects:!0}),t.children?.forEach(e=>this.addChild(e)),t.parent?.addChild(this)}static mixin(t){ye("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),Pn.mixin(_i,t)}set _didChangeId(t){this._didViewChangeTick=t>>12&4095,this._didContainerChangeTick=t&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...t){if(this.allowChildren||ye(Qe,"addChild: Only Containers will be allowed to add children in v8.0.0"),t.length>1){for(let a=0;a<t.length;a++)this.addChild(t[a]);return t[0]}const e=t[0],s=this.renderGroup||this.parentRenderGroup;return e.parent===this?(this.children.splice(this.children.indexOf(e),1),this.children.push(e),s&&(s.structureDidChange=!0),e):(e.parent&&e.parent.removeChild(e),this.children.push(e),this.sortableChildren&&(this.sortDirty=!0),e.parent=this,e.didChange=!0,e._updateFlags=15,s&&s.addChild(e),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this),this._didViewChangeTick++,e._zIndex!==0&&e.depthOfChildModified(),e)}removeChild(...t){if(t.length>1){for(let a=0;a<t.length;a++)this.removeChild(t[a]);return t[0]}const e=t[0],s=this.children.indexOf(e);return s>-1&&(this._didViewChangeTick++,this.children.splice(s,1),this.renderGroup?this.renderGroup.removeChild(e):this.parentRenderGroup&&this.parentRenderGroup.removeChild(e),e.parentRenderLayer&&e.parentRenderLayer.detach(e),e.parent=null,this.emit("childRemoved",e,this,s),e.emit("removed",this)),e}_onUpdate(t){t&&t===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(t){!!this.renderGroup!==t&&(t?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const t=this.parentRenderGroup;t?.removeChild(this),this.renderGroup=Di.get(iN,this),this.groupTransform=ue.IDENTITY,t?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const t=this.parentRenderGroup;t?.removeChild(this),Di.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,t?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new ue),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(t){this._position.x=t}get y(){return this._position.y}set y(t){this._position.y=t}get position(){return this._position}set position(t){this._position.copyFrom(t)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this._skew))}get angle(){return this.rotation*bO}set angle(t){this.rotation=t*xO}get pivot(){return this._pivot===nf&&(this._pivot=new zn(this,0,0)),this._pivot}set pivot(t){this._pivot===nf&&(this._pivot=new zn(this,0,0),this._origin!==sf&&Ve("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof t=="number"?this._pivot.set(t):this._pivot.copyFrom(t)}get skew(){return this._skew===Kp&&(this._skew=new zn(this,0,0)),this._skew}set skew(t){this._skew===Kp&&(this._skew=new zn(this,0,0)),this._skew.copyFrom(t)}get scale(){return this._scale===Qp&&(this._scale=new zn(this,1,1)),this._scale}set scale(t){this._scale===Qp&&(this._scale=new zn(this,0,0)),typeof t=="string"&&(t=parseFloat(t)),typeof t=="number"?this._scale.set(t):this._scale.copyFrom(t)}get origin(){return this._origin===sf&&(this._origin=new zn(this,0,0)),this._origin}set origin(t){this._origin===sf&&(this._origin=new zn(this,0,0),this._pivot!==nf&&Ve("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof t=="number"?this._origin.set(t):this._origin.copyFrom(t)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(t){const e=this.getLocalBounds().width;this._setWidth(t,e)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(t){const e=this.getLocalBounds().height;this._setHeight(t,e)}getSize(t){t||(t={});const e=this.getLocalBounds();return t.width=Math.abs(this.scale.x*e.width),t.height=Math.abs(this.scale.y*e.height),t}setSize(t,e){const s=this.getLocalBounds();typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,s.width),e!==void 0&&this._setHeight(e,s.height)}_updateSkew(){const t=this._rotation,e=this._skew;this._cx=Math.cos(t+e._y),this._sx=Math.sin(t+e._y),this._cy=-Math.sin(t-e._x),this._sy=Math.cos(t-e._x)}updateTransform(t){return this.position.set(typeof t.x=="number"?t.x:this.position.x,typeof t.y=="number"?t.y:this.position.y),this.scale.set(typeof t.scaleX=="number"?t.scaleX||1:this.scale.x,typeof t.scaleY=="number"?t.scaleY||1:this.scale.y),this.rotation=typeof t.rotation=="number"?t.rotation:this.rotation,this.skew.set(typeof t.skewX=="number"?t.skewX:this.skew.x,typeof t.skewY=="number"?t.skewY:this.skew.y),this.pivot.set(typeof t.pivotX=="number"?t.pivotX:this.pivot.x,typeof t.pivotY=="number"?t.pivotY:this.pivot.y),this.origin.set(typeof t.originX=="number"?t.originX:this.origin.x,typeof t.originY=="number"?t.originY:this.origin.y),this}setFromMatrix(t){t.decompose(this)}updateLocalTransform(){const t=this._didContainerChangeTick;if(this._didLocalTransformChangeId===t)return;this._didLocalTransformChangeId=t;const e=this.localTransform,s=this._scale,a=this._pivot,o=this._origin,c=this._position,u=s._x,d=s._y,h=a._x,p=a._y,y=-o._x,x=-o._y;e.a=this._cx*u,e.b=this._sx*u,e.c=this._cy*d,e.d=this._sy*d,e.tx=c._x-(h*e.a+p*e.c)+(y*e.a+x*e.c)-y,e.ty=c._y-(h*e.b+p*e.d)+(y*e.b+x*e.d)-x}set alpha(t){t!==this.localAlpha&&(this.localAlpha=t,this._updateFlags|=Y1,this._onUpdate())}get alpha(){return this.localAlpha}set tint(t){const s=An.shared.setValue(t??16777215).toBgrNumber();s!==this.localColor&&(this.localColor=s,this._updateFlags|=Y1,this._onUpdate())}get tint(){return Of(this.localColor)}set blendMode(t){this.localBlendMode!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=rN,this.localBlendMode=t,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(t){const e=t?2:0;(this.localDisplayStatus&2)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Jp,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(t){const e=t?0:4;(this.localDisplayStatus&4)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Jp,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(t){const e=t?1:0;(this.localDisplayStatus&1)!==e&&(this._updateFlags|=Jp,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(t=!1){if(this.destroyed)return;this.destroyed=!0;let e;if(this.children.length&&(e=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof t=="boolean"?t:t?.children)&&e)for(let a=0;a<e.length;++a)e[a].destroy(t);this.renderGroup?.destroy(),this.renderGroup=null}}Pn.mixin(_i,HO,YO,tN,QO,KO,$O,VO,JO,DO,zO,XO,FO);class a0 extends _i{constructor(t){super(t),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this._bounds=new Xi(0,1,0,0),this._boundsDirty=!0,this.autoGarbageCollect=t.autoGarbageCollect??!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}containsPoint(t){const e=this.bounds,{x:s,y:a}=t;return s>=e.minX&&s<=e.maxX&&a>=e.minY&&a<=e.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}unload(){this.emit("unload",this);for(const t in this._gpuData)this._gpuData[t]?.destroy();this._gpuData=Object.create(null),this.onViewUpdate()}destroy(t){this.unload(),super.destroy(t),this._bounds=null}collectRenderablesSimple(t,e,s){const{renderPipes:a}=e;a.blendMode.pushBlendMode(this,this.groupBlendMode,t),a[this.renderPipeId].addRenderable(this,t),this.didViewUpdate=!1;const c=this.children,u=c.length;for(let d=0;d<u;d++)c[d].collectRenderables(t,e,s);a.blendMode.popBlendMode(t)}}class Hs extends a0{constructor(t=Wt.EMPTY){t instanceof Wt&&(t={texture:t});const{texture:e=Wt.EMPTY,anchor:s,roundPixels:a,width:o,height:c,...u}=t;super({label:"Sprite",...u}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new zn({_onUpdate:()=>{this.onViewUpdate()}}),s?this.anchor=s:e.defaultAnchor&&(this.anchor=e.defaultAnchor),this.texture=e,this.allowChildren=!1,this.roundPixels=a??!1,o!==void 0&&(this.width=o),c!==void 0&&(this.height=c)}static from(t,e=!1){return t instanceof Wt?new Hs(t):new Hs(Wt.from(t,e))}set texture(t){t||(t=Wt.EMPTY);const e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return TO(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return ye("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const t=this._anchor,e=this._texture,s=this._bounds,{width:a,height:o}=e.orig;s.minX=-t._x*a,s.maxX=s.minX+a,s.minY=-t._y*o,s.maxY=s.minY+o}destroy(t=!1){if(super.destroy(t),typeof t=="boolean"?t:t?.texture){const s=typeof t=="boolean"?t:t?.textureSource;this._texture.destroy(s)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this._setWidth(t,this._texture.orig.width),this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this._setHeight(t,this._texture.orig.height),this._height=t}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this._texture.orig.width,t.height=Math.abs(this.scale.y)*this._texture.orig.height,t}setSize(t,e){typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,this._texture.orig.width),e!==void 0&&this._setHeight(e,this._texture.orig.height)}}const aN=new Xi;function Z2(n,t,e){const s=aN;n.measurable=!0,V2(n,e,s),t.addBoundsMask(s),n.measurable=!1}function tE(n,t,e){const s=Ps.get();n.measurable=!0;const a=Zn.get().identity(),o=eE(n,e,a);X2(n,s,o),n.measurable=!1,t.addBoundsMask(s),Zn.return(a),Ps.return(s)}function eE(n,t,e){return n?(n!==t&&(eE(n.parent,t,e),n.updateLocalTransform(),e.append(n.localTransform)),e):(Ve("Mask bounds, renderable is not inside the root container"),e)}class nE{constructor(t){this.priority=0,this.inverse=!1,this.pipe="alphaMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof Hs),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask=null)}addBounds(t,e){this.inverse||Z2(this.mask,t,e)}addLocalBounds(t,e){tE(this.mask,t,e)}containsPoint(t,e){const s=this.mask;return e(s,t)}destroy(){this.reset()}static test(t){return t instanceof Hs}}nE.extension=Pt.MaskEffect;class iE{constructor(t){this.priority=0,this.pipe="colorMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return typeof t=="number"}}iE.extension=Pt.MaskEffect;class sE{constructor(t){this.priority=0,this.pipe="stencilMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null)}addBounds(t,e){Z2(this.mask,t,e)}addLocalBounds(t,e){tE(this.mask,t,e)}containsPoint(t,e){const s=this.mask;return e(s,t)}destroy(){this.reset()}static test(t){return t instanceof _i}}sE.extension=Pt.MaskEffect;const oN={createCanvas:(n,t)=>{const e=document.createElement("canvas");return e.width=n,e.height=t,e},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(n,t)=>fetch(n,t),parseXML:n=>new DOMParser().parseFromString(n,"text/xml")};let X1=oN;const Be={get(){return X1},set(n){X1=n}};class rE extends Qi{constructor(t){t.resource||(t.resource=Be.get().createCanvas()),t.width||(t.width=t.resource.width,t.autoDensity||(t.width/=t.resolution)),t.height||(t.height=t.resource.height,t.autoDensity||(t.height/=t.resolution)),super(t),this.uploadMethodId="image",this.autoDensity=t.autoDensity,this.resizeCanvas(),this.transparent=!!t.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(t=this.width,e=this.height,s=this._resolution){const a=super.resize(t,e,s);return a&&this.resizeCanvas(),a}static test(t){return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&t instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}rE.extension=Pt.TextureSource;class Sa extends Qi{constructor(t){super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||globalThis.VideoFrame&&t instanceof VideoFrame}}Sa.extension=Pt.TextureSource;var pg=(n=>(n[n.INTERACTION=50]="INTERACTION",n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY",n))(pg||{});class Zp{constructor(t,e=null,s=0,a=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=e,this.priority=s,this._once=a}match(t,e=null){return this._fn===t&&this._context===e}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));const e=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const aE=class xi{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Zp(null,null,1/0),this.deltaMS=1/xi.targetFPMS,this.elapsedMS=1/xi.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,s=pg.NORMAL){return this._addListener(new Zp(t,e,s))}addOnce(t,e,s=pg.NORMAL){return this._addListener(new Zp(t,e,s,!0))}_addListener(t){let e=this._head.next,s=this._head;if(!e)t.connect(s);else{for(;e;){if(t.priority>e.priority){t.connect(s);break}s=e,e=e.next}t.previous||t.connect(s)}return this._startIfPossible(),this}remove(t,e){let s=this._head.next;for(;s;)s.match(t,e)?s=s.destroy():s=s.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const o=t-this._lastFrame|0;if(o<this._minElapsedMS)return;this._lastFrame=t-o%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*xi.targetFPMS;const s=this._head;let a=s.next;for(;a;)a=a.emit(this);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),s=Math.min(Math.max(0,e)/1e3,xi.targetFPMS);this._maxElapsedMS=1/s}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!xi._shared){const t=xi._shared=new xi;t.autoStart=!0,t._protected=!0}return xi._shared}static get system(){if(!xi._system){const t=xi._system=new xi;t.autoStart=!0,t._protected=!0}return xi._system}};aE.targetFPMS=.06;let rf=aE,tm;async function oE(){return tm??(tm=(async()=>{const t=Be.get().createCanvas(1,1).getContext("webgl");if(!t)return"premultiply-alpha-on-upload";const e=await new Promise(c=>{const u=document.createElement("video");u.onloadeddata=()=>c(u),u.onerror=()=>c(null),u.autoplay=!1,u.crossOrigin="anonymous",u.preload="auto",u.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",u.load()});if(!e)return"premultiply-alpha-on-upload";const s=t.createTexture();t.bindTexture(t.TEXTURE_2D,s);const a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,s,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);const o=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,o),t.deleteFramebuffer(a),t.deleteTexture(s),t.getExtension("WEBGL_lose_context")?.loseContext(),o[0]<=o[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),tm}const pd=class lE extends Qi{constructor(t){super(t),this.isReady=!1,this.uploadMethodId="video",t={...lE.defaultOptions,...t},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this.alphaMode=t.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const t=rf.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const t=this.resource,e=this.options;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(e.preload||t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlayThrough),t.addEventListener("error",this._onError,!0)),this.alphaMode=await oE(),this._load=new Promise((s,a)=>{this.isValid?s(this):(this._resolve=s,this._reject=a,e.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${e.preloadTimeoutMs}ms`))})),t.load())}),this._load}_onError(t){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.resource;return!t.paused&&!t.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const t=this.resource;this.isValid&&(this.isReady=!0,this.resize(t.videoWidth,t.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const t=this.resource;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlayThrough),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(rf.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(rf.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(rf.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement}};pd.extension=Pt.TextureSource;pd.defaultOptions={...Qi.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};pd.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let ec=pd;const $i=(n,t,e=!1)=>(Array.isArray(n)||(n=[n]),t?n.map(s=>typeof s=="string"||e?t(s):s):n);class lN{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||Ve(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const s=$i(t);let a;for(let d=0;d<this.parsers.length;d++){const h=this.parsers[d];if(h.test(e)){a=h.getCacheableAssets(s,e);break}}const o=new Map(Object.entries(a||{}));a||s.forEach(d=>{o.set(d,e)});const c=[...o.keys()],u={cacheKeys:c,keys:s};s.forEach(d=>{this._cacheMap.set(d,u)}),c.forEach(d=>{const h=a?a[d]:e;this._cache.has(d)&&this._cache.get(d)!==h&&Ve("[Cache] already has key:",d),this._cache.set(d,o.get(d))})}remove(t){if(!this._cacheMap.has(t)){Ve(`[Assets] Asset id ${t} was not found in the Cache`);return}const e=this._cacheMap.get(t);e.cacheKeys.forEach(a=>{this._cache.delete(a)}),e.keys.forEach(a=>{this._cacheMap.delete(a)})}get parsers(){return this._parsers}}const $e=new lN,mg=[];Pn.handleByList(Pt.TextureSource,mg);function cE(n={}){const t=n&&n.resource,e=t?n.resource:n,s=t?n:{resource:n};for(let a=0;a<mg.length;a++){const o=mg[a];if(o.test(e))return new o(s)}throw new Error(`Could not find a source type for resource: ${s.resource}`)}function cN(n={},t=!1){const e=n&&n.resource,s=e?n.resource:n,a=e?n:{resource:n};if(!t&&$e.has(s))return $e.get(s);const o=new Wt({source:cE(a)});return o.on("destroy",()=>{$e.has(s)&&$e.remove(s)}),t||$e.set(s,o),o}function uN(n,t=!1){return typeof n=="string"?$e.get(n):n instanceof Qi?new Wt({source:n}):cN(n,t)}Wt.from=uN;Qi.from=cE;Pn.add(nE,iE,sE,ec,Sa,rE,s0);var Lr=(n=>(n[n.Low=0]="Low",n[n.Normal=1]="Normal",n[n.High=2]="High",n))(Lr||{});function Hi(n){if(typeof n!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(n)}`)}function Ol(n){return n.split("?")[0].split("#")[0]}function fN(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function dN(n,t,e){return n.replace(new RegExp(fN(t),"g"),e)}function hN(n,t){let e="",s=0,a=-1,o=0,c=-1;for(let u=0;u<=n.length;++u){if(u<n.length)c=n.charCodeAt(u);else{if(c===47)break;c=47}if(c===47){if(!(a===u-1||o===1))if(a!==u-1&&o===2){if(e.length<2||s!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){const d=e.lastIndexOf("/");if(d!==e.length-1){d===-1?(e="",s=0):(e=e.slice(0,d),s=e.length-1-e.lastIndexOf("/")),a=u,o=0;continue}}else if(e.length===2||e.length===1){e="",s=0,a=u,o=0;continue}}}else e.length>0?e+=`/${n.slice(a+1,u)}`:e=n.slice(a+1,u),s=u-a-1;a=u,o=0}else c===46&&o!==-1?++o:o=-1}return e}const Si={toPosix(n){return dN(n,"\\","/")},isUrl(n){return/^https?:/.test(this.toPosix(n))},isDataUrl(n){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(n)},isBlobUrl(n){return n.startsWith("blob:")},hasProtocol(n){return/^[^/:]+:/.test(this.toPosix(n))},getProtocol(n){Hi(n),n=this.toPosix(n);const t=/^file:\/\/\//.exec(n);if(t)return t[0];const e=/^[^/:]+:\/{0,2}/.exec(n);return e?e[0]:""},toAbsolute(n,t,e){if(Hi(n),this.isDataUrl(n)||this.isBlobUrl(n))return n;const s=Ol(this.toPosix(t??Be.get().getBaseUrl())),a=Ol(this.toPosix(e??this.rootname(s)));return n=this.toPosix(n),n.startsWith("/")?Si.join(a,n.slice(1)):this.isAbsolute(n)?n:this.join(s,n)},normalize(n){if(Hi(n),n.length===0)return".";if(this.isDataUrl(n)||this.isBlobUrl(n))return n;n=this.toPosix(n);let t="";const e=n.startsWith("/");this.hasProtocol(n)&&(t=this.rootname(n),n=n.slice(t.length));const s=n.endsWith("/");return n=hN(n),n.length>0&&s&&(n+="/"),e?`/${n}`:t+n},isAbsolute(n){return Hi(n),n=this.toPosix(n),this.hasProtocol(n)?!0:n.startsWith("/")},join(...n){if(n.length===0)return".";let t;for(let e=0;e<n.length;++e){const s=n[e];if(Hi(s),s.length>0)if(t===void 0)t=s;else{const a=n[e-1]??"";this.joinExtensions.includes(this.extname(a).toLowerCase())?t+=`/../${s}`:t+=`/${s}`}}return t===void 0?".":this.normalize(t)},dirname(n){if(Hi(n),n.length===0)return".";n=this.toPosix(n);let t=n.charCodeAt(0);const e=t===47;let s=-1,a=!0;const o=this.getProtocol(n),c=n;n=n.slice(o.length);for(let u=n.length-1;u>=1;--u)if(t=n.charCodeAt(u),t===47){if(!a){s=u;break}}else a=!1;return s===-1?e?"/":this.isUrl(c)?o+n:o:e&&s===1?"//":o+n.slice(0,s)},rootname(n){Hi(n),n=this.toPosix(n);let t="";if(n.startsWith("/")?t="/":t=this.getProtocol(n),this.isUrl(n)){const e=n.indexOf("/",t.length);e!==-1?t=n.slice(0,e):t=n,t.endsWith("/")||(t+="/")}return t},basename(n,t){Hi(n),t&&Hi(t),n=Ol(this.toPosix(n));let e=0,s=-1,a=!0,o;if(t!==void 0&&t.length>0&&t.length<=n.length){if(t.length===n.length&&t===n)return"";let c=t.length-1,u=-1;for(o=n.length-1;o>=0;--o){const d=n.charCodeAt(o);if(d===47){if(!a){e=o+1;break}}else u===-1&&(a=!1,u=o+1),c>=0&&(d===t.charCodeAt(c)?--c===-1&&(s=o):(c=-1,s=u))}return e===s?s=u:s===-1&&(s=n.length),n.slice(e,s)}for(o=n.length-1;o>=0;--o)if(n.charCodeAt(o)===47){if(!a){e=o+1;break}}else s===-1&&(a=!1,s=o+1);return s===-1?"":n.slice(e,s)},extname(n){Hi(n),n=Ol(this.toPosix(n));let t=-1,e=0,s=-1,a=!0,o=0;for(let c=n.length-1;c>=0;--c){const u=n.charCodeAt(c);if(u===47){if(!a){e=c+1;break}continue}s===-1&&(a=!1,s=c+1),u===46?t===-1?t=c:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||s===-1||o===0||o===1&&t===s-1&&t===e+1?"":n.slice(t,s)},parse(n){Hi(n);const t={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return t;n=Ol(this.toPosix(n));let e=n.charCodeAt(0);const s=this.isAbsolute(n);let a;t.root=this.rootname(n),s||this.hasProtocol(n)?a=1:a=0;let o=-1,c=0,u=-1,d=!0,h=n.length-1,p=0;for(;h>=a;--h){if(e=n.charCodeAt(h),e===47){if(!d){c=h+1;break}continue}u===-1&&(d=!1,u=h+1),e===46?o===-1?o=h:p!==1&&(p=1):o!==-1&&(p=-1)}return o===-1||u===-1||p===0||p===1&&o===u-1&&o===c+1?u!==-1&&(c===0&&s?t.base=t.name=n.slice(1,u):t.base=t.name=n.slice(c,u)):(c===0&&s?(t.name=n.slice(1,o),t.base=n.slice(1,u)):(t.name=n.slice(c,o),t.base=n.slice(c,u)),t.ext=n.slice(o,u)),t.dir=this.dirname(n),t},sep:"/",delimiter:":",joinExtensions:[".html"]};function uE(n,t,e,s,a){const o=t[e];for(let c=0;c<o.length;c++){const u=o[c];e<t.length-1?uE(n.replace(s[e],u),t,e+1,s,a):a.push(n.replace(s[e],u))}}function pN(n){const t=/\{(.*?)\}/g,e=n.match(t),s=[];if(e){const a=[];e.forEach(o=>{const c=o.substring(1,o.length-1).split(",");a.push(c)}),uE(n,a,0,e,s)}else s.push(n);return s}const Gf=n=>!Array.isArray(n);class Io{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(e[s])}`).join("&")}}getAlias(t){const{alias:e,src:s}=t;return $i(e||s,o=>typeof o=="string"?o:Array.isArray(o)?o.map(c=>c?.src??c):o?.src?o.src:o,!0)}addManifest(t){this._manifest&&Ve("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){const s=[];let a=e;Array.isArray(e)||(a=Object.entries(e).map(([o,c])=>typeof c=="string"||Array.isArray(c)?{alias:o,src:c}:{alias:o,...c})),a.forEach(o=>{const c=o.src,u=o.alias;let d;if(typeof u=="string"){const h=this._createBundleAssetId(t,u);s.push(h),d=[u,h]}else{const h=u.map(p=>this._createBundleAssetId(t,p));s.push(...h),d=[...u,...h]}this.add({...o,alias:d,src:c})}),this._bundles[t]=s}add(t){const e=[];Array.isArray(t)?e.push(...t):e.push(t);let s;s=o=>{this.hasKey(o)&&Ve(`[Resolver] already has key: ${o} overwriting`)},$i(e).forEach(o=>{const{src:c}=o;let{data:u,format:d,loadParser:h,parser:p}=o;const y=$i(c).map(w=>typeof w=="string"?pN(w):Array.isArray(w)?w:[w]),x=this.getAlias(o);Array.isArray(x)?x.forEach(s):s(x);const v=[],S=w=>({...this._parsers.find(A=>A.test(w))?.parse(w),src:w});y.forEach(w=>{w.forEach(_=>{let A={};if(typeof _!="object"?A=S(_):(u=_.data??u,d=_.format??d,(_.loadParser||_.parser)&&(h=_.loadParser??h,p=_.parser??p),A={...S(_.src),..._}),!x)throw new Error(`[Resolver] alias is undefined for this asset: ${A.src}`);A=this._buildResolvedAsset(A,{aliases:x,data:u,format:d,loadParser:h,parser:p,progressSize:o.progressSize}),v.push(A)})}),x.forEach(w=>{this._assetMap[w]=v})})}resolveBundle(t){const e=Gf(t);t=$i(t);const s={};return t.forEach(a=>{const o=this._bundles[a];if(o){const c=this.resolve(o),u={};for(const d in c){const h=c[d];u[this._extractAssetIdFromBundle(a,d)]=h}s[a]=u}}),e?s[t[0]]:s}resolveUrl(t){const e=this.resolve(t);if(typeof t!="string"){const s={};for(const a in e)s[a]=e[a].src;return s}return e.src}resolve(t){const e=Gf(t);t=$i(t);const s={};return t.forEach(a=>{if(!this._resolverHash[a])if(this._assetMap[a]){let o=this._assetMap[a];const c=this._getPreferredOrder(o);c?.priority.forEach(u=>{c.params[u].forEach(d=>{const h=o.filter(p=>p[u]?p[u]===d:!1);h.length&&(o=h)})}),this._resolverHash[a]=o[0]}else this._resolverHash[a]=this._buildResolvedAsset({alias:[a],src:a},{});s[a]=this._resolverHash[a]}),e?s[t[0]]:s}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const s=t[e],a=this._preferredOrder.find(o=>o.params.format.includes(s.format));if(a)return a}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}_buildResolvedAsset(t,e){const{aliases:s,data:a,loadParser:o,parser:c,format:u,progressSize:d}=e;return(this._basePath||this._rootPath)&&(t.src=Si.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=s??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...a||{},...t.data},t.loadParser=o??t.loadParser,t.parser=c??t.parser,t.format=u??t.format??mN(t.src),d!==void 0&&(t.progressSize=d),t}}Io.RETINA_PREFIX=/@([0-9\.]+)x/;function mN(n){return n.split(".").pop().split("?").shift().split("#").shift()}const gg=(n,t)=>{const e=t.split("?")[1];return e&&(n+=`?${e}`),n},fE=class Wl{constructor(t,e){this.linkedSheets=[];let s=t;t?.source instanceof Qi&&(s={texture:t,data:e});const{texture:a,data:o,cachePrefix:c=""}=s;this.cachePrefix=c,this._texture=a instanceof Wt?a:null,this.textureSource=a.source,this.textures={},this.animations={},this.data=o;const u=parseFloat(o.meta.scale);u?(this.resolution=u,a.source.resolution=this.resolution):this.resolution=a.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=Wl.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const s=Wl.BATCH_SIZE;for(;e-t<s&&e<this._frameKeys.length;){const a=this._frameKeys[e],o=this._frames[a],c=o.frame;if(c){let u=null,d=null;const h=o.trimmed!==!1&&o.sourceSize?o.sourceSize:o.frame,p=new Je(0,0,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution);o.rotated?u=new Je(Math.floor(c.x)/this.resolution,Math.floor(c.y)/this.resolution,Math.floor(c.h)/this.resolution,Math.floor(c.w)/this.resolution):u=new Je(Math.floor(c.x)/this.resolution,Math.floor(c.y)/this.resolution,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution),o.trimmed!==!1&&o.spriteSourceSize&&(d=new Je(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution)),this.textures[a]=new Wt({source:this.textureSource,frame:u,orig:p,trim:d,rotate:o.rotated?2:0,defaultAnchor:o.anchor,defaultBorders:o.borders,label:a.toString()})}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let s=0;s<t[e].length;s++){const a=t[e][s];this.animations[e].push(this.textures[a])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Wl.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Wl.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){for(const e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};fE.BATCH_SIZE=1e3;let q1=fE;const gN=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function dE(n,t,e){const s={};if(n.forEach(a=>{s[a]=t}),Object.keys(t.textures).forEach(a=>{s[`${t.cachePrefix}${a}`]=t.textures[a]}),!e){const a=Si.dirname(n[0]);t.linkedSheets.forEach((o,c)=>{const u=dE([`${a}/${t.data.meta.related_multi_packs[c]}`],o,!0);Object.assign(s,u)})}return s}const yN={extension:Pt.Asset,cache:{test:n=>n instanceof q1,getCacheableAssets:(n,t)=>dE(n,t,!1)},resolver:{extension:{type:Pt.ResolveParser,name:"resolveSpritesheet"},test:n=>{const e=n.split("?")[0].split("."),s=e.pop(),a=e.pop();return s==="json"&&gN.includes(a)},parse:n=>{const t=n.split(".");return{resolution:parseFloat(Io.RETINA_PREFIX.exec(n)?.[1]??"1"),format:t[t.length-2],src:n}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:Pt.LoadParser,priority:Lr.Normal,name:"spritesheetLoader"},async testParse(n,t){return Si.extname(t.src).toLowerCase()===".json"&&!!n.frames},async parse(n,t,e){const{texture:s,imageFilename:a,textureOptions:o,cachePrefix:c}=t?.data??{};let u=Si.dirname(t.src);u&&u.lastIndexOf("/")!==u.length-1&&(u+="/");let d;if(s instanceof Wt)d=s;else{const y=gg(u+(a??n.meta.image),t.src);d=(await e.load([{src:y,data:o}]))[y]}const h=new q1({texture:d.source,data:n,cachePrefix:c});await h.parse();const p=n?.meta?.related_multi_packs;if(Array.isArray(p)){const y=[];for(const v of p){if(typeof v!="string")continue;let S=u+v;t.data?.ignoreMultiPack||(S=gg(S,t.src),y.push(e.load({src:S,data:{textureOptions:o,ignoreMultiPack:!0}})))}const x=await Promise.all(y);h.linkedSheets=x,x.forEach(v=>{v.linkedSheets=[h].concat(h.linkedSheets.filter(S=>S!==v))})}return h},async unload(n,t,e){await e.unload(n.textureSource._sourceOrigin),n.destroy(!1)}}};Pn.add(yN);const em=Object.create(null),K1=Object.create(null);function o0(n,t){let e=K1[n];return e===void 0&&(em[t]===void 0&&(em[t]=1),K1[n]=e=em[t]++),e}let af;function hE(){return(!af||af?.isContextLost())&&(af=Be.get().createCanvas().getContext("webgl",{})),af}let of;function bN(){if(!of){of="mediump";const n=hE();n&&n.getShaderPrecisionFormat&&(of=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision?"highp":"mediump")}return of}function xN(n,t,e){return t?n:e?(n=n.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${n}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${n}
        `}function vN(n,t,e){const s=e?t.maxSupportedFragmentPrecision:t.maxSupportedVertexPrecision;if(n.substring(0,9)!=="precision"){let a=e?t.requestedFragmentPrecision:t.requestedVertexPrecision;return a==="highp"&&s!=="highp"&&(a="mediump"),`precision ${a} float;
${n}`}else if(s!=="highp"&&n.substring(0,15)==="precision highp")return n.replace("precision highp","precision mediump");return n}function SN(n,t){return t?`#version 300 es
${n}`:n}const _N={},wN={};function EN(n,{name:t="pixi-program"},e=!0){t=t.replace(/\s+/g,"-"),t+=e?"-fragment":"-vertex";const s=e?_N:wN;return s[t]?(s[t]++,t+=`-${s[t]}`):s[t]=1,n.indexOf("#define SHADER_NAME")!==-1?n:`${`#define SHADER_NAME ${t}`}
${n}`}function AN(n,t){return t?n.replace("#version 300 es",""):n}const nm={stripVersion:AN,ensurePrecision:vN,addProgramDefines:xN,setProgramName:EN,insertVersion:SN},Nl=Object.create(null),pE=class yg{constructor(t){t={...yg.defaultOptions,...t};const e=t.fragment.indexOf("#version 300 es")!==-1,s={stripVersion:e,ensurePrecision:{requestedFragmentPrecision:t.preferredFragmentPrecision,requestedVertexPrecision:t.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:bN()},setProgramName:{name:t.name},addProgramDefines:e,insertVersion:e};let a=t.fragment,o=t.vertex;Object.keys(nm).forEach(c=>{const u=s[c];a=nm[c](a,u,!0),o=nm[c](o,u,!1)}),this.fragment=a,this.vertex=o,this.transformFeedbackVaryings=t.transformFeedbackVaryings,this._key=o0(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,Nl[this._cacheKey]=null}static from(t){const e=`${t.vertex}:${t.fragment}`;return Nl[e]||(Nl[e]=new yg(t),Nl[e]._cacheKey=e),Nl[e]}};pE.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let mE=pE;const Q1={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function TN(n){return Q1[n]??Q1.float32}const CN={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function RN({source:n,entryPoint:t}){const e={},s=n.indexOf(`fn ${t}`);if(s!==-1){const a=n.indexOf("->",s);if(a!==-1){const o=n.substring(s,a),c=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let u;for(;(u=c.exec(o))!==null;){const d=CN[u[3]]??"float32";e[u[2]]={location:parseInt(u[1],10),format:d,stride:TN(d).stride,offset:0,instance:!1,start:0}}}}return e}function im(n){const t=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,e=/@group\((\d+)\)/,s=/@binding\((\d+)\)/,a=/var(<[^>]+>)? (\w+)/,o=/:\s*(\w+)/,c=/struct\s+(\w+)\s*{([^}]+)}/g,u=/(\w+)\s*:\s*([\w\<\>]+)/g,d=/struct\s+(\w+)/,h=n.match(t)?.map(y=>({group:parseInt(y.match(e)[1],10),binding:parseInt(y.match(s)[1],10),name:y.match(a)[2],isUniform:y.match(a)[1]==="<uniform>",type:y.match(o)[1]}));if(!h)return{groups:[],structs:[]};const p=n.match(c)?.map(y=>{const x=y.match(d)[1],v=y.match(u).reduce((S,w)=>{const[_,A]=w.split(":");return S[_.trim()]=A.trim(),S},{});return v?{name:x,members:v}:null}).filter(({name:y})=>h.some(x=>x.type===y))??[];return{groups:h,structs:p}}var Yl=(n=>(n[n.VERTEX=1]="VERTEX",n[n.FRAGMENT=2]="FRAGMENT",n[n.COMPUTE=4]="COMPUTE",n))(Yl||{});function jN({groups:n}){const t=[];for(let e=0;e<n.length;e++){const s=n[e];t[s.group]||(t[s.group]=[]),s.isUniform?t[s.group].push({binding:s.binding,visibility:Yl.VERTEX|Yl.FRAGMENT,buffer:{type:"uniform"}}):s.type==="sampler"?t[s.group].push({binding:s.binding,visibility:Yl.FRAGMENT,sampler:{type:"filtering"}}):s.type==="texture_2d"&&t[s.group].push({binding:s.binding,visibility:Yl.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return t}function MN({groups:n}){const t=[];for(let e=0;e<n.length;e++){const s=n[e];t[s.group]||(t[s.group]={}),t[s.group][s.name]=s.binding}return t}function kN(n,t){const e=new Set,s=new Set,a=[...n.structs,...t.structs].filter(c=>e.has(c.name)?!1:(e.add(c.name),!0)),o=[...n.groups,...t.groups].filter(c=>{const u=`${c.name}-${c.binding}`;return s.has(u)?!1:(s.add(u),!0)});return{structs:a,groups:o}}const Il=Object.create(null);class md{constructor(t){this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:e,vertex:s,layout:a,gpuLayout:o,name:c}=t;if(this.name=c,this.fragment=e,this.vertex=s,e.source===s.source){const u=im(e.source);this.structsAndGroups=u}else{const u=im(s.source),d=im(e.source);this.structsAndGroups=kN(u,d)}this.layout=a??MN(this.structsAndGroups),this.gpuLayout=o??jN(this.structsAndGroups),this.autoAssignGlobalUniforms=this.layout[0]?.globalUniforms!==void 0,this.autoAssignLocalUniforms=this.layout[1]?.localUniforms!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:t,fragment:e}=this,s=t.source+e.source+t.entryPoint+e.entryPoint;this._layoutKey=o0(s,"program")}get attributeData(){return this._attributeData??(this._attributeData=RN(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,Il[this._cacheKey]=null}static from(t){const e=`${t.vertex.source}:${t.fragment.source}:${t.fragment.entryPoint}:${t.vertex.entryPoint}`;return Il[e]||(Il[e]=new md(t),Il[e]._cacheKey=e),Il[e]}}const gE=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],ON=gE.reduce((n,t)=>(n[t]=!0,n),{});function NN(n,t){switch(n){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*t);case"vec3<f32>":return new Float32Array(3*t);case"vec4<f32>":return new Float32Array(4*t);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const yE=class bE{constructor(t,e){this._touched=0,this.uid=on("uniform"),this._resourceType="uniformGroup",this._resourceId=on("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,e={...bE.defaultOptions,...e},this.uniformStructures=t;const s={};for(const a in t){const o=t[a];if(o.name=a,o.size=o.size??1,!ON[o.type]){const c=o.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(c){const[,u,d]=c;throw new Error(`Uniform type ${o.type} is not supported. Use type: '${u}', size: ${d} instead.`)}throw new Error(`Uniform type ${o.type} is not supported. Supported uniform types are: ${gE.join(", ")}`)}o.value??(o.value=NN(o.type,o.size)),s[a]=o.value}this.uniforms=s,this._dirtyId=1,this.ubo=e.ubo,this.isStatic=e.isStatic,this._signature=o0(Object.keys(s).map(a=>`${a}-${t[a].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};yE.defaultOptions={ubo:!1,isStatic:!1};let xE=yE;class Nf{constructor(t){this.resources=Object.create(null),this._dirty=!0;let e=0;for(const s in t){const a=t[s];this.setResource(a,e++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const t=[];let e=0;for(const s in this.resources)t[e++]=this.resources[s]._resourceId;this._key=t.join("|")}setResource(t,e){const s=this.resources[e];t!==s&&(s&&t.off?.("change",this.onResourceChange,this),t.on?.("change",this.onResourceChange,this),this.resources[e]=t,this._dirty=!0)}getResource(t){return this.resources[t]}_touch(t,e){const s=this.resources;for(const a in s)s[a]._gcLastUsed=t,s[a]._touched=e}destroy(){const t=this.resources;for(const e in t)t[e]?.off?.("change",this.onResourceChange,this);this.resources=null}onResourceChange(t){if(this._dirty=!0,t.destroyed){const e=this.resources;for(const s in e)e[s]===t&&(e[s]=null)}else this._updateKey()}}var bg=(n=>(n[n.WEBGL=1]="WEBGL",n[n.WEBGPU=2]="WEBGPU",n[n.BOTH=3]="BOTH",n))(bg||{});class l0 extends Ki{constructor(t){super(),this.uid=on("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[],this._destroyed=!1;let{gpuProgram:e,glProgram:s,groups:a,resources:o,compatibleRenderers:c,groupMap:u}=t;this.gpuProgram=e,this.glProgram=s,c===void 0&&(c=0,e&&(c|=bg.WEBGPU),s&&(c|=bg.WEBGL)),this.compatibleRenderers=c;const d={};if(!o&&!a&&(o={}),o&&a)throw new Error("[Shader] Cannot have both resources and groups");if(!e&&a&&!u)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!e&&a&&u)for(const h in u)for(const p in u[h]){const y=u[h][p];d[y]={group:h,binding:p,name:y}}else if(e&&a&&!u){const h=e.structsAndGroups.groups;u={},h.forEach(p=>{u[p.group]=u[p.group]||{},u[p.group][p.binding]=p.name,d[p.name]=p})}else if(o){a={},u={},e&&e.structsAndGroups.groups.forEach(y=>{u[y.group]=u[y.group]||{},u[y.group][y.binding]=y.name,d[y.name]=y});let h=0;for(const p in o)d[p]||(a[99]||(a[99]=new Nf,this._ownedBindGroups.push(a[99])),d[p]={group:99,binding:h,name:p},u[99]=u[99]||{},u[99][h]=p,h++);for(const p in o){const y=p;let x=o[p];!x.source&&!x._resourceType&&(x=new xE(x));const v=d[y];v&&(a[v.group]||(a[v.group]=new Nf,this._ownedBindGroups.push(a[v.group])),a[v.group].setResource(x,v.binding))}}this.groups=a,this._uniformBindMap=u,this.resources=this._buildResourceAccessor(a,d)}addResource(t,e,s){var a,o;(a=this._uniformBindMap)[e]||(a[e]={}),(o=this._uniformBindMap[e])[s]||(o[s]=t),this.groups[e]||(this.groups[e]=new Nf,this._ownedBindGroups.push(this.groups[e]))}_buildResourceAccessor(t,e){const s={};for(const a in e){const o=e[a];Object.defineProperty(s,o.name,{get(){return t[o.group].getResource(o.binding)},set(c){t[o.group].setResource(c,o.binding)}})}return s}destroy(t=!1){this._destroyed||(this._destroyed=!0,this.emit("destroy",this),t&&(this.gpuProgram?.destroy(),this.glProgram?.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(e=>{e.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null)}static from(t){const{gpu:e,gl:s,...a}=t;let o,c;return e&&(o=md.from(e)),s&&(c=mE.from(s)),new l0({gpuProgram:o,glProgram:c,...a})}}const IN={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8,min:9,max:10},sm=0,rm=1,am=2,om=3,lm=4,cm=5,xg=class vE{constructor(){this.data=0,this.blendMode="normal",this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<sm)}set blend(t){!!(this.data&1<<sm)!==t&&(this.data^=1<<sm)}get offsets(){return!!(this.data&1<<rm)}set offsets(t){!!(this.data&1<<rm)!==t&&(this.data^=1<<rm)}set cullMode(t){if(t==="none"){this.culling=!1;return}this.culling=!0,this.clockwiseFrontFace=t==="front"}get cullMode(){return this.culling?this.clockwiseFrontFace?"front":"back":"none"}get culling(){return!!(this.data&1<<am)}set culling(t){!!(this.data&1<<am)!==t&&(this.data^=1<<am)}get depthTest(){return!!(this.data&1<<om)}set depthTest(t){!!(this.data&1<<om)!==t&&(this.data^=1<<om)}get depthMask(){return!!(this.data&1<<cm)}set depthMask(t){!!(this.data&1<<cm)!==t&&(this.data^=1<<cm)}get clockwiseFrontFace(){return!!(this.data&1<<lm)}set clockwiseFrontFace(t){!!(this.data&1<<lm)!==t&&(this.data^=1<<lm)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!=="none",this._blendMode=t,this._blendModeId=IN[t]||0}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}toString(){return`[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const t=new vE;return t.depthTest=!1,t.blend=!0,t}};xg.default2d=xg.for2d();let LN=xg;const vg=[];Pn.handleByNamedList(Pt.Environment,vg);async function DN(n){if(!n)for(let t=0;t<vg.length;t++){const e=vg[t];if(e.value.test()){await e.value.load();return}}}let Ll;function BN(){if(typeof Ll=="boolean")return Ll;try{Ll=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Ll=!1}return Ll}function J1(n,t,e=2){const s=t&&t.length,a=s?t[0]*e:n.length;let o=SE(n,0,a,e,!0);const c=[];if(!o||o.next===o.prev)return c;let u,d,h;if(s&&(o=FN(n,t,o,e)),n.length>80*e){u=n[0],d=n[1];let p=u,y=d;for(let x=e;x<a;x+=e){const v=n[x],S=n[x+1];v<u&&(u=v),S<d&&(d=S),v>p&&(p=v),S>y&&(y=S)}h=Math.max(p-u,y-d),h=h!==0?32767/h:0}return dc(o,c,e,u,d,h,0),c}function SE(n,t,e,s,a){let o;if(a===ZN(n,t,e,s)>0)for(let c=t;c<e;c+=s)o=Z1(c/s|0,n[c],n[c+1],o);else for(let c=e-s;c>=t;c-=s)o=Z1(c/s|0,n[c],n[c+1],o);return o&&Co(o,o.next)&&(pc(o),o=o.next),o}function _a(n,t){if(!n)return n;t||(t=n);let e=n,s;do if(s=!1,!e.steiner&&(Co(e,e.next)||tn(e.prev,e,e.next)===0)){if(pc(e),e=t=e.prev,e===e.next)break;s=!0}else e=e.next;while(s||e!==t);return t}function dc(n,t,e,s,a,o,c){if(!n)return;!c&&o&&YN(n,s,a,o);let u=n;for(;n.prev!==n.next;){const d=n.prev,h=n.next;if(o?zN(n,s,a,o):UN(n)){t.push(d.i,n.i,h.i),pc(n),n=h.next,u=h.next;continue}if(n=h,n===u){c?c===1?(n=PN(_a(n),t),dc(n,t,e,s,a,o,2)):c===2&&HN(n,t,e,s,a,o):dc(_a(n),t,e,s,a,o,1);break}}}function UN(n){const t=n.prev,e=n,s=n.next;if(tn(t,e,s)>=0)return!1;const a=t.x,o=e.x,c=s.x,u=t.y,d=e.y,h=s.y,p=Math.min(a,o,c),y=Math.min(u,d,h),x=Math.max(a,o,c),v=Math.max(u,d,h);let S=s.next;for(;S!==t;){if(S.x>=p&&S.x<=x&&S.y>=y&&S.y<=v&&Xl(a,u,o,d,c,h,S.x,S.y)&&tn(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function zN(n,t,e,s){const a=n.prev,o=n,c=n.next;if(tn(a,o,c)>=0)return!1;const u=a.x,d=o.x,h=c.x,p=a.y,y=o.y,x=c.y,v=Math.min(u,d,h),S=Math.min(p,y,x),w=Math.max(u,d,h),_=Math.max(p,y,x),A=Sg(v,S,t,e,s),R=Sg(w,_,t,e,s);let C=n.prevZ,j=n.nextZ;for(;C&&C.z>=A&&j&&j.z<=R;){if(C.x>=v&&C.x<=w&&C.y>=S&&C.y<=_&&C!==a&&C!==c&&Xl(u,p,d,y,h,x,C.x,C.y)&&tn(C.prev,C,C.next)>=0||(C=C.prevZ,j.x>=v&&j.x<=w&&j.y>=S&&j.y<=_&&j!==a&&j!==c&&Xl(u,p,d,y,h,x,j.x,j.y)&&tn(j.prev,j,j.next)>=0))return!1;j=j.nextZ}for(;C&&C.z>=A;){if(C.x>=v&&C.x<=w&&C.y>=S&&C.y<=_&&C!==a&&C!==c&&Xl(u,p,d,y,h,x,C.x,C.y)&&tn(C.prev,C,C.next)>=0)return!1;C=C.prevZ}for(;j&&j.z<=R;){if(j.x>=v&&j.x<=w&&j.y>=S&&j.y<=_&&j!==a&&j!==c&&Xl(u,p,d,y,h,x,j.x,j.y)&&tn(j.prev,j,j.next)>=0)return!1;j=j.nextZ}return!0}function PN(n,t){let e=n;do{const s=e.prev,a=e.next.next;!Co(s,a)&&wE(s,e,e.next,a)&&hc(s,a)&&hc(a,s)&&(t.push(s.i,e.i,a.i),pc(e),pc(e.next),e=n=a),e=e.next}while(e!==n);return _a(e)}function HN(n,t,e,s,a,o){let c=n;do{let u=c.next.next;for(;u!==c.prev;){if(c.i!==u.i&&KN(c,u)){let d=EE(c,u);c=_a(c,c.next),d=_a(d,d.next),dc(c,t,e,s,a,o,0),dc(d,t,e,s,a,o,0);return}u=u.next}c=c.next}while(c!==n)}function FN(n,t,e,s){const a=[];for(let o=0,c=t.length;o<c;o++){const u=t[o]*s,d=o<c-1?t[o+1]*s:n.length,h=SE(n,u,d,s,!1);h===h.next&&(h.steiner=!0),a.push(qN(h))}a.sort(GN);for(let o=0;o<a.length;o++)e=$N(a[o],e);return e}function GN(n,t){let e=n.x-t.x;if(e===0&&(e=n.y-t.y,e===0)){const s=(n.next.y-n.y)/(n.next.x-n.x),a=(t.next.y-t.y)/(t.next.x-t.x);e=s-a}return e}function $N(n,t){const e=VN(n,t);if(!e)return t;const s=EE(e,n);return _a(s,s.next),_a(e,e.next)}function VN(n,t){let e=t;const s=n.x,a=n.y;let o=-1/0,c;if(Co(n,e))return e;do{if(Co(n,e.next))return e.next;if(a<=e.y&&a>=e.next.y&&e.next.y!==e.y){const y=e.x+(a-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(y<=s&&y>o&&(o=y,c=e.x<e.next.x?e:e.next,y===s))return c}e=e.next}while(e!==t);if(!c)return null;const u=c,d=c.x,h=c.y;let p=1/0;e=c;do{if(s>=e.x&&e.x>=d&&s!==e.x&&_E(a<h?s:o,a,d,h,a<h?o:s,a,e.x,e.y)){const y=Math.abs(a-e.y)/(s-e.x);hc(e,n)&&(y<p||y===p&&(e.x>c.x||e.x===c.x&&WN(c,e)))&&(c=e,p=y)}e=e.next}while(e!==u);return c}function WN(n,t){return tn(n.prev,n,t.prev)<0&&tn(t.next,n,n.next)<0}function YN(n,t,e,s){let a=n;do a.z===0&&(a.z=Sg(a.x,a.y,t,e,s)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==n);a.prevZ.nextZ=null,a.prevZ=null,XN(a)}function XN(n){let t,e=1;do{let s=n,a;n=null;let o=null;for(t=0;s;){t++;let c=s,u=0;for(let h=0;h<e&&(u++,c=c.nextZ,!!c);h++);let d=e;for(;u>0||d>0&&c;)u!==0&&(d===0||!c||s.z<=c.z)?(a=s,s=s.nextZ,u--):(a=c,c=c.nextZ,d--),o?o.nextZ=a:n=a,a.prevZ=o,o=a;s=c}o.nextZ=null,e*=2}while(t>1);return n}function Sg(n,t,e,s,a){return n=(n-e)*a|0,t=(t-s)*a|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,n|t<<1}function qN(n){let t=n,e=n;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==n);return e}function _E(n,t,e,s,a,o,c,u){return(a-c)*(t-u)>=(n-c)*(o-u)&&(n-c)*(s-u)>=(e-c)*(t-u)&&(e-c)*(o-u)>=(a-c)*(s-u)}function Xl(n,t,e,s,a,o,c,u){return!(n===c&&t===u)&&_E(n,t,e,s,a,o,c,u)}function KN(n,t){return n.next.i!==t.i&&n.prev.i!==t.i&&!QN(n,t)&&(hc(n,t)&&hc(t,n)&&JN(n,t)&&(tn(n.prev,n,t.prev)||tn(n,t.prev,t))||Co(n,t)&&tn(n.prev,n,n.next)>0&&tn(t.prev,t,t.next)>0)}function tn(n,t,e){return(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y)}function Co(n,t){return n.x===t.x&&n.y===t.y}function wE(n,t,e,s){const a=cf(tn(n,t,e)),o=cf(tn(n,t,s)),c=cf(tn(e,s,n)),u=cf(tn(e,s,t));return!!(a!==o&&c!==u||a===0&&lf(n,e,t)||o===0&&lf(n,s,t)||c===0&&lf(e,n,s)||u===0&&lf(e,t,s))}function lf(n,t,e){return t.x<=Math.max(n.x,e.x)&&t.x>=Math.min(n.x,e.x)&&t.y<=Math.max(n.y,e.y)&&t.y>=Math.min(n.y,e.y)}function cf(n){return n>0?1:n<0?-1:0}function QN(n,t){let e=n;do{if(e.i!==n.i&&e.next.i!==n.i&&e.i!==t.i&&e.next.i!==t.i&&wE(e,e.next,n,t))return!0;e=e.next}while(e!==n);return!1}function hc(n,t){return tn(n.prev,n,n.next)<0?tn(n,t,n.next)>=0&&tn(n,n.prev,t)>=0:tn(n,t,n.prev)<0||tn(n,n.next,t)<0}function JN(n,t){let e=n,s=!1;const a=(n.x+t.x)/2,o=(n.y+t.y)/2;do e.y>o!=e.next.y>o&&e.next.y!==e.y&&a<(e.next.x-e.x)*(o-e.y)/(e.next.y-e.y)+e.x&&(s=!s),e=e.next;while(e!==n);return s}function EE(n,t){const e=_g(n.i,n.x,n.y),s=_g(t.i,t.x,t.y),a=n.next,o=t.prev;return n.next=t,t.prev=n,e.next=a,a.prev=e,s.next=e,e.prev=s,o.next=s,s.prev=o,s}function Z1(n,t,e,s){const a=_g(n,t,e);return s?(a.next=s.next,a.prev=s,s.next.prev=a,s.next=a):(a.prev=a,a.next=a),a}function pc(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function _g(n,t,e){return{i:n,x:t,y:e,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function ZN(n,t,e,s){let a=0;for(let o=t,c=e-s;o<e;o+=s)a+=(n[c]-n[o])*(n[o+1]+n[c+1]),c=o;return a}const tI=J1.default||J1;var AE=(n=>(n[n.NONE=0]="NONE",n[n.COLOR=16384]="COLOR",n[n.STENCIL=1024]="STENCIL",n[n.DEPTH=256]="DEPTH",n[n.COLOR_DEPTH=16640]="COLOR_DEPTH",n[n.COLOR_STENCIL=17408]="COLOR_STENCIL",n[n.DEPTH_STENCIL=1280]="DEPTH_STENCIL",n[n.ALL=17664]="ALL",n))(AE||{});class eI{constructor(t){this.items=[],this._name=t}emit(t,e,s,a,o,c,u,d){const{name:h,items:p}=this;for(let y=0,x=p.length;y<x;y++)p[y][h](t,e,s,a,o,c,u,d);return this}add(t){return t[this._name]&&(this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return e!==-1&&this.items.splice(e,1),this}contains(t){return this.items.indexOf(t)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const nI=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],TE=class CE extends Ki{constructor(t){super(),this.tick=0,this.uid=on("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=t.type,this.name=t.name,this.config=t;const e=[...nI,...this.config.runners??[]];this._addRunners(...e),this._unsafeEvalCheck()}async init(t={}){const e=t.skipExtensionImports===!0?!0:t.manageImports===!1;await DN(e),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const s in this._systemsHash)t={...this._systemsHash[s].constructor.defaultOptions,...t};t={...CE.defaultOptions,...t},this._roundPixels=t.roundPixels?1:0;for(let s=0;s<this.runners.init.items.length;s++)await this.runners.init.items[s].init(t);this._initOptions=t}render(t,e){this.tick++;let s=t;if(s instanceof _i&&(s={container:s},e&&(ye(Qe,"passing a second argument is deprecated, please use render options instead"),s.target=e.renderTexture)),s.target||(s.target=this.view.renderTarget),s.target===this.view.renderTarget&&(this._lastObjectRendered=s.container,s.clearColor??(s.clearColor=this.background.colorRgba),s.clear??(s.clear=this.background.clearBeforeRender)),s.clearColor){const a=Array.isArray(s.clearColor)&&s.clearColor.length===4;s.clearColor=a?s.clearColor:An.shared.setValue(s.clearColor).toArray()}s.transform||(s.container.updateLocalTransform(),s.transform=s.container.localTransform),s.container.visible&&(s.container.enableRenderGroup(),this.runners.prerender.emit(s),this.runners.renderStart.emit(s),this.runners.render.emit(s),this.runners.renderEnd.emit(s),this.runners.postrender.emit(s))}resize(t,e,s){const a=this.view.resolution;this.view.resize(t,e,s),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),s!==void 0&&s!==a&&this.runners.resolutionChange.emit(s)}clear(t={}){const e=this;t.target||(t.target=e.renderTarget.renderTarget),t.clearColor||(t.clearColor=this.background.colorRgba),t.clear??(t.clear=AE.ALL);const{clear:s,clearColor:a,target:o}=t;An.shared.setValue(a??this.background.colorRgba),e.renderTarget.clear(o,s,An.shared.toArray())}get resolution(){return this.view.resolution}set resolution(t){this.view.resolution=t,this.runners.resolutionChange.emit(t)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...t){t.forEach(e=>{this.runners[e]=new eI(e)})}_addSystems(t){let e;for(e in t){const s=t[e];this._addSystem(s.value,s.name)}}_addSystem(t,e){const s=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=s,this._systemsHash[e]=s;for(const a in this.runners)this.runners[a].add(s);return this}_addPipes(t,e){const s=e.reduce((a,o)=>(a[o.name]=o.value,a),{});t.forEach(a=>{const o=a.value,c=a.name,u=s[c];this.renderPipes[c]=new o(this,u?new u:null),this.runners.destroy.add(this.renderPipes[c])})}destroy(t=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(t),(t===!0||typeof t=="object"&&t.releaseGlobalResources)&&Tc.release(),Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(t){return this.textureGenerator.generateTexture(t)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!BN())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};TE.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let RE=TE,uf;function iI(n){return uf!==void 0||(uf=(()=>{const t={stencil:!0,failIfMajorPerformanceCaveat:n??RE.defaultOptions.failIfMajorPerformanceCaveat};try{if(!Be.get().getWebGLRenderingContext())return!1;let s=Be.get().createCanvas().getContext("webgl",t);const a=!!s?.getContextAttributes()?.stencil;if(s){const o=s.getExtension("WEBGL_lose_context");o&&o.loseContext()}return s=null,a}catch{return!1}})()),uf}let ff;async function sI(n={}){return ff!==void 0||(ff=await(async()=>{const t=Be.get().getNavigator().gpu;if(!t)return!1;try{return await(await t.requestAdapter(n)).requestDevice(),!0}catch{return!1}})()),ff}const tS=["webgl","webgpu","canvas"];async function rI(n){let t=[];n.preference?(t.push(n.preference),tS.forEach(o=>{o!==n.preference&&t.push(o)})):t=tS.slice();let e,s={};for(let o=0;o<t.length;o++){const c=t[o];if(c==="webgpu"&&await sI()){const{WebGPURenderer:u}=await Ff(async()=>{const{WebGPURenderer:d}=await import("./WebGPURenderer-CQ6-Gc_v.js");return{WebGPURenderer:d}},__vite__mapDeps([3,2,4]));e=u,s={...n,...n.webgpu};break}else if(c==="webgl"&&iI(n.failIfMajorPerformanceCaveat??RE.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:u}=await Ff(async()=>{const{WebGLRenderer:d}=await import("./WebGLRenderer--c-WU2LZ.js");return{WebGLRenderer:d}},__vite__mapDeps([5,2,4]));e=u,s={...n,...n.webgl};break}else if(c==="canvas")throw s={...n},new Error("CanvasRenderer is not yet implemented")}if(delete s.webgpu,delete s.webgl,!e)throw new Error("No available renderer for the current environment");const a=new e;return await a.init(s),a}const jE="8.15.0";class ME{static init(){globalThis.__PIXI_APP_INIT__?.(this,jE)}static destroy(){}}ME.extension=Pt.Application;class aI{constructor(t){this._renderer=t}init(){globalThis.__PIXI_RENDERER_INIT__?.(this._renderer,jE)}destroy(){this._renderer=null}}aI.extension={type:[Pt.WebGLSystem,Pt.WebGPUSystem],name:"initHook",priority:-10};const kE=class wg{constructor(...t){this.stage=new _i,t[0]!==void 0&&ye(Qe,"Application constructor options are deprecated, please use Application.init() instead.")}async init(t){t={...t},this.stage||(this.stage=new _i),this.renderer=await rI(t),wg._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return ye(Qe,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(t=!1,e=!1){const s=wg._plugins.slice(0);s.reverse(),s.forEach(a=>{a.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};kE._plugins=[];let gd=kE;Pn.handleByList(Pt.Application,gd._plugins);Pn.add(ME);class OE extends Ki{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return ye(Qe,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return ye(Qe,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return ye(Qe,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return ye(Qe,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return ye(Qe,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners();for(const e in this.chars)this.chars[e].texture?.destroy();this.chars=null,t&&(this.pages.forEach(e=>e.texture.destroy(!0)),this.pages=null)}}class oI{constructor(t=0,e=0,s=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=t,this.resetTtl=s,this.size=0,this.ttl=e}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(t){if(this.has(t)){const e=this.items[t];delete this.items[t],this.size--,e.prev!==null&&(e.prev.next=e.next),e.next!==null&&(e.next.prev=e.prev),this.first===e&&(this.first=e.next),this.last===e&&(this.last=e.prev)}return this}entries(t=this.keys()){return t.map(e=>[e,this.get(e)])}evict(t=!1){if(t||this.size>0){const e=this.first;delete this.items[e.key],--this.size===0?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}return this}expiresAt(t){let e;return this.has(t)&&(e=this.items[t].expiry),e}get(t){const e=this.items[t];if(e!==void 0){if(this.ttl>0&&e.expiry<=Date.now()){this.delete(t);return}return this.moveToEnd(e),e.value}}has(t){return t in this.items}moveToEnd(t){this.last!==t&&(t.prev!==null&&(t.prev.next=t.next),t.next!==null&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),t.prev=this.last,t.next=null,this.last!==null&&(this.last.next=t),this.last=t,this.first===null&&(this.first=t))}keys(){const t=[];let e=this.first;for(;e!==null;)t.push(e.key),e=e.next;return t}setWithEvicted(t,e,s=this.resetTtl){let a=null;if(this.has(t))this.set(t,e,!0,s);else{this.max>0&&this.size===this.max&&(a={...this.first},this.evict(!0));let o=this.items[t]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:e};++this.size===1?this.first=o:this.last.next=o,this.last=o}return a}set(t,e,s=!1,a=this.resetTtl){let o=this.items[t];return s||o!==void 0?(o.value=e,s===!1&&a&&(o.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(o)):(this.max>0&&this.size===this.max&&this.evict(!0),o=this.items[t]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:e},++this.size===1?this.first=o:this.last.next=o,this.last=o),this}values(t=this.keys()){return t.map(e=>this.get(e))}}function NE(n=1e3,t=0,e=!1){if(isNaN(n)||n<0)throw new TypeError("Invalid max value");if(isNaN(t)||t<0)throw new TypeError("Invalid ttl value");if(typeof e!="boolean")throw new TypeError("Invalid resetTtl value");return new oI(n,t,e)}const lI=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function $f(n){const t=typeof n.fontSize=="number"?`${n.fontSize}px`:n.fontSize;let e=n.fontFamily;Array.isArray(n.fontFamily)||(e=n.fontFamily.split(","));for(let s=e.length-1;s>=0;s--){let a=e[s].trim();!/([\"\'])[^\'\"]+\1/.test(a)&&!lI.includes(a)&&(a=`"${a}"`),e[s]=a}return`${n.fontStyle} ${n.fontVariant} ${n.fontWeight} ${t} ${e.join(",")}`}const um={willReadFrequently:!0},Ji=class Bt{static get experimentalLetterSpacingSupported(){let t=Bt._experimentalLetterSpacingSupported;if(t===void 0){const e=Be.get().getCanvasRenderingContext2D().prototype;t=Bt._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,s,a,o,c,u,d,h){this.text=t,this.style=e,this.width=s,this.height=a,this.lines=o,this.lineWidths=c,this.lineHeight=u,this.maxLineWidth=d,this.fontProperties=h}static measureText(t=" ",e,s=Bt._canvas,a=e.wordWrap){const o=`${t}-${e.styleKey}-wordWrap-${a}`;if(Bt._measurementCache.has(o))return Bt._measurementCache.get(o);const c=$f(e),u=Bt.measureFont(c);u.fontSize===0&&(u.fontSize=e.fontSize,u.ascent=e.fontSize);const d=Bt.__context;d.font=c;const p=(a?Bt._wordWrap(t,e,s):t).split(/(?:\r\n|\r|\n)/),y=new Array(p.length);let x=0;for(let R=0;R<p.length;R++){const C=Bt._measureText(p[R],e.letterSpacing,d);y[R]=C,x=Math.max(x,C)}const v=e._stroke?.width||0;let S=x+v;e.dropShadow&&(S+=e.dropShadow.distance);const w=e.lineHeight||u.fontSize;let _=Math.max(w,u.fontSize+v)+(p.length-1)*(w+e.leading);e.dropShadow&&(_+=e.dropShadow.distance);const A=new Bt(t,e,S,_,p,y,w+e.leading,x,u);return Bt._measurementCache.set(o,A),A}static _measureText(t,e,s){let a=!1;Bt.experimentalLetterSpacingSupported&&(Bt.experimentalLetterSpacing?(s.letterSpacing=`${e}px`,s.textLetterSpacing=`${e}px`,a=!0):(s.letterSpacing="0px",s.textLetterSpacing="0px"));const o=s.measureText(t);let c=o.width;const u=-o.actualBoundingBoxLeft;let h=o.actualBoundingBoxRight-u;if(c>0)if(a)c-=e,h-=e;else{const p=(Bt.graphemeSegmenter(t).length-1)*e;c+=p,h+=p}return Math.max(c,h)}static _wordWrap(t,e,s=Bt._canvas){const a=s.getContext("2d",um);let o=0,c="",u="";const d=Object.create(null),{letterSpacing:h,whiteSpace:p}=e,y=Bt._collapseSpaces(p),x=Bt._collapseNewlines(p);let v=!y;const S=e.wordWrapWidth+h,w=Bt._tokenize(t);for(let _=0;_<w.length;_++){let A=w[_];if(Bt._isNewline(A)){if(!x){u+=Bt._addLine(c),v=!y,c="",o=0;continue}A=" "}if(y){const C=Bt.isBreakingSpace(A),j=Bt.isBreakingSpace(c[c.length-1]);if(C&&j)continue}const R=Bt._getFromCache(A,h,d,a);if(R>S)if(c!==""&&(u+=Bt._addLine(c),c="",o=0),Bt.canBreakWords(A,e.breakWords)){const C=Bt.wordWrapSplit(A);for(let j=0;j<C.length;j++){let k=C[j],I=k,N=1;for(;C[j+N];){const H=C[j+N];if(!Bt.canBreakChars(I,H,A,j,e.breakWords))k+=H;else break;I=H,N++}j+=N-1;const L=Bt._getFromCache(k,h,d,a);L+o>S&&(u+=Bt._addLine(c),v=!1,c="",o=0),c+=k,o+=L}}else{c.length>0&&(u+=Bt._addLine(c),c="",o=0);const C=_===w.length-1;u+=Bt._addLine(A,!C),v=!1,c="",o=0}else R+o>S&&(v=!1,u+=Bt._addLine(c),c="",o=0),(c.length>0||!Bt.isBreakingSpace(A)||v)&&(c+=A,o+=R)}return u+=Bt._addLine(c,!1),u}static _addLine(t,e=!0){return t=Bt._trimRight(t),t=e?`${t}
`:t,t}static _getFromCache(t,e,s,a){let o=s[t];return typeof o!="number"&&(o=Bt._measureText(t,e,a)+e,s[t]=o),o}static _collapseSpaces(t){return t==="normal"||t==="pre-line"}static _collapseNewlines(t){return t==="normal"}static _trimRight(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;e--){const s=t[e];if(!Bt.isBreakingSpace(s))break;t=t.slice(0,-1)}return t}static _isNewline(t){return typeof t!="string"?!1:Bt._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return typeof t!="string"?!1:Bt._breakingSpaces.includes(t.charCodeAt(0))}static _tokenize(t){const e=[];let s="";if(typeof t!="string")return e;for(let a=0;a<t.length;a++){const o=t[a],c=t[a+1];if(Bt.isBreakingSpace(o,c)||Bt._isNewline(o)){s!==""&&(e.push(s),s=""),o==="\r"&&c===`
`?(e.push(`\r
`),a++):e.push(o);continue}s+=o}return s!==""&&e.push(s),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,s,a,o){return!0}static wordWrapSplit(t){return Bt.graphemeSegmenter(t)}static measureFont(t){if(Bt._fonts[t])return Bt._fonts[t];const e=Bt._context;e.font=t;const s=e.measureText(Bt.METRICS_STRING+Bt.BASELINE_SYMBOL),a={ascent:s.actualBoundingBoxAscent,descent:s.actualBoundingBoxDescent,fontSize:s.actualBoundingBoxAscent+s.actualBoundingBoxDescent};return Bt._fonts[t]=a,a}static clearMetrics(t=""){t?delete Bt._fonts[t]:Bt._fonts={}}static get _canvas(){if(!Bt.__canvas){let t;try{const e=new OffscreenCanvas(0,0);if(e.getContext("2d",um)?.measureText)return Bt.__canvas=e,e;t=Be.get().createCanvas()}catch{t=Be.get().createCanvas()}t.width=t.height=10,Bt.__canvas=t}return Bt.__canvas}static get _context(){return Bt.__context||(Bt.__context=Bt._canvas.getContext("2d",um)),Bt.__context}};Ji.METRICS_STRING="|q";Ji.BASELINE_SYMBOL="M";Ji.BASELINE_MULTIPLIER=1.4;Ji.HEIGHT_MULTIPLIER=2;Ji.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){const n=new Intl.Segmenter;return t=>{const e=n.segment(t),s=[];let a=0;for(const o of e)s[a++]=o.segment;return s}}return n=>[...n]})();Ji.experimentalLetterSpacing=!1;Ji._fonts={};Ji._newlines=[10,13];Ji._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];Ji._measurementCache=NE(1e3);let ds=Ji;const eS=[{offset:0,color:"white"},{offset:1,color:"black"}],c0=class Eg{constructor(...t){this.uid=on("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let e=cI(t);e={...e.type==="radial"?Eg.defaultRadialOptions:Eg.defaultLinearOptions,...B2(e)},this._textureSize=e.textureSize,this._wrapMode=e.wrapMode,e.type==="radial"?(this.center=e.center,this.outerCenter=e.outerCenter??this.center,this.innerRadius=e.innerRadius,this.outerRadius=e.outerRadius,this.scale=e.scale,this.rotation=e.rotation):(this.start=e.start,this.end=e.end),this.textureSpace=e.textureSpace,this.type=e.type,e.colorStops.forEach(a=>{this.addColorStop(a.offset,a.color)})}addColorStop(t,e){return this.colorStops.push({offset:t,color:An.shared.setValue(e).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:t,y:e}=this.start,{x:s,y:a}=this.end,o=s-t,c=a-e;const u=o<0||c<0;if(this._wrapMode==="clamp-to-edge"){if(o<0){const _=t;t=s,s=_,o*=-1}if(c<0){const _=e;e=a,a=_,c*=-1}}const d=this.colorStops.length?this.colorStops:eS,h=this._textureSize,{canvas:p,context:y}=iS(h,1),x=u?y.createLinearGradient(this._textureSize,0,0,0):y.createLinearGradient(0,0,this._textureSize,0);nS(x,d),y.fillStyle=x,y.fillRect(0,0,h,1),this.texture=new Wt({source:new Sa({resource:p,addressMode:this._wrapMode})});const v=Math.sqrt(o*o+c*c),S=Math.atan2(c,o),w=new ue;w.scale(v/h,1),w.rotate(S),w.translate(t,e),this.textureSpace==="local"&&w.scale(h,h),this.transform=w}buildGradient(){this.texture||this._tick++,this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const t=this.colorStops.length?this.colorStops:eS,e=this._textureSize,{canvas:s,context:a}=iS(e,e),{x:o,y:c}=this.center,{x:u,y:d}=this.outerCenter,h=this.innerRadius,p=this.outerRadius,y=u-p,x=d-p,v=e/(p*2),S=(o-y)*v,w=(c-x)*v,_=a.createRadialGradient(S,w,h*v,(u-y)*v,(d-x)*v,p*v);nS(_,t),a.fillStyle=t[t.length-1].color,a.fillRect(0,0,e,e),a.fillStyle=_,a.translate(S,w),a.rotate(this.rotation),a.scale(1,this.scale),a.translate(-S,-w),a.fillRect(0,0,e,e),this.texture=new Wt({source:new Sa({resource:s,addressMode:this._wrapMode})});const A=new ue;A.scale(1/v,1/v),A.translate(y,x),this.textureSpace==="local"&&A.scale(e,e),this.transform=A}destroy(){this.texture?.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}};c0.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};c0.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let Vs=c0;function nS(n,t){for(let e=0;e<t.length;e++){const s=t[e];n.addColorStop(s.offset,s.color)}}function iS(n,t){const e=Be.get().createCanvas(n,t),s=e.getContext("2d");return{canvas:e,context:s}}function cI(n){let t=n[0]??{};return(typeof t=="number"||n[1])&&(ye("8.5.2","use options object instead"),t={type:"linear",start:{x:n[0],y:n[1]},end:{x:n[2],y:n[3]},textureSpace:n[4],textureSize:n[5]??Vs.defaultLinearOptions.textureSize}),t}const sS={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class yd{constructor(t,e){this.uid=on("fillPattern"),this._tick=0,this.transform=new ue,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),e&&(t.source.style.addressModeU=sS[e].addressModeU,t.source.style.addressModeV=sS[e].addressModeV)}setTransform(t){const e=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/e.frame.width,1/e.frame.height),this._tick++}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture=t,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}var fm,rS;function uI(){if(rS)return fm;rS=1,fm=e;var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function e(o){var c=[];return o.replace(t,function(u,d,h){var p=d.toLowerCase();for(h=a(h),p=="m"&&h.length>2&&(c.push([d].concat(h.splice(0,2))),p="l",d=d=="m"?"l":"L");;){if(h.length==n[p])return h.unshift(d),c.push(h);if(h.length<n[p])throw new Error("malformed path data");c.push([d].concat(h.splice(0,n[p])))}}),c}var s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function a(o){var c=o.match(s);return c?c.map(Number):[]}return fm}var fI=uI();const dI=Kf(fI);function hI(n,t){const e=dI(n),s=[];let a=null,o=0,c=0;for(let u=0;u<e.length;u++){const d=e[u],h=d[0],p=d;switch(h){case"M":o=p[1],c=p[2],t.moveTo(o,c);break;case"m":o+=p[1],c+=p[2],t.moveTo(o,c);break;case"H":o=p[1],t.lineTo(o,c);break;case"h":o+=p[1],t.lineTo(o,c);break;case"V":c=p[1],t.lineTo(o,c);break;case"v":c+=p[1],t.lineTo(o,c);break;case"L":o=p[1],c=p[2],t.lineTo(o,c);break;case"l":o+=p[1],c+=p[2],t.lineTo(o,c);break;case"C":o=p[5],c=p[6],t.bezierCurveTo(p[1],p[2],p[3],p[4],o,c);break;case"c":t.bezierCurveTo(o+p[1],c+p[2],o+p[3],c+p[4],o+p[5],c+p[6]),o+=p[5],c+=p[6];break;case"S":o=p[3],c=p[4],t.bezierCurveToShort(p[1],p[2],o,c);break;case"s":t.bezierCurveToShort(o+p[1],c+p[2],o+p[3],c+p[4]),o+=p[3],c+=p[4];break;case"Q":o=p[3],c=p[4],t.quadraticCurveTo(p[1],p[2],o,c);break;case"q":t.quadraticCurveTo(o+p[1],c+p[2],o+p[3],c+p[4]),o+=p[3],c+=p[4];break;case"T":o=p[1],c=p[2],t.quadraticCurveToShort(o,c);break;case"t":o+=p[1],c+=p[2],t.quadraticCurveToShort(o,c);break;case"A":o=p[6],c=p[7],t.arcToSvg(p[1],p[2],p[3],p[4],p[5],o,c);break;case"a":o+=p[6],c+=p[7],t.arcToSvg(p[1],p[2],p[3],p[4],p[5],o,c);break;case"Z":case"z":t.closePath(),s.length>0&&(a=s.pop(),a?(o=a.startX,c=a.startY):(o=0,c=0)),a=null;break;default:Ve(`Unknown SVG path command: ${h}`)}h!=="Z"&&h!=="z"&&a===null&&(a={startX:o,startY:c},s.push(a))}return t}class u0{constructor(t=0,e=0,s=0){this.type="circle",this.x=t,this.y=e,this.radius=s}clone(){return new u0(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const s=this.radius*this.radius;let a=this.x-t,o=this.y-e;return a*=a,o*=o,a+o<=s}strokeContains(t,e,s,a=.5){if(this.radius===0)return!1;const o=this.x-t,c=this.y-e,u=this.radius,d=(1-a)*s,h=Math.sqrt(o*o+c*c);return h<=u+d&&h>u-(s-d)}getBounds(t){return t||(t=new Je),t.x=this.x-this.radius,t.y=this.y-this.radius,t.width=this.radius*2,t.height=this.radius*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class f0{constructor(t=0,e=0,s=0,a=0){this.type="ellipse",this.x=t,this.y=e,this.halfWidth=s,this.halfHeight=a}clone(){return new f0(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,e){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let s=(t-this.x)/this.halfWidth,a=(e-this.y)/this.halfHeight;return s*=s,a*=a,s+a<=1}strokeContains(t,e,s,a=.5){const{halfWidth:o,halfHeight:c}=this;if(o<=0||c<=0)return!1;const u=s*(1-a),d=s-u,h=o-d,p=c-d,y=o+u,x=c+u,v=t-this.x,S=e-this.y,w=v*v/(h*h)+S*S/(p*p),_=v*v/(y*y)+S*S/(x*x);return w>1&&_<=1}getBounds(t){return t||(t=new Je),t.x=this.x-this.halfWidth,t.y=this.y-this.halfHeight,t.width=this.halfWidth*2,t.height=this.halfHeight*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function pI(n,t,e,s,a,o){const c=n-e,u=t-s,d=a-e,h=o-s,p=c*d+u*h,y=d*d+h*h;let x=-1;y!==0&&(x=p/y);let v,S;x<0?(v=e,S=s):x>1?(v=a,S=o):(v=e+x*d,S=s+x*h);const w=n-v,_=t-S;return w*w+_*_}let mI,gI;class nc{constructor(...t){this.type="polygon";let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){const s=[];for(let a=0,o=e.length;a<o;a++)s.push(e[a].x,e[a].y);e=s}this.points=e,this.closePath=!0}isClockwise(){let t=0;const e=this.points,s=e.length;for(let a=0;a<s;a+=2){const o=e[a],c=e[a+1],u=e[(a+2)%s],d=e[(a+3)%s];t+=(u-o)*(d+c)}return t<0}containsPolygon(t){const e=this.getBounds(mI),s=t.getBounds(gI);if(!e.containsRect(s))return!1;const a=t.points;for(let o=0;o<a.length;o+=2){const c=a[o],u=a[o+1];if(!this.contains(c,u))return!1}return!0}clone(){const t=this.points.slice(),e=new nc(t);return e.closePath=this.closePath,e}contains(t,e){let s=!1;const a=this.points.length/2;for(let o=0,c=a-1;o<a;c=o++){const u=this.points[o*2],d=this.points[o*2+1],h=this.points[c*2],p=this.points[c*2+1];d>e!=p>e&&t<(h-u)*((e-d)/(p-d))+u&&(s=!s)}return s}strokeContains(t,e,s,a=.5){const o=s*s,c=o*(1-a),u=o-c,{points:d}=this,h=d.length-(this.closePath?0:2);for(let p=0;p<h;p+=2){const y=d[p],x=d[p+1],v=d[(p+2)%d.length],S=d[(p+3)%d.length],w=pI(t,e,y,x,v,S),_=Math.sign((v-y)*(e-x)-(S-x)*(t-y));if(w<=(_<0?u:c))return!0}return!1}getBounds(t){t||(t=new Je);const e=this.points;let s=1/0,a=-1/0,o=1/0,c=-1/0;for(let u=0,d=e.length;u<d;u+=2){const h=e[u],p=e[u+1];s=h<s?h:s,a=h>a?h:a,o=p<o?p:o,c=p>c?p:c}return t.x=s,t.width=a-s,t.y=o,t.height=c-o,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return ye("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return ye("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}const df=(n,t,e,s,a,o,c)=>{const u=n-e,d=t-s,h=Math.sqrt(u*u+d*d);return h>=a-o&&h<=a+c};class d0{constructor(t=0,e=0,s=0,a=0,o=20){this.type="roundedRectangle",this.x=t,this.y=e,this.width=s,this.height=a,this.radius=o}getBounds(t){return t||(t=new Je),t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new d0(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+s&&e<=this.y+this.height-s||t>=this.x+s&&t<=this.x+this.width-s)return!0;let a=t-(this.x+s),o=e-(this.y+s);const c=s*s;if(a*a+o*o<=c||(a=t-(this.x+this.width-s),a*a+o*o<=c)||(o=e-(this.y+this.height-s),a*a+o*o<=c)||(a=t-(this.x+s),a*a+o*o<=c))return!0}return!1}strokeContains(t,e,s,a=.5){const{x:o,y:c,width:u,height:d,radius:h}=this,p=s*(1-a),y=s-p,x=o+h,v=c+h,S=u-h*2,w=d-h*2,_=o+u,A=c+d;return(t>=o-p&&t<=o+y||t>=_-y&&t<=_+p)&&e>=v&&e<=v+w||(e>=c-p&&e<=c+y||e>=A-y&&e<=A+p)&&t>=x&&t<=x+S?!0:t<x&&e<v&&df(t,e,x,v,h,y,p)||t>_-h&&e<v&&df(t,e,_-h,v,h,y,p)||t>_-h&&e>A-h&&df(t,e,_-h,A-h,h,y,p)||t<x&&e>A-h&&df(t,e,x,A-h,h,y,p)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const IE={};function yI(n,t,e){let s=2166136261;for(let a=0;a<t;a++)s^=n[a].uid,s=Math.imul(s,16777619),s>>>=0;return IE[s]||bI(n,t,s,e)}function bI(n,t,e,s){const a={};let o=0;for(let u=0;u<s;u++){const d=u<t?n[u]:Wt.EMPTY.source;a[o++]=d.source,a[o++]=d.style}const c=new Nf(a);return IE[e]=c,c}class aS{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this.uint32View=null,this.float32View=null,this.uint16View=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._int32View=null,this._float64Array=null,this._bigUint64Array=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}function oS(n,t){const e=n.byteLength/8|0,s=new Float64Array(n,0,e);new Float64Array(t,0,e).set(s);const o=n.byteLength-e*8;if(o>0){const c=new Uint8Array(n,e*8,o);new Uint8Array(t,e*8,o).set(c)}}const xI={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var vI=(n=>(n[n.DISABLED=0]="DISABLED",n[n.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",n[n.MASK_ACTIVE=2]="MASK_ACTIVE",n[n.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",n[n.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",n[n.NONE=5]="NONE",n))(vI||{});function lS(n,t){return t.alphaMode==="no-premultiply-alpha"&&xI[n]||n}const SI=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function _I(n){let t="";for(let e=0;e<n;++e)e>0&&(t+=`
else `),e<n-1&&(t+=`if(test == ${e}.0){}`);return t}function wI(n,t){if(n===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const e=t.createShader(t.FRAGMENT_SHADER);try{for(;;){const s=SI.replace(/%forloop%/gi,_I(n));if(t.shaderSource(e,s),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))n=n/2|0;else break}}finally{t.deleteShader(e)}return n}let ao=null;function EI(){if(ao)return ao;const n=hE();return ao=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),ao=wI(ao,n),n.getExtension("WEBGL_lose_context")?.loseContext(),ao}class AI{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let t=0;t<this.count;t++){const e=this.textures[t];this.textures[t]=null,this.ids[e.uid]=null}this.count=0}}class TI{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new AI,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const ic=[];let Vf=0;Tc.register({clear:()=>{if(ic.length>0)for(const n of ic)n&&n.destroy();ic.length=0,Vf=0}});function cS(){return Vf>0?ic[--Vf]:new TI}function uS(n){ic[Vf++]=n}let Dl=0;const LE=class DE{constructor(t){this.uid=on("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],t={...DE.defaultOptions,...t},t.maxTextures||(ye("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),t.maxTextures=EI());const{maxTextures:e,attributesInitialSize:s,indicesInitialSize:a}=t;this.attributeBuffer=new aS(s*4),this.indexBuffer=new Uint16Array(a),this.maxTextures=e}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let t=0;t<this.batchIndex;t++)uS(this.batches[t]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(t){this._elements[this.elementSize++]=t,t._indexStart=this.indexSize,t._attributeStart=this.attributeSize,t._batcher=this,this.indexSize+=t.indexSize,this.attributeSize+=t.attributeSize*this.vertexSize}checkAndUpdateTexture(t,e){const s=t._batch.textures.ids[e._source.uid];return!s&&s!==0?!1:(t._textureId=s,t.texture=e,!0)}updateElement(t){this.dirty=!0;const e=this.attributeBuffer;t.packAsQuad?this.packQuadAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId):this.packAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId)}break(t){const e=this._elements;if(!e[this.elementStart])return;let s=cS(),a=s.textures;a.clear();const o=e[this.elementStart];let c=lS(o.blendMode,o.texture._source),u=o.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const d=this.attributeBuffer.float32View,h=this.attributeBuffer.uint32View,p=this.indexBuffer;let y=this._batchIndexSize,x=this._batchIndexStart,v="startBatch";const S=this.maxTextures;for(let w=this.elementStart;w<this.elementSize;++w){const _=e[w];e[w]=null;const R=_.texture._source,C=lS(_.blendMode,R),j=c!==C||u!==_.topology;if(R._batchTick===Dl&&!j){_._textureId=R._textureBindLocation,y+=_.indexSize,_.packAsQuad?(this.packQuadAttributes(_,d,h,_._attributeStart,_._textureId),this.packQuadIndex(p,_._indexStart,_._attributeStart/this.vertexSize)):(this.packAttributes(_,d,h,_._attributeStart,_._textureId),this.packIndex(_,p,_._indexStart,_._attributeStart/this.vertexSize)),_._batch=s;continue}R._batchTick=Dl,(a.count>=S||j)&&(this._finishBatch(s,x,y-x,a,c,u,t,v),v="renderBatch",x=y,c=C,u=_.topology,s=cS(),a=s.textures,a.clear(),++Dl),_._textureId=R._textureBindLocation=a.count,a.ids[R.uid]=a.count,a.textures[a.count++]=R,_._batch=s,y+=_.indexSize,_.packAsQuad?(this.packQuadAttributes(_,d,h,_._attributeStart,_._textureId),this.packQuadIndex(p,_._indexStart,_._attributeStart/this.vertexSize)):(this.packAttributes(_,d,h,_._attributeStart,_._textureId),this.packIndex(_,p,_._indexStart,_._attributeStart/this.vertexSize))}a.count>0&&(this._finishBatch(s,x,y-x,a,c,u,t,v),x=y,++Dl),this.elementStart=this.elementSize,this._batchIndexStart=x,this._batchIndexSize=y}_finishBatch(t,e,s,a,o,c,u,d){t.gpuBindGroup=null,t.bindGroup=null,t.action=d,t.batcher=this,t.textures=a,t.blendMode=o,t.topology=c,t.start=e,t.size=s,++Dl,this.batches[this.batchIndex++]=t,u.add(t)}finish(t){this.break(t)}ensureAttributeBuffer(t){t*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(t*4)}ensureIndexBuffer(t){t<=this.indexBuffer.length||this._resizeIndexBuffer(t)}_resizeAttributeBuffer(t){const e=Math.max(t,this.attributeBuffer.size*2),s=new aS(e);oS(this.attributeBuffer.rawBinaryData,s.rawBinaryData),this.attributeBuffer=s}_resizeIndexBuffer(t){const e=this.indexBuffer;let s=Math.max(t,e.length*1.5);s+=s%2;const a=s>65535?new Uint32Array(s):new Uint16Array(s);if(a.BYTES_PER_ELEMENT!==e.BYTES_PER_ELEMENT)for(let o=0;o<e.length;o++)a[o]=e[o];else oS(e.buffer,a.buffer);this.indexBuffer=a}packQuadIndex(t,e,s){t[e]=s+0,t[e+1]=s+1,t[e+2]=s+2,t[e+3]=s+0,t[e+4]=s+2,t[e+5]=s+3}packIndex(t,e,s,a){const o=t.indices,c=t.indexSize,u=t.indexOffset,d=t.attributeOffset;for(let h=0;h<c;h++)e[s++]=a+o[h+u]-d}destroy(t={}){if(this.batches!==null){for(let e=0;e<this.batchIndex;e++)uS(this.batches[e]);this.batches=null,this.geometry.destroy(!0),this.geometry=null,t.shader&&(this.shader?.destroy(),this.shader=null);for(let e=0;e<this._elements.length;e++)this._elements[e]&&(this._elements[e]._batch=null);this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}};LE.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let CI=LE;var wn=(n=>(n[n.MAP_READ=1]="MAP_READ",n[n.MAP_WRITE=2]="MAP_WRITE",n[n.COPY_SRC=4]="COPY_SRC",n[n.COPY_DST=8]="COPY_DST",n[n.INDEX=16]="INDEX",n[n.VERTEX=32]="VERTEX",n[n.UNIFORM=64]="UNIFORM",n[n.STORAGE=128]="STORAGE",n[n.INDIRECT=256]="INDIRECT",n[n.QUERY_RESOLVE=512]="QUERY_RESOLVE",n[n.STATIC=1024]="STATIC",n))(wn||{});let Mr=class extends Ki{constructor(t){let{data:e,size:s}=t;const{usage:a,label:o,shrinkToFit:c}=t;super(),this._gpuData=Object.create(null),this._gcLastUsed=-1,this.autoGarbageCollect=!0,this.uid=on("buffer"),this._resourceType="buffer",this._resourceId=on("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,e instanceof Array&&(e=new Float32Array(e)),this._data=e,s??(s=e?.byteLength);const u=!!e;this.descriptor={size:s,usage:a,mappedAtCreation:u,label:o},this.shrinkToFit=c??!0}get data(){return this._data}set data(t){this.setDataWithSize(t,t.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&wn.STATIC)}set static(t){t?this.descriptor.usage|=wn.STATIC:this.descriptor.usage&=~wn.STATIC}setDataWithSize(t,e,s){if(this._updateID++,this._updateSize=e*t.BYTES_PER_ELEMENT,this._data===t){s&&this.emit("update",this);return}const a=this._data;if(this._data=t,this._dataInt32=null,!a||a.length!==t.length){!this.shrinkToFit&&a&&t.byteLength<a.byteLength?s&&this.emit("update",this):(this.descriptor.size=t.byteLength,this._resourceId=on("resource"),this.emit("change",this));return}s&&this.emit("update",this)}update(t){this._updateSize=t??this._updateSize,this._updateID++,this.emit("update",this)}unload(){this.emit("unload",this);for(const t in this._gpuData)this._gpuData[t]?.destroy();this._gpuData=Object.create(null)}destroy(){this.destroyed=!0,this.unload(),this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}};function BE(n,t){if(!(n instanceof Mr)){let e=t?wn.INDEX:wn.VERTEX;n instanceof Array&&(t?(n=new Uint32Array(n),e=wn.INDEX|wn.COPY_DST):(n=new Float32Array(n),e=wn.VERTEX|wn.COPY_DST)),n=new Mr({data:n,label:t?"index-mesh-buffer":"vertex-mesh-buffer",usage:e})}return n}function RI(n,t,e){const s=n.getAttribute(t);if(!s)return e.minX=0,e.minY=0,e.maxX=0,e.maxY=0,e;const a=s.buffer.data;let o=1/0,c=1/0,u=-1/0,d=-1/0;const h=a.BYTES_PER_ELEMENT,p=(s.offset||0)/h,y=(s.stride||8)/h;for(let x=p;x<a.length;x+=y){const v=a[x],S=a[x+1];v>u&&(u=v),S>d&&(d=S),v<o&&(o=v),S<c&&(c=S)}return e.minX=o,e.minY=c,e.maxX=u,e.maxY=d,e}function jI(n){return(n instanceof Mr||Array.isArray(n)||n.BYTES_PER_ELEMENT)&&(n={buffer:n}),n.buffer=BE(n.buffer,!1),n}class Cc extends Ki{constructor(t={}){super(),this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this.uid=on("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new Xi,this._boundsDirty=!0;const{attributes:e,indexBuffer:s,topology:a}=t;if(this.buffers=[],this.attributes={},e)for(const o in e)this.addAttribute(o,e[o]);this.instanceCount=t.instanceCount??1,s&&this.addIndex(s),this.topology=a||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(t){return this.attributes[t]}getIndex(){return this.indexBuffer}getBuffer(t){return this.getAttribute(t).buffer}getSize(){for(const t in this.attributes){const e=this.attributes[t];return e.buffer.data.length/(e.stride/4||e.size)}return 0}addAttribute(t,e){const s=jI(e);this.buffers.indexOf(s.buffer)===-1&&(this.buffers.push(s.buffer),s.buffer.on("update",this.onBufferUpdate,this),s.buffer.on("change",this.onBufferUpdate,this)),this.attributes[t]=s}addIndex(t){this.indexBuffer=BE(t,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,RI(this,"aPosition",this._bounds)):this._bounds}unload(){this.emit("unload",this);for(const t in this._gpuData)this._gpuData[t]?.destroy();this._gpuData=Object.create(null)}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners(),t&&this.buffers.forEach(e=>e.destroy()),this.unload(),this.indexBuffer?.destroy(),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const MI=new Float32Array(1),kI=new Uint32Array(1);class OI extends Cc{constructor(){const e=new Mr({data:MI,label:"attribute-batch-buffer",usage:wn.VERTEX|wn.COPY_DST,shrinkToFit:!1}),s=new Mr({data:kI,label:"index-batch-buffer",usage:wn.INDEX|wn.COPY_DST,shrinkToFit:!1}),a=24;super({attributes:{aPosition:{buffer:e,format:"float32x2",stride:a,offset:0},aUV:{buffer:e,format:"float32x2",stride:a,offset:8},aColor:{buffer:e,format:"unorm8x4",stride:a,offset:16},aTextureIdAndRound:{buffer:e,format:"uint16x2",stride:a,offset:20}},indexBuffer:s})}}function fS(n,t,e){if(n)for(const s in n){const a=s.toLocaleLowerCase(),o=t[a];if(o){let c=n[s];s==="header"&&(c=c.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),e&&o.push(`//----${e}----//`),o.push(c)}else Ve(`${s} placement hook does not exist in shader`)}}const NI=/\{\{(.*?)\}\}/g;function dS(n){const t={};return(n.match(NI)?.map(s=>s.replace(/[{()}]/g,""))??[]).forEach(s=>{t[s]=[]}),t}function hS(n,t){let e;const s=/@in\s+([^;]+);/g;for(;(e=s.exec(n))!==null;)t.push(e[1])}function pS(n,t,e=!1){const s=[];hS(t,s),n.forEach(u=>{u.header&&hS(u.header,s)});const a=s;e&&a.sort();const o=a.map((u,d)=>`       @location(${d}) ${u},`).join(`
`);let c=t.replace(/@in\s+[^;]+;\s*/g,"");return c=c.replace("{{in}}",`
${o}
`),c}function mS(n,t){let e;const s=/@out\s+([^;]+);/g;for(;(e=s.exec(n))!==null;)t.push(e[1])}function II(n){const e=/\b(\w+)\s*:/g.exec(n);return e?e[1]:""}function LI(n){const t=/@.*?\s+/g;return n.replace(t,"")}function DI(n,t){const e=[];mS(t,e),n.forEach(d=>{d.header&&mS(d.header,e)});let s=0;const a=e.sort().map(d=>d.indexOf("builtin")>-1?d:`@location(${s++}) ${d}`).join(`,
`),o=e.sort().map(d=>`       var ${LI(d)};`).join(`
`),c=`return VSOutput(
            ${e.sort().map(d=>` ${II(d)}`).join(`,
`)});`;let u=t.replace(/@out\s+[^;]+;\s*/g,"");return u=u.replace("{{struct}}",`
${a}
`),u=u.replace("{{start}}",`
${o}
`),u=u.replace("{{return}}",`
${c}
`),u}function gS(n,t){let e=n;for(const s in t){const a=t[s];a.join(`
`).length?e=e.replace(`{{${s}}}`,`//-----${s} START-----//
${a.join(`
`)}
//----${s} FINISH----//`):e=e.replace(`{{${s}}}`,"")}return e}const Cr=Object.create(null),dm=new Map;let BI=0;function UI({template:n,bits:t}){const e=UE(n,t);if(Cr[e])return Cr[e];const{vertex:s,fragment:a}=PI(n,t);return Cr[e]=zE(s,a,t),Cr[e]}function zI({template:n,bits:t}){const e=UE(n,t);return Cr[e]||(Cr[e]=zE(n.vertex,n.fragment,t)),Cr[e]}function PI(n,t){const e=t.map(c=>c.vertex).filter(c=>!!c),s=t.map(c=>c.fragment).filter(c=>!!c);let a=pS(e,n.vertex,!0);a=DI(e,a);const o=pS(s,n.fragment,!0);return{vertex:a,fragment:o}}function UE(n,t){return t.map(e=>(dm.has(e)||dm.set(e,BI++),dm.get(e))).sort((e,s)=>e-s).join("-")+n.vertex+n.fragment}function zE(n,t,e){const s=dS(n),a=dS(t);return e.forEach(o=>{fS(o.vertex,s,o.name),fS(o.fragment,a,o.name)}),{vertex:gS(n,s),fragment:gS(t,a)}}const HI=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,FI=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,GI=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,$I=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,VI={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},WI={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function YI({bits:n,name:t}){const e=UI({template:{fragment:FI,vertex:HI},bits:[VI,...n]});return md.from({name:t,vertex:{source:e.vertex,entryPoint:"main"},fragment:{source:e.fragment,entryPoint:"main"}})}function XI({bits:n,name:t}){return new mE({name:t,...zI({template:{vertex:GI,fragment:$I},bits:[WI,...n]})})}const qI={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},KI={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},hm={};function QI(n){const t=[];if(n===1)t.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),t.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let e=0;for(let s=0;s<n;s++)t.push(`@group(1) @binding(${e++}) var textureSource${s+1}: texture_2d<f32>;`),t.push(`@group(1) @binding(${e++}) var textureSampler${s+1}: sampler;`)}return t.join(`
`)}function JI(n){const t=[];if(n===1)t.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{t.push("switch vTextureId {");for(let e=0;e<n;e++)e===n-1?t.push("  default:{"):t.push(`  case ${e}:{`),t.push(`      outColor = textureSampleGrad(textureSource${e+1}, textureSampler${e+1}, vUV, uvDx, uvDy);`),t.push("      break;}");t.push("}")}return t.join(`
`)}function ZI(n){return hm[n]||(hm[n]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${QI(n)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${JI(n)}
            `}}),hm[n]}const pm={};function t6(n){const t=[];for(let e=0;e<n;e++)e>0&&t.push("else"),e<n-1&&t.push(`if(vTextureId < ${e}.5)`),t.push("{"),t.push(`	outColor = texture(uTextures[${e}], vUV);`),t.push("}");return t.join(`
`)}function e6(n){return pm[n]||(pm[n]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${n}];

            `,main:`

                ${t6(n)}
            `}}),pm[n]}const n6={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},i6={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},yS={};function s6(n){let t=yS[n];if(t)return t;const e=new Int32Array(n);for(let s=0;s<n;s++)e[s]=s;return t=yS[n]=new xE({uTextures:{value:e,type:"i32",size:n}},{isStatic:!0}),t}class bS extends l0{constructor(t){const e=XI({name:"batch",bits:[KI,e6(t),i6]}),s=YI({name:"batch",bits:[qI,ZI(t),n6]});super({glProgram:e,gpuProgram:s,resources:{batchSamplers:s6(t)}}),this.maxTextures=t}}let Bl=null;const PE=class HE extends CI{constructor(t){super(t),this.geometry=new OI,this.name=HE.extension.name,this.vertexSize=6,Bl??(Bl=new bS(t.maxTextures)),this.shader=Bl}packAttributes(t,e,s,a,o){const c=o<<16|t.roundPixels&65535,u=t.transform,d=u.a,h=u.b,p=u.c,y=u.d,x=u.tx,v=u.ty,{positions:S,uvs:w}=t,_=t.color,A=t.attributeOffset,R=A+t.attributeSize;for(let C=A;C<R;C++){const j=C*2,k=S[j],I=S[j+1];e[a++]=d*k+p*I+x,e[a++]=y*I+h*k+v,e[a++]=w[j],e[a++]=w[j+1],s[a++]=_,s[a++]=c}}packQuadAttributes(t,e,s,a,o){const c=t.texture,u=t.transform,d=u.a,h=u.b,p=u.c,y=u.d,x=u.tx,v=u.ty,S=t.bounds,w=S.maxX,_=S.minX,A=S.maxY,R=S.minY,C=c.uvs,j=t.color,k=o<<16|t.roundPixels&65535;e[a+0]=d*_+p*R+x,e[a+1]=y*R+h*_+v,e[a+2]=C.x0,e[a+3]=C.y0,s[a+4]=j,s[a+5]=k,e[a+6]=d*w+p*R+x,e[a+7]=y*R+h*w+v,e[a+8]=C.x1,e[a+9]=C.y1,s[a+10]=j,s[a+11]=k,e[a+12]=d*w+p*A+x,e[a+13]=y*A+h*w+v,e[a+14]=C.x2,e[a+15]=C.y2,s[a+16]=j,s[a+17]=k,e[a+18]=d*_+p*A+x,e[a+19]=y*A+h*_+v,e[a+20]=C.x3,e[a+21]=C.y3,s[a+22]=j,s[a+23]=k}_updateMaxTextures(t){this.shader.maxTextures!==t&&(Bl=new bS(t),this.shader=Bl)}destroy(){this.shader=null,super.destroy()}};PE.extension={type:[Pt.Batcher],name:"default"};let r6=PE;class a6{constructor(t){this.items=Object.create(null);const{renderer:e,type:s,onUnload:a,priority:o,name:c}=t;this._renderer=e,e.gc.addResourceHash(this,"items",s,o??0),this._onUnload=a,this.name=c}add(t){return this.items[t.uid]?!1:(this.items[t.uid]=t,t.once("unload",this.remove,this),t._gcLastUsed=this._renderer.gc.now,!0)}remove(t,...e){if(!this.items[t.uid])return;const s=t._gpuData[this._renderer.uid];s&&(this._onUnload?.(t,...e),s.destroy(),t._gpuData[this._renderer.uid]=null,this.items[t.uid]=null)}removeAll(...t){Object.values(this.items).forEach(e=>e&&this.remove(e,...t))}destroy(...t){this.removeAll(...t),this.items=Object.create(null),this._renderer=null,this._onUnload=null}}function o6(n,t,e,s,a,o,c,u=null){let d=0;e*=t,a*=o;const h=u.a,p=u.b,y=u.c,x=u.d,v=u.tx,S=u.ty;for(;d<c;){const w=n[e],_=n[e+1];s[a]=h*w+y*_+v,s[a+1]=p*w+x*_+S,a+=o,e+=t,d++}}function l6(n,t,e,s){let a=0;for(t*=e;a<s;)n[t]=0,n[t+1]=0,t+=e,a++}function FE(n,t,e,s,a){const o=t.a,c=t.b,u=t.c,d=t.d,h=t.tx,p=t.ty;e||(e=0),s||(s=2),a||(a=n.length/s-e);let y=e*s;for(let x=0;x<a;x++){const v=n[y],S=n[y+1];n[y]=o*v+u*S+h,n[y+1]=c*v+d*S+p,y+=s}}const c6=new ue;class GE{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const t=this.baseColor,e=t>>16|t&65280|(t&255)<<16,s=this.renderable;return s?Y2(e,s.groupColor)+(this.alpha*s.groupAlpha*255<<24):e+(this.alpha*255<<24)}get transform(){return this.renderable?.groupTransform||c6}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.attributeOffset=this.attributeOffset,t.attributeSize=this.attributeSize,t.baseColor=this.baseColor,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData,t.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}const mc={extension:{type:Pt.ShapeBuilder,name:"circle"},build(n,t){let e,s,a,o,c,u;if(n.type==="circle"){const j=n;if(c=u=j.radius,c<=0)return!1;e=j.x,s=j.y,a=o=0}else if(n.type==="ellipse"){const j=n;if(c=j.halfWidth,u=j.halfHeight,c<=0||u<=0)return!1;e=j.x,s=j.y,a=o=0}else{const j=n,k=j.width/2,I=j.height/2;e=j.x+k,s=j.y+I,c=u=Math.max(0,Math.min(j.radius,Math.min(k,I))),a=k-c,o=I-u}if(a<0||o<0)return!1;const d=Math.ceil(2.3*Math.sqrt(c+u)),h=d*8+(a?4:0)+(o?4:0);if(h===0)return!1;if(d===0)return t[0]=t[6]=e+a,t[1]=t[3]=s+o,t[2]=t[4]=e-a,t[5]=t[7]=s-o,!0;let p=0,y=d*4+(a?2:0)+2,x=y,v=h,S=a+c,w=o,_=e+S,A=e-S,R=s+w;if(t[p++]=_,t[p++]=R,t[--y]=R,t[--y]=A,o){const j=s-w;t[x++]=A,t[x++]=j,t[--v]=j,t[--v]=_}for(let j=1;j<d;j++){const k=Math.PI/2*(j/d),I=a+Math.cos(k)*c,N=o+Math.sin(k)*u,L=e+I,H=e-I,B=s+N,U=s-N;t[p++]=L,t[p++]=B,t[--y]=B,t[--y]=H,t[x++]=H,t[x++]=U,t[--v]=U,t[--v]=L}S=a,w=o+u,_=e+S,A=e-S,R=s+w;const C=s-w;return t[p++]=_,t[p++]=R,t[--v]=C,t[--v]=_,a&&(t[p++]=A,t[p++]=R,t[--v]=C,t[--v]=A),!0},triangulate(n,t,e,s,a,o){if(n.length===0)return;let c=0,u=0;for(let p=0;p<n.length;p+=2)c+=n[p],u+=n[p+1];c/=n.length/2,u/=n.length/2;let d=s;t[d*e]=c,t[d*e+1]=u;const h=d++;for(let p=0;p<n.length;p+=2)t[d*e]=n[p],t[d*e+1]=n[p+1],p>0&&(a[o++]=d,a[o++]=h,a[o++]=d-1),d++;a[o++]=h+1,a[o++]=h,a[o++]=d-1}},u6={...mc,extension:{...mc.extension,name:"ellipse"}},f6={...mc,extension:{...mc.extension,name:"roundedRectangle"}},$E=1e-4,xS=1e-4;function d6(n){const t=n.length;if(t<6)return 1;let e=0;for(let s=0,a=n[t-2],o=n[t-1];s<t;s+=2){const c=n[s],u=n[s+1];e+=(c-a)*(u+o),a=c,o=u}return e<0?-1:1}function vS(n,t,e,s,a,o,c,u){const d=n-e*a,h=t-s*a,p=n+e*o,y=t+s*o;let x,v;c?(x=s,v=-e):(x=-s,v=e);const S=d+x,w=h+v,_=p+x,A=y+v;return u.push(S,w),u.push(_,A),2}function sa(n,t,e,s,a,o,c,u){const d=e-n,h=s-t;let p=Math.atan2(d,h),y=Math.atan2(a-n,o-t);u&&p<y?p+=Math.PI*2:!u&&p>y&&(y+=Math.PI*2);let x=p;const v=y-p,S=Math.abs(v),w=Math.sqrt(d*d+h*h),_=(15*S*Math.sqrt(w)/Math.PI>>0)+1,A=v/_;if(x+=A,u){c.push(n,t),c.push(e,s);for(let R=1,C=x;R<_;R++,C+=A)c.push(n,t),c.push(n+Math.sin(C)*w,t+Math.cos(C)*w);c.push(n,t),c.push(a,o)}else{c.push(e,s),c.push(n,t);for(let R=1,C=x;R<_;R++,C+=A)c.push(n+Math.sin(C)*w,t+Math.cos(C)*w),c.push(n,t);c.push(a,o),c.push(n,t)}return _*2}function h6(n,t,e,s,a,o){const c=$E;if(n.length===0)return;const u=t;let d=u.alignment;if(t.alignment!==.5){let it=d6(n);d=(d-.5)*it+.5}const h=new Vn(n[0],n[1]),p=new Vn(n[n.length-2],n[n.length-1]),y=s,x=Math.abs(h.x-p.x)<c&&Math.abs(h.y-p.y)<c;if(y){n=n.slice(),x&&(n.pop(),n.pop(),p.set(n[n.length-2],n[n.length-1]));const it=(h.x+p.x)*.5,ft=(p.y+h.y)*.5;n.unshift(it,ft),n.push(it,ft)}const v=a,S=n.length/2;let w=n.length;const _=v.length/2,A=u.width/2,R=A*A,C=u.miterLimit*u.miterLimit;let j=n[0],k=n[1],I=n[2],N=n[3],L=0,H=0,B=-(k-N),U=j-I,z=0,G=0,V=Math.sqrt(B*B+U*U);B/=V,U/=V,B*=A,U*=A;const J=d,O=(1-J)*2,$=J*2;y||(u.cap==="round"?w+=sa(j-B*(O-$)*.5,k-U*(O-$)*.5,j-B*O,k-U*O,j+B*$,k+U*$,v,!0)+2:u.cap==="square"&&(w+=vS(j,k,B,U,O,$,!0,v))),v.push(j-B*O,k-U*O),v.push(j+B*$,k+U*$);for(let it=1;it<S-1;++it){j=n[(it-1)*2],k=n[(it-1)*2+1],I=n[it*2],N=n[it*2+1],L=n[(it+1)*2],H=n[(it+1)*2+1],B=-(k-N),U=j-I,V=Math.sqrt(B*B+U*U),B/=V,U/=V,B*=A,U*=A,z=-(N-H),G=I-L,V=Math.sqrt(z*z+G*G),z/=V,G/=V,z*=A,G*=A;const ft=I-j,D=k-N,Y=I-L,at=H-N,lt=ft*Y+D*at,nt=D*Y-at*ft,xt=nt<0;if(Math.abs(nt)<.001*Math.abs(lt)){v.push(I-B*O,N-U*O),v.push(I+B*$,N+U*$),lt>=0&&(u.join==="round"?w+=sa(I,N,I-B*O,N-U*O,I-z*O,N-G*O,v,!1)+4:w+=2,v.push(I-z*$,N-G*$),v.push(I+z*O,N+G*O));continue}const Rt=(-B+j)*(-U+N)-(-B+I)*(-U+k),yt=(-z+L)*(-G+N)-(-z+I)*(-G+H),Mt=(ft*yt-Y*Rt)/nt,Et=(at*Rt-D*yt)/nt,Tt=(Mt-I)*(Mt-I)+(Et-N)*(Et-N),qt=I+(Mt-I)*O,Gt=N+(Et-N)*O,Vt=I-(Mt-I)*$,Ct=N-(Et-N)*$,Wn=Math.min(ft*ft+D*D,Y*Y+at*at),Yn=xt?O:$,he=Wn+Yn*Yn*R;Tt<=he?u.join==="bevel"||Tt/R>C?(xt?(v.push(qt,Gt),v.push(I+B*$,N+U*$),v.push(qt,Gt),v.push(I+z*$,N+G*$)):(v.push(I-B*O,N-U*O),v.push(Vt,Ct),v.push(I-z*O,N-G*O),v.push(Vt,Ct)),w+=2):u.join==="round"?xt?(v.push(qt,Gt),v.push(I+B*$,N+U*$),w+=sa(I,N,I+B*$,N+U*$,I+z*$,N+G*$,v,!0)+4,v.push(qt,Gt),v.push(I+z*$,N+G*$)):(v.push(I-B*O,N-U*O),v.push(Vt,Ct),w+=sa(I,N,I-B*O,N-U*O,I-z*O,N-G*O,v,!1)+4,v.push(I-z*O,N-G*O),v.push(Vt,Ct)):(v.push(qt,Gt),v.push(Vt,Ct)):(v.push(I-B*O,N-U*O),v.push(I+B*$,N+U*$),u.join==="round"?xt?w+=sa(I,N,I+B*$,N+U*$,I+z*$,N+G*$,v,!0)+2:w+=sa(I,N,I-B*O,N-U*O,I-z*O,N-G*O,v,!1)+2:u.join==="miter"&&Tt/R<=C&&(xt?(v.push(Vt,Ct),v.push(Vt,Ct)):(v.push(qt,Gt),v.push(qt,Gt)),w+=2),v.push(I-z*O,N-G*O),v.push(I+z*$,N+G*$),w+=2)}j=n[(S-2)*2],k=n[(S-2)*2+1],I=n[(S-1)*2],N=n[(S-1)*2+1],B=-(k-N),U=j-I,V=Math.sqrt(B*B+U*U),B/=V,U/=V,B*=A,U*=A,v.push(I-B*O,N-U*O),v.push(I+B*$,N+U*$),y||(u.cap==="round"?w+=sa(I-B*(O-$)*.5,N-U*(O-$)*.5,I-B*O,N-U*O,I+B*$,N+U*$,v,!1)+2:u.cap==="square"&&(w+=vS(I,N,B,U,O,$,!1,v)));const rt=xS*xS;for(let it=_;it<w+_-2;++it)j=v[it*2],k=v[it*2+1],I=v[(it+1)*2],N=v[(it+1)*2+1],L=v[(it+2)*2],H=v[(it+2)*2+1],!(Math.abs(j*(N-H)+I*(H-k)+L*(k-N))<rt)&&o.push(it,it+1,it+2)}function p6(n,t,e,s){const a=$E;if(n.length===0)return;const o=n[0],c=n[1],u=n[n.length-2],d=n[n.length-1],h=t||Math.abs(o-u)<a&&Math.abs(c-d)<a,p=e,y=n.length/2,x=p.length/2;for(let v=0;v<y;v++)p.push(n[v*2]),p.push(n[v*2+1]);for(let v=0;v<y-1;v++)s.push(x+v,x+v+1);h&&s.push(x+y-1,x)}function VE(n,t,e,s,a,o,c){const u=tI(n,t,2);if(!u)return;for(let h=0;h<u.length;h+=3)o[c++]=u[h]+a,o[c++]=u[h+1]+a,o[c++]=u[h+2]+a;let d=a*s;for(let h=0;h<n.length;h+=2)e[d]=n[h],e[d+1]=n[h+1],d+=s}const m6=[],g6={extension:{type:Pt.ShapeBuilder,name:"polygon"},build(n,t){for(let e=0;e<n.points.length;e++)t[e]=n.points[e];return!0},triangulate(n,t,e,s,a,o){VE(n,m6,t,e,s,a,o)}},y6={extension:{type:Pt.ShapeBuilder,name:"rectangle"},build(n,t){const e=n,s=e.x,a=e.y,o=e.width,c=e.height;return o>0&&c>0?(t[0]=s,t[1]=a,t[2]=s+o,t[3]=a,t[4]=s+o,t[5]=a+c,t[6]=s,t[7]=a+c,!0):!1},triangulate(n,t,e,s,a,o){let c=0;s*=e,t[s+c]=n[0],t[s+c+1]=n[1],c+=e,t[s+c]=n[2],t[s+c+1]=n[3],c+=e,t[s+c]=n[6],t[s+c+1]=n[7],c+=e,t[s+c]=n[4],t[s+c+1]=n[5],c+=e;const u=s/e;a[o++]=u,a[o++]=u+1,a[o++]=u+2,a[o++]=u+1,a[o++]=u+3,a[o++]=u+2}},b6={extension:{type:Pt.ShapeBuilder,name:"triangle"},build(n,t){return t[0]=n.x,t[1]=n.y,t[2]=n.x2,t[3]=n.y2,t[4]=n.x3,t[5]=n.y3,!0},triangulate(n,t,e,s,a,o){let c=0;s*=e,t[s+c]=n[0],t[s+c+1]=n[1],c+=e,t[s+c]=n[2],t[s+c+1]=n[3],c+=e,t[s+c]=n[4],t[s+c+1]=n[5];const u=s/e;a[o++]=u,a[o++]=u+1,a[o++]=u+2}},x6=new ue,v6=new Je;function S6(n,t,e,s){const a=t.matrix?n.copyFrom(t.matrix).invert():n.identity();if(t.textureSpace==="local"){const c=e.getBounds(v6);t.width&&c.pad(t.width);const{x:u,y:d}=c,h=1/c.width,p=1/c.height,y=-u*h,x=-d*p,v=a.a,S=a.b,w=a.c,_=a.d;a.a*=h,a.b*=h,a.c*=p,a.d*=p,a.tx=y*v+x*w+a.tx,a.ty=y*S+x*_+a.ty}else a.translate(t.texture.frame.x,t.texture.frame.y),a.scale(1/t.texture.source.width,1/t.texture.source.height);const o=t.texture.source.style;return!(t.fill instanceof Vs)&&o.addressMode==="clamp-to-edge"&&(o.addressMode="repeat",o.update()),s&&a.append(x6.copyFrom(s).invert()),a}const bd={};Pn.handleByMap(Pt.ShapeBuilder,bd);Pn.add(y6,g6,b6,mc,u6,f6);const _6=new Je,w6=new ue;function E6(n,t){const{geometryData:e,batches:s}=t;s.length=0,e.indices.length=0,e.vertices.length=0,e.uvs.length=0;for(let a=0;a<n.instructions.length;a++){const o=n.instructions[a];if(o.action==="texture")A6(o.data,s,e);else if(o.action==="fill"||o.action==="stroke"){const c=o.action==="stroke",u=o.data.path.shapePath,d=o.data.style,h=o.data.hole;c&&h&&SS(h.shapePath,d,!0,s,e),h&&(u.shapePrimitives[u.shapePrimitives.length-1].holes=h.shapePath.shapePrimitives),SS(u,d,c,s,e)}}}function A6(n,t,e){const s=[],a=bd.rectangle,o=_6;o.x=n.dx,o.y=n.dy,o.width=n.dw,o.height=n.dh;const c=n.transform;if(!a.build(o,s))return;const{vertices:u,uvs:d,indices:h}=e,p=h.length,y=u.length/2;c&&FE(s,c),a.triangulate(s,u,2,y,h,p);const x=n.image,v=x.uvs;d.push(v.x0,v.y0,v.x1,v.y1,v.x3,v.y3,v.x2,v.y2);const S=Di.get(GE);S.indexOffset=p,S.indexSize=h.length-p,S.attributeOffset=y,S.attributeSize=u.length/2-y,S.baseColor=n.style,S.alpha=n.alpha,S.texture=x,S.geometryData=e,t.push(S)}function SS(n,t,e,s,a){const{vertices:o,uvs:c,indices:u}=a;n.shapePrimitives.forEach(({shape:d,transform:h,holes:p})=>{const y=[],x=bd[d.type];if(!x.build(d,y))return;const v=u.length,S=o.length/2;let w="triangle-list";if(h&&FE(y,h),e){const C=d.closePath??!0,j=t;j.pixelLine?(p6(y,C,o,u),w="line-list"):h6(y,j,!1,C,o,u)}else if(p){const C=[],j=y.slice();T6(p).forEach(I=>{C.push(j.length/2),j.push(...I)}),VE(j,C,o,2,S,u,v)}else x.triangulate(y,o,2,S,u,v);const _=c.length/2,A=t.texture;if(A!==Wt.WHITE){const C=S6(w6,t,d,h);o6(o,2,S,c,_,2,o.length/2-S,C)}else l6(c,_,2,o.length/2-S);const R=Di.get(GE);R.indexOffset=v,R.indexSize=u.length-v,R.attributeOffset=S,R.attributeSize=o.length/2-S,R.baseColor=t.color,R.alpha=t.alpha,R.texture=A,R.geometryData=a,R.topology=w,s.push(R)})}function T6(n){const t=[];for(let e=0;e<n.length;e++){const s=n[e].shape,a=[];bd[s.type].build(s,a)&&t.push(a)}return t}class C6{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}reset(){this.batches&&this.batches.forEach(t=>{Di.return(t)}),this.graphicsData&&Di.return(this.graphicsData),this.isBatchable=!1,this.context=null,this.batches.length=0,this.geometryData.indices.length=0,this.geometryData.vertices.length=0,this.geometryData.uvs.length=0,this.graphicsData=null}destroy(){this.reset(),this.batches=null,this.geometryData=null}}class R6{constructor(){this.instructions=new Q2}init(t){const e=t.maxTextures;this.batcher?this.batcher._updateMaxTextures(e):this.batcher=new r6({maxTextures:e}),this.instructions.reset()}get geometry(){return ye(wO,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}}const h0=class Ag{constructor(t){this._renderer=t,this._managedContexts=new a6({renderer:t,type:"resource",name:"graphicsContext"})}init(t){Ag.defaultOptions.bezierSmoothness=t?.bezierSmoothness??Ag.defaultOptions.bezierSmoothness}getContextRenderData(t){return t._gpuData[this._renderer.uid].graphicsData||this._initContextRenderData(t)}updateGpuContext(t){const e=!!t._gpuData[this._renderer.uid],s=t._gpuData[this._renderer.uid]||this._initContext(t);if(t.dirty||!e){e&&s.reset(),E6(t,s);const a=t.batchMode;t.customShader||a==="no-batch"?s.isBatchable=!1:a==="auto"?s.isBatchable=s.geometryData.vertices.length<400:s.isBatchable=!0,t.dirty=!1}return s}getGpuContext(t){return t._gpuData[this._renderer.uid]||this._initContext(t)}_initContextRenderData(t){const e=Di.get(R6,{maxTextures:this._renderer.limits.maxBatchableTextures}),s=t._gpuData[this._renderer.uid],{batches:a,geometryData:o}=s;s.graphicsData=e;const c=o.vertices.length,u=o.indices.length;for(let y=0;y<a.length;y++)a[y].applyTransform=!1;const d=e.batcher;d.ensureAttributeBuffer(c),d.ensureIndexBuffer(u),d.begin();for(let y=0;y<a.length;y++){const x=a[y];d.add(x)}d.finish(e.instructions);const h=d.geometry;h.indexBuffer.setDataWithSize(d.indexBuffer,d.indexSize,!0),h.buffers[0].setDataWithSize(d.attributeBuffer.float32View,d.attributeSize,!0);const p=d.batches;for(let y=0;y<p.length;y++){const x=p[y];x.bindGroup=yI(x.textures.textures,x.textures.count,this._renderer.limits.maxBatchableTextures)}return e}_initContext(t){const e=new C6;return e.context=t,t._gpuData[this._renderer.uid]=e,this._managedContexts.add(t),e}destroy(){this._managedContexts.destroy(),this._renderer=null}};h0.extension={type:[Pt.WebGLSystem,Pt.WebGPUSystem,Pt.CanvasSystem],name:"graphicsContext"};h0.defaultOptions={bezierSmoothness:.5};let WE=h0;const j6=8,hf=11920929e-14,M6=1;function YE(n,t,e,s,a,o,c,u,d,h){const y=Math.min(.99,Math.max(0,h??WE.defaultOptions.bezierSmoothness));let x=(M6-y)/1;return x*=x,k6(t,e,s,a,o,c,u,d,n,x),n}function k6(n,t,e,s,a,o,c,u,d,h){Tg(n,t,e,s,a,o,c,u,d,h,0),d.push(c,u)}function Tg(n,t,e,s,a,o,c,u,d,h,p){if(p>j6)return;const y=(n+e)/2,x=(t+s)/2,v=(e+a)/2,S=(s+o)/2,w=(a+c)/2,_=(o+u)/2,A=(y+v)/2,R=(x+S)/2,C=(v+w)/2,j=(S+_)/2,k=(A+C)/2,I=(R+j)/2;if(p>0){let N=c-n,L=u-t;const H=Math.abs((e-c)*L-(s-u)*N),B=Math.abs((a-c)*L-(o-u)*N);if(H>hf&&B>hf){if((H+B)*(H+B)<=h*(N*N+L*L)){d.push(k,I);return}}else if(H>hf){if(H*H<=h*(N*N+L*L)){d.push(k,I);return}}else if(B>hf){if(B*B<=h*(N*N+L*L)){d.push(k,I);return}}else if(N=k-(n+c)/2,L=I-(t+u)/2,N*N+L*L<=h){d.push(k,I);return}}Tg(n,t,y,x,A,R,k,I,d,h,p+1),Tg(k,I,C,j,w,_,c,u,d,h,p+1)}const O6=8,N6=11920929e-14,I6=1;function L6(n,t,e,s,a,o,c,u){const h=Math.min(.99,Math.max(0,u??WE.defaultOptions.bezierSmoothness));let p=(I6-h)/1;return p*=p,D6(t,e,s,a,o,c,n,p),n}function D6(n,t,e,s,a,o,c,u){Cg(c,n,t,e,s,a,o,u,0),c.push(a,o)}function Cg(n,t,e,s,a,o,c,u,d){if(d>O6)return;const h=(t+s)/2,p=(e+a)/2,y=(s+o)/2,x=(a+c)/2,v=(h+y)/2,S=(p+x)/2;let w=o-t,_=c-e;const A=Math.abs((s-o)*_-(a-c)*w);if(A>N6){if(A*A<=u*(w*w+_*_)){n.push(v,S);return}}else if(w=v-(t+o)/2,_=S-(e+c)/2,w*w+_*_<=u){n.push(v,S);return}Cg(n,t,e,h,p,v,S,u,d+1),Cg(n,v,S,y,x,o,c,u,d+1)}function XE(n,t,e,s,a,o,c,u){let d=Math.abs(a-o);(!c&&a>o||c&&o>a)&&(d=2*Math.PI-d),u||(u=Math.max(6,Math.floor(6*Math.pow(s,1/3)*(d/Math.PI)))),u=Math.max(u,3);let h=d/u,p=a;h*=c?-1:1;for(let y=0;y<u+1;y++){const x=Math.cos(p),v=Math.sin(p),S=t+x*s,w=e+v*s;n.push(S,w),p+=h}}function B6(n,t,e,s,a,o){const c=n[n.length-2],d=n[n.length-1]-e,h=c-t,p=a-e,y=s-t,x=Math.abs(d*y-h*p);if(x<1e-8||o===0){(n[n.length-2]!==t||n[n.length-1]!==e)&&n.push(t,e);return}const v=d*d+h*h,S=p*p+y*y,w=d*p+h*y,_=o*Math.sqrt(v)/x,A=o*Math.sqrt(S)/x,R=_*w/v,C=A*w/S,j=_*y+A*h,k=_*p+A*d,I=h*(A+R),N=d*(A+R),L=y*(_+C),H=p*(_+C),B=Math.atan2(N-k,I-j),U=Math.atan2(H-k,L-j);XE(n,j+t,k+e,o,B,U,h*p>y*d)}const sc=Math.PI*2,mm={centerX:0,centerY:0,ang1:0,ang2:0},gm=({x:n,y:t},e,s,a,o,c,u,d)=>{n*=e,t*=s;const h=a*n-o*t,p=o*n+a*t;return d.x=h+c,d.y=p+u,d};function U6(n,t){const e=t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),s=t===1.5707963267948966?.551915024494:e,a=Math.cos(n),o=Math.sin(n),c=Math.cos(n+t),u=Math.sin(n+t);return[{x:a-o*s,y:o+a*s},{x:c+u*s,y:u-c*s},{x:c,y:u}]}const _S=(n,t,e,s)=>{const a=n*s-t*e<0?-1:1;let o=n*e+t*s;return o>1&&(o=1),o<-1&&(o=-1),a*Math.acos(o)},z6=(n,t,e,s,a,o,c,u,d,h,p,y,x)=>{const v=Math.pow(a,2),S=Math.pow(o,2),w=Math.pow(p,2),_=Math.pow(y,2);let A=v*S-v*_-S*w;A<0&&(A=0),A/=v*_+S*w,A=Math.sqrt(A)*(c===u?-1:1);const R=A*a/o*y,C=A*-o/a*p,j=h*R-d*C+(n+e)/2,k=d*R+h*C+(t+s)/2,I=(p-R)/a,N=(y-C)/o,L=(-p-R)/a,H=(-y-C)/o,B=_S(1,0,I,N);let U=_S(I,N,L,H);u===0&&U>0&&(U-=sc),u===1&&U<0&&(U+=sc),x.centerX=j,x.centerY=k,x.ang1=B,x.ang2=U};function P6(n,t,e,s,a,o,c,u=0,d=0,h=0){if(o===0||c===0)return;const p=Math.sin(u*sc/360),y=Math.cos(u*sc/360),x=y*(t-s)/2+p*(e-a)/2,v=-p*(t-s)/2+y*(e-a)/2;if(x===0&&v===0)return;o=Math.abs(o),c=Math.abs(c);const S=Math.pow(x,2)/Math.pow(o,2)+Math.pow(v,2)/Math.pow(c,2);S>1&&(o*=Math.sqrt(S),c*=Math.sqrt(S)),z6(t,e,s,a,o,c,d,h,p,y,x,v,mm);let{ang1:w,ang2:_}=mm;const{centerX:A,centerY:R}=mm;let C=Math.abs(_)/(sc/4);Math.abs(1-C)<1e-7&&(C=1);const j=Math.max(Math.ceil(C),1);_/=j;let k=n[n.length-2],I=n[n.length-1];const N={x:0,y:0};for(let L=0;L<j;L++){const H=U6(w,_),{x:B,y:U}=gm(H[0],o,c,y,p,A,R,N),{x:z,y:G}=gm(H[1],o,c,y,p,A,R,N),{x:V,y:J}=gm(H[2],o,c,y,p,A,R,N);YE(n,k,I,B,U,z,G,V,J),k=V,I=J,w+=_}}function H6(n,t,e){const s=(c,u)=>{const d=u.x-c.x,h=u.y-c.y,p=Math.sqrt(d*d+h*h),y=d/p,x=h/p;return{len:p,nx:y,ny:x}},a=(c,u)=>{c===0?n.moveTo(u.x,u.y):n.lineTo(u.x,u.y)};let o=t[t.length-1];for(let c=0;c<t.length;c++){const u=t[c%t.length],d=u.radius??e;if(d<=0){a(c,u),o=u;continue}const h=t[(c+1)%t.length],p=s(u,o),y=s(u,h);if(p.len<1e-4||y.len<1e-4){a(c,u),o=u;continue}let x=Math.asin(p.nx*y.ny-p.ny*y.nx),v=1,S=!1;p.nx*y.nx-p.ny*-y.ny<0?x<0?x=Math.PI+x:(x=Math.PI-x,v=-1,S=!0):x>0&&(v=-1,S=!0);const w=x/2;let _,A=Math.abs(Math.cos(w)*d/Math.sin(w));A>Math.min(p.len/2,y.len/2)?(A=Math.min(p.len/2,y.len/2),_=Math.abs(A*Math.sin(w)/Math.cos(w))):_=d;const R=u.x+y.nx*A+-y.ny*_*v,C=u.y+y.ny*A+y.nx*_*v,j=Math.atan2(p.ny,p.nx)+Math.PI/2*v,k=Math.atan2(y.ny,y.nx)-Math.PI/2*v;c===0&&n.moveTo(R+Math.cos(j)*_,C+Math.sin(j)*_),n.arc(R,C,_,j,k,S),o=u}}function F6(n,t,e,s){const a=(u,d)=>Math.sqrt((u.x-d.x)**2+(u.y-d.y)**2),o=(u,d,h)=>({x:u.x+(d.x-u.x)*h,y:u.y+(d.y-u.y)*h}),c=t.length;for(let u=0;u<c;u++){const d=t[(u+1)%c],h=d.radius??e;if(h<=0){u===0?n.moveTo(d.x,d.y):n.lineTo(d.x,d.y);continue}const p=t[u],y=t[(u+2)%c],x=a(p,d);let v;if(x<1e-4)v=d;else{const _=Math.min(x/2,h);v=o(d,p,_/x)}const S=a(y,d);let w;if(S<1e-4)w=d;else{const _=Math.min(S/2,h);w=o(d,y,_/S)}u===0?n.moveTo(v.x,v.y):n.lineTo(v.x,v.y),n.quadraticCurveTo(d.x,d.y,w.x,w.y,s)}}const G6=new Je;class $6{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Xi,this._graphicsPath2D=t,this.signed=t.checkForHoles}moveTo(t,e){return this.startPoly(t,e),this}lineTo(t,e){this._ensurePoly();const s=this._currentPoly.points,a=s[s.length-2],o=s[s.length-1];return(a!==t||o!==e)&&s.push(t,e),this}arc(t,e,s,a,o,c){this._ensurePoly(!1);const u=this._currentPoly.points;return XE(u,t,e,s,a,o,c),this}arcTo(t,e,s,a,o){this._ensurePoly();const c=this._currentPoly.points;return B6(c,t,e,s,a,o),this}arcToSvg(t,e,s,a,o,c,u){const d=this._currentPoly.points;return P6(d,this._currentPoly.lastX,this._currentPoly.lastY,c,u,t,e,s,a,o),this}bezierCurveTo(t,e,s,a,o,c,u){this._ensurePoly();const d=this._currentPoly;return YE(this._currentPoly.points,d.lastX,d.lastY,t,e,s,a,o,c,u),this}quadraticCurveTo(t,e,s,a,o){this._ensurePoly();const c=this._currentPoly;return L6(this._currentPoly.points,c.lastX,c.lastY,t,e,s,a,o),this}closePath(){return this.endPoly(!0),this}addPath(t,e){this.endPoly(),e&&!e.isIdentity()&&(t=t.clone(!0),t.transform(e));const s=this.shapePrimitives,a=s.length;for(let o=0;o<t.instructions.length;o++){const c=t.instructions[o];this[c.action](...c.data)}if(t.checkForHoles&&s.length-a>1){let o=null;for(let c=a;c<s.length;c++){const u=s[c];if(u.shape.type==="polygon"){const d=u.shape,h=o?.shape;h&&h.containsPolygon(d)?(o.holes||(o.holes=[]),o.holes.push(u),s.copyWithin(c,c+1),s.length--,c--):o=u}}}return this}finish(t=!1){this.endPoly(t)}rect(t,e,s,a,o){return this.drawShape(new Je(t,e,s,a),o),this}circle(t,e,s,a){return this.drawShape(new u0(t,e,s),a),this}poly(t,e,s){const a=new nc(t);return a.closePath=e,this.drawShape(a,s),this}regularPoly(t,e,s,a,o=0,c){a=Math.max(a|0,3);const u=-1*Math.PI/2+o,d=Math.PI*2/a,h=[];for(let p=0;p<a;p++){const y=u-p*d;h.push(t+s*Math.cos(y),e+s*Math.sin(y))}return this.poly(h,!0,c),this}roundPoly(t,e,s,a,o,c=0,u){if(a=Math.max(a|0,3),o<=0)return this.regularPoly(t,e,s,a,c);const d=s*Math.sin(Math.PI/a)-.001;o=Math.min(o,d);const h=-1*Math.PI/2+c,p=Math.PI*2/a,y=(a-2)*Math.PI/a/2;for(let x=0;x<a;x++){const v=x*p+h,S=t+s*Math.cos(v),w=e+s*Math.sin(v),_=v+Math.PI+y,A=v-Math.PI-y,R=S+o*Math.cos(_),C=w+o*Math.sin(_),j=S+o*Math.cos(A),k=w+o*Math.sin(A);x===0?this.moveTo(R,C):this.lineTo(R,C),this.quadraticCurveTo(S,w,j,k,u)}return this.closePath()}roundShape(t,e,s=!1,a){return t.length<3?this:(s?F6(this,t,e,a):H6(this,t,e),this.closePath())}filletRect(t,e,s,a,o){if(o===0)return this.rect(t,e,s,a);const c=Math.min(s,a)/2,u=Math.min(c,Math.max(-c,o)),d=t+s,h=e+a,p=u<0?-u:0,y=Math.abs(u);return this.moveTo(t,e+y).arcTo(t+p,e+p,t+y,e,y).lineTo(d-y,e).arcTo(d-p,e+p,d,e+y,y).lineTo(d,h-y).arcTo(d-p,h-p,t+s-y,h,y).lineTo(t+y,h).arcTo(t+p,h-p,t,h-y,y).closePath()}chamferRect(t,e,s,a,o,c){if(o<=0)return this.rect(t,e,s,a);const u=Math.min(o,Math.min(s,a)/2),d=t+s,h=e+a,p=[t+u,e,d-u,e,d,e+u,d,h-u,d-u,h,t+u,h,t,h-u,t,e+u];for(let y=p.length-1;y>=2;y-=2)p[y]===p[y-2]&&p[y-1]===p[y-3]&&p.splice(y-1,2);return this.poly(p,!0,c)}ellipse(t,e,s,a,o){return this.drawShape(new f0(t,e,s,a),o),this}roundRect(t,e,s,a,o,c){return this.drawShape(new d0(t,e,s,a,o),c),this}drawShape(t,e){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:e}),this}startPoly(t,e){let s=this._currentPoly;return s&&this.endPoly(),s=new nc,s.points.push(t,e),this._currentPoly=s,this}endPoly(t=!1){const e=this._currentPoly;return e&&e.points.length>2&&(e.closePath=t,this.shapePrimitives.push({shape:e})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new nc,t)){const e=this.shapePrimitives[this.shapePrimitives.length-1];if(e){let s=e.shape.x,a=e.shape.y;if(e.transform&&!e.transform.isIdentity()){const o=e.transform,c=s;s=o.a*s+o.c*a+o.tx,a=o.b*c+o.d*a+o.ty}this._currentPoly.points.push(s,a)}else this._currentPoly.points.push(0,0)}}buildPath(){const t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let e=0;e<t.instructions.length;e++){const s=t.instructions[e];this[s.action](...s.data)}this.finish()}get bounds(){const t=this._bounds;t.clear();const e=this.shapePrimitives;for(let s=0;s<e.length;s++){const a=e[s],o=a.shape.getBounds(G6);a.transform?t.addRect(o,a.transform):t.addRect(o)}return t}}class Fs{constructor(t,e=!1){this.instructions=[],this.uid=on("graphicsPath"),this._dirty=!0,this.checkForHoles=e,typeof t=="string"?hI(t,this):this.instructions=t?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new $6(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,e){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,e]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,e,s,a,o){const c=this.instructions[this.instructions.length-1],u=this.getLastPoint(Vn.shared);let d=0,h=0;if(!c||c.action!=="bezierCurveTo")d=u.x,h=u.y;else{d=c.data[2],h=c.data[3];const p=u.x,y=u.y;d=p+(p-d),h=y+(y-h)}return this.instructions.push({action:"bezierCurveTo",data:[d,h,t,e,s,a,o]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,e,s){const a=this.instructions[this.instructions.length-1],o=this.getLastPoint(Vn.shared);let c=0,u=0;if(!a||a.action!=="quadraticCurveTo")c=o.x,u=o.y;else{c=a.data[0],u=a.data[1];const d=o.x,h=o.y;c=d+(d-c),u=h+(h-u)}return this.instructions.push({action:"quadraticCurveTo",data:[c,u,t,e,s]}),this._dirty=!0,this}rect(t,e,s,a,o){return this.instructions.push({action:"rect",data:[t,e,s,a,o]}),this._dirty=!0,this}circle(t,e,s,a){return this.instructions.push({action:"circle",data:[t,e,s,a]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}regularPoly(...t){return this.instructions.push({action:"regularPoly",data:t}),this._dirty=!0,this}roundPoly(...t){return this.instructions.push({action:"roundPoly",data:t}),this._dirty=!0,this}roundShape(...t){return this.instructions.push({action:"roundShape",data:t}),this._dirty=!0,this}filletRect(...t){return this.instructions.push({action:"filletRect",data:t}),this._dirty=!0,this}chamferRect(...t){return this.instructions.push({action:"chamferRect",data:t}),this._dirty=!0,this}star(t,e,s,a,o,c,u){o||(o=a/2);const d=-1*Math.PI/2+c,h=s*2,p=Math.PI*2/h,y=[];for(let x=0;x<h;x++){const v=x%2?o:a,S=x*p+d;y.push(t+v*Math.cos(S),e+v*Math.sin(S))}return this.poly(y,!0,u),this}clone(t=!1){const e=new Fs;if(e.checkForHoles=this.checkForHoles,!t)e.instructions=this.instructions.slice();else for(let s=0;s<this.instructions.length;s++){const a=this.instructions[s];e.instructions.push({action:a.action,data:a.data.slice()})}return e}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;const e=t.a,s=t.b,a=t.c,o=t.d,c=t.tx,u=t.ty;let d=0,h=0,p=0,y=0,x=0,v=0,S=0,w=0;for(let _=0;_<this.instructions.length;_++){const A=this.instructions[_],R=A.data;switch(A.action){case"moveTo":case"lineTo":d=R[0],h=R[1],R[0]=e*d+a*h+c,R[1]=s*d+o*h+u;break;case"bezierCurveTo":p=R[0],y=R[1],x=R[2],v=R[3],d=R[4],h=R[5],R[0]=e*p+a*y+c,R[1]=s*p+o*y+u,R[2]=e*x+a*v+c,R[3]=s*x+o*v+u,R[4]=e*d+a*h+c,R[5]=s*d+o*h+u;break;case"quadraticCurveTo":p=R[0],y=R[1],d=R[2],h=R[3],R[0]=e*p+a*y+c,R[1]=s*p+o*y+u,R[2]=e*d+a*h+c,R[3]=s*d+o*h+u;break;case"arcToSvg":d=R[5],h=R[6],S=R[0],w=R[1],R[0]=e*S+a*w,R[1]=s*S+o*w,R[5]=e*d+a*h+c,R[6]=s*d+o*h+u;break;case"circle":R[4]=Ul(R[3],t);break;case"rect":R[4]=Ul(R[4],t);break;case"ellipse":R[8]=Ul(R[8],t);break;case"roundRect":R[5]=Ul(R[5],t);break;case"addPath":R[0].transform(t);break;case"poly":R[2]=Ul(R[2],t);break;default:Ve("unknown transform action",A.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let e=this.instructions.length-1,s=this.instructions[e];if(!s)return t.x=0,t.y=0,t;for(;s.action==="closePath";){if(e--,e<0)return t.x=0,t.y=0,t;s=this.instructions[e]}switch(s.action){case"moveTo":case"lineTo":t.x=s.data[0],t.y=s.data[1];break;case"quadraticCurveTo":t.x=s.data[2],t.y=s.data[3];break;case"bezierCurveTo":t.x=s.data[4],t.y=s.data[5];break;case"arc":case"arcToSvg":t.x=s.data[5],t.y=s.data[6];break;case"addPath":s.data[0].getLastPoint(t);break}return t}}function Ul(n,t){return n?n.prepend(t):t.clone()}function an(n,t,e){const s=n.getAttribute(t);return s?Number(s):e}function V6(n,t){const e=n.querySelectorAll("defs");for(let s=0;s<e.length;s++){const a=e[s];for(let o=0;o<a.children.length;o++){const c=a.children[o];switch(c.nodeName.toLowerCase()){case"lineargradient":t.defs[c.id]=W6(c);break;case"radialgradient":t.defs[c.id]=Y6();break}}}}function W6(n){const t=an(n,"x1",0),e=an(n,"y1",0),s=an(n,"x2",1),a=an(n,"y2",0),o=n.getAttribute("gradientUnits")||"objectBoundingBox",c=new Vs(t,e,s,a,o==="objectBoundingBox"?"local":"global");for(let u=0;u<n.children.length;u++){const d=n.children[u],h=an(d,"offset",0),p=An.shared.setValue(d.getAttribute("stop-color")).toNumber();c.addColorStop(h,p)}return c}function Y6(n){return Ve("[SVG Parser] Radial gradients are not yet supported"),new Vs(0,0,1,0)}function wS(n){const t=n.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return t?t[1]:""}const ES={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function qE(n,t){const e=n.getAttribute("style"),s={},a={},o={strokeStyle:s,fillStyle:a,useFill:!1,useStroke:!1};for(const c in ES){const u=n.getAttribute(c);u&&AS(t,o,c,u.trim())}if(e){const c=e.split(";");for(let u=0;u<c.length;u++){const d=c[u].trim(),[h,p]=d.split(":");ES[h]&&AS(t,o,h,p.trim())}}return{strokeStyle:o.useStroke?s:null,fillStyle:o.useFill?a:null,useFill:o.useFill,useStroke:o.useStroke}}function AS(n,t,e,s){switch(e){case"stroke":if(s!=="none"){if(s.startsWith("url(")){const a=wS(s);t.strokeStyle.fill=n.defs[a]}else t.strokeStyle.color=An.shared.setValue(s).toNumber();t.useStroke=!0}break;case"stroke-width":t.strokeStyle.width=Number(s);break;case"fill":if(s!=="none"){if(s.startsWith("url(")){const a=wS(s);t.fillStyle.fill=n.defs[a]}else t.fillStyle.color=An.shared.setValue(s).toNumber();t.useFill=!0}break;case"fill-opacity":t.fillStyle.alpha=Number(s);break;case"stroke-opacity":t.strokeStyle.alpha=Number(s);break;case"opacity":t.fillStyle.alpha=Number(s),t.strokeStyle.alpha=Number(s);break}}function X6(n){if(n.length<=2)return!0;const t=n.map(u=>u.area).sort((u,d)=>d-u),[e,s]=t,a=t[t.length-1],o=e/s,c=s/a;return!(o>3&&c<2)}function q6(n){return n.split(/(?=[Mm])/).filter(s=>s.trim().length>0)}function K6(n){const t=n.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!t||t.length<4)return 0;const e=t.map(Number),s=[],a=[];for(let p=0;p<e.length;p+=2)p+1<e.length&&(s.push(e[p]),a.push(e[p+1]));if(s.length===0||a.length===0)return 0;const o=Math.min(...s),c=Math.max(...s),u=Math.min(...a),d=Math.max(...a);return(c-o)*(d-u)}function TS(n,t){const e=new Fs(n,!1);for(const s of e.instructions)t.instructions.push(s)}function Q6(n,t){if(typeof n=="string"){const c=document.createElement("div");c.innerHTML=n.trim(),n=c.querySelector("svg")}const e={context:t,defs:{},path:new Fs};V6(n,e);const s=n.children,{fillStyle:a,strokeStyle:o}=qE(n,e);for(let c=0;c<s.length;c++){const u=s[c];u.nodeName.toLowerCase()!=="defs"&&KE(u,e,a,o)}return t}function KE(n,t,e,s){const a=n.children,{fillStyle:o,strokeStyle:c}=qE(n,t);o&&e?e={...e,...o}:o&&(e=o),c&&s?s={...s,...c}:c&&(s=c);const u=!e&&!s;u&&(e={color:0});let d,h,p,y,x,v,S,w,_,A,R,C,j,k,I,N,L;switch(n.nodeName.toLowerCase()){case"path":{k=n.getAttribute("d");const H=n.getAttribute("fill-rule"),B=q6(k),U=H==="evenodd",z=B.length>1;if(U&&z){const V=B.map(O=>({path:O,area:K6(O)}));if(V.sort((O,$)=>$.area-O.area),B.length>3||!X6(V))for(let O=0;O<V.length;O++){const $=V[O],rt=O===0;t.context.beginPath();const it=new Fs(void 0,!0);TS($.path,it),t.context.path(it),rt?(e&&t.context.fill(e),s&&t.context.stroke(s)):t.context.cut()}else for(let O=0;O<V.length;O++){const $=V[O],rt=O%2===1;t.context.beginPath();const it=new Fs(void 0,!0);TS($.path,it),t.context.path(it),rt?t.context.cut():(e&&t.context.fill(e),s&&t.context.stroke(s))}}else{const V=H?H==="evenodd":!0;I=new Fs(k,V),t.context.path(I),e&&t.context.fill(e),s&&t.context.stroke(s)}break}case"circle":S=an(n,"cx",0),w=an(n,"cy",0),_=an(n,"r",0),t.context.ellipse(S,w,_,_),e&&t.context.fill(e),s&&t.context.stroke(s);break;case"rect":d=an(n,"x",0),h=an(n,"y",0),N=an(n,"width",0),L=an(n,"height",0),A=an(n,"rx",0),R=an(n,"ry",0),A||R?t.context.roundRect(d,h,N,L,A||R):t.context.rect(d,h,N,L),e&&t.context.fill(e),s&&t.context.stroke(s);break;case"ellipse":S=an(n,"cx",0),w=an(n,"cy",0),A=an(n,"rx",0),R=an(n,"ry",0),t.context.beginPath(),t.context.ellipse(S,w,A,R),e&&t.context.fill(e),s&&t.context.stroke(s);break;case"line":p=an(n,"x1",0),y=an(n,"y1",0),x=an(n,"x2",0),v=an(n,"y2",0),t.context.beginPath(),t.context.moveTo(p,y),t.context.lineTo(x,v),s&&t.context.stroke(s);break;case"polygon":j=n.getAttribute("points"),C=j.match(/-?\d+/g).map(H=>parseInt(H,10)),t.context.poly(C,!0),e&&t.context.fill(e),s&&t.context.stroke(s);break;case"polyline":j=n.getAttribute("points"),C=j.match(/-?\d+/g).map(H=>parseInt(H,10)),t.context.poly(C,!1),s&&t.context.stroke(s);break;case"g":case"svg":break;default:{Ve(`[SVG parser] <${n.nodeName}> elements unsupported`);break}}u&&(e=null);for(let H=0;H<a.length;H++)KE(a[H],t,e,s)}function J6(n){return An.isColorLike(n)}function CS(n){return n instanceof yd}function RS(n){return n instanceof Vs}function Z6(n){return n instanceof Wt}function tL(n,t,e){const s=An.shared.setValue(t??0);return n.color=s.toNumber(),n.alpha=s.alpha===1?e.alpha:s.alpha,n.texture=Wt.WHITE,{...e,...n}}function eL(n,t,e){return n.texture=t,{...e,...n}}function jS(n,t,e){return n.fill=t,n.color=16777215,n.texture=t.texture,n.matrix=t.transform,{...e,...n}}function MS(n,t,e){return t.buildGradient(),n.fill=t,n.color=16777215,n.texture=t.texture,n.matrix=t.transform,n.textureSpace=t.textureSpace,{...e,...n}}function nL(n,t){const e={...t,...n},s=An.shared.setValue(e.color);return e.alpha*=s.alpha,e.color=s.toNumber(),e}function ma(n,t){if(n==null)return null;const e={},s=n;return J6(n)?tL(e,n,t):Z6(n)?eL(e,n,t):CS(n)?jS(e,n,t):RS(n)?MS(e,n,t):s.fill&&CS(s.fill)?jS(s,s.fill,t):s.fill&&RS(s.fill)?MS(s,s.fill,t):nL(s,t)}function Wf(n,t){const{width:e,alignment:s,miterLimit:a,cap:o,join:c,pixelLine:u,...d}=t,h=ma(n,d);return h?{width:e,alignment:s,miterLimit:a,cap:o,join:c,pixelLine:u,...h}:null}const iL=new Vn,kS=new ue,p0=class fs extends Ki{constructor(){super(...arguments),this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this.uid=on("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this.destroyed=!1,this._activePath=new Fs,this._transform=new ue,this._fillStyle={...fs.defaultFillStyle},this._strokeStyle={...fs.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new Xi,this._boundsDirty=!0}clone(){const t=new fs;return t.batchMode=this.batchMode,t.instructions=this.instructions.slice(),t._activePath=this._activePath.clone(),t._transform=this._transform.clone(),t._fillStyle={...this._fillStyle},t._strokeStyle={...this._strokeStyle},t._stateStack=this._stateStack.slice(),t._bounds=this._bounds.clone(),t._boundsDirty=!0,t}get fillStyle(){return this._fillStyle}set fillStyle(t){this._fillStyle=ma(t,fs.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){this._strokeStyle=Wf(t,fs.defaultStrokeStyle)}setFillStyle(t){return this._fillStyle=ma(t,fs.defaultFillStyle),this}setStrokeStyle(t){return this._strokeStyle=ma(t,fs.defaultStrokeStyle),this}texture(t,e,s,a,o,c){return this.instructions.push({action:"texture",data:{image:t,dx:s||0,dy:a||0,dw:o||t.frame.width,dh:c||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:e?An.shared.setValue(e).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new Fs,this}fill(t,e){let s;const a=this.instructions[this.instructions.length-1];return this._tick===0&&a?.action==="stroke"?s=a.data.path:s=this._activePath.clone(),s?(t!=null&&(e!==void 0&&typeof t=="number"&&(ye(Qe,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),t={color:t,alpha:e}),this._fillStyle=ma(t,fs.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:s}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:t,y:e}=this._activePath.getLastPoint(Vn.shared);this._activePath.clear(),this._activePath.moveTo(t,e)}stroke(t){let e;const s=this.instructions[this.instructions.length-1];return this._tick===0&&s?.action==="fill"?e=s.data.path:e=this._activePath.clone(),e?(t!=null&&(this._strokeStyle=Wf(t,fs.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:e}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let t=0;t<2;t++){const e=this.instructions[this.instructions.length-1-t],s=this._activePath.clone();if(e&&(e.action==="stroke"||e.action==="fill"))if(e.data.hole)e.data.hole.addPath(s);else{e.data.hole=s;break}}return this._initNextPathLocation(),this}arc(t,e,s,a,o,c){this._tick++;const u=this._transform;return this._activePath.arc(u.a*t+u.c*e+u.tx,u.b*t+u.d*e+u.ty,s,a,o,c),this}arcTo(t,e,s,a,o){this._tick++;const c=this._transform;return this._activePath.arcTo(c.a*t+c.c*e+c.tx,c.b*t+c.d*e+c.ty,c.a*s+c.c*a+c.tx,c.b*s+c.d*a+c.ty,o),this}arcToSvg(t,e,s,a,o,c,u){this._tick++;const d=this._transform;return this._activePath.arcToSvg(t,e,s,a,o,d.a*c+d.c*u+d.tx,d.b*c+d.d*u+d.ty),this}bezierCurveTo(t,e,s,a,o,c,u){this._tick++;const d=this._transform;return this._activePath.bezierCurveTo(d.a*t+d.c*e+d.tx,d.b*t+d.d*e+d.ty,d.a*s+d.c*a+d.tx,d.b*s+d.d*a+d.ty,d.a*o+d.c*c+d.tx,d.b*o+d.d*c+d.ty,u),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(t,e,s,a){return this._tick++,this._activePath.ellipse(t,e,s,a,this._transform.clone()),this}circle(t,e,s){return this._tick++,this._activePath.circle(t,e,s,this._transform.clone()),this}path(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}lineTo(t,e){this._tick++;const s=this._transform;return this._activePath.lineTo(s.a*t+s.c*e+s.tx,s.b*t+s.d*e+s.ty),this}moveTo(t,e){this._tick++;const s=this._transform,a=this._activePath.instructions,o=s.a*t+s.c*e+s.tx,c=s.b*t+s.d*e+s.ty;return a.length===1&&a[0].action==="moveTo"?(a[0].data[0]=o,a[0].data[1]=c,this):(this._activePath.moveTo(o,c),this)}quadraticCurveTo(t,e,s,a,o){this._tick++;const c=this._transform;return this._activePath.quadraticCurveTo(c.a*t+c.c*e+c.tx,c.b*t+c.d*e+c.ty,c.a*s+c.c*a+c.tx,c.b*s+c.d*a+c.ty,o),this}rect(t,e,s,a){return this._tick++,this._activePath.rect(t,e,s,a,this._transform.clone()),this}roundRect(t,e,s,a,o){return this._tick++,this._activePath.roundRect(t,e,s,a,o,this._transform.clone()),this}poly(t,e){return this._tick++,this._activePath.poly(t,e,this._transform.clone()),this}regularPoly(t,e,s,a,o=0,c){return this._tick++,this._activePath.regularPoly(t,e,s,a,o,c),this}roundPoly(t,e,s,a,o,c){return this._tick++,this._activePath.roundPoly(t,e,s,a,o,c),this}roundShape(t,e,s,a){return this._tick++,this._activePath.roundShape(t,e,s,a),this}filletRect(t,e,s,a,o){return this._tick++,this._activePath.filletRect(t,e,s,a,o),this}chamferRect(t,e,s,a,o,c){return this._tick++,this._activePath.chamferRect(t,e,s,a,o,c),this}star(t,e,s,a,o=0,c=0){return this._tick++,this._activePath.star(t,e,s,a,o,c,this._transform.clone()),this}svg(t){return this._tick++,Q6(t,this),this}restore(){const t=this._stateStack.pop();return t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(t){return this._transform.rotate(t),this}scale(t,e=t){return this._transform.scale(t,e),this}setTransform(t,e,s,a,o,c){return t instanceof ue?(this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty),this):(this._transform.set(t,e,s,a,o,c),this)}transform(t,e,s,a,o,c){return t instanceof ue?(this._transform.append(t),this):(kS.set(t,e,s,a,o,c),this._transform.append(kS),this)}translate(t,e=t){return this._transform.translate(t,e),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,!this.dirty&&(this.emit("update",this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;const t=this._bounds;t.clear();for(let e=0;e<this.instructions.length;e++){const s=this.instructions[e],a=s.action;if(a==="fill"){const o=s.data;t.addBounds(o.path.bounds)}else if(a==="texture"){const o=s.data;t.addFrame(o.dx,o.dy,o.dx+o.dw,o.dy+o.dh,o.transform)}if(a==="stroke"){const o=s.data,c=o.style.alignment,u=o.style.width*(1-c),d=o.path.bounds;t.addFrame(d.minX-u,d.minY-u,d.maxX+u,d.maxY+u)}}return t}containsPoint(t){if(!this.bounds.containsPoint(t.x,t.y))return!1;const e=this.instructions;let s=!1;for(let a=0;a<e.length;a++){const o=e[a],c=o.data,u=c.path;if(!o.action||!u)continue;const d=c.style,h=u.shapePath.shapePrimitives;for(let p=0;p<h.length;p++){const y=h[p].shape;if(!d||!y)continue;const x=h[p].transform,v=x?x.applyInverse(t,iL):t;if(o.action==="fill")s=y.contains(v.x,v.y);else{const w=d;s=y.strokeContains(v.x,v.y,w.width,w.alignment)}const S=c.hole;if(S){const w=S.shapePath?.shapePrimitives;if(w)for(let _=0;_<w.length;_++)w[_].shape.contains(v.x,v.y)&&(s=!1)}if(s)return!0}}return s}unload(){this.emit("unload",this);for(const t in this._gpuData)this._gpuData[t]?.destroy();this._gpuData=Object.create(null)}destroy(t=!1){if(this.destroyed)return;if(this.destroyed=!0,this._stateStack.length=0,this._transform=null,this.unload(),this.emit("destroy",this),this.removeAllListeners(),typeof t=="boolean"?t:t?.texture){const s=typeof t=="boolean"?t:t?.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(s)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(s))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};p0.defaultFillStyle={color:16777215,alpha:1,texture:Wt.WHITE,matrix:null,fill:null,textureSpace:"local"};p0.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:Wt.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let ua=p0;const m0=class uo extends Ki{constructor(t={}){super(),this.uid=on("textStyle"),this._tick=0,sL(t);const e={...uo.defaultTextStyle,...t};for(const s in e){const a=s;this[a]=e[s]}this.update(),this._tick=0}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.update())}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.update())}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(t!==null&&typeof t=="object"?this._dropShadow=this._createProxy({...uo.defaultDropShadow,...t}):this._dropShadow=t?this._createProxy({...uo.defaultDropShadow}):null,this.update())}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily!==t&&(this._fontFamily=t,this.update())}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(typeof t=="string"?this._fontSize=parseInt(t,10):this._fontSize=t,this.update())}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t.toLowerCase(),this.update())}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.update())}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.update())}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.update())}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.update())}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.update())}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.update())}get filters(){return this._filters}set filters(t){this._filters!==t&&(this._filters=Object.freeze(t),this.update())}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.update())}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.update())}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.update())}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.update())}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.update())}get fill(){return this._originalFill}set fill(t){t!==this._originalFill&&(this._originalFill=t,this._isFillStyle(t)&&(this._originalFill=this._createProxy({...ua.defaultFillStyle,...t},()=>{this._fill=ma({...this._originalFill},ua.defaultFillStyle)})),this._fill=ma(t===0?"black":t,ua.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(t){t!==this._originalStroke&&(this._originalStroke=t,this._isFillStyle(t)&&(this._originalStroke=this._createProxy({...ua.defaultStrokeStyle,...t},()=>{this._stroke=Wf({...this._originalStroke},ua.defaultStrokeStyle)})),this._stroke=Wf(t,ua.defaultStrokeStyle),this.update())}update(){this._tick++,this.emit("update",this)}reset(){const t=uo.defaultTextStyle;for(const e in t)this[e]=t[e]}get styleKey(){return`${this.uid}-${this._tick}`}clone(){return new uo({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let t=0;if(this._filters)for(let e=0;e<this._filters.length;e++)t+=this._filters[e].padding;return Math.max(this._padding,t)}destroy(t=!1){if(this.removeAllListeners(),typeof t=="boolean"?t:t?.texture){const s=typeof t=="boolean"?t:t?.textureSource;this._fill?.texture&&this._fill.texture.destroy(s),this._originalFill?.texture&&this._originalFill.texture.destroy(s),this._stroke?.texture&&this._stroke.texture.destroy(s),this._originalStroke?.texture&&this._originalStroke.texture.destroy(s)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(t,e){return new Proxy(t,{set:(s,a,o)=>(s[a]===o||(s[a]=o,e?.(a,o),this.update()),!0)})}_isFillStyle(t){return(t??null)!==null&&!(An.isColorLike(t)||t instanceof Vs||t instanceof yd)}};m0.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};m0.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let wa=m0;function sL(n){const t=n;if(typeof t.dropShadow=="boolean"&&t.dropShadow){const e=wa.defaultDropShadow;n.dropShadow={alpha:t.dropShadowAlpha??e.alpha,angle:t.dropShadowAngle??e.angle,blur:t.dropShadowBlur??e.blur,color:t.dropShadowColor??e.color,distance:t.dropShadowDistance??e.distance}}if(t.strokeThickness!==void 0){ye(Qe,"strokeThickness is now a part of stroke");const e=t.stroke;let s={};if(An.isColorLike(e))s.color=e;else if(e instanceof Vs||e instanceof yd)s.fill=e;else if(Object.hasOwnProperty.call(e,"color")||Object.hasOwnProperty.call(e,"fill"))s=e;else throw new Error("Invalid stroke value.");n.stroke={...s,width:t.strokeThickness}}if(Array.isArray(t.fillGradientStops)){if(ye(Qe,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(t.fill)||t.fill.length===0)throw new Error("Invalid fill value. Expected an array of colors for gradient fill.");t.fill.length!==t.fillGradientStops.length&&Ve("The number of fill colors must match the number of fill gradient stops.");const e=new Vs({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),s=t.fillGradientStops.slice(),a=t.fill.map(o=>An.shared.setValue(o).toNumber());s.forEach((o,c)=>{e.addColorStop(o,a[c])}),n.fill={fill:e}}}class rL{constructor(t){this._canvasPool=Object.create(null),this.canvasOptions=t||{},this.enableFullScreen=!1}_createCanvasAndContext(t,e){const s=Be.get().createCanvas();s.width=t,s.height=e;const a=s.getContext("2d");return{canvas:s,context:a}}getOptimalCanvasAndContext(t,e,s=1){t=Math.ceil(t*s-1e-6),e=Math.ceil(e*s-1e-6),t=Eo(t),e=Eo(e);const a=(t<<17)+(e<<1);this._canvasPool[a]||(this._canvasPool[a]=[]);let o=this._canvasPool[a].pop();return o||(o=this._createCanvasAndContext(t,e)),o}returnCanvasAndContext(t){const e=t.canvas,{width:s,height:a}=e,o=(s<<17)+(a<<1);t.context.resetTransform(),t.context.clearRect(0,0,s,a),this._canvasPool[o].push(t)}clear(){this._canvasPool={}}}const gc=new rL;Tc.register(gc);const OS=1e5;function Yf(n,t,e,s=0){if(n.texture===Wt.WHITE&&!n.fill)return An.shared.setValue(n.color).setAlpha(n.alpha??1).toHexa();if(n.fill){if(n.fill instanceof yd){const a=n.fill,o=t.createPattern(a.texture.source.resource,"repeat"),c=a.transform.copyTo(ue.shared);return c.scale(a.texture.frame.width,a.texture.frame.height),o.setTransform(c),o}else if(n.fill instanceof Vs){const a=n.fill,o=a.type==="linear",c=a.textureSpace==="local";let u=1,d=1;c&&e&&(u=e.width+s,d=e.height+s);let h,p=!1;if(o){const{start:y,end:x}=a;h=t.createLinearGradient(y.x*u,y.y*d,x.x*u,x.y*d),p=Math.abs(x.x-y.x)<Math.abs((x.y-y.y)*.1)}else{const{center:y,innerRadius:x,outerCenter:v,outerRadius:S}=a;h=t.createRadialGradient(y.x*u,y.y*d,x*u,v.x*u,v.y*d,S*u)}if(p&&c&&e){const y=e.lineHeight/d;for(let x=0;x<e.lines.length;x++){const v=(x*e.lineHeight+s/2)/d;a.colorStops.forEach(S=>{const w=v+S.offset*y;h.addColorStop(Math.floor(w*OS)/OS,An.shared.setValue(S.color).toHex())})}}else a.colorStops.forEach(y=>{h.addColorStop(y.offset,An.shared.setValue(y.color).toHex())});return h}}else{const a=t.createPattern(n.texture.source.resource,"repeat"),o=n.matrix.copyTo(ue.shared);return o.scale(n.texture.frame.width,n.texture.frame.height),a.setTransform(o),a}return Ve("FillStyle not recognised",n),"red"}const QE=class JE extends OE{constructor(t){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;const e={...JE.defaultOptions,...t};this._textureSize=e.textureSize,this._mipmap=e.mipmap;const s=e.style.clone();e.overrideFill&&(s._fill.color=16777215,s._fill.alpha=1,s._fill.texture=Wt.WHITE,s._fill.fill=null),this.applyFillAsTint=e.overrideFill;const a=s.fontSize;s.fontSize=this.baseMeasurementFontSize;const o=$f(s);e.overrideSize?s._stroke&&(s._stroke.width*=this.baseRenderedFontSize/a):s.fontSize=this.baseRenderedFontSize=a,this._style=s,this._skipKerning=e.skipKerning??!1,this.resolution=e.resolution??1,this._padding=e.padding??4,e.textureStyle&&(this._textureStyle=e.textureStyle instanceof Ao?e.textureStyle:new Ao(e.textureStyle)),this.fontMetrics=ds.measureFont(o),this.lineHeight=s.lineHeight||this.fontMetrics.fontSize||s.fontSize}ensureCharacters(t){const e=ds.graphemeSegmenter(t).filter(_=>!this._currentChars.includes(_)).filter((_,A,R)=>R.indexOf(_)===A);if(!e.length)return;this._currentChars=[...this._currentChars,...e];let s;this._currentPageIndex===-1?s=this._nextPage():s=this.pages[this._currentPageIndex];let{canvas:a,context:o}=s.canvasAndContext,c=s.texture.source;const u=this._style;let d=this._currentX,h=this._currentY,p=this._currentMaxCharHeight;const y=this.baseRenderedFontSize/this.baseMeasurementFontSize,x=this._padding*y;let v=!1;const S=a.width/this.resolution,w=a.height/this.resolution;for(let _=0;_<e.length;_++){const A=e[_],R=ds.measureText(A,u,a,!1);R.lineHeight=R.height;const C=R.width*y,j=Math.ceil((u.fontStyle==="italic"?2:1)*C),k=R.height*y,I=j+x*2,N=k+x*2;if(v=!1,A!==`
`&&A!=="\r"&&A!=="	"&&A!==" "&&(v=!0,p=Math.ceil(Math.max(N,p))),d+I>S&&(h+=p,p=N,d=0,h+p>w)){c.update();const H=this._nextPage();a=H.canvasAndContext.canvas,o=H.canvasAndContext.context,c=H.texture.source,d=0,h=0,p=0}const L=C/y-(u.dropShadow?.distance??0)-(u._stroke?.width??0);if(this.chars[A]={id:A.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:L,kerning:{}},v){this._drawGlyph(o,R,d+x,h+x,y,u);const H=c.width*y,B=c.height*y,U=new Je(d/H*c.width,h/B*c.height,I/H*c.width,N/B*c.height);this.chars[A].texture=new Wt({source:c,frame:U}),d+=Math.ceil(I)}}c.update(),this._currentX=d,this._currentY=h,this._currentMaxCharHeight=p,this._skipKerning&&this._applyKerning(e,o)}get pageTextures(){return ye(Qe,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(t,e){const s=this._measureCache;for(let a=0;a<t.length;a++){const o=t[a];for(let c=0;c<this._currentChars.length;c++){const u=this._currentChars[c];let d=s[o];d||(d=s[o]=e.measureText(o).width);let h=s[u];h||(h=s[u]=e.measureText(u).width);let p=e.measureText(o+u).width,y=p-(d+h);y&&(this.chars[o].kerning[u]=y),p=e.measureText(o+u).width,y=p-(d+h),y&&(this.chars[u].kerning[o]=y)}}}_nextPage(){this._currentPageIndex++;const t=this.resolution,e=gc.getOptimalCanvasAndContext(this._textureSize,this._textureSize,t);this._setupContext(e.context,this._style,t);const s=t*(this.baseRenderedFontSize/this.baseMeasurementFontSize),a=new Wt({source:new Sa({resource:e.canvas,resolution:s,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})});this._textureStyle&&(a.source.style=this._textureStyle);const o={canvasAndContext:e,texture:a};return this.pages[this._currentPageIndex]=o,o}_setupContext(t,e,s){e.fontSize=this.baseRenderedFontSize,t.scale(s,s),t.font=$f(e),e.fontSize=this.baseMeasurementFontSize,t.textBaseline=e.textBaseline;const a=e._stroke,o=a?.width??0;if(a&&(t.lineWidth=o,t.lineJoin=a.join,t.miterLimit=a.miterLimit,t.strokeStyle=Yf(a,t)),e._fill&&(t.fillStyle=Yf(e._fill,t)),e.dropShadow){const c=e.dropShadow,u=An.shared.setValue(c.color).toArray(),d=c.blur*s,h=c.distance*s;t.shadowColor=`rgba(${u[0]*255},${u[1]*255},${u[2]*255},${c.alpha})`,t.shadowBlur=d,t.shadowOffsetX=Math.cos(c.angle)*h,t.shadowOffsetY=Math.sin(c.angle)*h}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}_drawGlyph(t,e,s,a,o,c){const u=e.text,d=e.fontProperties,p=(c._stroke?.width??0)*o,y=s+p/2,x=a-p/2,v=d.descent*o,S=e.lineHeight*o;let w=!1;c.stroke&&p&&(w=!0,t.strokeText(u,y,x+S-v));const{shadowBlur:_,shadowOffsetX:A,shadowOffsetY:R}=t;c._fill&&(w&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),t.fillText(u,y,x+S-v)),w&&(t.shadowBlur=_,t.shadowOffsetX=A,t.shadowOffsetY=R)}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{canvasAndContext:e,texture:s}=this.pages[t];gc.returnCanvasAndContext(e),s.destroy(!0)}this.pages=null}};QE.defaultOptions={textureSize:512,style:new wa,mipmap:!0};let NS=QE;function aL(n,t,e,s){const a={width:0,height:0,offsetY:0,scale:t.fontSize/e.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};a.offsetY=e.baseLineOffset;let o=a.lines[0],c=null,u=!0;const d={width:0,start:0,index:0,positions:[],chars:[]},h=e.baseMeasurementFontSize/t.fontSize,p=t.letterSpacing*h,y=t.wordWrapWidth*h,x=t.lineHeight?t.lineHeight*h:e.lineHeight,v=t.wordWrap&&t.breakWords,S=A=>{const R=o.width;for(let C=0;C<d.index;C++){const j=A.positions[C];o.chars.push(A.chars[C]),o.charPositions.push(j+R)}o.width+=A.width,u=!1,d.width=0,d.index=0,d.chars.length=0},w=()=>{let A=o.chars.length-1;if(s){let R=o.chars[A];for(;R===" ";)o.width-=e.chars[R].xAdvance,R=o.chars[--A]}a.width=Math.max(a.width,o.width),o={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},u=!0,a.lines.push(o),a.height+=x},_=A=>A-p>y;for(let A=0;A<n.length+1;A++){let R;const C=A===n.length;C||(R=n[A]);const j=e.chars[R]||e.chars[" "];if(/(?:\s)/.test(R)||R==="\r"||R===`
`||C){if(!u&&t.wordWrap&&_(o.width+d.width)?(w(),S(d),C||o.charPositions.push(0)):(d.start=o.width,S(d),C||o.charPositions.push(0)),R==="\r"||R===`
`)w();else if(!C){const L=j.xAdvance+(j.kerning[c]||0)+p;o.width+=L,o.spaceWidth=L,o.spacesIndex.push(o.charPositions.length),o.chars.push(R)}}else{const N=j.kerning[c]||0,L=j.xAdvance+N+p;v&&_(o.width+d.width+L)&&(S(d),w()),d.positions[d.index++]=d.width+N,d.chars.push(R),d.width+=L}c=R}return w(),t.align==="center"?oL(a):t.align==="right"?lL(a):t.align==="justify"&&cL(a),a}function oL(n){for(let t=0;t<n.lines.length;t++){const e=n.lines[t],s=n.width/2-e.width/2;for(let a=0;a<e.charPositions.length;a++)e.charPositions[a]+=s}}function lL(n){for(let t=0;t<n.lines.length;t++){const e=n.lines[t],s=n.width-e.width;for(let a=0;a<e.charPositions.length;a++)e.charPositions[a]+=s}}function cL(n){const t=n.width;for(let e=0;e<n.lines.length;e++){const s=n.lines[e];let a=0,o=s.spacesIndex[a++],c=0;const u=s.spacesIndex.length,h=(t-s.width)/u;for(let p=0;p<s.charPositions.length;p++)p===o&&(o=s.spacesIndex[a++],c+=h),s.charPositions[p]+=c}}function uL(n){if(n==="")return[];typeof n=="string"&&(n=[n]);const t=[];for(let e=0,s=n.length;e<s;e++){const a=n[e];if(Array.isArray(a)){if(a.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${a.length}.`);if(a[0].length===0||a[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const o=a[0].charCodeAt(0),c=a[1].charCodeAt(0);if(c<o)throw new Error("[BitmapFont]: Invalid character range.");for(let u=o,d=c;u<=d;u++)t.push(String.fromCharCode(u))}else t.push(...Array.from(a))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}let pf=0;class fL{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null},this.measureCache=NE(1e3)}getFont(t,e){let s=`${e.fontFamily}-bitmap`,a=!0;if(e._fill.fill&&!e._stroke?(s+=e._fill.fill.styleKey,a=!1):(e._stroke||e.dropShadow)&&(s=`${e.styleKey}-bitmap`,a=!1),!$e.has(s)){const c=Object.create(e);c.lineHeight=0;const u=new NS({style:c,overrideFill:a,overrideSize:!0,...this.defaultOptions});pf++,pf>50&&Ve("BitmapText",`You have dynamically created ${pf} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),u.once("destroy",()=>{pf--,$e.remove(s)}),$e.set(s,u)}const o=$e.get(s);return o.ensureCharacters?.(t),o}getLayout(t,e,s=!0){const a=this.getFont(t,e),o=`${t}-${e.styleKey}-${s}`;if(this.measureCache.has(o))return this.measureCache.get(o);const c=ds.graphemeSegmenter(t),u=aL(c,e,a,s);return this.measureCache.set(o,u),u}measureText(t,e,s=!0){return this.getLayout(t,e,s)}install(...t){let e=t[0];typeof e=="string"&&(e={name:e,style:t[1],chars:t[2]?.chars,resolution:t[2]?.resolution,padding:t[2]?.padding,skipKerning:t[2]?.skipKerning},ye(Qe,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const s=e?.name;if(!s)throw new Error("[BitmapFontManager] Property `name` is required.");e={...this.defaultOptions,...e};const a=e.style,o=a instanceof wa?a:new wa(a),c=e.dynamicFill??this._canUseTintForStyle(o),u=new NS({style:o,overrideFill:c,skipKerning:e.skipKerning,padding:e.padding,resolution:e.resolution,overrideSize:!1,textureStyle:e.textureStyle}),d=uL(e.chars);return u.ensureCharacters(d.join("")),$e.set(`${s}-bitmap`,u),u.once("destroy",()=>$e.remove(`${s}-bitmap`)),u}uninstall(t){const e=`${t}-bitmap`,s=$e.get(e);s&&s.destroy()}_canUseTintForStyle(t){return!t._stroke&&(!t.dropShadow||t.dropShadow.color===0)&&!t._fill.fill&&t._fill.color===16777215}}const IS=new fL;class ZE extends OE{constructor(t,e){super();const{textures:s,data:a}=t;Object.keys(a.pages).forEach(o=>{const c=a.pages[parseInt(o,10)],u=s[c.id];this.pages.push({texture:u})}),Object.keys(a.chars).forEach(o=>{const c=a.chars[o],{frame:u,source:d,rotate:h}=s[c.page],p=Oe.transformRectCoords(c,u,h,new Je),y=new Wt({frame:p,orig:new Je(0,0,c.width,c.height),source:d,rotate:h});this.chars[o]={id:o.codePointAt(0),xOffset:c.xOffset,yOffset:c.yOffset,xAdvance:c.xAdvance,kerning:c.kerning??{},texture:y}}),this.baseRenderedFontSize=a.fontSize,this.baseMeasurementFontSize=a.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:a.fontSize},this.baseLineOffset=a.baseLineOffset,this.lineHeight=a.lineHeight,this.fontFamily=a.fontFamily,this.distanceField=a.distanceField??{type:"none",range:0},this.url=e}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{texture:e}=this.pages[t];e.destroy(!0)}this.pages=null}static install(t){IS.install(t)}static uninstall(t){IS.uninstall(t)}}const ym={test(n){return typeof n=="string"&&n.startsWith("info face=")},parse(n){const t=n.match(/^[a-z]+\s+.+$/gm),e={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const y in t){const x=t[y].match(/^[a-z]+/gm)[0],v=t[y].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),S={};for(const w in v){const _=v[w].split("="),A=_[0],R=_[1].replace(/"/gm,""),C=parseFloat(R),j=isNaN(C)?R:C;S[A]=j}e[x].push(S)}const s={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[a]=e.info,[o]=e.common,[c]=e.distanceField??[];c&&(s.distanceField={range:parseInt(c.distanceRange,10),type:c.fieldType}),s.fontSize=parseInt(a.size,10),s.fontFamily=a.face,s.lineHeight=parseInt(o.lineHeight,10);const u=e.page;for(let y=0;y<u.length;y++)s.pages.push({id:parseInt(u[y].id,10)||0,file:u[y].file});const d={};s.baseLineOffset=s.lineHeight-parseInt(o.base,10);const h=e.char;for(let y=0;y<h.length;y++){const x=h[y],v=parseInt(x.id,10);let S=x.letter??x.char??String.fromCharCode(v);S==="space"&&(S=" "),d[v]=S,s.chars[S]={id:v,page:parseInt(x.page,10)||0,x:parseInt(x.x,10),y:parseInt(x.y,10),width:parseInt(x.width,10),height:parseInt(x.height,10),xOffset:parseInt(x.xoffset,10),yOffset:parseInt(x.yoffset,10),xAdvance:parseInt(x.xadvance,10),kerning:{}}}const p=e.kerning||[];for(let y=0;y<p.length;y++){const x=parseInt(p[y].first,10),v=parseInt(p[y].second,10),S=parseInt(p[y].amount,10);s.chars[d[v]].kerning[d[x]]=S}return s}},LS={test(n){const t=n;return typeof t!="string"&&"getElementsByTagName"in t&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(n){const t={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},e=n.getElementsByTagName("info")[0],s=n.getElementsByTagName("common")[0],a=n.getElementsByTagName("distanceField")[0];a&&(t.distanceField={type:a.getAttribute("fieldType"),range:parseInt(a.getAttribute("distanceRange"),10)});const o=n.getElementsByTagName("page"),c=n.getElementsByTagName("char"),u=n.getElementsByTagName("kerning");t.fontSize=parseInt(e.getAttribute("size"),10),t.fontFamily=e.getAttribute("face"),t.lineHeight=parseInt(s.getAttribute("lineHeight"),10);for(let h=0;h<o.length;h++)t.pages.push({id:parseInt(o[h].getAttribute("id"),10)||0,file:o[h].getAttribute("file")});const d={};t.baseLineOffset=t.lineHeight-parseInt(s.getAttribute("base"),10);for(let h=0;h<c.length;h++){const p=c[h],y=parseInt(p.getAttribute("id"),10);let x=p.getAttribute("letter")??p.getAttribute("char")??String.fromCharCode(y);x==="space"&&(x=" "),d[y]=x,t.chars[x]={id:y,page:parseInt(p.getAttribute("page"),10)||0,x:parseInt(p.getAttribute("x"),10),y:parseInt(p.getAttribute("y"),10),width:parseInt(p.getAttribute("width"),10),height:parseInt(p.getAttribute("height"),10),xOffset:parseInt(p.getAttribute("xoffset"),10),yOffset:parseInt(p.getAttribute("yoffset"),10),xAdvance:parseInt(p.getAttribute("xadvance"),10),kerning:{}}}for(let h=0;h<u.length;h++){const p=parseInt(u[h].getAttribute("first"),10),y=parseInt(u[h].getAttribute("second"),10),x=parseInt(u[h].getAttribute("amount"),10);t.chars[d[y]].kerning[d[p]]=x}return t}},DS={test(n){return typeof n=="string"&&n.match(/<font(\s|>)/)?LS.test(Be.get().parseXML(n)):!1},parse(n){return LS.parse(Be.get().parseXML(n))}},dL=[".xml",".fnt"],hL={extension:{type:Pt.CacheParser,name:"cacheBitmapFont"},test:n=>n instanceof ZE,getCacheableAssets(n,t){const e={};return n.forEach(s=>{e[s]=t,e[`${s}-bitmap`]=t}),e[`${t.fontFamily}-bitmap`]=t,e}},pL={extension:{type:Pt.LoadParser,priority:Lr.Normal},name:"loadBitmapFont",id:"bitmap-font",test(n){return dL.includes(Si.extname(n).toLowerCase())},async testParse(n){return ym.test(n)||DS.test(n)},async parse(n,t,e){const s=ym.test(n)?ym.parse(n):DS.parse(n),{src:a}=t,{pages:o}=s,c=[],u=s.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let y=0;y<o.length;++y){const x=o[y].file;let v=Si.join(Si.dirname(a),x);v=gg(v,a),c.push({src:v,data:u})}const d=await e.load(c),h=c.map(y=>d[y.src]);return new ZE({data:s,textures:h},a)},async load(n,t){return await(await Be.get().fetch(n)).text()},async unload(n,t,e){await Promise.all(n.pages.map(s=>e.unload(s.texture.source._sourceOrigin))),n.destroy()}};class mL{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let s=0;s<e;s++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}const gL={extension:{type:Pt.CacheParser,name:"cacheTextureArray"},test:n=>Array.isArray(n)&&n.every(t=>t instanceof Wt),getCacheableAssets:(n,t)=>{const e={};return n.forEach(s=>{t.forEach((a,o)=>{e[s+(o===0?"":o+1)]=a})}),e}};async function tA(n){if("Image"in globalThis)return new Promise(t=>{const e=new Image;e.onload=()=>{t(!0)},e.onerror=()=>{t(!1)},e.src=n});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(n)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}const yL={extension:{type:Pt.DetectionParser,priority:1},test:async()=>tA("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async n=>[...n,"avif"],remove:async n=>n.filter(t=>t!=="avif")},BS=["png","jpg","jpeg"],bL={extension:{type:Pt.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async n=>[...n,...BS],remove:async n=>n.filter(t=>!BS.includes(t))},xL="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function xd(n){return xL?!1:document.createElement("video").canPlayType(n)!==""}const vL={extension:{type:Pt.DetectionParser,priority:0},test:async()=>xd("video/mp4"),add:async n=>[...n,"mp4","m4v"],remove:async n=>n.filter(t=>t!=="mp4"&&t!=="m4v")},SL={extension:{type:Pt.DetectionParser,priority:0},test:async()=>xd("video/ogg"),add:async n=>[...n,"ogv"],remove:async n=>n.filter(t=>t!=="ogv")},_L={extension:{type:Pt.DetectionParser,priority:0},test:async()=>xd("video/webm"),add:async n=>[...n,"webm"],remove:async n=>n.filter(t=>t!=="webm")},wL={extension:{type:Pt.DetectionParser,priority:0},test:async()=>tA("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async n=>[...n,"webp"],remove:async n=>n.filter(t=>t!=="webp")},eA=class If{constructor(){this.loadOptions={...If.defaultOptions},this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,e,s)=>(this._parsersValidated=!1,t[e]=s,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,e){const s={promise:null,parser:null};return s.promise=(async()=>{let a=null,o=null;if((e.parser||e.loadParser)&&(o=this._parserHash[e.parser||e.loadParser],e.loadParser&&Ve(`[Assets] "loadParser" is deprecated, use "parser" instead for ${t}`),o||Ve(`[Assets] specified load parser "${e.parser||e.loadParser}" not found while loading ${t}`)),!o){for(let c=0;c<this.parsers.length;c++){const u=this.parsers[c];if(u.load&&u.test?.(t,e,this)){o=u;break}}if(!o)return Ve(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}a=await o.load(t,e,this),s.parser=o;for(let c=0;c<this.parsers.length;c++){const u=this.parsers[c];u.parse&&u.parse&&await u.testParse?.(a,e,this)&&(a=await u.parse(a,e,this)||a,s.parser=u)}return a})(),s}async load(t,e){this._parsersValidated||this._validateParsers();const s=typeof e=="function"?{...If.defaultOptions,...this.loadOptions,onProgress:e}:{...If.defaultOptions,...this.loadOptions,...e||{}},{onProgress:a,onError:o,strategy:c,retryCount:u,retryDelay:d}=s;let h=0;const p={},y=Gf(t),x=$i(t,w=>({alias:[w],src:w,data:{}})),v=x.reduce((w,_)=>w+(_.progressSize||1),0),S=x.map(async w=>{const _=Si.toAbsolute(w.src);p[w.src]||(await this._loadAssetWithRetry(_,w,{onProgress:a,onError:o,strategy:c,retryCount:u,retryDelay:d},p),h+=w.progressSize||1,a&&a(h/v))});return await Promise.all(S),y?p[x[0].src]:p}async unload(t){const s=$i(t,a=>({alias:[a],src:a})).map(async a=>{const o=Si.toAbsolute(a.src),c=this.promiseCache[o];if(c){const u=await c.promise;delete this.promiseCache[o],await c.parser?.unload?.(u,a,this)}});await Promise.all(s)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name||t.id).reduce((t,e)=>(!e.name&&!e.id?Ve("[Assets] parser should have an id"):(t[e.name]||t[e.id])&&Ve(`[Assets] parser id conflict "${e.id}"`),t[e.name]=e,e.id&&(t[e.id]=e),t),{})}async _loadAssetWithRetry(t,e,s,a){let o=0;const{onError:c,strategy:u,retryCount:d,retryDelay:h}=s,p=y=>new Promise(x=>setTimeout(x,y));for(;;)try{this.promiseCache[t]||(this.promiseCache[t]=this._getLoadPromiseAndParser(t,e)),a[e.src]=await this.promiseCache[t].promise;return}catch(y){delete this.promiseCache[t],delete a[e.src],o++;const x=u!=="retry"||o>d;if(u==="retry"&&!x){c&&c(y,e),await p(h);continue}if(u==="skip"){c&&c(y,e);return}c&&c(y,e);const v=new Error(`[Loader.load] Failed to load ${t}.
${y}`);throw y instanceof Error&&y.stack&&(v.stack=y.stack),v}}};eA.defaultOptions={onProgress:void 0,onError:void 0,strategy:"throw",retryCount:3,retryDelay:250};let EL=eA;function Lo(n,t){if(Array.isArray(t)){for(const e of t)if(n.startsWith(`data:${e}`))return!0;return!1}return n.startsWith(`data:${t}`)}function Do(n,t){const e=n.split("?")[0],s=Si.extname(e).toLowerCase();return Array.isArray(t)?t.includes(s):s===t}const AL=".json",TL="application/json",CL={extension:{type:Pt.LoadParser,priority:Lr.Low},name:"loadJson",id:"json",test(n){return Lo(n,TL)||Do(n,AL)},async load(n){return await(await Be.get().fetch(n)).json()}},RL=".txt",jL="text/plain",ML={name:"loadTxt",id:"text",extension:{type:Pt.LoadParser,priority:Lr.Low,name:"loadTxt"},test(n){return Lo(n,jL)||Do(n,RL)},async load(n){return await(await Be.get().fetch(n)).text()}},kL=["normal","bold","100","200","300","400","500","600","700","800","900"],OL=[".ttf",".otf",".woff",".woff2"],NL=["font/ttf","font/otf","font/woff","font/woff2"],IL=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function LL(n){const t=Si.extname(n),a=Si.basename(n,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(u=>u.charAt(0).toUpperCase()+u.slice(1));let o=a.length>0;for(const u of a)if(!u.match(IL)){o=!1;break}let c=a.join(" ");return o||(c=`"${c.replace(/[\\"]/g,"\\$&")}"`),c}const DL=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function BL(n){return DL.test(n)?n:encodeURI(n)}const UL={extension:{type:Pt.LoadParser,priority:Lr.Low},name:"loadWebFont",id:"web-font",test(n){return Lo(n,NL)||Do(n,OL)},async load(n,t){const e=Be.get().getFontFaceSet();if(e){const s=[],a=t.data?.family??LL(n),o=t.data?.weights?.filter(u=>kL.includes(u))??["normal"],c=t.data??{};for(let u=0;u<o.length;u++){const d=o[u],h=new FontFace(a,`url(${BL(n)})`,{...c,weight:d});await h.load(),e.add(h),s.push(h)}return $e.has(`${a}-and-url`)?$e.get(`${a}-and-url`).entries.push({url:n,faces:s}):$e.set(`${a}-and-url`,{entries:[{url:n,faces:s}]}),s.length===1?s[0]:s}return Ve("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(n){const t=Array.isArray(n)?n:[n],e=t[0].family,s=$e.get(`${e}-and-url`),a=s.entries.find(o=>o.faces.some(c=>t.indexOf(c)!==-1));a.faces=a.faces.filter(o=>t.indexOf(o)===-1),a.faces.length===0&&(s.entries=s.entries.filter(o=>o!==a)),t.forEach(o=>{Be.get().getFontFaceSet().delete(o)}),s.entries.length===0&&$e.remove(`${e}-and-url`)}};function g0(n,t=1){const e=Io.RETINA_PREFIX?.exec(n);return e?parseFloat(e[1]):t}function y0(n,t,e){n.label=e,n._sourceOrigin=e;const s=new Wt({source:n,label:e}),a=()=>{delete t.promiseCache[e],$e.has(e)&&$e.remove(e)};return s.source.once("destroy",()=>{t.promiseCache[e]&&(Ve("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),a())}),s.once("destroy",()=>{n.destroyed||(Ve("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),a())}),s}const zL=".svg",PL="image/svg+xml",HL={extension:{type:Pt.LoadParser,priority:Lr.Low,name:"loadSVG"},name:"loadSVG",id:"svg",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(n){return Lo(n,PL)||Do(n,zL)},async load(n,t,e){return t.data?.parseAsGraphicsContext??this.config.parseAsGraphicsContext?GL(n):FL(n,t,e,this.config.crossOrigin)},unload(n){n.destroy(!0)}};async function FL(n,t,e,s){const a=await Be.get().fetch(n),o=Be.get().createImage();o.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(await a.text())}`,o.crossOrigin=s,await o.decode();const c=t.data?.width??o.width,u=t.data?.height??o.height,d=t.data?.resolution||g0(n),h=Math.ceil(c*d),p=Math.ceil(u*d),y=Be.get().createCanvas(h,p),x=y.getContext("2d");x.imageSmoothingEnabled=!0,x.imageSmoothingQuality="high",x.drawImage(o,0,0,c*d,u*d);const{parseAsGraphicsContext:v,...S}=t.data??{},w=new Sa({resource:y,alphaMode:"premultiply-alpha-on-upload",resolution:d,...S});return y0(w,e,n)}async function GL(n){const e=await(await Be.get().fetch(n)).text(),s=new ua;return s.svg(e),s}const $L=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let bo=null,Rg=class{constructor(){bo||(bo=URL.createObjectURL(new Blob([$L],{type:"application/javascript"}))),this.worker=new Worker(bo)}};Rg.revokeObjectURL=function(){bo&&(URL.revokeObjectURL(bo),bo=null)};const VL=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let xo=null;class nA{constructor(){xo||(xo=URL.createObjectURL(new Blob([VL],{type:"application/javascript"}))),this.worker=new Worker(xo)}}nA.revokeObjectURL=function(){xo&&(URL.revokeObjectURL(xo),xo=null)};let US=0,bm;class WL{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const{worker:e}=new Rg;e.addEventListener("message",s=>{e.terminate(),Rg.revokeObjectURL(),t(s.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t,e){return this._run("loadImageBitmap",[t,e?.data?.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){bm===void 0&&(bm=navigator.hardwareConcurrency||4);let t=this._workerPool.pop();return!t&&this._createdWorkers<bm&&(this._createdWorkers++,t=new nA().worker,t.addEventListener("message",e=>{this._complete(e.data),this._returnWorker(e.target),this._next()})),t}_returnWorker(t){this._workerPool.push(t)}_complete(t){this._resolveHash[t.uuid]&&(t.error!==void 0?this._resolveHash[t.uuid].reject(t.error):this._resolveHash[t.uuid].resolve(t.data),delete this._resolveHash[t.uuid])}async _run(t,e){await this._initWorkers();const s=new Promise((a,o)=>{this._queue.push({id:t,arguments:e,resolve:a,reject:o})});return this._next(),s}_next(){if(!this._queue.length)return;const t=this._getWorker();if(!t)return;const e=this._queue.pop(),s=e.id;this._resolveHash[US]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:US++,id:s})}reset(){this._workerPool.forEach(t=>t.terminate()),this._workerPool.length=0,Object.values(this._resolveHash).forEach(({reject:t})=>{t?.(new Error("WorkerManager has been reset before completion"))}),this._resolveHash={},this._queue.length=0,this._initialized=!1,this._createdWorkers=0}}const zS=new WL,YL=[".jpeg",".jpg",".png",".webp",".avif"],XL=["image/jpeg","image/png","image/webp","image/avif"];async function qL(n,t){const e=await Be.get().fetch(n);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${n}: ${e.status} ${e.statusText}`);const s=await e.blob();return t?.data?.alphaMode==="premultiplied-alpha"?createImageBitmap(s,{premultiplyAlpha:"none"}):createImageBitmap(s)}const iA={name:"loadTextures",id:"texture",extension:{type:Pt.LoadParser,priority:Lr.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(n){return Lo(n,XL)||Do(n,YL)},async load(n,t,e){let s=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await zS.isImageBitmapSupported()?s=await zS.loadImageBitmap(n,t):s=await qL(n,t):s=await new Promise((o,c)=>{s=Be.get().createImage(),s.crossOrigin=this.config.crossOrigin,s.src=n,s.complete?o(s):(s.onload=()=>{o(s)},s.onerror=c)});const a=new Sa({resource:s,alphaMode:"premultiply-alpha-on-upload",resolution:t.data?.resolution||g0(n),...t.data});return y0(a,e,n)},unload(n){n.destroy(!0)}},KL=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"];let xm,vm;function QL(n,t,e){e===void 0&&!t.startsWith("data:")?n.crossOrigin=ZL(t):e!==!1&&(n.crossOrigin=typeof e=="string"?e:"anonymous")}function JL(n){return new Promise((t,e)=>{n.addEventListener("canplaythrough",s),n.addEventListener("error",a),n.load();function s(){o(),t()}function a(c){o(),e(c)}function o(){n.removeEventListener("canplaythrough",s),n.removeEventListener("error",a)}})}function ZL(n,t=globalThis.location){if(n.startsWith("data:"))return"";t||(t=globalThis.location);const e=new URL(n,document.baseURI);return e.hostname!==t.hostname||e.port!==t.port||e.protocol!==t.protocol?"anonymous":""}function t8(){const n=[],t=[];for(const e of KL){const s=ec.MIME_TYPES[e.substring(1)]||`video/${e.substring(1)}`;xd(s)&&(n.push(e),t.includes(s)||t.push(s))}return{validVideoExtensions:n,validVideoMime:t}}const e8={name:"loadVideo",id:"video",extension:{type:Pt.LoadParser,name:"loadVideo"},test(n){if(!xm||!vm){const{validVideoExtensions:s,validVideoMime:a}=t8();xm=s,vm=a}const t=Lo(n,vm),e=Do(n,xm);return t||e},async load(n,t,e){const s={...ec.defaultOptions,resolution:t.data?.resolution||g0(n),alphaMode:t.data?.alphaMode||await oE(),...t.data},a=document.createElement("video"),o={preload:s.autoLoad!==!1?"auto":void 0,"webkit-playsinline":s.playsinline!==!1?"":void 0,playsinline:s.playsinline!==!1?"":void 0,muted:s.muted===!0?"":void 0,loop:s.loop===!0?"":void 0,autoplay:s.autoPlay!==!1?"":void 0};Object.keys(o).forEach(d=>{const h=o[d];h!==void 0&&a.setAttribute(d,h)}),s.muted===!0&&(a.muted=!0),QL(a,n,s.crossorigin);const c=document.createElement("source");let u;if(s.mime)u=s.mime;else if(n.startsWith("data:"))u=n.slice(5,n.indexOf(";"));else if(!n.startsWith("blob:")){const d=n.split("?")[0].slice(n.lastIndexOf(".")+1).toLowerCase();u=ec.MIME_TYPES[d]||`video/${d}`}return c.src=n,u&&(c.type=u),new Promise(d=>{const h=async()=>{const p=new ec({...s,resource:a});a.removeEventListener("canplay",h),t.data.preload&&await JL(a),d(y0(p,e,n))};s.preload&&!s.autoPlay&&a.load(),a.addEventListener("canplay",h),a.appendChild(c)})},unload(n){n.destroy(!0)}},sA={extension:{type:Pt.ResolveParser,name:"resolveTexture"},test:iA.test,parse:n=>({resolution:parseFloat(Io.RETINA_PREFIX.exec(n)?.[1]??"1"),format:n.split(".").pop(),src:n})},n8={extension:{type:Pt.ResolveParser,priority:-2,name:"resolveJson"},test:n=>Io.RETINA_PREFIX.test(n)&&n.endsWith(".json"),parse:sA.parse};class i8{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Io,this.loader=new EL,this.cache=$e,this._backgroundLoader=new mL(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){if(this._initialized){Ve("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let o=t.manifest;typeof o=="string"&&(o=await this.load(o)),this.resolver.addManifest(o)}const e=t.texturePreference?.resolution??1,s=typeof e=="number"?[e]:e,a=await this._detectFormats({preferredFormats:t.texturePreference?.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:a,resolution:s}}),t.preferences&&this.setPreferences(t.preferences),t.loadOptions&&(this.loader.loadOptions={...this.loader.loadOptions,...t.loadOptions})}add(t){this.resolver.add(t)}async load(t,e){this._initialized||await this.init();const s=Gf(t),a=$i(t).map(u=>{if(typeof u!="string"){const d=this.resolver.getAlias(u);return d.some(h=>!this.resolver.hasKey(h))&&this.add(u),Array.isArray(d)?d[0]:d}return this.resolver.hasKey(u)||this.add({alias:u,src:u}),u}),o=this.resolver.resolve(a),c=await this._mapLoadToResolve(o,e);return s?c[a[0]]:c}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let s=!1;typeof t=="string"&&(s=!0,t=[t]);const a=this.resolver.resolveBundle(t),o={},c=Object.keys(a);let u=0;const d=[],h=()=>{e?.(d.reduce((y,x)=>y+x,0)/u)},p=c.map((y,x)=>{const v=a[y],S=Object.values(v),_=[...new Set(S.flat())].reduce((A,R)=>A+(R.progressSize||1),0);return d.push(0),u+=_,this._mapLoadToResolve(v,A=>{d[x]=A*_,h()}).then(A=>{o[y]=A})});return await Promise.all(p),s?o[t[0]]:o}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach(s=>{this._backgroundLoader.add(Object.values(s))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return $e.get(t);const e={};for(let s=0;s<t.length;s++)e[s]=$e.get(t[s]);return e}async _mapLoadToResolve(t,e){const s=[...new Set(Object.values(t))];this._backgroundLoader.active=!1;const a=await this.loader.load(s,e);this._backgroundLoader.active=!0;const o={};return s.forEach(c=>{const u=a[c.src],d=[c.src];c.alias&&d.push(...c.alias),d.forEach(h=>{o[h]=u}),$e.set(d,u)}),o}async unload(t){this._initialized||await this.init();const e=$i(t).map(a=>typeof a!="string"?a.src:a),s=this.resolver.resolve(e);await this._unloadFromResolved(s)}async unloadBundle(t){this._initialized||await this.init(),t=$i(t);const e=this.resolver.resolveBundle(t),s=Object.keys(e).map(a=>this._unloadFromResolved(e[a]));await Promise.all(s)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach(s=>{$e.remove(s.src)}),await this.loader.unload(e)}async _detectFormats(t){let e=[];t.preferredFormats&&(e=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const s of t.detections)t.skipDetections||await s.test()?e=await s.add(e):t.skipDetections||(e=await s.remove(e));return e=e.filter((s,a)=>e.indexOf(s)===a),e}get detections(){return this._detections}setPreferences(t){this.loader.parsers.forEach(e=>{e.config&&Object.keys(e.config).filter(s=>s in t).forEach(s=>{e.config[s]=t[s]})})}}const Rr=new i8;Pn.handleByList(Pt.LoadParser,Rr.loader.parsers).handleByList(Pt.ResolveParser,Rr.resolver.parsers).handleByList(Pt.CacheParser,Rr.cache.parsers).handleByList(Pt.DetectionParser,Rr.detections);Pn.add(gL,bL,yL,wL,vL,SL,_L,CL,ML,UL,HL,iA,e8,pL,hL,sA,n8);const PS={loader:Pt.LoadParser,resolver:Pt.ResolveParser,cache:Pt.CacheParser,detection:Pt.DetectionParser};Pn.handle(Pt.Asset,n=>{const t=n.ref;Object.entries(PS).filter(([e])=>!!t[e]).forEach(([e,s])=>Pn.add(Object.assign(t[e],{extension:t[e].extension??s})))},n=>{const t=n.ref;Object.keys(PS).filter(e=>!!t[e]).forEach(e=>Pn.remove(t[e]))});function HS(n,t,e,s,a,o,c,u){const d=c-e,h=u-s,p=a-e,y=o-s,x=n-e,v=t-s,S=d*d+h*h,w=d*p+h*y,_=d*x+h*v,A=p*p+y*y,R=p*x+y*v,C=1/(S*A-w*w),j=(A*_-w*R)*C,k=(S*R-w*_)*C;return j>=0&&k>=0&&j+k<1}const rA=class aA extends Cc{constructor(...t){let e=t[0]??{};e instanceof Float32Array&&(ye(Qe,"use new MeshGeometry({ positions, uvs, indices }) instead"),e={positions:e,uvs:t[1],indices:t[2]}),e={...aA.defaultOptions,...e};const s=e.positions||new Float32Array([0,0,1,0,1,1,0,1]);let a=e.uvs;a||(e.positions?a=new Float32Array(s.length):a=new Float32Array([0,0,1,0,1,1,0,1]));const o=e.indices||new Uint32Array([0,1,2,0,2,3]),c=e.shrinkBuffersToFit,u=new Mr({data:s,label:"attribute-mesh-positions",shrinkToFit:c,usage:wn.VERTEX|wn.COPY_DST}),d=new Mr({data:a,label:"attribute-mesh-uvs",shrinkToFit:c,usage:wn.VERTEX|wn.COPY_DST}),h=new Mr({data:o,label:"index-mesh-buffer",shrinkToFit:c,usage:wn.INDEX|wn.COPY_DST});super({attributes:{aPosition:{buffer:u,format:"float32x2",stride:8,offset:0},aUV:{buffer:d,format:"float32x2",stride:8,offset:0}},indexBuffer:h,topology:e.topology}),this.batchMode="auto"}get positions(){return this.attributes.aPosition.buffer.data}set positions(t){this.attributes.aPosition.buffer.data=t}get uvs(){return this.attributes.aUV.buffer.data}set uvs(t){this.attributes.aUV.buffer.data=t}get indices(){return this.indexBuffer.data}set indices(t){this.indexBuffer.data=t}};rA.defaultOptions={topology:"triangle-list",shrinkBuffersToFit:!1};let s8=rA;class oA extends a0{constructor(...t){let e=t[0];e instanceof Cc&&(ye(Qe,"Mesh: use new Mesh({ geometry, shader }) instead"),e={geometry:e,shader:t[1]},t[3]&&(ye(Qe,"Mesh: drawMode argument has been removed, use geometry.topology instead"),e.geometry.topology=t[3]));const{geometry:s,shader:a,texture:o,roundPixels:c,state:u,...d}=e;super({label:"Mesh",...d}),this.renderPipeId="mesh",this._shader=null,this.allowChildren=!1,this.shader=a??null,this.texture=o??a?.texture??Wt.WHITE,this.state=u??LN.for2d(),this._geometry=s,this._geometry.on("update",this.onViewUpdate,this),this.roundPixels=c??!1}get material(){return ye(Qe,"mesh.material property has been removed, use mesh.shader instead"),this._shader}set shader(t){this._shader!==t&&(this._shader=t,this.onViewUpdate())}get shader(){return this._shader}set geometry(t){this._geometry!==t&&(this._geometry?.off("update",this.onViewUpdate,this),t.on("update",this.onViewUpdate,this),this._geometry=t,this.onViewUpdate())}get geometry(){return this._geometry}set texture(t){t||(t=Wt.EMPTY);const e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this.shader&&(this.shader.texture=t),this._texture=t,this.onViewUpdate())}get texture(){return this._texture}get batched(){return this._shader||(this.state.data&12)!==0?!1:this._geometry instanceof s8?this._geometry.batchMode==="auto"?this._geometry.positions.length/2<=100:this._geometry.batchMode==="batch":!1}get bounds(){return this._geometry.bounds}updateBounds(){this._bounds=this._geometry.bounds}containsPoint(t){const{x:e,y:s}=t;if(!this.bounds.containsPoint(e,s))return!1;const a=this.geometry.getBuffer("aPosition").data,o=this.geometry.topology==="triangle-strip"?3:1;if(this.geometry.getIndex()){const c=this.geometry.getIndex().data,u=c.length;for(let d=0;d+2<u;d+=o){const h=c[d]*2,p=c[d+1]*2,y=c[d+2]*2;if(HS(e,s,a[h],a[h+1],a[p],a[p+1],a[y],a[y+1]))return!0}}else{const c=a.length/2;for(let u=0;u+2<c;u+=o){const d=u*2,h=(u+1)*2,p=(u+2)*2;if(HS(e,s,a[d],a[d+1],a[h],a[h+1],a[p],a[p+1]))return!0}}return!1}destroy(t){if(super.destroy(t),typeof t=="boolean"?t:t?.texture){const s=typeof t=="boolean"?t:t?.textureSource;this._texture.destroy(s)}this._geometry?.off("update",this.onViewUpdate,this),this._texture=null,this._geometry=null,this._shader=null}}class r8 extends a0{constructor(t,e){const{text:s,resolution:a,style:o,anchor:c,width:u,height:d,roundPixels:h,...p}=t;super({...p}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=e,this.text=s??"",this.style=o,this.resolution=a??null,this.allowChildren=!1,this._anchor=new zn({_onUpdate:()=>{this.onViewUpdate()}}),c&&(this.anchor=c),this.roundPixels=h??!1,u!==void 0&&(this.width=u),d!==void 0&&(this.height=d)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}set text(t){t=t.toString(),this._text!==t&&(this._text=t,this.onViewUpdate())}get text(){return this._text}set resolution(t){this._autoResolution=t===null,this._resolution=t,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(t){t||(t={}),this._style?.off("update",this.onViewUpdate,this),t instanceof this._styleClass?this._style=t:this._style=new this._styleClass(t),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(t){this._setWidth(t,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(t){this._setHeight(t,this.bounds.height)}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this.bounds.width,t.height=Math.abs(this.scale.y)*this.bounds.height,t}setSize(t,e){typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,this.bounds.width),e!==void 0&&this._setHeight(e,this.bounds.height)}containsPoint(t){const e=this.bounds.width,s=this.bounds.height,a=-e*this.anchor.x;let o=0;return t.x>=a&&t.x<=a+e&&(o=-s*this.anchor.y,t.y>=o&&t.y<=o+s)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}destroy(t=!1){super.destroy(t),this.owner=null,this._bounds=null,this._anchor=null,(typeof t=="boolean"?t:t?.style)&&this._style.destroy(t),this._style=null,this._text=null}get styleKey(){return`${this._text}:${this._style.styleKey}:${this._resolution}`}}function a8(n,t){let e=n[0]??{};return(typeof e=="string"||n[1])&&(ye(Qe,`use new ${t}({ text: "hi!", style }) instead`),e={text:e,style:n[1]}),e}let ra=null,zs=null;function o8(n,t){ra||(ra=Be.get().createCanvas(256,128),zs=ra.getContext("2d",{willReadFrequently:!0}),zs.globalCompositeOperation="copy",zs.globalAlpha=1),(ra.width<n||ra.height<t)&&(ra.width=Eo(n),ra.height=Eo(t))}function FS(n,t,e){for(let s=0,a=4*e*t;s<t;++s,a+=4)if(n[a+3]!==0)return!1;return!0}function GS(n,t,e,s,a){const o=4*t;for(let c=s,u=s*o+4*e;c<=a;++c,u+=o)if(n[u+3]!==0)return!1;return!0}function l8(...n){let t=n[0];t.canvas||(t={canvas:n[0],resolution:n[1]});const{canvas:e}=t,s=Math.min(t.resolution??1,1),a=t.width??e.width,o=t.height??e.height;let c=t.output;if(o8(a,o),!zs)throw new TypeError("Failed to get canvas 2D context");zs.drawImage(e,0,0,a,o,0,0,a*s,o*s);const d=zs.getImageData(0,0,a,o).data;let h=0,p=0,y=a-1,x=o-1;for(;p<o&&FS(d,a,p);)++p;if(p===o)return Je.EMPTY;for(;FS(d,a,x);)--x;for(;GS(d,a,h,p,x);)++h;for(;GS(d,a,y,p,x);)--y;return++y,++x,zs.globalCompositeOperation="source-over",zs.strokeRect(h,p,y-h,x-p),zs.globalCompositeOperation="copy",c??(c=new Je),c.set(h/s,p/s,(y-h)/s,(x-p)/s),c}const $S=new Je;class c8{getCanvasAndContext(t){const{text:e,style:s,resolution:a=1}=t,o=s._getFinalPadding(),c=ds.measureText(e||" ",s),u=Math.ceil(Math.ceil(Math.max(1,c.width)+o*2)*a),d=Math.ceil(Math.ceil(Math.max(1,c.height)+o*2)*a),h=gc.getOptimalCanvasAndContext(u,d);this._renderTextToCanvas(e,s,o,a,h);const p=s.trim?l8({canvas:h.canvas,width:u,height:d,resolution:1,output:$S}):$S.set(0,0,u,d);return{canvasAndContext:h,frame:p}}returnCanvasAndContext(t){gc.returnCanvasAndContext(t)}_renderTextToCanvas(t,e,s,a,o){const{canvas:c,context:u}=o,d=$f(e),h=ds.measureText(t||" ",e),p=h.lines,y=h.lineHeight,x=h.lineWidths,v=h.maxLineWidth,S=h.fontProperties,w=c.height;if(u.resetTransform(),u.scale(a,a),u.textBaseline=e.textBaseline,e._stroke?.width){const C=e._stroke;u.lineWidth=C.width,u.miterLimit=C.miterLimit,u.lineJoin=C.join,u.lineCap=C.cap}u.font=d;let _,A;const R=e.dropShadow?2:1;for(let C=0;C<R;++C){const j=e.dropShadow&&C===0,k=j?Math.ceil(Math.max(1,w)+s*2):0,I=k*a;if(j){u.fillStyle="black",u.strokeStyle="black";const H=e.dropShadow,B=H.color,U=H.alpha;u.shadowColor=An.shared.setValue(B).setAlpha(U).toRgbaString();const z=H.blur*a,G=H.distance*a;u.shadowBlur=z,u.shadowOffsetX=Math.cos(H.angle)*G,u.shadowOffsetY=Math.sin(H.angle)*G+I}else{if(u.fillStyle=e._fill?Yf(e._fill,u,h,s*2):null,e._stroke?.width){const H=e._stroke.width*.5+s*2;u.strokeStyle=Yf(e._stroke,u,h,H)}u.shadowColor="black"}let N=(y-S.fontSize)/2;y-S.fontSize<0&&(N=0);const L=e._stroke?.width??0;for(let H=0;H<p.length;H++)_=L/2,A=L/2+H*y+S.ascent+N,e.align==="right"?_+=v-x[H]:e.align==="center"&&(_+=(v-x[H])/2),e._stroke?.width&&this._drawLetterSpacing(p[H],e,o,_+s,A+s-k,!0),e._fill!==void 0&&this._drawLetterSpacing(p[H],e,o,_+s,A+s-k)}}_drawLetterSpacing(t,e,s,a,o,c=!1){const{context:u}=s,d=e.letterSpacing;let h=!1;if(ds.experimentalLetterSpacingSupported&&(ds.experimentalLetterSpacing?(u.letterSpacing=`${d}px`,u.textLetterSpacing=`${d}px`,h=!0):(u.letterSpacing="0px",u.textLetterSpacing="0px")),d===0||h){c?u.strokeText(t,a,o):u.fillText(t,a,o);return}let p=a;const y=ds.graphemeSegmenter(t);let x=u.measureText(t).width,v=0;for(let S=0;S<y.length;++S){const w=y[S];c?u.strokeText(w,p,o):u.fillText(w,p,o);let _="";for(let A=S+1;A<y.length;++A)_+=y[A];v=u.measureText(_).width,p+=x-v+d,x=v}}}const VS=new c8;class lA extends r8{constructor(...t){const e=a8(t,"Text");super(e,wa),this.renderPipeId="text",e.textureStyle&&(this.textureStyle=e.textureStyle instanceof Ao?e.textureStyle:new Ao(e.textureStyle))}updateBounds(){const t=this._bounds,e=this._anchor;let s=0,a=0;if(this._style.trim){const{frame:o,canvasAndContext:c}=VS.getCanvasAndContext({text:this.text,style:this._style,resolution:1});VS.returnCanvasAndContext(c),s=o.width,a=o.height}else{const o=ds.measureText(this._text,this._style);s=o.width,a=o.height}t.minX=-e._x*s,t.maxX=t.minX+s,t.minY=-e._y*a,t.maxY=t.minY+a}}Pn.add(hO,pO);const u8=220,f8=220;class WS{constructor({textures:t,type:e,duration:s=0,startTime:a}){this.type=e,this.duration=s,this.startTime=a??performance.now(),this.container=new _i,this.core=new Hs(t.core),this.bloom=new Hs(t.bloom),this.flare=new Hs(t.flare),this.core.tint="#b5eeff36",this.bloom.tint="#b5eeff5b",this.flare.tint="#b5eeffff",[this.core,this.bloom,this.flare].forEach(o=>{o.anchor.set(.5),o.blendMode="add"}),this.container.addChild(this.bloom,this.flare,this.core),this.dead=!1,this.ending=!1,this.endStartTime=0,this.container.alpha=1}update(t){if(!this.dead){if(this.type==="tap"){const e=(t-this.startTime)/u8;if(e>=1){this.container.alpha=0,this.dead=!0;return}const s=1-e;this.container.alpha=s,this.core.alpha=s*.25,this.bloom.alpha=s*.35,this.flare.alpha=s,this.core.scale.set(.2+e*.1),this.bloom.scale.set(.1+e*.5),this.flare.scale.set(.3+e*.8);return}if(this.type==="long"){if(!this.ending){const s=Math.min(1,(t-this.startTime)/this.duration);this.container.alpha=1,this.core.alpha=.9,this.core.scale.set(.2+s*.4),this.bloom.alpha=0+s*.07,this.bloom.scale.set(.3+s*.1),this.flare.alpha=.6+Math.sin(t*.004)*.03,this.flare.scale.set(.5);return}const e=(t-this.endStartTime)/f8;this.container.alpha=Math.max(0,1-e),e>=1&&(this.dead=!0)}}}startEnd(t){this.type==="long"&&(this.ending||(this.ending=!0,this.endStartTime=t))}destroy(){this.container.destroy({children:!0})}}const d8=220,YS=.5,h8=.8,p8=1,m8=.3,g8=.4,y8=.5;class b8{constructor({texture:t,laneWidth:e}){this.container=new _i,this.sprite=new Hs(t),this.sprite.tint="#ffffffff",this.sprite.anchor.set(.5,.8),this.sprite.blendMode="add",this.sprite.width=e,this.container.addChild(this.sprite),this.startTime=performance.now(),this.dead=!1}reset(t){this.startTime=t,this.dead=!1,this.container.alpha=YS}update(t){const e=(t-this.startTime)/d8;if(e>=1){this.dead=!0;return}this.container.alpha=YS*(1.8-e);const s=Math.min(y8,m8+e*g8),a=h8*(1-e*p8);this.sprite.scale.set(a,s)}destroy(){this.container.destroy({children:!0})}}class x8{constructor({text:t}){this.container=new _i;let e="#ffffff";t==="PERFECT"?e="#10afffff":t==="GREAT"?e="#ffb74d":t==="GOOD"?e="#4cff4c":t==="MISS"&&(e="#ff4d4f");const s=new wa({fontSize:36,fill:e,fontWeight:"bold",align:"center",dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:6,dropShadowAngle:Math.PI/2,dropShadowDistance:3});this.text=new lA(t,s),this.text.anchor.set(.5),this.container.addChild(this.text),this.start=performance.now(),this.life=450,this.dead=!1}update(t){const s=(t-this.start)/this.life;if(s>=1){this.dead=!0;return}this.container.y-=.3,this.container.alpha=1-s}destroy(){this.container.destroy({children:!0})}}class v8{constructor({combo:t}){this.container=new _i;const e=new wa({fontSize:88,fontWeight:"bold",align:"center",fill:"rgba(0,0,0,0)",stroke:"#ff0c7dff",strokeThickness:4});this.text=new lA(`${t}`,e),this.text.anchor.set(.5),this.container.addChild(this.text),this.container.x=window.innerWidth/2,this.container.y=240,this.start=performance.now(),this.life=350,this.dead=!1}update(t){const e=(t-this.start)/this.life;if(e>=1){this.dead=!0;return}this.container.y-=.2,this.container.alpha=1-e}destroy(){this.container.destroy({children:!0})}}function cA(n){return gt.LANE_WIDTHS.slice(0,n).reduce((t,e)=>t+e,0)}function S8(n){return cA(n)+gt.LANE_WIDTHS[n]}const _8=140,w8=60;let Sm=null;async function E8(){return Sm||(Sm=(async()=>{const[n,t,e,s]=await Promise.all([Rr.load("/effects/core.png"),Rr.load("/effects/bloom.png"),Rr.load("/effects/flare.png"),Rr.load("/effects/laneStream.png")]);return{core:n,bloom:t,flare:e,laneStream:s}})()),Sm}function A8(n){const{SCALE_MIN:t,SCALE_MAX:e}=gt.PERSPECTIVE,{HEIGHT:s}=gt.CANVAS;return t+n/s*(e-t)}function T8(n,t){const{WIDTH:e}=gt.CANVAS,s=e/2,a=A8(t);return s+(n-s)*a}function XS(n){return!n||n.type!=="long"?null:n.noteId!=null?`long-${n.noteId}`:n.id!=null?`long-${n.id}`:`long-${n.lane}-${n.index}`}function C8(n){return!n||n.type!=="tap"?null:n.id!=null?`tap-${n.id}`:n.tapId!=null?`tap-${n.tapId}`:n.time!=null?`tap-${n.lane}-${n.time}`:n.index!=null?`tap-${n.lane}-${n.index}`:null}function R8({effects:n,showHitEffect:t=!0,showJudgeText:e=!0,showComboText:s=!0,lowEffect:a=!1,fpsLimit:o=60,onPixiReady:c}){const u=E.useRef(null),d=E.useRef(null),h=E.useRef(null),p=E.useRef(!1),y=E.useRef(null),x=E.useRef(new Map),v=E.useRef(n||[]),S=E.useRef(new Map),w=E.useRef([]),_=E.useRef(new Map),A=E.useRef(new Map),R=E.useRef(new Set),C=E.useRef([]),j=1500,k=E.useRef([]),I=E.useRef(!1),N=E.useRef(new Set),L=E.useRef(null),H=E.useRef(new Set),B=E.useRef(t),U=E.useRef(e),z=E.useRef(s),G=E.useRef(o),V=E.useRef(a);return E.useEffect(()=>{v.current=n||[]},[n]),E.useEffect(()=>{B.current=t},[t]),E.useEffect(()=>{U.current=e},[e]),E.useEffect(()=>{z.current=s},[s]),E.useEffect(()=>{G.current=o},[o]),E.useEffect(()=>{V.current=a},[a]),E.useEffect(()=>{let J=!0,O=null;const $=u.current,rt=S.current,it=w.current,ft=A.current,D=_.current,Y=R.current,at=C.current;return(async()=>{const lt=await E8(),nt=new gd;if(await nt.init({width:gt.CANVAS.WIDTH,height:gt.CANVAS.HEIGHT,backgroundAlpha:0,antialias:!0,preserveDrawingBuffer:!0}),!J){try{nt.destroy(!0)}catch{}return}c?.(nt.canvas),h.current=lt,d.current=nt,u.current&&u.current.appendChild(nt.canvas),p.current=!0;const xt=new _i;nt.stage.addChild(xt),y.current=xt,O=()=>{const Rt=performance.now(),yt=v.current||[];nt.ticker.maxFPS=V.current?30:G.current||60,!z.current&&L.current&&(nt.stage.removeChild(L.current.container),L.current.destroy(),L.current=null),L.current&&(L.current.update(Rt),L.current.dead&&(nt.stage.removeChild(L.current.container),L.current.destroy(),L.current=null));const Mt=H.current;Mt.clear();for(let Tt=0;Tt<yt.length;Tt++){const qt=yt[Tt];if(!qt||qt.type!=="long")continue;const Gt=XS(qt);if(!Gt)continue;Mt.add(Gt);const Vt=x.current.get(Gt)??0;if(Rt-Vt<_8)continue;x.current.set(Gt,Rt);const Ct=_.current.get(Gt);Ct&&Ct.reset(Rt)}k.current=k.current.filter(Tt=>(Tt.update(Rt),Tt.dead?(y.current.removeChild(Tt.container),Tt.destroy(),!1):!0));const Et=[];rt.forEach((Tt,qt)=>{if(Mt.has(qt))Tt.lastSeen=Rt;else{const Gt=Tt.lastSeen??Rt;!Tt.ending&&Rt-Gt>w8&&Tt.startEnd(Rt)}Tt.update(Rt),Tt.dead&&Et.push(qt)});for(let Tt=0;Tt<Et.length;Tt++){const qt=Et[Tt],Gt=rt.get(qt);Gt&&(nt.stage.removeChild(Gt.container),Gt.destroy(),rt.delete(qt));const Vt=D.get(qt);Vt&&(nt.stage.removeChild(Vt.container),Vt.destroy(),D.delete(qt))}for(w.current=w.current.filter(Tt=>Tt.dead?!1:(Tt.update(Rt),Tt.dead?(nt.stage.removeChild(Tt.container),Tt.destroy(),!1):!0)),ft.forEach((Tt,qt)=>{Tt.update(Rt),Tt.dead&&(nt.stage.removeChild(Tt.container),Tt.destroy(),ft.delete(qt))}),D.forEach(Tt=>{Tt.update(Rt)});at.length>j;){const Tt=at.shift();Tt!=null&&Y.delete(Tt)}},nt.ticker.maxFPS=V.current?30:G.current||60,nt.ticker.add(O)})(),()=>{J=!1,p.current=!1;const lt=d.current;if(lt&&O)try{lt.ticker.remove(O)}catch{}if(rt.forEach(nt=>{try{nt.destroy()}catch{}}),rt.clear(),it.forEach(nt=>{try{nt.destroy()}catch{}}),it.length=0,ft.forEach(nt=>{try{nt.destroy()}catch{}}),ft.clear(),D.forEach(nt=>{try{nt.destroy()}catch{}}),D.clear(),Y.clear(),at.length=0,x.current.clear(),H.current.clear(),k.current.forEach(nt=>{try{nt.destroy()}catch{}}),k.current.length=0,N.current.clear(),I.current=!1,L.current){try{L.current.destroy()}catch{}L.current=null}if(lt)try{lt.ticker.stop(),lt.stage.removeChildren(),lt.destroy(!0)}catch{}d.current=null,h.current=null,$&&($.innerHTML="")}},[]),E.useEffect(()=>{const J=d.current,O=h.current;if(!p.current||!J||!O)return;I.current=!1;const{HIT_LINE_Y:$}=gt.CANVAS,rt=performance.now();(n||[]).forEach(it=>{if(it?.id&&N.current.has(it.id))return;const ft=it?.type==="judge"?null:it?.lane;if(it?.type!=="judge"&&(ft==null||ft<0))return;if(it.type==="judge"){if(!U.current){it.id&&N.current.add(it.id);return}I.current||(k.current.forEach(xt=>{y.current.removeChild(xt.container),xt.destroy()}),k.current.length=0,I.current=!0);const nt=new x8({text:it.judgement});if(nt.container.x=gt.CANVAS.WIDTH/2,nt.container.y=gt.CANVAS.HEIGHT*.65,nt.container.rotation=0,nt.container.scale.set(1,1),nt.container.skew.set(0,0),y.current.addChild(nt.container),k.current.push(nt),z.current&&it.combo&&it.combo>1){L.current&&(y.current.removeChild(L.current.container),L.current.destroy());const xt=new v8({combo:it.combo});xt.container.x=nt.container.x,y.current.addChild(xt.container),L.current=xt}it.id&&N.current.add(it.id);return}const D=cA(ft),Y=S8(ft),at=T8((D+Y)/2,$),lt=Math.abs(Y-D);if(it.type==="tap"){if(!B.current){it.id&&N.current.add(it.id);return}const nt=C8(it);if(nt){if(R.current.has(nt))return;for(R.current.add(nt),C.current.push(nt);C.current.length>j;){const Rt=C.current.shift();Rt!=null&&R.current.delete(Rt)}}const xt=new WS({textures:O,type:"tap"});xt.container.x=at,xt.container.y=$,J.stage.addChild(xt.container),w.current.push(xt),it.id&&N.current.add(it.id)}if(it.type==="long"){if(!B.current){it.id&&N.current.add(it.id);return}const nt=XS(it);if(!nt)return;if(!S.current.has(nt)){const xt=new WS({textures:O,type:"long",startTime:rt});xt.container.x=at,xt.container.y=$,xt.lastSeen=rt,J.stage.addChild(xt.container),S.current.set(nt,xt);const Rt=new b8({texture:O.laneStream,laneWidth:lt});Rt.container.x=at,Rt.container.y=$,J.stage.addChild(Rt.container),_.current.set(nt,Rt)}it.id&&N.current.add(it.id)}})},[n]),m.jsx("div",{ref:u,style:{position:"absolute",top:0,left:0,width:gt.CANVAS.WIDTH,height:gt.CANVAS.HEIGHT,pointerEvents:"none",zIndex:20}})}let _m=null;function uA(n,t){const e=document.createElement("canvas");return e.width=n,e.height=t,e}function j8(){const t=uA(128,128),e=t.getContext("2d");return e.clearRect(0,0,128,128),e.fillStyle="rgba(0, 225, 255, 0.7)",e.beginPath(),e.roundRect(16,16,96,96,1),e.fill(),e.strokeStyle="rgba(0, 225, 255, 1)",e.lineWidth=6,e.shadowColor="rgba(0, 225, 255, 0.9)",e.shadowBlur=18,e.stroke(),t}function M8(){const e=uA(128,256),s=e.getContext("2d"),a=s.createLinearGradient(0,0,0,256);return a.addColorStop(0,"rgba(20,20,25,0.7)"),a.addColorStop(.5,"rgba(220,20,60,0.7)"),a.addColorStop(1,"rgba(255,69,0,0.8)"),s.fillStyle=a,s.fillRect(12,0,104,256),s.strokeStyle="rgba(255,80,80,1)",s.lineWidth=6,s.shadowColor="rgba(255,80,80,0.9)",s.shadowBlur=20,s.strokeRect(12,0,104,256),e}async function k8(){return _m||(_m=(async()=>{const n=j8(),t=M8();return{tap:Wt.from(n),long:Wt.from(t)}})()),_m}function fA(n){const{SCALE_MIN:t,SCALE_MAX:e}=gt.PERSPECTIVE,{HEIGHT:s}=gt.CANVAS;return t+n/s*(e-t)}function _n(n,t){const{WIDTH:e}=gt.CANVAS,s=e/2,a=fA(t);return s+(n-s)*a}const jg=new Map,dA=[],hA=[],pA=[],mf=new Map;function O8({notes:n,currentTime:t,speed:e,selectedNoteIds:s,draggingPreviewRef:a,tapNoteColor:o,longNoteColor:c,fpsLimit:u=60,onReady:d,onCanvasReady:h}){const p=E.useRef(null),y=E.useRef(!1),x=E.useRef(e),v=E.useRef(d),S=E.useRef(null),w=E.useRef(n),_=E.useRef(t),A=E.useRef(s),R=E.useRef(o),C=E.useRef(c);return E.useEffect(()=>{const j=p.current;j&&(j.ticker.maxFPS=u)},[u]),E.useEffect(()=>{R.current=o},[o]),E.useEffect(()=>{C.current=c},[c]),E.useEffect(()=>{w.current=n},[n]),E.useEffect(()=>{_.current=t},[t]),E.useEffect(()=>{A.current=s},[s]),E.useEffect(()=>{x.current=e},[e]),E.useEffect(()=>{v.current=d},[d]),E.useEffect(()=>{let j=!0,k=null;const I=S.current;return(async()=>{const N=await k8();if(!j)return;const L=new gd;if(await L.init({width:gt.CANVAS.WIDTH,height:gt.CANVAS.HEIGHT,backgroundAlpha:0,antialias:!0}),h?.(L.canvas),L.ticker.maxFPS=u,!j){try{L.destroy(!0)}catch{}return}p.current=L,S.current&&S.current.appendChild(L.canvas),y.current=!0,v.current?.(),k=()=>{const H=w.current||[],B=_.current;N8(L.stage,N,H,B,x.current,A.current,a,R.current,C.current)},L.ticker.add(k)})(),()=>{j=!1,y.current=!1;const N=p.current;N&&k&&N.ticker.remove(k),jg.forEach(L=>{try{L.destroy({children:!0})}catch{}}),jg.clear(),N&&(N.stage.removeChildren(),N.destroy(!0)),p.current=null,I&&(I.innerHTML="")}},[a]),m.jsx("div",{ref:S,style:{position:"absolute",top:0,left:0,width:gt.CANVAS.WIDTH,height:gt.CANVAS.HEIGHT,pointerEvents:"none",zIndex:5}})}function N8(n,t,e,s,a,o,c,u,d){const h=jg;mf.clear();const{NOTE_HEIGHT:p,HIT_LINE_Y:y,HEIGHT:x}=gt.CANVAS,v=a,S=new Set;e.forEach(w=>{const _=w.id,A=c?.current?.get(_),R=A?{...w,...A}:w;if(R.spawnTime!=null&&s<R.spawnTime)return;const C=R.spawnTime!=null?Math.max(s,R.spawnTime):s;if(R.type==="long"){const lt=R.timing,nt=R.endTime,xt=40,Rt=Mg(R.lane),yt=qS(R.lane),Mt=R.id,Et=o?.has(Mt),Tt=(Rt+yt)/2,qt=1,Gt=Tt+(Rt-Tt)*qt,Vt=Tt+(yt-Tt)*qt;R.holding&&!mf.has(Mt)&&mf.set(Mt,s);const Ct=mf.get(Mt),Wn=gt.SPEED*.02,Yn=90;if(Ct!=null){const Te=s-Ct;if(y-Te*Wn<-50)return}let he=lt,Jt=0;for(;he<nt;){const Te=Math.round(y-(he-C)*v);let Xt=Te;if(Ct!=null){const pt=s-Ct,It=y-pt*Wn;Xt=Math.min(Te,It)}let Ue=1;if(Ct!=null){const pt=s-Ct,ae=y-pt*Wn-Xt;ae<Yn&&(Ue=Math.max(0,Math.min(1,ae/Yn)))}if(Te<-50)break;const mn=Math.min(he+xt,nt),Xe=y-(mn-C)*v+1,ln=Math.round(Xe);if(Xt<=ln){he=mn,Jt++;continue}const Ze=1;if(Te>x+100){he=mn,Jt++;continue}const cn=Jt,Xn=`long-${R.id}-${cn}`;S.add(Xn),Jt++;let X=h.get(Xn);X||(X=L8(),X.visible=!0,n.addChild(X),h.set(Xn,X));const vt=_n(Gt,ln),kt=_n(Vt,ln),Zt=_n(Gt,Te),Ht=_n(Vt,Te),Ie=X.geometry.getBuffer("aPosition"),fe=Ie.data;fe[0]=vt,fe[1]=ln-Ze,fe[2]=kt,fe[3]=ln-Ze,fe[4]=Zt,fe[5]=Xt,fe[6]=Ht,fe[7]=Xt,Ie.update(),X.tint=Et?65535:d;const mt=R.holding?.9:.8;if(X.alpha=(Et?1:mt)*Ue,Ct!=null&&Ue<=.02){KS(X),h.delete(Xn),he=mn,Jt++;continue}const ut=`${Xn}-outline`;if(R.holding&&Xt>y-240){S.add(ut);let pt=h.get(ut);pt||(pt=D8(),pt.visible=!0,n.addChildAt(pt,0),h.set(ut,pt));const It=5,ae=3,ze=It+.1,gn=Xt+ze,we=ln-ae-Ze,qe=gn,Dr=_n(Gt-It,we),qs=_n(Vt+It,we),Zi=_n(Gt-It,qe),Aa=_n(Vt+It,qe),ts=pt.geometry.getBuffer("aPosition"),nn=ts.data;nn[0]=Dr,nn[1]=we,nn[2]=qs,nn[3]=we,nn[4]=Zi,nn[5]=qe,nn[6]=Aa,nn[7]=qe,ts.update(),pt.tint=d,pt.alpha=R.holding?.2:Ue}he=mn}return}if(R.hit)return;const j=R.timing,k=y-(j-s)*v;if(k<-p*2||k>x+100)return;const I=`tap-${R.id}`;S.add(I);const N=o?.has(R.id);let L=h.get(I);L||(L=I8(),L.visible=!0,n.addChild(L),h.set(I,L));const H=Mg(R.lane),B=qS(R.lane),U=(H+B)/2,z=N?1.18:1,G=U+(H-U)*z,V=U+(B-U)*z,J=fA(k),$=p*J*z/2,rt=_n(G,k-$),it=_n(V,k-$),ft=_n(G,k+$),D=_n(V,k+$),Y=L.geometry.getBuffer("aPosition"),at=Y.data;at[0]=rt,at[1]=k-$,at[2]=it,at[3]=k-$,at[4]=ft,at[5]=k+$,at[6]=D,at[7]=k+$,Y.update(),L.tint=N?16770560:u,L.alpha=N?1:.85}),h.forEach((w,_)=>{S.has(_)||(KS(w),h.delete(_))})}function Mg(n){return gt.LANE_WIDTHS.slice(0,n).reduce((t,e)=>t+e,0)}function qS(n){return Mg(n)+gt.LANE_WIDTHS[n]}function b0(n,t){const e=new Cc({attributes:{aPosition:{buffer:new Float32Array(8),size:2},aUV:{buffer:new Float32Array([0,0,1,0,0,1,1,1]),size:2}},indexBuffer:[0,1,2,2,1,3]}),s=new oA({geometry:e,texture:n});return s.__type=t,s}function I8(){const n=dA.pop()||b0(Wt.WHITE,"tap");return n.texture=Wt.WHITE,n}function L8(){const n=hA.pop()||b0(Wt.WHITE,"long");return n.texture=Wt.WHITE,n}function KS(n){n.visible=!1,n.removeFromParent(),n.__type==="tap"?dA.push(n):n.__type==="long"?hA.push(n):n.__type==="long-outline"&&pA.push(n)}function D8(){const n=pA.pop()||b0(Wt.WHITE,"long-outline");return n.texture=Wt.WHITE,n}class B8{constructor(t,e){this.keys=["a","s","d"," ","j","k","l"],this.onKeyPress=t,this.onKeyRelease=e,this.pressedKeys=new Set,this.handleKeyDown=this.handleKeyDown.bind(this),this.handleKeyUp=this.handleKeyUp.bind(this),window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp)}handleKeyDown(t){const e=t.key.toLowerCase(),s=this.keys.indexOf(e);s!==-1&&!this.pressedKeys.has(s)&&(this.pressedKeys.add(s),this.onKeyPress(s))}handleKeyUp(t){const e=t.key.toLowerCase(),s=this.keys.indexOf(e);s!==-1&&(this.pressedKeys.delete(s),this.onKeyRelease&&this.onKeyRelease(s))}destroy(){window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp)}}class QS{static judgeNote(t,e,s){const a=s.filter(u=>u.lane===t&&!u.hit);let o=null,c=1/0;for(const u of a){const d=Math.abs(u.timing-e);d<c&&(c=d,o=u)}return o?c<=gt.JUDGEMENT.PERFECT?{note:o,judgement:"PERFECT",diff:c}:c<=gt.JUDGEMENT.GREAT?{note:o,judgement:"GREAT",diff:c}:c<=gt.JUDGEMENT.GOOD?{note:o,judgement:"GOOD",diff:c}:c<=gt.JUDGEMENT.MISS?{note:o,judgement:"MISS",diff:c}:null:null}static judgeNoteRelease(t,e,s){const a=s.find(c=>c.lane===t&&c.holding&&!c.hit);if(!a||a.type!=="long")return null;const o=Math.abs(a.endTiming-e);return o<=gt.JUDGEMENT.PERFECT?{note:a,judgement:"PERFECT",diff:o}:o<=gt.JUDGEMENT.GOOD?{note:a,judgement:"GOOD",diff:o}:{note:a,judgement:"MISS",diff:o}}}const JS=280,ZS=1200,t_=.15,U8=.45,z8=.6,e_=.9,n_=0;let wm=null;function P8({pressedKeys:n,onReady:t}){const e=E.useRef(null),s=E.useRef(null),a=E.useRef(new Set),o=E.useRef(new Set),c=E.useRef([]),u=E.useCallback((h,p,y)=>{const x=d(p),v=gt.CANVAS.HIT_LINE_Y+n_,S=gt.LANE_WIDTHS[p],w=x-S/2,_=x+S/2,A=v-ZS*t_,R=_n(w,A),C=_n(_,A),j=_n(_,v),k=_n(w,v),I=new Cc({attributes:{aPosition:[R,A,C,A,j,v,k,v],aUV:[0,0,1,0,1,1,0,1]},indexBuffer:[0,1,2,0,2,3]}),N=new oA({geometry:I,texture:wm});N.blendMode="add",N.alpha=e_,h.stage.addChild(N),c.current.push({mesh:N,bornAt:y,baseX:x,laneWidth:S})},[]);return E.useEffect(()=>{o.current=n??new Set},[n]),E.useEffect(()=>{let h=!0,p=null;return(async()=>{const y=new gd;if(await y.init({width:gt.CANVAS.WIDTH,height:gt.CANVAS.HEIGHT,backgroundAlpha:0,antialias:!0}),!h){try{y.destroy(!0)}catch{}return}s.current=y,e.current&&e.current.appendChild(y.canvas),wm||(wm=H8()),p=()=>{const x=a.current,v=o.current,S=performance.now();v.forEach(w=>{x.has(w)||u(y,w,S)}),a.current=new Set(v),c.current.forEach(w=>{const _=(S-w.bornAt)/JS,A=Math.min(Math.max(_,0),1),R=1-Math.pow(1-A,2),C=gt.CANVAS.HIT_LINE_Y+n_,j=w.baseX,k=w.laneWidth,I=j-k/2,N=j+k/2,L=Math.min(z8,t_+R*U8),H=C-ZS*L,B=_n(I,H),U=_n(N,H),z=_n(N,C),G=_n(I,C),V=w.mesh.geometry.getBuffer("aPosition");V.data[0]=B,V.data[1]=H,V.data[2]=U,V.data[3]=H,V.data[4]=z,V.data[5]=C,V.data[6]=G,V.data[7]=C,V.update(),w.mesh.alpha=e_*(1-R)}),c.current=c.current.filter(w=>{const _=S-w.bornAt<JS;return _||(y.stage.removeChild(w.mesh),w.mesh.destroy()),_})},y.ticker.add(p),t?.()})(),()=>{h=!1;const y=s.current;if(y&&p)try{y.ticker.remove(p)}catch{}if(c.current.forEach(x=>{try{x.mesh.destroy()}catch{}}),c.current=[],y)try{y.stage.removeChildren(),y.destroy(!0)}catch{}s.current=null}},[t,u]),m.jsx("div",{ref:e,style:{position:"absolute",top:0,left:0,width:gt.CANVAS.WIDTH,height:gt.CANVAS.HEIGHT,pointerEvents:"none",zIndex:10}});function d(h){const p=gt.LANE_WIDTHS,y=gt.LANE_GAP??gt.CANVAS?.LANE_GAP??0,x=p.reduce((w,_)=>w+_,0)+y*(p.length-1);return(gt.LANE_START_X??gt.CANVAS?.LANE_START_X??(gt.CANVAS.WIDTH-x)/2)+p.slice(0,h).reduce((w,_)=>w+_,0)+y*h+p[h]/2}}function H8(){const n=document.createElement("canvas");n.width=64,n.height=256;const t=n.getContext("2d"),e=t.createLinearGradient(0,n.height,0,0);return e.addColorStop(0,"rgba(180, 240, 255, 0.95)"),e.addColorStop(.4,"rgba(140, 220, 255, 0.6)"),e.addColorStop(.75,"rgba(120, 210, 255, 0.25)"),e.addColorStop(1,"rgba(120, 210, 255, 0.0)"),t.fillStyle=e,t.fillRect(0,0,n.width,n.height),Wt.from(n)}function mA({isPlaying:n=!1,mode:t="play",seekTime:e,tool:s,loginUserId:a,notes:o=null,setNotes:c=null,pushUndo:u,setSelectedNoteIds:d,selectedNoteIds:h,settings:p={hitEffect:!0,judgeText:!0,comboText:!0,lowEffect:!1,visualizer:!0},songId:y,analyserRef:x,onState:v,paused:S=!1,bgmVolume:w,sfxVolume:_,onReady:A,onFinish:R,isMulti:C=!1,roomId:j,stompClientRef:k,stompConnected:I,onRivalFinish:N,onStreamReady:L}){const H=new URLSearchParams(window.location.search).get("mode")==="editorTest",B=300,U=100,[z,G]=E.useState(0),[V,J]=E.useState(0),[O,$]=E.useState(0),rt=E.useRef(0),[it,ft]=E.useState(new Set),[D,Y]=E.useState(0),at=E.useRef(!1),lt=E.useRef(o??[]),nt=E.useRef(0),xt=E.useRef(0),Rt=E.useRef(A),[yt,Mt]=E.useState([]),Et=E.useRef(R),Tt=E.useRef(N),[qt,Gt]=E.useState([]),Vt=E.useMemo(()=>t==="edit"?o??[]:yt,[t,o,yt]),Ct=E.useMemo(()=>t==="edit"?c??(()=>{}):Mt,[t,c]),[Wn,Yn]=E.useState(!1),he=E.useRef(null),Jt=t==="edit"?!n:S,Te=E.useRef(0),Xt=E.useRef(0),Ue=E.useRef(0),mn=E.useRef(!1),Ye=E.useRef(null),Xe=E.useRef(null),[,ln]=E.useState(0),Ze=E.useRef(null),cn=E.useRef(new Map),Xn=E.useRef(!1),X=E.useRef(!1),[vt,kt]=E.useState(null),[Zt,Ht]=E.useState(null),Ie=()=>gt.LANE?.COUNT??gt.KEY?.COUNT??7,fe=()=>{J(tt=>tt>=B?tt-U:Math.max(0,tt-U))},mt=tt=>tt>=50?3:tt>=20?2:1,_t=1e3/45,pt=E.useRef(v),[It,ae]=E.useState(null),[ze,gn]=E.useState("NORMAL"),we=E.useRef(null),qe=E.useRef(null),Dr=E.useRef(null),qs=E.useRef(null),Zi=E.useRef(null),Aa=E.useRef(null),ts=E.useRef(!1),nn=E.useRef(null),Ta=E.useRef(null),ps=E.useRef(null),Ks=E.useRef(null),Mc=E.useRef(null),zo=E.useRef(0),es=()=>{const tt=Object.values(gt.SCORE).filter(ht=>typeof ht=="number");return tt.length?Math.max(...tt):0},yn=E.useCallback(tt=>{const ht=es();return(Array.isArray(tt)?tt:[]).reduce((At,St)=>{if(St.type==="long"){const jt=Math.max(0,(St.endTime??St.timing)-St.timing),dt=Math.ceil(jt/100);return At+dt*gt.SCORE.LONG_BONUS+ht}return At+ht},0)},[]),un=E.useMemo(()=>Math.max(1,yn(Vt)),[Vt,yn]);E.useEffect(()=>{if(!C){nn.current&&(cancelAnimationFrame(nn.current),nn.current=null);return}ts.current=!1,Ta.current=null},[y,j,C]),E.useEffect(()=>{if(!L||!C||ts.current)return;const tt=Aa.current,ht=Dr.current,At=qs.current,St=Zi.current;if(!tt||!ht||!At)return;ts.current=!0;const jt=480,dt=853;tt.width=jt,tt.height=dt;const wt=tt.getContext("2d");if(!wt)return;let Lt=0;const Dt=Ft=>{if(Ft-Lt<_t){nn.current=requestAnimationFrame(Dt);return}Lt=Ft,wt.clearRect(0,0,tt.width,tt.height),ht&&wt.drawImage(ht,0,0,jt,dt),At&&wt.drawImage(At,0,0,jt,dt),St&&wt.drawImage(St,0,0,jt,dt),nn.current=requestAnimationFrame(Dt)};return nn.current=requestAnimationFrame(Dt),setTimeout(()=>{const Ft=tt.captureStream(60);L?.(Ft),console.log("[COMPOSITE TRACKS]",Ft.getTracks()),console.log("[COMPOSITE VIDEO TRACK]",Ft.getVideoTracks()[0]),Ta.current=Ft},50),()=>{nn.current&&(cancelAnimationFrame(nn.current),nn.current=null),nn.current=null,ts.current=!1,Ta.current=null}},[D,C,j]),E.useEffect(()=>{if(!C||!j||!a||!I)return;const tt=k.current;tt&&tt.publish({destination:"/app/multi/score",body:JSON.stringify({type:"SCORE",roomId:j,userId:a,score:V,combo:rt.current,maxCombo:xt.current})})},[V,O,C,j,a,I,k]),E.useEffect(()=>{Tt.current=N},[N]),E.useEffect(()=>{pt.current=v},[v]),E.useEffect(()=>{e!=null&&(nt.current=e,Promise.resolve().then(()=>{G(e)}),we.current&&(we.current.currentTime=e/1e3),t!=="edit"&&Ct(tt=>tt.map(ht=>ht.type==="long"?e<ht.timing?{...ht,hit:!1,holding:!1,released:!1}:e>=ht.endTime?{...ht,hit:!0,holding:!1,released:!0}:{...ht,hit:!0,holding:!0}:e>=ht.timing?{...ht,hit:!0}:{...ht,hit:!1})))},[e,t,Ct]),E.useEffect(()=>{if(t!=="edit")return;const tt=()=>{he.current=null,Te.current=0,Xt.current=0,Ue.current=0};return window.addEventListener("mouseup",tt),()=>window.removeEventListener("mouseup",tt)},[t]),E.useEffect(()=>{rt.current=O},[O]),E.useEffect(()=>{Et.current=R},[R]),E.useEffect(()=>{Rt.current=A},[A]),E.useEffect(()=>{Jt||we.current&&Number.isFinite(w)&&(we.current.volume=w)},[w,t,Jt]),E.useEffect(()=>{t==="edit"?lt.current=o??[]:lt.current=yt},[t,o,yt]),E.useEffect(()=>{Jt||(!Xn.current&&V>=B&&(Xn.current=!0),Xn.current&&V<=0&&!X.current&&(X.current=!0,we.current?.pause(),Et.current?.({score:0,maxScore:un,maxCombo:xt.current,gameOver:!0})))},[V,Jt,un]),E.useEffect(()=>{xt.current=Math.max(xt.current,O)},[O]);const ci="",Qs=y??null,vd=gt.SPEED,Sd=gt.DIFFICULTY?.[String(ze).toUpperCase()]?.SPEED??1,ms=vd*Sd;E.useEffect(()=>{},[ze]),E.useEffect(()=>{typeof pt.current=="function"&&pt.current({score:V,combo:O,diff:ze,currentTime:nt.current,duration:we.current?.duration?we.current.duration*1e3:0,maxScore:un})},[V,O,ze,z,un]),E.useEffect(()=>{zo.current=V},[V]),E.useEffect(()=>{const tt=we.current;if(!tt||!It)return;at.current=!1;const ht=()=>{at.current||(at.current=!0,Rt.current?.())},At=()=>{X.current||(we.current?.pause(),Et.current?.({score:zo.current,maxScore:un,maxCombo:xt.current,gameOver:!1}))};if(!Ks.current)try{const St=new AudioContext,jt=St.createMediaElementSource(tt),dt=St.createAnalyser();dt.fftSize=256,jt.connect(dt),dt.connect(St.destination),Ks.current=St,x&&(x.current=dt),Mc.current=new Uint8Array(dt.frequencyBinCount)}catch{}return tt.addEventListener("canplay",ht,{once:!0}),tt.addEventListener("ended",At),()=>{tt.removeEventListener("canplay",ht),tt.removeEventListener("ended",At)}},[It,x,un]),E.useEffect(()=>{const tt=we.current;if(tt){if(Jt){tt.pause();return}Ks.current?.state==="suspended"&&Ks.current.resume().catch(()=>{}),tt.paused&&tt.play().then(()=>{const ht=tt.currentTime*1e3;nt.current=ht,G(ht)}).catch(()=>{})}},[Jt,It]),E.useEffect(()=>{if(Jt)return;const tt=ht=>{ht.key==="Escape"&&(Xe.current=null,Ze.current=null,kt(null),Ht(null),ln(At=>At+1))};return window.addEventListener("keydown",tt),()=>window.removeEventListener("keydown",tt)},[t,Jt]);const Js=tt=>{const ht=Array.isArray(tt)?tt:tt?.notes||tt?.data||[];return Array.isArray(ht)?ht.map(At=>{const St=At.time!=null||At.noteTime!=null||At.note_time!=null,jt=Number(St?At.time??At.noteTime??At.note_time??0:At.timing??0),dt=Number(At.lane??At.laneIndex??At.key??0),wt=(At.type??At.noteType??"tap")==="long"?"long":"tap",Lt=Math.round(St?jt*1e3:jt),Dt=At.endTime??At.end_time??At.end??null,Ft=Dt!=null?Math.round(Number(St?Number(Dt)*1e3:Number(Dt))):void 0;return wt==="long"?{id:crypto.randomUUID(),lane:dt,timing:Lt,endTime:Ft??Lt+1e3,type:"long",hit:!1,holding:!1,released:!1}:{id:crypto.randomUUID(),lane:dt,timing:Lt,type:"tap",hit:!1}}):[]},Ca=()=>{J(0),$(0),Gt([]),ft(new Set),Xn.current=!1,X.current=!1,we.current&&(we.current.pause(),we.current.currentTime=0)},gs=E.useCallback(async tt=>{if(tt==null)return!1;const ht=String(tt).trim();if(!ht||ht==="undefined")return!1;if(t==="edit"){const dt=await fetch(`${ci}/api/songs/${ht}/notes`);if(dt.ok){const wt=await dt.json(),Lt=String(wt?.diff??"NORMAL").trim().toUpperCase();gn(new Set(["EASY","NORMAL","HARD","HELL"]).has(Lt)?Lt:"NORMAL");const Ft=Js(wt);Ft.length&&Ct(Ft)}return ae(`${ci}/api/songs/${ht}/audio`),!0}if(H){const dt=sessionStorage.getItem("EDITOR_TEST_NOTES");if(dt){const wt=JSON.parse(dt);return wt?.difficulty&&gn(wt.difficulty),Ca(),Ct(wt),ae(`${ci}/api/songs/${ht}/audio`),!0}}ae(`${ci}/api/songs/${ht}/audio`);const At=await fetch(`${ci}/api/songs/${ht}/notes`);if(!At.ok)return!1;const St=await At.json();if(St?.diff){const dt=String(St.diff).trim().toUpperCase();gn(new Set(["EASY","NORMAL","HARD","HELL"]).has(dt)?dt:"NORMAL")}const jt=Js(St);return jt.length?(Ca(),Ct(jt),!0):!1},[ci,H,Ct,t,gn]);E.useEffect(()=>{Qs==null||Qs==="undefined"||Promise.resolve().then(()=>{gs(Qs)})},[Qs,gs]),E.useEffect(()=>{let tt=null;const ht=()=>{if(!Jt){const At=we.current;At&&!At.paused&&(nt.current=At.currentTime*1e3)}Jt||(tt=requestAnimationFrame(ht))};return Jt||(tt=requestAnimationFrame(ht)),()=>cancelAnimationFrame(tt)},[Jt]),E.useEffect(()=>{let tt=null;const ht=()=>{G(nt.current),tt=requestAnimationFrame(ht)};return tt=requestAnimationFrame(ht),()=>cancelAnimationFrame(tt)},[]),E.useEffect(()=>{if(t==="edit")return;const tt=setInterval(()=>{if(Jt)return;const ht=nt.current;Ct(At=>{let St=!1;const jt=At.map(dt=>{if(dt.hit&&!(dt.type==="long"&&dt.holding&&!dt.released))return dt;if(dt.type==="long"){if(dt.holding&&!dt.released&&ht>=dt.endTime)return Gt(wt=>wt.filter(Lt=>!(Lt.type==="long"&&Lt.noteId===`${dt.timing}-${dt.lane}`))),{...dt,hit:!0,holding:!1,released:!0};if(!dt.holding&&ht>dt.timing+gt.JUDGEMENT.MISS)return St=!0,fe(),Gt(wt=>[...wt,{type:"judge",lane:dt.lane,judgement:"MISS",combo:0,id:crypto.randomUUID()}]),{...dt,hit:!0,judgement:"MISS"};if(dt.holding&&ht>dt.endTime+gt.JUDGEMENT.MISS)return St=!0,fe(),Gt(wt=>wt.filter(Lt=>!(Lt.type==="long"&&Lt.noteId===`${dt.timing}-${dt.lane}`))),Gt(wt=>[...wt,{type:"judge",lane:dt.lane,judgement:"MISS",combo:0,id:crypto.randomUUID()}]),{...dt,hit:!0,holding:!1,released:!0,judgement:"MISS"}}else if(ht>dt.timing+gt.JUDGEMENT.MISS)return St=!0,fe(),Gt(wt=>[...wt,{type:"judge",lane:dt.lane,judgement:"MISS",id:crypto.randomUUID()}]),{...dt,hit:!0,judgement:"MISS"};return dt});return St&&$(0),St?jt:At})},100);return()=>clearInterval(tt)},[S,t,Ct,Jt]),E.useEffect(()=>{if(t==="edit")return;const tt=setInterval(()=>{if(Jt)return;const ht=nt.current,At=lt.current.filter(St=>St.type==="long"&&St.holding&&!St.released&&ht<St.endTime);if(At.length>0){const St=mt(rt.current),jt=At.length*gt.SCORE.LONG_BONUS*St;J(dt=>dt+jt),$(dt=>dt+1)}},100);return()=>clearInterval(tt)},[S,t,n,Jt]),E.useEffect(()=>{if(Jt||t==="edit")return;const tt=St=>{if(S||(!S&&we.current&&we.current.paused&&we.current.play().catch(()=>{}),it.has(St)))return;ft(Dt=>new Set(Dt).add(St)),new Set([1,3,5]).has(St)?J3(1):Q3(1);const dt=QS.judgeNote(St,nt.current,lt.current);if(!dt||!dt.note)return;const wt=dt.note,Lt=`${wt.timing}-${wt.lane}`;if(dt.judgement==="MISS"){fe(),$(0),Gt(Dt=>[...Dt,{type:"judge",lane:St,judgement:"MISS",combo:0,id:crypto.randomUUID()}]);return}if(wt.type==="long"&&!wt.holding){Ct(Dt=>Dt.map(Ft=>Ft===wt?{...Ft,hit:!0,holding:!0}:Ft)),$(Dt=>{const Ft=Dt+1;return Gt(Ae=>Ae.some(Pe=>Pe.type==="long"&&Pe.noteId===Lt)?Ae:[...Ae,{type:"long",lane:St,noteId:Lt},{type:"judge",lane:St,judgement:dt.judgement,combo:Ft,id:crypto.randomUUID()}]),Ft});return}Ct(Dt=>Dt.map(Ft=>Ft===wt?{...Ft,hit:!0}:Ft)),$(Dt=>{const Ft=Dt+1;return Gt(Ae=>[...Ae,{type:"tap",lane:St,id:crypto.randomUUID()},{type:"judge",lane:St,judgement:dt.judgement,combo:Ft,id:crypto.randomUUID()}]),Ft}),J(Dt=>{const Ft=mt(rt.current+1);return Dt+gt.SCORE[dt.judgement]*Ft})},ht=St=>{ft(dt=>{const wt=new Set(dt);return wt.delete(St),wt});const jt=QS.judgeNoteRelease(St,nt.current,lt.current);if(jt&&jt.note){const dt=jt.note,wt=`${dt.timing}-${dt.lane}`;Ct(Lt=>Lt.map(Dt=>Dt===dt?{...Dt,hit:!0,holding:!1,released:!0}:Dt)),Gt(Lt=>Lt.filter(Dt=>!(Dt.type==="long"&&Dt.noteId===wt))),J(Lt=>{const Dt=mt(rt.current);return Lt+gt.SCORE[jt.judgement]*Dt})}else Ct(dt=>dt.map(wt=>wt.lane===St&&wt.holding?(Gt(Lt=>Lt.filter(Dt=>!(Dt.type==="long"&&Dt.noteId===`${wt.timing}-${wt.lane}`))),{...wt,holding:!1,released:!0}):wt))},At=new B8(tt,ht);return()=>At.destroy()},[it,S,_,t,Ct,Jt]),E.useEffect(()=>{qt.length>200&&Gt(tt=>tt.slice(-100))},[qt]);const Ee=.8,ui=(tt,ht)=>{if(!qe.current)return{lane:-1,timing:0};const At=qe.current.getBoundingClientRect(),St=(tt-At.left)/Ee,jt=(ht-At.top)/Ee,dt=(jn,qn)=>{const{WIDTH:fi,HEIGHT:bs}=gt.CANVAS,Ei=fi/2,{SCALE_MIN:In,SCALE_MAX:Br}=gt.PERSPECTIVE,Ur=In+qn/bs*(Br-In);return Ei+(jn-Ei)/Ur},{WIDTH:wt,HEIGHT:Lt}=gt.CANVAS,Dt=wt/2,{SCALE_MIN:Ft,SCALE_MAX:Ae}=gt.PERSPECTIVE,oe=Ft+jt/Lt*(Ae-Ft),ve=Dt+(0-Dt)*oe,ie=Dt+(wt-Dt)*oe;if(St<ve||St>ie)return{lane:-1,timing:0};const Le=gt.CANVAS.HIT_LINE_Y,De=dt(St,jt),pe=gt.LANE_WIDTHS;let Rn=0,dn=-1;for(let jn=0;jn<pe.length;jn++)if(Rn+=pe[jn],De<Rn){dn=jn;break}const me=ms,is=(Le-jt)/me,ss=(nt.current||0)+is;return{lane:dn,timing:ss}},ns=tt=>(gt.LANE_WIDTHS??[]).slice(0,tt).reduce((ht,At)=>ht+At,0),fn=tt=>ns(tt)+(gt.LANE_WIDTHS?.[tt]??0),kc=tt=>{if(mn.current||s==="delete"&&Xe.current||t!=="edit"||ps.current||he.current)return;const{lane:ht,timing:At}=ui(tt.clientX,tt.clientY);if(s==="delete")u(lt.current),Ct(St=>St.filter(jt=>!(jt.lane===ht&&Math.abs(jt.timing-At)<60)));else if(s==="tap"){u(lt.current);const St=Math.round(At);Ct(jt=>{const dt=jt.some(Lt=>Lt.type==="tap"&&Lt.lane===ht&&Math.abs(Lt.timing-St)<60),wt=jt.some(Lt=>Lt.type==="long"&&Lt.lane===ht&&St>Lt.timing&&St<(Lt.endTime??Lt.timing));return dt||wt?jt:[...jt,{id:crypto.randomUUID(),lane:ht,timing:St,type:"tap",hit:!1}]})}},Oc=(tt,ht)=>{if(!qe.current)return-1;const At=qe.current.getBoundingClientRect(),St=(tt-At.left)/Ee,jt=(ht-At.top)/Ee,{WIDTH:dt,HEIGHT:wt}=gt.CANVAS,Lt=dt/2,{SCALE_MIN:Dt,SCALE_MAX:Ft}=gt.PERSPECTIVE,Ae=Dt+jt/wt*(Ft-Dt),Pe=Lt+(0-Lt)*Ae,oe=Lt+(dt-Lt)*Ae;if(St<Pe||St>oe)return-1;const ie=(pe=>Lt+(pe-Lt)/Ae)(St),Le=gt.LANE_WIDTHS;let De=0;for(let pe=0;pe<Le.length;pe++)if(De+=Le[pe],ie<De)return pe;return-1},ys=tt=>{if(t==="edit"){if(s==="select"&&he.current){mn.current=!0;const ht=he.current,{mode:At,baseTiming:St,baseLane:jt,baseById:dt}=ht,wt=qe.current.getBoundingClientRect(),Lt=(tt.clientY-wt.top)/Ee,Dt=gt.CANVAS.HIT_LINE_Y,Ft=Te.current+(Dt-Lt)/ms,Pe=Math.max(0,Ft+Xt.current)-St,oe=Oc(tt.clientX,tt.clientY),ve=oe>=0?oe-jt:0;cn.current.clear();for(const[ie,Le]of dt.entries()){const De=Le.lane+ve;if(!(De<0||De>=Ie())){if(At==="move"){const pe=cn.current.get(ie)||{};cn.current.set(ie,{...pe,timing:Math.max(0,Le.timing+Pe),lane:De})}if(At==="resize"&&Le.type==="long"){const Rn=Math.max(Ft+Ue.current,Le.timing+150),dn=cn.current.get(ie)||{};cn.current.set(ie,{...dn,endTime:Rn})}}}return}if(s==="delete"&&Xe.current&&qe.current){Xe.current.x2=tt.clientX,Xe.current.y2=tt.clientY;const ht=qe.current.getBoundingClientRect(),{x1:At,y1:St,x2:jt,y2:dt}=Xe.current,wt=(At-ht.left)/Ee,Lt=(St-ht.top)/Ee,Dt=(jt-ht.left)/Ee,Ft=(dt-ht.top)/Ee;kt({left:Math.min(wt,Dt),top:Math.min(Lt,Ft),width:Math.abs(Dt-wt),height:Math.abs(Ft-Lt)});return}if(s==="select"&&Ze.current&&!he.current&&qe.current){Ze.current.x2=tt.clientX,Ze.current.y2=tt.clientY;const ht=qe.current.getBoundingClientRect(),{x1:At,y1:St,x2:jt,y2:dt}=Ze.current,wt=(At-ht.left)/Ee,Lt=(St-ht.top)/Ee,Dt=(jt-ht.left)/Ee,Ft=(dt-ht.top)/Ee;Ht({left:Math.min(wt,Dt),top:Math.min(Lt,Ft),width:Math.abs(Dt-wt),height:Math.abs(Ft-Lt)});return}if(!he.current&&!Ze.current&&!Xe.current){const{lane:ht}=ui(tt.clientX,tt.clientY);Yn(ht>=0&&ht<Ie())}}},Zs=tt=>{if(t!=="edit"||tt.button!==0||s==="delete"&&Xe.current)return;if(s==="delete"){Xe.current={x1:tt.clientX,y1:tt.clientY,x2:tt.clientX,y2:tt.clientY};return}if(s==="select"&&tt.shiftKey){Ze.current={x1:tt.clientX,y1:tt.clientY,x2:tt.clientX,y2:tt.clientY},ln(St=>St+1);return}const{lane:ht}=ui(tt.clientX,tt.clientY),{timing:At}=ui(tt.clientX,tt.clientY);if(s==="select"&&ht>=0&&ht<Ie()){let jt=null,dt=81;for(const ie of lt.current??[]){if(ie.lane!==ht)continue;let Le=Math.abs(ie.timing-At);ie.type==="long"&&ie.endTime!=null&&At>=ie.timing&&At<=ie.endTime&&(Le=0),Le<=80&&Le<dt&&(dt=Le,jt=ie)}if(!jt){d?.(new Set),he.current=null;return}let wt="move";jt.type==="long"&&jt.endTime!=null&&Math.abs(jt.endTime-At)<80&&(wt="resize"),Te.current=nt.current||0;const Lt=qe.current.getBoundingClientRect(),Dt=(tt.clientY-Lt.top)/Ee,Ft=gt.CANVAS.HIT_LINE_Y,Ae=Te.current+(Ft-Dt)/ms;Xt.current=(jt.timing??0)-Ae,Ue.current=(jt.type==="long"?jt.endTime??jt.timing:jt.timing)-Ae;const Pe=jt.id;let oe;tt.shiftKey?(oe=new Set(h??[]),oe.add(Pe)):h?.has(Pe)?oe=new Set(h):oe=new Set([Pe]);const ve=new Map;for(const ie of lt.current??[])oe.has(ie.id)&&ve.set(ie.id,{timing:ie.timing,lane:ie.lane,endTime:ie.endTime,type:ie.type});he.current={mode:wt,baseTiming:jt.timing,baseLane:jt.lane,baseById:ve,selectedIds:oe},Ye.current={x:tt.clientX,y:tt.clientY},d?.(new Set(oe));return}if(s==="long"&&ht>=0&&ht<Ie()){const{timing:St}=ui(tt.clientX,tt.clientY);ps.current={lane:ht,timing:St}}},_d=tt=>{if(t==="edit"&&cn.current.size>0){u(lt.current);const Ae=(ie,Le,De)=>{for(const pe of ie){if(!De?.has(pe.id))continue;const Rn=Le.get(pe.id),dn=Rn?{...pe,...Rn}:pe;for(const me of ie){if(me.id===pe.id||De?.has(me.id)||dn.lane!==me.lane)continue;if(dn.type==="tap"&&me.type==="tap"&&Math.abs(dn.timing-me.timing)<60)return!0;const is=dn.timing,ss=dn.type==="long"?dn.endTime??dn.timing:dn.timing,jn=me.timing,qn=me.type==="long"?me.endTime??me.timing:me.timing;if(is<qn&&ss>jn)return!0}}return!1},Pe=cn.current,oe=new Map(Pe),ve=he.current?.selectedIds;if(Ae(lt.current,oe,ve)){cn.current.clear();return}Ct(ie=>{const Le=ie.map(De=>{if(!ve?.has(De.id))return De;const pe=oe.get(De.id);return pe?{...De,...pe}:De});return lt.current=Le,Le}),cn.current.clear()}if(t==="edit"&&(he.current=null,Te.current=0,Xt.current=0,Ue.current=0,Ye.current=null,setTimeout(()=>{mn.current=!1},0)),t==="edit"&&s==="delete"&&Xe.current&&qe.current){kt(null);const{x1:Ae,y1:Pe,x2:oe,y2:ve}=Xe.current;Xe.current=null;const ie=Math.min(Ae,oe),Le=Math.max(Ae,oe),De=Math.min(Pe,ve),pe=Math.max(Pe,ve),Rn=qe.current.getBoundingClientRect();u(lt.current),Ct(dn=>dn.filter(me=>{const is=ns(me.lane),ss=fn(me.lane),jn=gt.CANVAS.WIDTH/2,qn=xs=>{const Bi=gt.CANVAS.HIT_LINE_Y-(xs-nt.current)*ms,Po=gt.PERSPECTIVE.SCALE_MIN+Bi/gt.CANVAS.HEIGHT*(gt.PERSPECTIVE.SCALE_MAX-gt.PERSPECTIVE.SCALE_MIN),Ho=(jn+(is-jn)*Po)*Ee+Rn.left,Nc=(jn+(ss-jn)*Po)*Ee+Rn.left,zr=Bi*Ee+Rn.top;return{screenLeft:Ho,screenRight:Nc,screenY:zr}},fi=qn(me.timing),bs=fi.screenRight>=ie&&fi.screenLeft<=Le;if(!bs)return!0;if(me.type!=="long"){const Bi=fi.screenY>=De-6&&fi.screenY<=pe+6;return!(bs&&Bi)}const Ei=qn(me.endTime??me.timing),In=Math.min(fi.screenY,Ei.screenY),Ur=Math.max(fi.screenY,Ei.screenY)>=De&&In<=pe;return!(bs&&Ur)}));return}if(t==="edit"&&s==="select"&&Ze.current&&qe.current){Ht(null);const{x1:Ae,y1:Pe,x2:oe,y2:ve}=Ze.current;Ze.current=null;const ie=Math.min(Ae,oe),Le=Math.max(Ae,oe),De=Math.min(Pe,ve),pe=Math.max(Pe,ve),Rn=qe.current.getBoundingClientRect(),dn=new Set;for(const me of lt.current){const is=gt.CANVAS.HIT_LINE_Y-(me.timing-nt.current)*ms,ss=ns(me.lane),jn=fn(me.lane),qn=gt.CANVAS.WIDTH/2,fi=gt.PERSPECTIVE.SCALE_MIN+is/gt.CANVAS.HEIGHT*(gt.PERSPECTIVE.SCALE_MAX-gt.PERSPECTIVE.SCALE_MIN),bs=(qn+(ss-qn)*fi)*Ee+Rn.left,Ei=(qn+(jn-qn)*fi)*Ee+Rn.left,In=is*Ee+Rn.top;Ei>=ie&&bs<=Le&&In>=De&&In<=pe&&dn.add(me.id)}d?.(dn),ln(me=>me+1);return}if(t!=="edit"||s!=="long"||!ps.current)return;const{timing:ht}=ui(tt.clientX,tt.clientY),{lane:At,timing:St}=ps.current,jt=Math.min(St,ht),dt=Math.max(St,ht);if(dt-jt<150)return;const wt=Math.min(jt,dt),Lt=Math.max(jt,dt),Dt=Math.round(wt),Ft=Math.round(Lt);u(lt.current),Ct(Ae=>Ae.some(oe=>{if(oe.lane!==At)return!1;if(oe.type==="tap")return Math.abs(oe.timing-Dt)<60||Math.abs(oe.timing-Ft)<60||oe.timing>Dt&&oe.timing<Ft;const ve=oe.timing,ie=oe.endTime??oe.timing;return Dt<ie&&Ft>ve})?Ae:[...Ae,{id:crypto.randomUUID(),lane:At,timing:Dt,endTime:Ft,type:"long",hit:!1,holding:!1}])};return m.jsx("div",{ref:qe,onClick:kc,onMouseDown:Zs,onMouseUp:_d,onMouseMove:ys,onMouseLeave:()=>{ps.current=null,he.current=null,Te.current=0,Xt.current=0,Ue.current=0,Xe.current=null,Ze.current=null,kt(null),Ht(null)},onContextMenu:tt=>{if(tt.preventDefault(),t!=="edit")return;const{lane:ht,timing:At}=ui(tt.clientX,tt.clientY);Ct(St=>(u(St),St.filter(jt=>jt.lane!==ht?!0:Math.abs(jt.timing-At)>60)))},style:{width:`${gt.CANVAS.WIDTH*Ee}px`,height:`${gt.CANVAS.HEIGHT*Ee}px`,position:"relative",margin:"80px auto 0",overflow:"hidden",cursor:t==="edit"&&Wn?"crosshair":"default"},children:m.jsxs("div",{style:{width:`${gt.CANVAS.WIDTH}px`,height:`${gt.CANVAS.HEIGHT}px`,transform:`scale(${Ee})`,transformOrigin:"top left"},children:[m.jsx("canvas",{ref:Aa,style:{position:"fixed",top:"-9999px",left:"-9999px",width:1,height:1,opacity:0,pointerEvents:"none",zIndex:-9999}}),t==="edit"&&s==="delete"&&vt&&m.jsx("div",{style:{position:"absolute",...vt,border:"2px dashed #ff5577",background:"rgba(255,80,120,0.15)",pointerEvents:"none",zIndex:10}}),t==="edit"&&s==="select"&&Zt&&m.jsx("div",{style:{position:"absolute",...Zt,border:"2px dashed #55ccff",background:"rgba(80,180,255,0.15)",pointerEvents:"none",zIndex:10}}),m.jsx(oO,{notes:t==="edit"?Vt??[]:(Vt??[]).filter(tt=>tt.type==="long"?z<(tt.endTime||tt.timing)+2e3:!tt.hit||z<tt.timing+500),currentTime:z,pressedKeys:it,onCanvasReady:tt=>{Dr.current=tt,Y(ht=>ht+1)}}),m.jsx(O8,{notes:(Vt??[]).filter(tt=>tt.type==="long"?z<(tt.endTime||tt.timing)+2e3:!tt.hit||z<tt.timing+500),currentTime:z,speed:ms,selectedNoteIds:h,draggingPreviewRef:cn,tapNoteColor:p?.tapNoteColor??371893,longNoteColor:p?.longNoteColor??11863369,onCanvasReady:tt=>{qs.current=tt,Y(ht=>ht+1)}}),t==="play"&&m.jsxs(m.Fragment,{children:[p.hitEffect!==!1&&m.jsx(P8,{pressedKeys:it}),p.hitEffect!==!1&&m.jsx(R8,{effects:qt,showHitEffect:p.hitEffect,showJudgeText:p.judgeText,showComboText:p.comboText,lowEffect:p.lowEffect,fpsLimit:60,onPixiReady:tt=>{tt&&(Zi.current=tt,Y(ht=>ht+1))}}),p.visualizer!==!1&&m.jsx(Ea,{active:!S,size:"game",analyserRef:x})]}),It&&m.jsx("audio",{ref:we,src:It})]})})}function gA({songId:n,diff:t}){const[s,a]=E.useState(null),[o,c]=E.useState(!!n);E.useEffect(()=>{if(!n)return;let p=!0;return fetch(`/api/songs/${n}`).then(y=>{if(!y.ok)throw new Error("song fetch failed");return y.json()}).then(y=>{p&&a(y)}).catch(y=>{console.error(y),p&&a(null)}).finally(()=>{p&&c(!1)}),()=>{p=!1}},[n]);const u=p=>p?p.replace(/\.mp3$/i,""):"",d=s?.title?u(s.title):"LOADING...",h=String(s?.diff??t??"UNKNOWN").toUpperCase();return m.jsxs("div",{style:{width:"260px",height:"calc(100vh - 64px)",padding:"24px 16px",boxSizing:"border-box",color:"#e6faff",background:"rgba(10, 20, 30, 0.6)",position:"fixed",top:"64px",left:0},children:[m.jsx("div",{style:{position:"absolute",top:0,right:0,width:"5px",height:"100%",background:"linear-gradient(to bottom, #ff0000ff, #ff00eaff, #5aeaff)",boxShadow:`0 0 6px rgba(255,80,80,0.8),
                      0 0 12px rgba(255,80,200,0.6),
                      0 0 20px rgba(90,234,255,0.5)`,pointerEvents:"none"}}),m.jsxs("div",{style:{fontSize:"20px",fontWeight:700},children:[d,o&&m.jsx("span",{style:{marginLeft:"8px",fontSize:"12px",opacity:.6},children:"LOADING..."})]}),m.jsx("div",{style:{fontSize:"14px",fontWeight:400,marginTop:"5px"},children:s?.artist||"UNKNOWN ARTIST"}),m.jsx("div",{style:{marginTop:"12px"},children:s?.coverPath?m.jsx("img",{src:`/api/songs/${n}/cover`,alt:"cover",style:{width:"200px",height:"200px",borderRadius:"6px",objectFit:"cover",border:"2px solid rgba(255,255,255,0.2)"}}):m.jsx("div",{style:{width:"200px",height:"200px",borderRadius:"6px",border:"2px solid rgba(255,255,255,0.2)",background:"rgba(0,0,0,0.3)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",opacity:.7},children:"NO COVER"})}),m.jsxs("div",{style:{marginTop:"6px",fontSize:"14px",opacity:.8},children:[": ",h]})]})}const i_=64,F8=300;function G8(n){return n?n.startsWith("http")?n:n.startsWith("/")?`http://localhost:8080${n}`:`http://localhost:8080/${n}`:null}function yA({isMulti:n,rival:t,rivalScore:e,opponentLeft:s,singleInfo:a}){const o=E.useRef(null);if(E.useEffect(()=>{if(!n)return;const d=o.current,h=t?.stream;if(!d||!h){d&&(d.srcObject=null);return}d.muted=!0,d.playsInline=!0,d.autoplay=!0,d.srcObject=h,d.play().catch(()=>{})},[n,t?.stream]),n){const d=t?.nickname??"OPPONENT",h=G8(t?.profileUrl),p=t?.combo??0;return console.log("[SIDEBAR SCORE]",e),m.jsxs("div",{style:ge.sidebar,children:[m.jsx("div",{style:ge.neonLine}),m.jsxs("div",{style:ge.rivalView,children:[m.jsx("div",{style:ge.rivalTitle,children:"MATCH VIEW"}),m.jsxs("div",{style:ge.frameBox,children:[m.jsx("video",{ref:o,autoPlay:!0,playsInline:!0,muted:!0,preload:"auto",controls:!1,disablePictureInPicture:!0,style:ge.video}),s&&m.jsx("div",{style:ge.opponentLeftOverlay,children:"OPPONENT LEFT"})]})]}),m.jsxs("div",{style:ge.rivalInfo,children:[m.jsxs("div",{style:ge.profileBlock,children:[m.jsx("div",{style:{...ge.profileImg,background:h?`url(${h}) center / cover no-repeat`:ge.profileFallback.background,opacity:h?1:.5},children:!h&&"PROFILE"}),m.jsxs("div",{style:ge.nickname,children:[" ",d]})]}),m.jsxs("div",{style:ge.scoreBlock,children:[m.jsx(s_,{label:"SCORE: ",value:e,color:"#5aeaff"}),m.jsx(s_,{label:"COMBO: ",value:p,color:"#ff8cff"})]})]})]})}const{modeLabel:c}=a??{};return m.jsxs("div",{style:ge.sidebar,children:[m.jsx("div",{style:ge.neonLine}),m.jsxs("div",{style:ge.singleView,children:[m.jsx("div",{style:ge.rivalTitle,children:c??"SINGLE PLAY"}),m.jsx("div",{style:ge.frameBox,children:m.jsx("div",{style:ge.logoBox,children:m.jsx("img",{src:"/public/images/teamlogo.png",style:ge.logoImg})})})]}),m.jsx("div",{style:ge.singleInfo,children:m.jsxs("div",{style:ge.systemWrap,children:[m.jsx("div",{style:ge.systemTitle,children:"[ SYSTEM MONITOR ]"}),m.jsx("div",{style:ge.systemRow,children:"DATA: EMPTY"}),m.jsx("div",{style:ge.systemRow,children:"SESSION: LOCAL"}),m.jsx("div",{style:ge.systemRow,children:"LINK: OFF"}),m.jsx("div",{style:ge.systemRow,children:"MODE: SINGLE"}),m.jsx("div",{style:ge.systemRow,children:"AUDIO: OK"}),m.jsx("div",{style:ge.systemRow,children:"VISUALIZER: ACTIVE"}),m.jsx("div",{style:ge.systemRow,children:"STATE: STANDBY"})]})})]})}function s_({label:n,value:t,color:e}){return m.jsxs("div",{style:ge.infoRow,children:[m.jsx("span",{style:{...ge.infoLabel,color:e},children:n}),m.jsx("span",{style:{...ge.infoValue,color:e},children:t})]})}const ge={sidebar:{position:"fixed",top:i_,right:0,width:F8,height:`calc(100vh - ${i_}px)`,padding:12,boxSizing:"border-box",background:"rgba(10, 20, 30, 0.6)",display:"flex",flexDirection:"column",gap:12},neonLine:{position:"absolute",top:0,left:0,width:5,height:"100%",background:"linear-gradient(to bottom, #5aeaff, #ff00ea, #5aeaff)",boxShadow:"0 0 6px rgba(90,234,255,0.8), 0 0 12px rgba(255,80,200,0.6)",pointerEvents:"none"},rivalView:{flex:6,minHeight:0,borderRadius:14,border:"1px solid rgba(90,234,255,0.55)",background:"rgba(0,0,0,0.35)",padding:10,display:"flex",flexDirection:"column",gap:8},rivalTitle:{fontSize:12,letterSpacing:"0.12em",opacity:.8,textAlign:"center"},frameBox:{position:"relative",isolation:"isolate",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:10,overflow:"hidden",background:"#111",border:"2px solid #5aeaff",margin:"0 auto",width:"100%",aspectRatio:"9 / 16",minHeight:200},video:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"cover",background:"#000",zIndex:99999,opacity:1,visibility:"visible",pointerEvents:"none"},rivalInfo:{flex:4,borderRadius:14,border:"1px solid rgba(90,234,255,0.45)",background:"rgba(0,0,0,0.35)",padding:14,display:"flex",flexDirection:"column",gap:14,alignItems:"center"},profileImg:{width:120,height:120,borderRadius:10,border:"1px solid rgba(90,234,255,0.4)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:10,alignSelf:"flex-start"},profileFallback:{background:"linear-gradient(135deg, #2a2f3a, #111)"},nickname:{fontSize:14,fontWeight:700},infoRow:{display:"flex",justifyContent:"center",gap:6},infoLabel:{opacity:.9,fontFamily:"monospace",fontSize:23,letterSpacing:"0.05em"},infoValue:{fontWeight:800,fontFamily:"monospace",fontSize:23,letterSpacing:"0.05em"},profileBlock:{display:"flex",flexDirection:"column",alignItems:"center",gap:6},scoreBlock:{marginTop:8,display:"flex",flexDirection:"column",gap:6,alignItems:"center"},singleView:{flex:6,borderRadius:14,border:"1px solid rgba(90,234,255,0.55)",background:"rgba(0,0,0,0.35)",padding:10,display:"flex",flexDirection:"column",gap:8},singleInfo:{flex:4,borderRadius:14,border:"1px solid rgba(90,234,255,0.45)",background:"rgba(0,0,0,0.35)",padding:14,display:"flex",justifyContent:"center",alignItems:"center"},systemWrap:{width:"100%",fontFamily:"monospace",background:"rgba(5, 10, 15, 0.85)",borderRadius:6,border:"1px solid rgba(0,255,255,0.25)",padding:14},systemTitle:{fontSize:12,letterSpacing:"0.22em",marginBottom:10,color:"#bfffff"},systemRow:{fontSize:12,lineHeight:"1.6",letterSpacing:"0.06em",color:"#eaffff"},opponentLeftOverlay:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",fontSize:16,letterSpacing:"0.18em",fontWeight:700,color:"#ff6b6b",background:"rgba(0,0,0,0.45)",pointerEvents:"none",zIndex:2}},ql=[{key:"F",at:0,color:"#ff6b6b"},{key:"D",at:.4,color:"#b38cff"},{key:"C",at:.6,color:"#6fa8ff"},{key:"B",at:.7,color:"#7dff9a"},{key:"A",at:.9,color:"#6ffcff"},{key:"S",at:1,color:"#ffd75e"}];function r_(n){for(let t=ql.length-1;t>=0;t--)if(n>=ql[t].at)return ql[t].color;return ql[0].color}const Em=`
  M 0,0 
  L 420,0 
  L 420,20 
  L 294,20 
  L 294,17 
  L 248,17 
  L 248,14 
  L 168,14 
  L 168,11 
  L 0,11 
  Z
`;function $8({score:n=0,combo:t=0,songProgress:e=0,classProgress:s=0}){return m.jsxs("div",{style:{position:"relative",width:"420px",pointerEvents:"none",color:"#e6faff"},children:[m.jsx("div",{style:{position:"relative",width:"420px",height:"16px",marginBottom:"4px"},children:ql.map(a=>m.jsx("div",{style:{position:"absolute",left:`${a.at*98}%`,fontSize:"20px",bottom:"1px",opacity:.6,fontWeight:"bold"},children:a.key},a.key))}),m.jsx("div",{style:{position:"relative",width:"420px",height:"22px",marginBottom:"12px"},children:m.jsxs("svg",{width:"420",height:"22",viewBox:"0 0 420 22",style:{overflow:"visible"},children:[m.jsx("defs",{children:m.jsx("clipPath",{id:"energy-mask",children:m.jsx("path",{d:Em})})}),m.jsx("path",{d:Em,fill:r_(s),opacity:"0.25",stroke:"rgba(120, 180, 255, 0.25)",strokeWidth:"1"}),m.jsx("rect",{x:"0",y:"0",width:`${s*100}%`,height:"22",fill:r_(s),clipPath:"url(#energy-mask)",style:{transition:"width 0.15s linear"}}),m.jsx("path",{d:Em,fill:"none",stroke:"rgba(120, 180, 255, 0.9)",strokeWidth:"1.2",strokeLinejoin:"round"})]})}),m.jsxs("div",{style:{textAlign:"left",fontSize:"26px",fontWeight:700},children:[m.jsx("div",{style:{height:"8px",background:"rgba(255,255,255,0.15)",marginBottom:"10px",borderRadius:"2px",overflow:"hidden"},children:m.jsx("div",{style:{width:`${e*100}%`,height:"100%",background:"linear-gradient(90deg, #5aeaff, #ff4dff)",transition:"width 0.1s linear"}})}),m.jsxs("div",{style:{display:"flex",alignItems:"baseline"},children:[n.toLocaleString(),m.jsxs("span",{style:{marginLeft:"15px",fontSize:"18px",opacity:.8,color:"#00e5ff"},children:["",t]})]})]})]})}function V8({children:n}){return m.jsxs("div",{style:{position:"fixed",top:"88px",left:"28%",transform:"translateX(-50%)",width:"460px",padding:"14px 18px 18px",pointerEvents:"none",zIndex:90,background:`
          linear-gradient(180deg,
            rgba(120,200,255,0.10),
            rgba(40,80,120,0.03)
          )
        `,backdropFilter:"blur(6px)",border:"none",boxShadow:"none"},children:[m.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"1px",background:"linear-gradient(90deg, transparent, #5aeaff, transparent)",opacity:.7,pointerEvents:"none"}}),m.jsx("div",{style:{position:"absolute",top:"10%",left:0,width:"3px",height:"60%",background:"linear-gradient(#5aeaff, #ff4dff)",boxShadow:"0 0 8px rgba(90,234,255,0.9)",opacity:.85,pointerEvents:"none"}}),n]})}const W8=600,Y8=800;function X8(){const[n,t]=E.useState([]);return E.useEffect(()=>{const e=setInterval(()=>{t(s=>[...s,{id:crypto.randomUUID(),x:Math.random()*(W8-14),y:-20,speed:1+Math.random()*1}])},400);return()=>clearInterval(e)},[]),E.useEffect(()=>{const e=setInterval(()=>{t(s=>s.map(a=>({...a,y:a.y+a.speed})).filter(a=>a.y<Y8+40))},16);return()=>clearInterval(e)},[]),m.jsx("div",{style:{position:"absolute",inset:0,pointerEvents:"none"},children:n.map(e=>m.jsx("div",{style:{position:"absolute",left:e.x,top:e.y,width:"6px",height:"14px",borderRadius:"1px",background:"rgba(0, 238, 255, 1)",boxShadow:"0 0 6px rgba(0, 238, 255, 1)",opacity:.85}},e.id))})}const vo=["TIP  Perfect    !","TIP  COMBO      !","TIP      !","TIP      !","TIP       !","TIP       !","TIP        !","TIP     .","TIP   PC      !","TIP      .","TIP      .","TIP   300 ! ","TIP      .","       ."," .."," .","   ..","   .","V-Beat  !","    !","    .","   ?"," ."],Am={hitEffect:!0,judgeText:!0,comboText:!0,lowEffect:!1,visualizer:!0,tapNoteColor:371893,longNoteColor:11863369,bgmVolume:100,sfxVolume:100,bgmMuted:!1,sfxMuted:!1};function Tm(){const{songId:n}=td(),[t]=K_(),e=t.get("mode")==="multi",[s,a]=E.useState(()=>{try{const mt=localStorage.getItem("userSettings"),ut=mt?JSON.parse(mt):{};return{...Am,...ut}}catch{return Am}}),o=t.get("token"),c=n??t.get("songId"),u=E.useRef(!1),[d,h]=E.useState("unknown"),[p,y]=E.useState(0),[x,v]=E.useState(0),[S,w]=E.useState(!1),[_,A]=E.useState(0),[R,C]=E.useState(!1),[j,k]=E.useState(null),[I,N]=E.useState(!1),[L,H]=E.useState(0),[B,U]=E.useState(0),[z,G]=E.useState(!1),[V,J]=E.useState(null),O=E.useRef(null),[$,rt]=E.useState(0),it=E.useRef(0),ft=E.useRef(0),D=2500,Y=E.useRef(0),at=E.useRef(null),lt=25,nt=E.useRef(null),xt=E.useRef([]),Rt=E.useRef(!1),yt=E.useRef(null),Mt=E.useRef(null),Et=E.useRef(null),[Tt,qt]=E.useState(void 0),Gt=Tt?.loginUser?.id??null,Vt=en(),Ct=E.useRef(null),Wn=E.useRef(0),Yn=E.useRef(0),he=E.useRef(0),Jt=E.useRef(1),Te=E.useRef(!1),[Xt,Ue]=E.useState(()=>Math.floor(Math.random()*vo.length)),[mn,Ye]=E.useState(null),[Xe,ln]=E.useState(!1),[Ze,cn]=E.useState(0),[Xn,X]=E.useState(0),[vt,kt]=E.useState(0),Zt=async()=>{if(!e||!Ht||!Gt||!nt.current||!Mt.current||!Et.current)return;const mt=yt.current;if(!(!mt||!(Number(Gt)===Number(Et.current)))&&!Rt.current&&!(mt.signalingState!=="stable"||mt.localDescription))try{Rt.current=!0,console.log("[RTC OFFER TX - BEFORE]");const _t=await mt.createOffer();await mt.setLocalDescription(_t),console.log("[RTC OFFER TX - DONE]",_t.type),J4(Ht,_t)}catch(_t){console.error("[RTC OFFER FAIL]",_t)}};E.useRef(!1);const Ht=t.get("roomId"),Ie=()=>{if(yt.current)return yt.current;const mt=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]});mt.onconnectionstatechange=()=>{console.log("[RTC conn]",mt.connectionState),(mt.connectionState==="disconnected"||mt.connectionState==="failed")&&!u.current&&(console.log("[RTC DISCONNECTED  OPPONENT LEFT]"),u.current=!0,ln(!0),Te.current||alert("  .   ."))},mt.onsignalingstatechange=()=>console.log("[RTC sig]",mt.signalingState),mt.oniceconnectionstatechange=()=>console.log("[RTC ice]",mt.iceConnectionState),mt.onicecandidate=pt=>{if(!pt.candidate)return;const It=typeof pt.candidate.toJSON=="function"?pt.candidate.toJSON():{candidate:pt.candidate.candidate,sdpMid:pt.candidate.sdpMid,sdpMLineIndex:pt.candidate.sdpMLineIndex,usernameFragment:pt.candidate.usernameFragment};Z4(Ht,It)},mt.ontrack=pt=>{console.log("[RTC ONTRACK EVENT]",pt.streams);const It=pt.streams?.[0];console.log("[RTC ONTRACK STREAM]",It,It?.getTracks()),It&&J(ae=>({...ae||{},stream:It}))},yt.current=mt;const ut=nt.current;if(ut)for(const pt of ut.getTracks())mt.getSenders().some(ae=>ae.track===pt)||mt.addTrack(pt,ut);if(!mt)return;if(!mt.getSenders().some(pt=>pt.track&&pt.track.kind==="video")&&nt.current)for(const pt of nt.current.getTracks())pt.kind==="video"&&mt.addTrack(pt,nt.current);return mt};E.useEffect(()=>{const mt=ut=>{const{roomId:_t}=ut.detail;console.log("[BACK BUTTON  FORCE LEAVE]",_t),Te.current=!0,sessionStorage.setItem(`leftRoom:${_t}`,"true"),Wi("/app/multi/leave",{roomId:_t})};return window.addEventListener("multi:forceLeave",mt),()=>window.removeEventListener("multi:forceLeave",mt)},[Ht]),E.useEffect(()=>{const mt=new URLSearchParams(window.location.search).get("roomId");if(e&&mt){if(sessionStorage.getItem(`leftRoom:${mt}`)==="true"){alert("     ."),Vt("/main",{replace:!0});return}sessionStorage.getItem("forceMainAfterRefresh")==="true"&&(sessionStorage.removeItem("forceMainAfterRefresh"),Vt("/main",{replace:!0}))}},[Vt,Ht,e]),E.useEffect(()=>{if(!e||!Ht)return;const mt=ut=>{console.log("[MULTI REFRESH DETECTED]"),Te.current=!0,sessionStorage.setItem(`leftRoom:${Ht}`,"true"),Wi("/app/multi/leave",{roomId:Ht}),ut.preventDefault(),ut.returnValue=""};return window.addEventListener("beforeunload",mt),()=>{window.removeEventListener("beforeunload",mt)}},[e,Ht]),E.useEffect(()=>{u.current=Xe},[Xe]),E.useEffect(()=>{if(!e||!Tt?.loginUser?.id||!Ht)return;const mt=Tt.loginUser.id;return i0({roomId:Ht,replaceHandlers:!0,onRoomMessage:ut=>{if(!Array.isArray(ut?.players))return;Et.current=ut.hostUserId??Et.current;const _t=ut.players.find(pt=>Number(pt.userId)!==Number(mt));_t&&(Mt.current=_t.userId,J(pt=>pt?.userId===_t.userId&&pt?.nickname===_t.nickname&&pt?.profileUrl===_t.profileImg?pt:{userId:_t.userId,nickname:_t.nickname,profileUrl:_t.profileImg,combo:pt?.combo,stream:pt?.stream}),Ie(),Zt())},onScoreMessage:ut=>{ut?.userId!=null&&Number(ut.userId)===Number(mt)||(Wn.current=ut.score??0,Yn.current=ut.combo??0,he.current=Math.max(he.current,ut.maxCombo??ut.combo??0),Jt.current=Math.max(Jt.current,ut.maxScore??0),cn(ut.score??0),X(Jt.current),kt(he.current),J(pt=>!pt||pt.combo===ut.combo?pt:{...pt,combo:ut.combo}),Jt.current=Math.max(Jt.current,ut.maxScore??0))},onRtcMessage:async ut=>{if(ut?.userId!=null&&Number(ut.userId)===Number(mt))return;const _t=Ie();if(!_t)return;const pt=nt.current;if(pt)for(const It of pt.getTracks())_t.getSenders().some(ze=>ze.track===It)||_t.addTrack(It,pt);try{switch(ut.type){case"OFFER":{if(await _t.setRemoteDescription(new RTCSessionDescription(ut.offer)),!nt.current){Ct.current={roomId:Ht,offer:ut.offer};break}const It=nt.current;for(const gn of It.getTracks())_t.getSenders().some(qe=>qe.track===gn)||_t.addTrack(gn,It);const ae=await _t.createAnswer();await _t.setLocalDescription(ae),A1(Ht,ae);const ze=xt.current;xt.current=[];for(const gn of ze)await _t.addIceCandidate(gn);break}case"ANSWER":{if(_t.signalingState!=="have-local-offer")return;await _t.setRemoteDescription(new RTCSessionDescription(ut.answer));const It=xt.current;xt.current=[];for(const ae of It)await _t.addIceCandidate(ae);break}case"CANDIDATE":{const It=new RTCIceCandidate(ut.candidate);if(_t.remoteDescription)try{await _t.addIceCandidate(It),console.log("[RTC ICE RX OK]",{mid:It.sdpMid,mline:It.sdpMLineIndex,head:String(It.candidate).slice(0,60)})}catch(ae){console.error("[RTC ICE RX FAIL]",ut.candidate,ae)}else console.log("[RTC ICE RX QUEUED]",{mid:It.sdpMid,mline:It.sdpMLineIndex,head:String(It.candidate).slice(0,60)}),xt.current.push(It);break}default:break}}catch(It){console.error("[RTC SIGNAL ERROR]",ut?.type,It)}},onRoomClosed:()=>{console.log("[ROOM_CLOSED RX - GAME]"),ln(!0),Te.current||alert("  .   .")}}),()=>{O2({})}},[e,Tt,Ht]),E.useEffect(()=>{if(!R){k(null);return}!I&&S&&k(3)},[R,S,I]),E.useEffect(()=>{_o().then(mt=>{qt(mt.data)}).catch(mt=>{console.error("   :",mt),qt(null)})},[]),E.useEffect(()=>{if(Tt===void 0)return;if(!Tt||Tt?.loginUser?.status==="BLOCKED"){alert("  ."),Vt("/main");return}const mt=async _t=>{try{const pt=await fetch(`/api/songs/info?token=${_t}`,{credentials:"include"});if(!pt.ok)throw new Error("  .");const It=await pt.json();Ye(It),h(It.diff??"unknown");const ae=await fetch(`/api/songs/audio?token=${_t}`,{credentials:"include"});if(!ae.ok)throw new Error("  ");const ze=await ae.blob(),gn=document.getElementById("game-audio");gn&&(gn.src=URL.createObjectURL(ze),gn.load())}catch(pt){console.error(pt),alert(pt.message),Vt("/main")}};if(o){mt(o);return}c&&(async _t=>{try{const pt=await fetch(`/api/songs/${_t}`,{credentials:"include"});if(!pt.ok)throw new Error("  ");const It=await pt.json();Ye(It),h(It.diff??"unknown")}catch(pt){console.error(pt),alert(pt.message),Vt("/main")}})(c)},[o,Tt,c,Vt]),E.useEffect(()=>{const mt=ut=>{console.log("[MULTI START EVENT]",ut.detail),ut.detail?.type==="MULTI_START"&&J(_t=>({..._t||{},nickname:ut.detail.rival?.nickname??_t?.nickname,profileUrl:ut.detail.rival?.profileUrl??_t?.profileUrl,stream:_t?.stream??null}))};return window.addEventListener("multi:start",mt),()=>window.removeEventListener("multi:start",mt)},[]),E.useEffect(()=>{const mt=()=>{try{const ut=localStorage.getItem("userSettings"),_t=ut?JSON.parse(ut):{};a(pt=>({...pt,...Am,..._t}))}catch{}};return window.addEventListener("settings:changed",mt),()=>window.removeEventListener("settings:changed",mt)},[]),E.useEffect(()=>{const mt=setInterval(()=>{Ue(ut=>(ut+1)%vo.length)},2200);return()=>clearInterval(mt)},[]),E.useEffect(()=>{const mt=ut=>{ut.code==="Escape"&&G(_t=>{const pt=!_t;return!e&&_t===!0&&pt===!1&&k(3),pt})};return window.addEventListener("keydown",mt),()=>window.removeEventListener("keydown",mt)},[e]),E.useEffect(()=>{if(!S)return;const mt=requestAnimationFrame(function ut(){const _t=performance.now(),pt=Y.current+D,It=at.current??1/0,ae=Math.max(pt,It),ze=Math.min(1,(_t-Y.current)/(ae-Y.current));A(ze*100),ze<1?requestAnimationFrame(ut):C(!0)});return()=>cancelAnimationFrame(mt)},[S]),E.useEffect(()=>{Y.current=performance.now()},[]),E.useEffect(()=>{if(j===null)return;if(j===0){s4(),k(null);const ut=setTimeout(()=>{G(!0)},300);return()=>clearTimeout(ut)}i4();const mt=setTimeout(()=>{k(ut=>ut-1)},1e3);return()=>clearTimeout(mt)},[j]);const fe=j!==null||!e&&z||!R;return m.jsxs("div",{style:{minHeight:"100vh",paddingTop:lt+"px",display:"flex",justifyContent:"center",alignItems:"center"},children:[m.jsx(Xs,{}),m.jsx(Ys,{}),m.jsx(gA,{songId:o?mn?.id:c,diff:d}),m.jsx(yA,{isMulti:e,rival:V,rivalScore:Ze,opponentLeft:Xe}),m.jsx(V8,{children:m.jsx($8,{score:p,combo:x,songProgress:L,classProgress:B})}),!R&&m.jsxs("div",{style:{position:"fixed",inset:0,background:"radial-gradient(circle at center, #220000, #000)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:9999},children:[m.jsxs("div",{style:{width:"600px",height:"800px",position:"relative",borderRadius:"14px",overflow:"hidden"},children:[m.jsx(X8,{count:10}),m.jsx("div",{style:{position:"absolute",inset:0,display:"flex",justifyContent:"center",alignItems:"center",fontSize:"50px",fontWeight:"bold",letterSpacing:"6px",color:"rgb(255, 255, 255)",textShadow:`
                  0 0 8px #ff4a4a,
                  0 0 24px #ff0000,
                  0 0 48px #aa0000
                `,pointerEvents:"none"},children:"LOADING"}),m.jsx("div",{style:{position:"absolute",bottom:"200px",left:"50%",transform:"translateX(-50%)",width:"500px",height:"20px",background:"rgba(255,0,0,0.15)",borderRadius:"6px",overflow:"hidden"},children:m.jsx("div",{style:{width:`${_}%`,height:"100%",background:"linear-gradient(90deg, #ff3a3a, #ff0000)",boxShadow:`
                    0 0 8px rgba(255,80,80,0.8),
                    0 0 16px rgba(255,0,0,0.6)
                  `,transition:"non"}})}),m.jsxs("div",{style:{position:"absolute",bottom:"200px",left:"50%",transform:"translateX(-50%)",fontSize:"18px",color:"#ffaaaa",letterSpacing:"2px",textShadow:"0 0 6px rgba(255,80,80,0.8)",pointerEvents:"none"},children:[Math.round(_),"%"]})]}),m.jsx("div",{style:{position:"absolute",bottom:"100px",left:"50%",transform:"translateX(-50%)",fontSize:"24px",letterSpacing:"0.04em",color:"#7df9ff",opacity:.85,textShadow:"0 0 6px rgba(125,249,255,0.35)",pointerEvents:"none",whiteSpace:"nowrap"},children:vo[Xt]})]}),z&&m.jsx("div",{style:{position:"fixed",inset:0,background:e?"transparent":"rgba(0,0,0,0.65)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e4},children:m.jsxs("div",{style:{width:460,padding:32,borderRadius:16,background:"#5c5c5cff",boxShadow:"0 0 40px rgba(255,0,0,0.45)",color:"#fff"},children:[m.jsx("h2",{style:{marginBottom:24,textAlign:"center"},children:"   "}),m.jsxs("div",{style:{marginBottom:20,textAlign:"center"},children:[m.jsx("div",{style:{marginBottom:6},children:"M U S I C"}),m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:12},children:[m.jsx("button",{onClick:()=>{a(mt=>{const ut={...mt,bgmMuted:!mt.bgmMuted};return localStorage.setItem("userSettings",JSON.stringify(ut)),window.dispatchEvent(new Event("settings:changed")),ut})},style:{width:72,display:"flex",alignItems:"center",justifyContent:"center",background:s.bgmMuted?"#ff4d4d":"#3a3a3aff",color:"#fff",border:"none",borderRadius:6,cursor:"pointer"},children:s.bgmMuted?"OFF":"ON"}),m.jsx("input",{type:"range",min:0,max:100,step:1,value:s.bgmVolume,onChange:mt=>{const ut=Number(mt.target.value);a(_t=>{const pt={..._t,bgmVolume:ut};return localStorage.setItem("userSettings",JSON.stringify(pt)),window.dispatchEvent(new Event("settings:changed")),pt})},style:{width:220}})]})]}),m.jsxs("div",{style:{marginBottom:28,textAlign:"center"},children:[m.jsx("div",{style:{marginBottom:6},children:"S F X"}),m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:12},children:[m.jsx("button",{onClick:()=>{a(mt=>{const ut={...mt,sfxMuted:!mt.sfxMuted};return localStorage.setItem("userSettings",JSON.stringify(ut)),window.dispatchEvent(new Event("settings:changed")),ut})},style:{width:72,display:"flex",alignItems:"center",justifyContent:"center",background:s.sfxMuted?"#ff4d4d":"#3a3a3aff",color:"#fff",border:"none",borderRadius:6,cursor:"pointer"},children:s.sfxMuted?"OFF":"ON"}),m.jsx("input",{type:"range",min:0,max:100,step:1,value:s.sfxVolume,onChange:mt=>{const ut=Number(mt.target.value);a(_t=>{const pt={..._t,sfxVolume:ut};return localStorage.setItem("userSettings",JSON.stringify(pt)),window.dispatchEvent(new Event("settings:changed")),pt})},style:{width:220}})]})]}),m.jsxs("div",{style:{display:"flex",gap:16,justifyContent:e?"center":"space-between"},children:[!e&&m.jsx("button",{style:{flex:1,background:"linear-gradient(90deg, #ff3a3ab9, #ff009db0)",color:"#fff",border:"none",borderRadius:8,padding:"10px 0",cursor:"pointer"},onClick:()=>{yo(),rt(mt=>mt+1),G(!1),k(3)},children:""}),m.jsx("button",{style:{flex:e?.6:1,background:"#3a3a3aff",color:"#ddd",border:"1px solid #444",borderRadius:8,padding:"10px 0",cursor:"pointer"},onClick:async()=>{yo(),e&&Ht&&(console.log("[MULTI LEAVE CLICK]"),Te.current=!0,sessionStorage.setItem(`leftRoom:${Ht}`,"true"),Wi("/app/multi/leave",{roomId:Ht}),await new Promise(_t=>setTimeout(_t,120))),new URLSearchParams(window.location.search).get("mode")==="editorTest"?Vt(`/song/${c}/note/edit?mode=editorTest`,{replace:!0}):Vt("/main")},children:""})]})]})}),m.jsxs("div",{style:{position:"absolute",top:`calc(48% + ${lt/2}px)`,left:"50%",transform:"translate(-50%, -50%)"},children:[m.jsx("div",{style:{position:"absolute",inset:0,zIndex:-5,pointerEvents:"none",background:`
              linear-gradient(
               #000000 0%,
               #000000 60%,
               #000000 85%,
               #000000 100%
              )
            `,clipPath:"polygon(40% 8%, 60% 8%, 100% 100%, 0% 100%)"}}),(o?!!mn:!!(c&&mn))&&m.jsx(mA,{mode:"play",songId:o?mn.id:c,token:o,analyserRef:O,loginUserId:Tt?.loginUser?.id,roomHostId:Et.current,paused:fe,fpsLimit:s.fps,bgmVolume:(s.bgmMuted?0:s.bgmVolume??100)/100,sfxVolume:(s.sfxMuted?0:s.sfxVolume??100)/100,settings:s,onReady:()=>{at.current=performance.now(),w(!0)},onState:({score:mt,combo:ut,diff:_t,currentTime:pt,duration:It,maxScore:ae,maxCombo:ze})=>{if(!I&&(it.current=ut,y(mt),v(ut),_t&&h(_t),H(It>0?Math.min(1,pt/It):0),U(ae>0?Math.min(1,mt/ae):0),e&&Ht)){if(Xe)return;ft.current=Math.max(ft.current,it.current),Wi("/app/multi/score",{roomId:Ht,score:mt,combo:it.current,maxCombo:ft.current,maxScore:ae})}},isMulti:e,roomId:Ht,onStreamReady:mt=>{nt.current=mt;const ut=Ie();if(!ut)return;for(const pt of mt.getTracks())ut.getSenders().some(ae=>ae.track===pt)||ut.addTrack(pt,mt);const _t=Ct.current;_t&&ut.remoteDescription&&ut.signalingState==="have-remote-offer"&&(async()=>{try{const pt=await ut.createAnswer();await ut.setLocalDescription(pt),A1(_t.roomId,pt);for(const It of xt.current)await ut.addIceCandidate(It);xt.current=[],Ct.current=null}catch(pt){console.error("[RTC PENDING ANSWER FAIL]",pt)}})(),Zt()},onFinish:({score:mt,maxScore:ut,maxCombo:_t,diff:pt})=>{N(!0),he.current=Math.max(he.current,Yn.current??0),Vt("/game/result",{state:{mode:e?"multi":"single",viewer:"me",myNickname:Tt?.loginUser?.nickname??"ME",myScore:mt,myMaxScore:ut,myMaxCombo:ft.current,rivalNickname:V?.nickname??"RIVAL",rivalScore:Ze??0,rivalMaxScore:Jt.current||1,rivalMaxCombo:he.current,diff:pt??"unknown",songId:c,winByLeave:!1}})}},$),s.visualizer&&m.jsx(Ea,{active:!fe,size:"game",analyserRef:O}),j!==null&&m.jsx("div",{style:{position:"absolute",inset:0,display:"flex",justifyContent:"center",alignItems:"center",fontSize:"140px",fontWeight:900,color:"#ffdddd",background:`
                radial-gradient(
                  circle,
                  rgba(255,80,80,0.28) 0%,
                  rgba(255,40,40,0.18) 25%,
                  rgba(180,20,20,0.08) 45%,
                  rgba(0,0,0,0) 60%
                )
              `,textShadow:`
                0 0 6px  rgba(255,120,120,0.9),
                0 0 18px rgba(255,60,60,0.85),
                0 0 36px rgba(220,40,40,0.75),
                0 0 64px rgba(160,20,20,0.6)
              `,filter:"brightness(1.1) saturate(1.35)",pointerEvents:"none"},children:j===0?"START":j})]}),m.jsx("style",{children:`
          @keyframes pulse {
            0%   { opacity: 0.6; transform: scale(0.98); }
            50%  { opacity: 1;   transform: scale(1.02); }
            100% { opacity: 0.6; transform: scale(0.98); }
          }
        `})]})}function a_(n){return n>=1?"S":n>=.9?"A":n>=.7?"B":n>=.55?"C":n>=.4?"D":"F"}const o_={S:{color:"#ffd75e",glow:"rgba(255,215,94,0.9)"},A:{color:"#6ffcff",glow:"rgba(111,252,255,0.9)"},B:{color:"#7dff9a",glow:"rgba(125,255,154,0.9)"},C:{color:"#6fa8ff",glow:"rgba(111,168,255,0.9)"},D:{color:"#b38cff",glow:"rgba(179,140,255,0.9)"},F:{color:"#ff6b6b",glow:"rgba(255,107,107,0.9)"}};function Cm({title:n,score:t,maxScore:e,maxCombo:s,grade:a,glowColor:o,baseMaxScore:c}){const u=c>0?t/c:0,d=o_[a]??o_.F;return m.jsxs("div",{style:{position:"relative",display:"inline-block"},children:[m.jsx("div",{style:{position:"absolute",inset:-8,borderRadius:"22px",background:o??"rgba(255,80,80,0.45)",filter:"blur(12px)",pointerEvents:"none",opacity:.6}}),m.jsxs("div",{style:{position:"relative",padding:"40px 56px",borderRadius:"16px",background:"#111",color:"#e6faff",minWidth:260,boxShadow:`
            0 0 24px ${o??"rgba(255,80,80,0.35)"},
            0 0 48px ${o??"rgba(255,0,0,0.25)"}
          `},children:[m.jsx("div",{style:{fontSize:20,fontWeight:800,letterSpacing:4},children:n}),m.jsx("div",{style:{marginTop:20,fontSize:72,fontWeight:900,color:d.color,textShadow:`
              0 0 12px ${d.glow},
              0 0 32px ${d.glow}
            `},children:a}),m.jsxs("div",{style:{marginTop:16,fontSize:18},children:[": ",t]}),m.jsxs("div",{style:{marginTop:8,fontSize:18},children:[" : ",s]}),m.jsxs("div",{style:{marginTop:8,opacity:.7},children:[": ",(u*100).toFixed(2),"%"]})]})]})}function l_(){const n=li();en();const t=E.useRef(!1),e=n.state??{},s=e.mode==="multi",a=e.myScore??0,o=e.rivalScore??0,c=e.myMaxScore??1,u=e.rivalMaxScore??1,d=e.myMaxCombo??0,h=e.rivalMaxCombo??0,p=e.myNickname??"ME",y=e.rivalNickname??"RIVAL",x=e.songId,v=e.diff,S=!!e.winByLeave,w=e.viewer==="guest",_={nickname:w?y:p,score:w?o:a,maxScore:w?u:c,maxCombo:w?h:d},A={nickname:w?p:y,score:w?a:o,maxScore:w?c:u,maxCombo:w?d:h},R=_.maxScore,C=R>0?_.score/R:0,j=R>0?A.score/R:0,k=a_(C),I=a_(j);E.useEffect(()=>{if(r4(),a4(),x&&!t.current&&(t.current=!0,!s)){const H={songId:x,diff:v,score:_.score,accuracy:_.maxScore>0?_.score/_.maxScore*100:0,grade:k,maxCombo:_.maxCombo};_e.post("/api/scores",H).catch(B=>console.error("  ",B))}return()=>ag()},[]);let N="DRAW";S||_.score>A.score?N="WIN":_.score<A.score&&(N="LOSE");const L=N==="WIN"?"#ff6b6b":N==="LOSE"?"#5aeaff":"#ffffff";return m.jsxs("div",{style:{position:"fixed",inset:0},children:[m.jsx(Xs,{}),m.jsx("div",{style:{position:"absolute",inset:0,display:"flex",justifyContent:"center",alignItems:"center"},children:m.jsxs("div",{style:{textAlign:"center"},children:[s&&m.jsxs(m.Fragment,{children:[m.jsx("div",{style:{padding:"18px 60px",borderRadius:14,background:"#111",marginBottom:28,fontSize:32,fontWeight:900,letterSpacing:4,color:L,textShadow:`0 0 12px ${L}`,boxShadow:`0 0 28px ${L}`},children:N}),m.jsxs("div",{style:{display:"flex",gap:48},children:[m.jsx(Cm,{title:_.nickname,score:_.score,maxScore:_.maxScore,maxCombo:_.maxCombo,grade:k,baseMaxScore:R}),m.jsx(Cm,{title:A.nickname,score:A.score,maxScore:A.maxScore,maxCombo:A.maxCombo,grade:I,glowColor:"rgba(90,234,255,0.45)",baseMaxScore:R})]})]}),!s&&m.jsx(Cm,{title:"S C O R E",score:_.score,maxScore:_.maxScore,maxCombo:_.maxCombo,grade:k,baseMaxScore:_.maxScore}),m.jsx("div",{style:{marginTop:32,display:"flex",gap:16,justifyContent:"center"},children:m.jsx("button",{onClick:()=>{yo(),ag(),window.__ALLOW_LEAVE__=!0,window.location.href="/main"},style:q8,children:""})})]})})]})}const q8={padding:"12px 28px",borderRadius:8,background:"#222",color:"#fff",border:"1px solid #555",cursor:"pointer",fontSize:16},oo=_e.create({baseURL:"http://localhost:8080",withCredentials:!0});function K8(){const n=en(),[t,e]=E.useState({password:"",passwordConfirm:"",nickname:"",email:"",code:""}),[s,a]=E.useState(""),[o,c]=E.useState(!1),[u,d]=E.useState(!1),[h,p]=E.useState(!1),[y,x]=E.useState(!1),v=E.useRef(null),S=E.useRef(null),w=E.useRef(null),_=E.useRef(null),A=E.useRef(null),R=B=>U=>{const z=U.target.value;if(B==="email"){x(!1),e(G=>({...G,email:U.target.value,code:""}));return}e(G=>({...G,[B]:U.target.value})),B==="password"&&k(z)&&a(""),B==="passwordConfirm"&&z===t.password&&a("")},C=(B,U)=>{c(!1),a(B),U?.current?.focus(),U?.current?.classList.add("is-error"),setTimeout(()=>U?.current?.classList.remove("is-error"),300)},j=async()=>{if(!t.email)return C(" .",_);c(!1),a(""),d(!0);try{const B=await oo.post("/api/auth/check-email",{email:t.email});if(!B.data?.ok)return C(B.data.message,_);const{data:U}=await oo.post("/api/auth/sendCode",{email:t.email});if(!U?.ok)return C(U?.message||"  .",_);c(!0),a(" ."),A.current?.focus()}catch{return C("  .",_)}finally{d(!1)}},k=B=>{if(!B||B.length<8||B.length>16)return!1;const U=/[a-zA-Z]/.test(B),z=/[0-9]/.test(B);return U&&z},I=async()=>{if(t.password){if(!k(t.password))return C(" 8~16, +  .",v);try{const{data:B}=await oo.post("/api/auth/check-loginPw",{loginPw:t.password});B.ok||C(B.message,v)}catch{C("  .",v)}}},N=async()=>{if(!t.email)return C(" .",_);if(!t.code)return C(" .",A);c(!1),a(""),p(!0);try{const{data:B}=await oo.post("/api/auth/verifyCode",{email:t.email,code:t.code});if(!B?.ok)return x(!1),C(B?.message||"  .",A);x(!0),c(!0),a(" ."),v.current?.focus()}catch{return x(!1),C("  .",A)}finally{p(!1)}},L=async()=>{if(t.nickname)try{const{data:B}=await oo.post("/api/auth/check-nickname",{nickName:t.nickname});B.ok?(c(!0),a(B.message)):C(B.message,w)}catch{C("  .",w)}},H=async()=>{if(!t.email)return C(" ",_);if(!t.code)return C(" ",A);if(!y)return C("  .",A);if(!t.password)return C(" .",v);if(!t.passwordConfirm)return C("  ",S);if(!k(t.password))return C(" 8~16, +  .",v);if(t.password!==t.passwordConfirm)return C("  .",S);if(!t.nickname)return C(" .",w);c(!1),a("");try{const{data:B}=await oo.post("/api/auth/doJoin",{email:t.email,nickName:t.nickname,loginPw:t.password});if(!B?.ok)return C(B?.message||" .",w);alert(" !"),n("/login")}catch{return C("  .",w)}};return m.jsx("div",{className:"login-form-wrap",children:m.jsxs("div",{className:"login-form",style:{width:560,padding:"56px 48px",borderRadius:18,transform:"translateY(40px)",scale:1.2,position:"relative",zIndex:20,background:"rgb(38,38,38)",boxShadow:`
                        0 20px 60px rgba(0,0,0,0.6),
                        inset 0 0 0 1px rgba(255,255,255,0.05)
                    `,color:"#fff"},children:[m.jsx("h2",{style:{textAlign:"center",marginBottom:28,fontSize:28,fontWeight:700},children:""}),m.jsx(zl,{label:"",children:m.jsxs("div",{style:{display:"flex",gap:10},children:[m.jsx(Pl,{ref:_,style:{flex:1},value:t.email,onChange:R("email"),placeholder:""}),m.jsx(c_,{onClick:j,disabled:u,children:u?"":""})]})}),m.jsx(zl,{label:"",children:m.jsxs("div",{style:{display:"flex",gap:10},children:[m.jsx(Pl,{ref:A,style:{flex:1},value:t.code,onChange:R("code"),placeholder:" 6"}),m.jsx(c_,{onClick:N,disabled:h,children:h?"":y?"":""})]})}),m.jsx(zl,{label:"",children:m.jsx(Pl,{ref:v,type:"password",value:t.password,onChange:R("password"),onBlur:I,placeholder:" (8~16, +)"})}),m.jsx(zl,{label:" ",children:m.jsx(Pl,{ref:S,type:"password",value:t.passwordConfirm,onChange:R("passwordConfirm"),placeholder:" "})}),m.jsx(zl,{label:"",children:m.jsx(Pl,{ref:w,value:t.nickname,onChange:R("nickname"),onBlur:L,placeholder:"",maxLength:8})}),m.jsx("div",{style:{position:"relative",height:20,marginTop:6},children:m.jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:o?"#6bff86":"#ff6b6b",fontSize:13,pointerEvents:"none",opacity:s?1:0},children:s||""})}),m.jsx("div",{style:{marginTop:28,textAlign:"center"},children:m.jsx("button",{onClick:H,style:{width:180,height:46,borderRadius:12,border:"none",cursor:"pointer",background:"linear-gradient(135deg, #00aeffff, #00ccffff)",color:"#000",fontWeight:700,fontSize:15},children:""})})]})})}function zl({label:n,children:t}){return m.jsxs("div",{style:{display:"grid",gridTemplateColumns:"120px 1fr",alignItems:"center",gap:16,marginBottom:16},children:[m.jsx("div",{style:{fontWeight:600},children:n}),t]})}const Pl=Qf.forwardRef(function({style:t,...e},s){return m.jsx("input",{ref:s,className:"login-input",...e,style:{height:44,borderRadius:10,border:"1px solid rgba(255,255,255,0.12)",background:"rgba(0,0,0,0.4)",color:"#fff",fontSize:18,padding:"0 18px",boxSizing:"border-box",outline:"none",...t}})});function c_({children:n,...t}){return m.jsx("button",{...t,style:{height:44,padding:"0 18px",borderRadius:10,cursor:"pointer",background:"rgba(0,0,0,0.35)",color:"#fff",border:"1px solid rgba(255,255,255,0.2)",fontSize:14,fontWeight:500,opacity:t.disabled?.6:1,display:"flex",alignItems:"center",justifyContent:"center"},children:n})}function Q8(){const{state:n}=li(),t=en();return E.useEffect(()=>(n?.terms||t("/login",{replace:!0}),()=>{}),[n,t]),m.jsxs("div",{className:"login-page",children:[m.jsx(hd,{}),m.jsxs("section",{className:"login-hero",style:{display:"flex",justifyContent:"center",alignItems:"flex-start"},children:[m.jsx("div",{className:"hero-bg",style:{background:`
                            linear-gradient(
                                180deg,
                                #8f0015 0%,
                                #120000 50%,
                                #007a86 100%
                            )
                        `}}),m.jsx("div",{className:"hero-overlay",style:{background:`
                            radial-gradient(
                                circle at center,
                                rgba(0,0,0,0.05) 0%,
                                rgba(0,0,0,0.15) 60%,
                                rgba(0,0,0,0.30) 100%
                            )
                        `}}),m.jsx("div",{className:"hero-content",style:{paddingTop:80,paddingBottom:48,paddingInline:24,gap:8,display:"flex",flexDirection:"column",alignItems:"center"},children:m.jsx(K8,{})})]})]})}const u_=1800;function J8(){const n=en(),{state:t}=li(),[e]=K_(),s=e.get("target"),a=E.useRef(0),o=E.useRef(0),[c,u]=E.useState(0),d=c>=4?1:c>=3?1.05:.85,[h,p]=E.useState(!1),[y,x]=E.useState(!1),[v,S]=E.useState(0),[w,_]=E.useState(()=>Math.floor(Math.random()*vo.length));return E.useEffect(()=>{const A=setInterval(()=>{_(R=>(R+1)%vo.length)},2200);return()=>clearInterval(A)},[]),E.useEffect(()=>{a.current=performance.now();let A=0;const R=()=>{const C=performance.now()-a.current;S(Math.min(100,C/u_*100)),C>180&&o.current<1&&(o.current=1,u(1)),C>195&&o.current<2&&(o.current=2,u(2),p(!0),setTimeout(()=>p(!1),70)),C>360&&o.current<3&&(o.current=3,u(3),x(!0),setTimeout(()=>x(!1),120)),C>520&&o.current<4&&(o.current=4,u(4)),C<u_?A=requestAnimationFrame(R):(S(100),setTimeout(()=>{Gi(),n(t?.target||s||"/main",{replace:!0,state:{needPwChange:t?.needPwChange===!0}})},100))};return A=requestAnimationFrame(R),()=>cancelAnimationFrame(A)},[n]),m.jsxs("div",{style:{position:"fixed",inset:0,background:"#000",overflow:"hidden",zIndex:9999,transform:h?"translate(2px, -2px)":"translate(0, 0)",transition:"transform 60ms linear"},children:[m.jsx("img",{src:"/images/startbg.png",alt:"",style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"cover",opacity:c>=2?1:0,transition:"opacity 300ms ease-out",pointerEvents:"none"}}),c>=1&&m.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:40,height:40,borderRadius:"50%",background:"radial-gradient(circle, rgba(255,255,255,1) 0%, rgba(255,255,255,0.95) 30%, rgba(255,255,255,0.7) 50%, rgba(255,255,255,0.35) 65%, rgba(255,255,255,0) 80%)",filter:"blur(2px)",boxShadow:"0 0 80px 40px rgba(255,255,255,0.35)",transform:`translate(-50%, -50%) scale(${c>=2?45:1})`,opacity:c>=3?0:1,transition:"transform 420ms cubic-bezier(.2,.8,.2,1), opacity 260ms ease-out",pointerEvents:"none"}}),y&&m.jsx("div",{style:{position:"absolute",inset:0,background:"radial-gradient(circle at center, rgba(255,255,255,0.35), rgba(255,255,255,0.15) 40%, rgba(255,255,255,0) 70%)",opacity:1,transition:"opacity 120ms ease-out",pointerEvents:"none"}}),m.jsx("div",{style:{position:"absolute",bottom:90,left:"50%",transform:"translateX(-50%)",width:500,height:20,background:"rgba(255,255,255,0.15)",borderRadius:6,overflow:"hidden",pointerEvents:"none"},children:m.jsx("div",{style:{width:`${v}%`,height:"100%",background:"linear-gradient(90deg, #ff3a3a, #ff00aa)",boxShadow:"0 0 10px rgba(255,80,80,0.8)",transition:"width 80ms linear"}})}),m.jsx("div",{style:{position:"absolute",bottom:150,left:"50%",transform:"translateX(-50%)",fontSize:24,letterSpacing:"0.04em",color:"#7df9ff",opacity:.75,textShadow:"0 0 8px rgba(125,249,255,0.35)",pointerEvents:"none"},children:vo[w]}),m.jsx("img",{src:"/images/startlogo.png",alt:"logo",style:{position:"absolute",left:"50%",top:"50%",width:1200,transform:`translate(-50%, -50%) scale(${d})`,opacity:c>=3?1:0,transition:"transform 220ms cubic-bezier(.2,.8,.2,1), opacity 220ms ease-out",filter:c>=3?`
                            drop-shadow(0 0 4px rgba(0,0,0,0.8))
                            drop-shadow(0 0 10px rgba(0,0,0,0.6))
                            drop-shadow(0 0 18px rgba(0,0,0,0.65))
                        `:"none",pointerEvents:"none"}})]})}function Z8({myInfo:n,status:t}){const e=t?.loginUserNickName??"",[s,a]=E.useState(e),[o,c]=E.useState(null),u=E.useRef(null),[d,h]=E.useState(""),[p,y]=E.useState(""),[x,v]=E.useState(""),S=n?.email??"-",w=n?.regDate?new Date(n.regDate).toLocaleDateString():"-",A={0:"LOCAL",1:"KAKAO",2:"GOOGLE"}[n?.loginType]??"LOCAL",C={USER:" ",ADMIN:"",BLOCK:" "}[n?.role]??" ",[j,k]=E.useState("");E.useEffect(()=>{a(e)},[e]);async function I(){try{const L=u.current?.files?.[0],H=s!==e;if(L){const B=new FormData;B.append("profileImg",L);const z=await(await fetch("/api/user/uploadProfile",{method:"POST",body:B,credentials:"include"})).json();if(!z.ok){alert(z.message||"   ");return}const G=z.profileImg||z.fileName||z.result||z.path;if(!G){alert("     (  )");return}c(`http://localhost:8080/upload/${G}?t=${Date.now()}`)}if(H){const U=await(await fetch("/api/user/change-nickname",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({nickName:s.trim()})})).json();if(!U.ok){alert(U.message||"  ");return}}L||H?(window.dispatchEvent(new Event("profile-updated")),alert("  ")):alert("  .")}catch{alert("  ")}}async function N(){if(!d){k("  .");return}if(!p){k("  .");return}if(!x){k("   .");return}if(p!==x){k("   ");return}try{const{data:L}=await vi.post("/api/user/change-pw",{currentPw:d,loginPw:p});if(!L.ok){k(L.message);return}k(""),alert(" ."),h(""),y(""),v("")}catch{k("  ")}}return m.jsxs("div",{style:tD,children:[m.jsxs("div",{style:Rm,children:[m.jsxs("div",{style:eD,children:[m.jsxs("div",{style:nD,children:[m.jsx(Jg,{profileImg:o||t?.loginUser?.profileImg,userId:t?.loginUserId,size:96}),m.jsx("button",{style:rD,onClick:()=>u.current?.click(),children:" "}),m.jsx("input",{ref:u,type:"file",accept:"image/*",style:{display:"none"},onChange:L=>{const H=L.target.files?.[0];H&&c(URL.createObjectURL(H))}})]}),m.jsxs("div",{style:{width:380},children:[m.jsx("div",{style:jm,children:""}),m.jsx("input",{value:s,maxLength:8,onChange:L=>{let H=L.target.value;H=H.replace(/\s/g,"").slice(0,8),a(H)},style:gf({maxWidth:280,marginTop:10})})]})]}),m.jsx("div",{style:f_,children:m.jsx("button",{style:d_,onClick:I,children:" "})})]}),m.jsxs("div",{style:Rm,children:[m.jsx("div",{style:jm,children:" "}),m.jsxs("div",{style:iD,children:[m.jsx(yf,{label:"",value:S}),m.jsx(yf,{label:"",value:w}),m.jsx(yf,{label:" ",value:A}),m.jsx(yf,{label:"",value:C})]})]}),A==="LOCAL"&&m.jsxs("div",{style:Rm,children:[m.jsx("div",{style:jm,children:" "}),m.jsxs("div",{style:sD,children:[m.jsx("input",{type:"password",placeholder:" ",value:d,onChange:L=>h(L.target.value),style:gf()}),m.jsx("input",{type:"password",placeholder:" ",value:p,onChange:L=>y(L.target.value),style:gf()}),m.jsx("input",{type:"password",placeholder:"  ",value:x,onChange:L=>v(L.target.value),style:gf()})]}),m.jsx("div",{style:{minHeight:13,textAlign:"center",fontSize:13,color:"#ff6b6b",opacity:j?1:0,transition:"opacity 120ms ease",lineHeight:"18px"},children:j||""}),m.jsx("div",{style:f_,children:m.jsx("button",{style:d_,onClick:N,children:" "})})]})]})}const tD={display:"flex",flexDirection:"column",gap:18,maxWidth:820,width:"100%"},Rm={borderRadius:14,background:"rgba(20,22,28,0.7)",padding:"22px 28px",boxShadow:"0 8px 20px rgba(0,0,0,0.35)",display:"flex",flexDirection:"column",gap:14},eD={display:"flex",gap:28,alignItems:"flex-start",justifyContent:"center"},f_={display:"flex",justifyContent:"center",marginTop:10},nD={display:"flex",flexDirection:"column",alignItems:"center",gap:10},iD={display:"flex",flexDirection:"column",gap:10},sD={display:"flex",flexDirection:"column",gap:8,maxWidth:420,width:"100%",margin:"12px auto 0"},jm={fontSize:16,fontWeight:600,color:"#ffffff"},gf=(n={})=>({height:38,borderRadius:7,padding:"0 12px",background:"rgba(0,0,0,0.5)",border:"1px solid rgba(255,255,255,0.15)",color:"#ffffff",outline:"none",width:"100%",boxSizing:"border-box",fontSize:14,...n}),Xf="#5aeaff",d_={padding:"8px 22px",borderRadius:9,background:"rgba(90,234,255,0.15)",border:`1px solid ${Xf}`,color:Xf,fontWeight:600,cursor:"pointer",fontSize:13},rD={padding:"5px 12px",borderRadius:7,background:"rgba(90,234,255,0.1)",border:`1px solid ${Xf}`,color:Xf,cursor:"pointer",fontSize:12};function yf({label:n,value:t}){return m.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[m.jsx("span",{style:{width:100,color:"#9aa6b2",fontSize:13},children:n}),m.jsx("span",{style:{color:"#ffffff",fontSize:13},children:t})]})}const Bo="/api/friend";async function Rc(n,t={}){const e=await fetch(n,{credentials:"include",headers:{"Content-Type":"application/json",...t.headers||{}},...t}),s=e.headers.get("content-type")||"",a=await e.text();if(!e.ok)throw new Error(a||`HTTP ${e.status}`);return s.includes("application/json")?a?JSON.parse(a):null:a}const bA=async()=>{const n=await fetch(`${Bo}/list`,{method:"GET",credentials:"include"});if(!n.ok)throw new Error("Failed to fetch friend list");return n.json()},aD=()=>Rc(`${Bo}/requests`),oD=n=>Rc(`${Bo}/request?keyword=${encodeURIComponent(n)}`,{method:"POST"}),lD=n=>Rc(`${Bo}/accept?id=${encodeURIComponent(n)}`,{method:"POST"}),cD=n=>Rc(`${Bo}/reject?id=${encodeURIComponent(n)}`,{method:"POST"}),uD=n=>Rc(`${Bo}/delete?targetId=${encodeURIComponent(n)}`,{method:"POST"}),Uo="/api/messages";async function jc(n,t={}){const e=await fetch(n,{credentials:"include",headers:{"Content-Type":"application/json",...t.headers||{}},...t});if(!e.ok){const a=await e.text().catch(()=>"");throw new Error(a||`HTTP ${e.status}`)}return(e.headers.get("content-type")||"").includes("application/json")?e.json():null}const fD=()=>jc(`${Uo}/inbox`),dD=()=>jc(`${Uo}/sent`),hD=n=>jc(`${Uo}/detail?id=${encodeURIComponent(n)}`),pD=n=>jc(`${Uo}/read?id=${encodeURIComponent(n)}`,{method:"POST"}),mD=n=>jc(`${Uo}/delete?id=${encodeURIComponent(n)}`,{method:"POST"});async function gD({toNickName:n,content:t,title:e}){const s=new URLSearchParams;s.set("toNickName",n??""),s.set("content",t??"");const a=await fetch(`${Uo}/send`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s.toString()});if(!a.ok){const o=await a.text().catch(()=>"");throw new Error(o||`HTTP ${a.status}`)}return a.json()}function yD({refreshKey:n=0,onReadDone:t,composeTo:e,onConsumeComposeTo:s}){const[a,o]=E.useState("inbox"),[c,u]=E.useState([]),[d,h]=E.useState([]),[p,y]=E.useState([]),x=a==="inbox"?c:d,[v,S]=E.useState(null),w=x.find(G=>G.id===v)||null,[_,A]=E.useState(null),[R,C]=E.useState(!1),[j,k]=E.useState(""),[I,N]=E.useState(""),L=E.useRef(""),H=async()=>{try{const[G,V]=await Promise.all([fD(),dD()]),J=Array.isArray(G)?G:[],O=Array.isArray(V)?V:[];u(J),h(O);const $=a==="inbox"?J:O;if($.length===0){S(null),A(null);return}(v==null||!$.some(rt=>rt.id===v))&&(S($[0].id),A(null))}catch(G){console.error(G)}},B=async()=>{try{const G=await bA();y(Array.isArray(G)?G:[])}catch(G){console.error(G),y([])}};E.useEffect(()=>{H(),B()},[]),E.useEffect(()=>{e&&(C(!0),k(e),N(""),B(),s?.())},[e]),E.useEffect(()=>{H()},[n]),E.useEffect(()=>{const G=a==="inbox"?c:d;if(G.length===0){S(null),A(null);return}v!=null&&G.some(J=>J.id===v)||(S(G[0].id),A(null))},[a,c,d]),E.useEffect(()=>{if(v==null){A(null);return}(async()=>{try{const G=await hD(v);A(G||null);const V=G?.fromNickName??G?.from??G?.fromNick??(a==="inbox"?w?.from??"":"");L.current=V||"",a==="inbox"&&(await pD(v).catch(()=>{}),await t?.(),await H())}catch(G){console.error(G),A(null)}})()},[v,a]);const U=async()=>{const G=(j||"").trim(),V=(I||"").trim();if(!G){window.alert("  .");return}if(!V){window.alert("  .");return}try{const J=await gD({toNickName:G,content:V,title:null});if(J?.ok===!1){window.alert(bD(J?.message));return}window.alert(" ."),C(!1),k(""),N(""),await H(),o("sent")}catch(J){console.error(J),window.alert("    .")}},z=async()=>{if(v==null)return;if(a!=="inbox"){window.alert("     .");return}if(window.confirm("  ?"))try{if((await mD(v))?.ok===!1){window.alert(" .");return}window.alert("."),await H(),await t?.()}catch(V){console.error(V),window.alert("   .")}};return m.jsxs("div",{style:xD,children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[m.jsxs("div",{style:vD,children:[m.jsx(h_,{active:a==="inbox",onClick:()=>o("inbox"),children:" "}),m.jsx(h_,{active:a==="sent",onClick:()=>o("sent"),children:" "})]}),m.jsx("button",{style:Mm,onClick:()=>{C(!0),k(""),N(""),B()},children:" "})]}),m.jsxs("div",{style:SD,children:[m.jsx("div",{style:_D,children:x.map(G=>{const V=a==="inbox"?G.fromNickName??G.from??"Unknown":G.toNickName??G.to??"Unknown",J=G.preview??G.content??"",O=G.date??G.regDate??"",$=a==="inbox"?!!G.isRead:!0;return m.jsxs("div",{onClick:()=>S(G.id),style:{...wD,background:G.id===v?"rgba(90,234,255,0.12)":"transparent",fontWeight:$?400:700},children:[m.jsxs("div",{style:ED,children:[m.jsx("div",{style:{fontSize:13},children:a==="inbox"?`From. ${V}`:`To. ${V}`}),m.jsx("div",{style:AD,children:O})]}),m.jsx("div",{style:TD,children:J})]},G.id)})}),m.jsx("div",{style:CD,children:v!=null?m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:RD,children:[m.jsx("span",{children:a==="inbox"?`From. ${_?.fromNickName??w?.fromNickName??w?.from??"Unknown"}`:`To. ${_?.toNickName??w?.toNickName??w?.to??"Unknown"}`}),m.jsx("span",{style:{fontSize:12,opacity:.6},children:_?.regDate??w?.regDate??w?.date??""})]}),m.jsx("div",{style:jD,children:_?.content??w?.content??w?.preview??""}),m.jsxs("div",{style:MD,children:[a==="inbox"&&m.jsx("button",{style:Mm,onClick:()=>{C(!0),k(L.current||""),N(""),B()},children:""}),m.jsx("button",{style:OD,onClick:z,children:""})]})]}):m.jsx("div",{style:{opacity:.5},children:" "})}),R&&m.jsx("div",{style:ND,children:m.jsxs("div",{style:ID,children:[m.jsx("div",{style:{fontWeight:700,marginBottom:12},children:" "}),m.jsxs("select",{value:j,onChange:G=>k(G.target.value),style:p_,children:[m.jsx("option",{value:"",children:"  "}),p.map(G=>{const V=G.otherNickName??G.nickName??G.nick;if(!V)return null;const J=`${G.otherUserId??V}`;return m.jsx("option",{value:V,children:V},J)})]}),m.jsx("textarea",{value:I,onChange:G=>N(G.target.value),placeholder:"  ",style:{...p_,height:120,resize:"none"}}),m.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8},children:[m.jsx("button",{style:kD,onClick:()=>{C(!1),k(""),N("")},children:""}),m.jsx("button",{style:Mm,onClick:U,children:""})]})]})})]})]})}function h_({active:n,children:t,...e}){return m.jsx("button",{...e,style:{padding:"8px 18px",borderRadius:8,border:n?"1px solid #5aeaff":"1px solid rgba(255,255,255,0.2)",background:n?"rgba(90,234,255,0.15)":"transparent",color:n?"#5aeaff":"#aaa",cursor:"pointer"},children:t})}function bD(n){switch(n){case"needLogin":return" .";case"emptyTo":return"  .";case"emptyContent":return"  .";case"notFound":return"    .";case"self":return"    .";default:return"  ."}}const xD={width:"100%",maxWidth:900,display:"flex",flexDirection:"column",gap:14},vD={display:"flex",gap:8},SD={display:"flex",height:420,borderRadius:14,overflow:"hidden",background:"rgba(20,22,28,0.7)",boxShadow:"0 10px 24px rgba(0,0,0,0.35)"},_D={width:260,borderRight:"1px solid rgba(255,255,255,0.08)",overflowY:"auto"},wD={padding:"10px 12px",cursor:"pointer",display:"flex",flexDirection:"column",gap:6},ED={display:"flex",justifyContent:"space-between",alignItems:"center",gap:10},AD={fontSize:11,opacity:.55,whiteSpace:"nowrap"},TD={fontSize:12,opacity:.7,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},CD={flex:1,padding:16,display:"flex",flexDirection:"column"},RD={fontSize:14,fontWeight:600,display:"flex",justifyContent:"space-between",marginBottom:12},jD={flex:1,fontSize:14,lineHeight:1.6,opacity:.9},MD={display:"flex",justifyContent:"flex-end",gap:8},Mm={padding:"8px 18px",borderRadius:8,background:"rgba(90,234,255,0.15)",border:"1px solid #5aeaff",color:"#5aeaff",cursor:"pointer"},kD={padding:"8px 18px",borderRadius:8,background:"transparent",border:"1px solid rgba(255,255,255,0.25)",color:"#aaa",cursor:"pointer"},OD={padding:"8px 18px",borderRadius:8,background:"transparent",border:"1px solid rgba(255,255,255,0.25)",color:"#aaa",cursor:"pointer"},ND={position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:50},ID={width:360,background:"rgba(20,22,28,0.95)",borderRadius:12,padding:16,display:"flex",flexDirection:"column",gap:10},p_={background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:6,padding:"8px 10px",color:"#fff",outline:"none"},LD=n=>{if(!n)return null;const t=String(n);return t.startsWith("http://")||t.startsWith("https://")?t:t.startsWith("/")?`http://localhost:8080${t}`:`http://localhost:8080/${t}`};function DD({onClickMessage:n}){const[t,e]=E.useState([]),[s,a]=E.useState([]),[o,c]=E.useState(""),[u,d]=E.useState(!1),[h,p]=E.useState(null),y=E.useRef(null),x=C=>{window.alert(C)};function v(C){p(C),d(!0)}const S=E.useCallback(async()=>{try{const[C,j]=await Promise.all([aD(),bA()]);a(Array.isArray(C)?C:[]),e(Array.isArray(j)?j:[])}catch(C){console.error("[REST] refresh error",C)}},[]);E.useEffect(()=>{S()},[S]),E.useEffect(()=>{if(y.current)return;const C=new e0({webSocketFactory:()=>new n0("http://localhost:8080/ws"),reconnectDelay:3e3,heartbeatIncoming:1e4,heartbeatOutgoing:1e4,debug:j=>console.log("[STOMP]",j),onConnect:()=>{C.subscribe("/user/queue/friend",j=>{try{const k=JSON.parse(j.body),I=k?.type;if(I==="FRIEND_REQUEST_RECEIVED"){const N=k?.data?.fromNick??"";x(`${N}   .`)}else x(I==="FRIEND_REQUEST_ACCEPTED"?"    .":"  .")}catch{x("  .")}S()}),C.subscribe("/topic/online-users",()=>{S()})}});return C.activate(),y.current=C,()=>{try{y.current?.deactivate()}catch(j){console.error("[WS] deactivate error",j)}finally{y.current=null}}},[S]);const w=async()=>{const C=o.trim();if(!C){x(" .");return}try{const j=await oD(C);if(j?.ok===!1){x(UD(j?.message));return}x("  ."),c(""),S()}catch(j){console.error(j),x("    .")}},_=async C=>{if(C!=null)try{await lD(C),x("  ."),S()}catch(j){console.error(j),x("   .")}},A=async C=>{if(C!=null)try{await cD(C),x("  ."),S()}catch(j){console.error(j),x("   .")}},R=async C=>{if(C!=null&&window.confirm("  ?"))try{await uD(C),x(" ."),S()}catch(j){console.error(j),x("   .")}};return m.jsxs("div",{style:zD,children:[m.jsxs("div",{style:VD,children:[m.jsx("input",{value:o,onChange:C=>c(C.target.value),placeholder:" ",style:WD,onKeyDown:C=>{C.key==="Enter"&&w()}}),m.jsx("button",{style:xA,onClick:w,children:""})]}),m.jsxs(m_,{title:" ",children:[s.length===0&&m.jsx(b_,{children:" "}),s.map(C=>m.jsxs(g_,{children:[m.jsx(y_,{nick:C.otherNickName??C.nickName??C.nick,online:C.online,profileImg:C.otherProfileImg}),m.jsxs("div",{style:{display:"flex",gap:8},children:[m.jsx(GD,{onClick:()=>_(C.id),children:""}),m.jsx(km,{onClick:()=>A(C.id),children:""})]})]},C.id))]}),m.jsxs(m_,{title:" ",children:[t.length===0&&m.jsx(b_,{children:" "}),t.map(C=>{const j=C.otherNickName??C.nickName??C.nick,k=C.role==="ADMIN";return m.jsxs(g_,{children:[m.jsx("div",{style:{cursor:"pointer"},onClick:()=>v(C),children:m.jsx(y_,{nick:j,online:C.online,profileImg:C.otherProfileImg})}),m.jsxs("div",{style:{display:"flex",gap:8},children:[m.jsx(km,{onClick:()=>{j&&n?.(j)},children:""}),m.jsx(km,{onClick:()=>R(C.otherUserId??C.id),disabled:k,style:{opacity:k?.5:1,cursor:k?"not-allowed":"pointer"},children:""})]})]},C.otherUserId??C.id)})]}),m.jsx(t0,{open:u,user:h,onClose:()=>d(!1)})]})}function m_({title:n,children:t}){return m.jsxs("div",{style:PD,children:[m.jsx("div",{style:HD,children:n}),m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:t})]})}function g_({children:n}){return m.jsx("div",{style:FD,children:n})}function y_({nick:n,online:t,profileImg:e}){const s=LD(e);return m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[s?m.jsx("img",{src:s,alt:"",style:{width:36,height:36,borderRadius:"50%",objectFit:"cover",border:"1px solid rgba(255,255,255,0.25)",background:"#111"},onError:a=>{a.currentTarget.style.display="none"}}):m.jsx(Jg,{size:36}),m.jsx("span",{children:n}),t&&m.jsx(BD,{})]})}function BD(){return m.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:"#3cff6a",boxShadow:"0 0 6px rgba(60,255,106,0.8)"}})}function b_({children:n}){return m.jsx("div",{style:{opacity:.5},children:n})}function UD(n){switch(n){case"needLogin":return" .";case"emp":return" .";case"notFound":return"    .";case"self":return"    .";case"alreadyFriend":return" .";case"alreadyRequested":return"   .";case"incomingExists":return"    .";default:return" ."}}const zD={display:"flex",flexDirection:"column",gap:20},PD={background:"rgba(0,0,0,0.25)",borderRadius:10,padding:12},HD={fontWeight:600,marginBottom:8},FD={display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 4px"},GD=({children:n,...t})=>m.jsx("button",{style:xA,...t,children:n}),km=({children:n,...t})=>m.jsx("button",{style:$D,...t,children:n}),x_="#5aeaff",xA={padding:"6px 14px",borderRadius:6,background:"rgba(90,234,255,0.15)",border:`1px solid ${x_}`,color:x_,cursor:"pointer"},$D={padding:"6px 14px",borderRadius:6,background:"transparent",border:"1px solid rgba(255,255,255,0.25)",color:"#ccc",cursor:"pointer"},VD={display:"flex",gap:8,marginBottom:12},WD={flex:1,background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:6,padding:"8px 10px",color:"#fff",outline:"none"},YD=n=>vi.get("/api/songs/my",{params:n&&n!=="ALL"?{visibility:n}:{}}),XD=n=>vi.delete(`/api/songs/${n}`),Om={:"ALL",:"PRIVATE",:"UNLISTED",:"PENDING",:"PUBLIC",:"BLOCKED"},qD=["","","","","",""];function KD(){const[n,t]=E.useState(""),[e,s]=E.useState([]),[a,o]=E.useState(""),c=async d=>{if(window.confirm(" ?"))try{await XD(d),alert(" ."),s(h=>h.filter(p=>p.id!==d))}catch(h){const p=h.response?.status;alert(p===401?"  .":p===403?"    .":p===404?"  .":" .")}};E.useEffect(()=>{(async()=>{const h=Om[n],p=await YD(h);s(p.data.map(y=>({id:y.id,title:y.title.replace(".mp3",""),status:y.shareToken?"UNLISTED":y.visibility,cover:`/api/songs/${y.id}/cover`,diff:y.diff.toLowerCase(),shareToken:y.shareToken})))})()},[n]);const u=e.filter(d=>{const h=Om[n]==="ALL"||n===""&&d.status==="UNLISTED"||d.status===Om[n],p=d.title.toLowerCase().includes(a.toLowerCase());return h&&p});return m.jsxs("div",{style:ZD,children:[m.jsxs("div",{style:eB,children:[m.jsx("div",{style:hB,children:qD.map(d=>m.jsx("button",{onClick:()=>t(d),style:{...tB,...n===d?nB:{}},children:d},d))}),m.jsx("input",{placeholder:" ",value:a,onChange:d=>o(d.target.value),style:rB})]}),m.jsx("div",{style:pB,children:u.length===0?m.jsx(mB,{children:"  ."}):m.jsx("div",{style:iB,children:u.map(d=>m.jsx(QD,{game:d,onDelete:c},d.id))})})]})}function QD({game:n,onDelete:t}){const e=en(),s=()=>{e(`/game/play?songId=${n.id}&diff=${n.diff}`)},a=()=>{e(`/song/${n.id}/edit`)};return m.jsxs("div",{style:sB,children:[m.jsx("img",{src:n.cover,alt:"",style:aB}),m.jsx("div",{style:oB,children:n.title}),m.jsx("div",{style:lB,children:m.jsx(JD,{status:n.status})}),m.jsxs("div",{style:cB,children:[n.status!=="BLOCKED"&&m.jsxs(m.Fragment,{children:[m.jsx(uB,{onClick:s,children:""}),m.jsx(v_,{onClick:a,children:""})]}),m.jsx(v_,{onClick:()=>t(n.id),children:""})]})]})}function JD({status:n}){const t={PRIVATE:"#777",UNLISTED:"#5aeaff",PENDING:"#ffaa00",PUBLIC:"#3cff6a",BLOCKED:"#ff4d4f"};return m.jsx("span",{style:{padding:"2px 8px",borderRadius:10,fontSize:11,background:t[n]+"33",color:t[n],border:`1px solid ${t[n]}`},children:n})}const ZD={display:"flex",flexDirection:"column",gap:14},tB={width:72,padding:"6px 0",borderRadius:8,border:"1px solid rgba(255,255,255,0.25)",background:"transparent",color:"#aaa",cursor:"pointer"},eB={display:"flex",alignItems:"center"},nB={border:"1px solid #5aeaff",color:"#5aeaff",background:"rgba(90,234,255,0.15)"},iB={display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(160px, 1fr))",gap:14},sB={background:"rgba(0,0,0,0.25)",borderRadius:12,padding:10,display:"flex",flexDirection:"column",gap:6},rB={marginLeft:"auto",padding:"6px 10px",borderRadius:8,background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.25)",color:"#fff",outline:"none",width:200},aB={width:"100%",aspectRatio:"1 / 1",borderRadius:8,objectFit:"cover",background:"#111"},oB={fontSize:13,fontWeight:600,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},lB={display:"flex"},cB={display:"flex",gap:6,marginTop:4},uB=({children:n,onClick:t})=>m.jsx("button",{style:fB,onClick:t,children:n}),v_=({children:n,onClick:t})=>m.jsx("button",{style:dB,onClick:t,children:n}),S_="#5aeaff",fB={flex:1,padding:"6px 0",borderRadius:6,background:"rgba(90,234,255,0.15)",border:`1px solid ${S_}`,color:S_,cursor:"pointer",fontSize:12},dB={flex:1,padding:"6px 0",borderRadius:6,background:"transparent",border:"1px solid rgba(255,255,255,0.25)",color:"#ccc",cursor:"pointer",fontSize:12},hB={display:"flex",gap:15,flexWrap:"wrap"},pB={textAlign:"center",margin:"45px 0"};function mB({children:n}){return m.jsx("div",{style:{opacity:.5},children:n})}function gB(){const[n,t]=E.useState([]),[e,s]=E.useState(!0);return E.useEffect(()=>{(async()=>{try{const a=await vi.get("/api/scores/record");t(Array.isArray(a.data)?a.data:[])}catch{t([])}finally{s(!1)}})()},[]),m.jsxs("div",{style:xB,children:[m.jsx(yB,{}),e?m.jsx(__,{children:" ..."}):n.length===0?m.jsx(__,{children:"  ."}):n.map((a,o)=>m.jsx(bB,{record:a},o))]})}function yB(){return m.jsxs("div",{style:{...vA,opacity:.6,fontSize:12},children:[m.jsx("div",{style:{width:140,textAlign:"center"},children:""}),m.jsx("div",{style:{flex:1,textAlign:"center"},children:""}),m.jsx("div",{style:{width:90,textAlign:"center"},children:""}),m.jsx("div",{style:{width:70,textAlign:"center"},children:"ACC"}),m.jsx("div",{style:{width:60,textAlign:"center"},children:" "}),m.jsx("div",{style:{width:70,textAlign:"center"},children:""})]})}function bB({record:n}){const t=n.regDate??"-",e=n.accuracy??n.acc??0,s=n.maxCombo??n.combo??0;return m.jsxs("div",{style:vA,children:[m.jsx("div",{style:{width:140,textAlign:"center"},children:t}),m.jsx("div",{style:{flex:1,textAlign:"center"},children:n.title?.replace(/\.mp3$/i,"")}),m.jsx("div",{style:{width:90,textAlign:"center"},children:n.score}),m.jsxs("div",{style:{width:70,textAlign:"center"},children:[e,"%"]}),m.jsx("div",{style:{width:60,textAlign:"center"},children:n.grade}),m.jsx("div",{style:{width:70,textAlign:"center"},children:s})]})}const xB={display:"flex",flexDirection:"column",gap:6},vA={display:"flex",alignItems:"center",padding:"8px 6px",borderRadius:6,background:"rgba(0,0,0,0.25)",fontSize:13};function __({children:n}){return m.jsx("div",{style:{opacity:.5,textAlign:"center",margin:"45px 0"},children:n})}const Kl={service:{title:" ",required:!0,content:`1 ()
  VICTORY BEAT( )           ,      .

2 ( )
     .

1      
2     
3     

3 (   )
             .

4 ( )
          .

5 ()
    ,      ,  ,       .`},copyright:{title:"     ",required:!0,content:`
1 (  )
    , ,             .

2 ( )
               .

3 ( )
           .

1     
2      
3     

4 ( )
 (PUBLIC)     ,          .`},privacy:{title:" ",required:!0,content:`
-  

, ,   

-  

 ,  ,   

-  

   (      )

-   

     ,
        .`},marketing:{title:"   ",required:!1,content:"       ."}};function vB(){const[n,t]=E.useState(!1),e=en(),s=async()=>{if(!(!n||!window.confirm(`  ?
    .`)))try{const c=(await uj()).data;if(!c?.ok){alert(c?.message??" .");return}alert(c.message||" ."),e("/login",{replace:!0}),window.location.reload()}catch(o){console.error("[DELETE ACCOUNT] failed",o),alert(" .")}};return m.jsxs("div",{style:SB,children:[Object.values(Kl).map(a=>m.jsx(w_,{title:a.title,children:m.jsx(E_,{children:m.jsx("pre",{style:AB,children:a.content})})},a.title)),m.jsx(w_,{title:" ",children:m.jsxs(E_,{children:[m.jsx("p",{style:{color:"#ff8a8a",fontWeight:600},children:"        ."}),m.jsxs("label",{style:TB,children:[m.jsx("input",{type:"checkbox",checked:n,onChange:a=>t(a.target.checked)}),m.jsx("span",{children:"     ."})]}),m.jsx("button",{disabled:!n,style:{...CB,opacity:n?1:.4,cursor:n?"pointer":"not-allowed"},onClick:s,children:" "})]})})]})}function w_({title:n,children:t}){return m.jsxs("div",{style:_B,children:[m.jsx("div",{style:wB,children:n}),t]})}function E_({children:n}){return m.jsx("div",{style:EB,children:n})}const SB={display:"flex",flexDirection:"column",gap:18},_B={background:"rgba(0,0,0,0.25)",borderRadius:12,padding:14},wB={fontWeight:700,marginBottom:8,color:"#5aeaff"},EB={fontSize:13,lineHeight:1.6,opacity:.95,display:"flex",flexDirection:"column",gap:6},AB={whiteSpace:"pre-wrap",fontFamily:"inherit"},TB={display:"flex",alignItems:"center",gap:8,marginTop:12},CB={marginTop:12,padding:"8px 0",borderRadius:8,background:"rgba(255,77,79,0.15)",border:"1px solid #ff4d4f",color:"#ff4d4f",fontWeight:700};async function RB(n,t,e){const s=await fetch(`/api/admin/report/${n}/action`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({actionType:t,actionReason:e})});if(s.status===401)throw new Error("  .");if(!s.ok){const a=await s.text().catch(()=>"");throw new Error(`  . (${s.status}) ${a}`)}return s.json().catch(()=>({}))}const jB=[{key:"WARN",label:""},{key:"BLOCK",label:""},{key:"DELETE_CONTENT",label:""},{key:"IGNORE",label:""}];function MB({report:n}){return m.jsxs(m.Fragment,{children:[m.jsxs("div",{children:[": ",n.targetName]}),m.jsx("div",{children:":  "})]})}function kB({report:n}){let t={};try{t=JSON.parse(n.targetExtra??"{}")}catch{}return m.jsxs(m.Fragment,{children:[m.jsxs("div",{children:[" : ",t.songOwnerNick??"-"]}),m.jsx("div",{children:":  "})]})}function OB({report:n,onClose:t,onAction:e,onRefresh:s,onLocalMove:a}){const[o,c]=E.useState(""),[u,d]=E.useState(""),[h,p]=E.useState(!1),y=(n?.status??"PENDING")==="PENDING",x=async()=>{const v=n?.id??n?.reportId??n?.report_id??n?.rptId;if(!v)return;if(o!=="IGNORE"&&u.trim().length<2){alert("  ");return}try{p(!0),await RB(v,o,u.trim()),a?.(v,o),s?.(),e?.("REPORT_APPLIED",{reportId:v,action:o}),t?.()}catch(w){alert(w?.message??"   ")}finally{p(!1)}};return m.jsx("div",{style:NB,children:m.jsxs("div",{style:IB,children:[m.jsx("h3",{style:{marginBottom:5},children:" "}),m.jsxs("section",{style:bf,children:[m.jsx("span",{style:xf,children:" "}),n.targetType==="USER"&&m.jsx(MB,{report:n}),n.targetType==="SONG"&&m.jsx(kB,{report:n})]}),m.jsxs("section",{style:bf,children:[m.jsx("span",{style:xf,children:" "}),m.jsxs("div",{children:[": ",n.regDate?.replace("T"," ")]}),m.jsxs("div",{children:[": ",n.description]})]}),y?m.jsxs("section",{style:bf,children:[m.jsx("span",{style:xf,children:" "}),m.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:jB.filter(v=>!(n.targetType==="USER"&&v.key==="DELETE_CONTENT")).map(v=>m.jsx("button",{onClick:()=>c(v.key),style:{...DB,...o===v.key?BB:{}},children:v.label},v.key))}),m.jsx("textarea",{placeholder:"  .",value:u,onChange:v=>d(v.target.value),style:LB})]}):m.jsxs("section",{style:bf,children:[m.jsx("span",{style:xf,children:" "}),m.jsxs("div",{children:[" : ",n.status]}),m.jsxs("div",{children:[" : ",n.actionType]}),m.jsxs("div",{children:[" : ",n.actionReason]})]}),m.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:12,marginTop:8,width:"100%"},children:[m.jsx("button",{style:A_,onClick:t,children:""}),y&&m.jsx("button",{style:A_,disabled:!o||h,onClick:x,children:""})]})]})})}const NB={position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:9999},IB={width:520,background:"#0b0b0b",border:"1px solid #333",borderRadius:12,padding:16,display:"flex",flexDirection:"column",gap:12},bf={display:"flex",flexDirection:"column",gap:6,paddingTop:4},LB={background:"#111",border:"1px solid #333",borderRadius:6,padding:8,color:"#fff",minHeight:60,resize:"none"},DB={padding:"6px 12px",borderRadius:6,border:"1px solid #444",background:"#111",color:"#aaa",cursor:"pointer"},BB={background:"#1e90ff22",border:"1px solid #1e90ff",color:"#fff"},xf={fontWeight:600,color:"#5aeaff",marginBottom:2},A_={minWidth:72,height:34,borderRadius:8,border:"1px solid rgba(255,255,255,0.25)",background:"transparent",color:"#ccc",cursor:"pointer"},UB=[{key:"PENDING",label:""},{key:"RESOLVED",label:""},{key:"REJECTED",label:""}];function zB({onAction:n}){const[t,e]=E.useState(null),[s,a]=E.useState("PENDING"),[o,c]=E.useState([]),[u,d]=E.useState(!1),[h,p]=E.useState(""),y=v=>{c(S=>S.filter(w=>w.id!==v))},x=async()=>{try{d(!0),p("");const v=s?`?status=${encodeURIComponent(s)}`:"",S=await fetch(`/api/admin/report${v}`,{method:"GET",headers:{Accept:"application/json"},credentials:"include"}),w=await S.json().catch(()=>({}));if(!S.ok||w?.ok===!1)throw new Error(w?.message??`    (${S.status})`);const _=Array.isArray(w?.reports)?w.reports:[];c(_)}catch(v){c([]),p(v?.message??" ")}finally{d(!1)}};return E.useEffect(()=>{x()},[s]),E.useEffect(()=>{e(null)},[s]),m.jsxs("div",{children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[m.jsx("h3",{style:{margin:0},children:" "}),m.jsx("div",{style:{display:"flex",gap:8,alignItems:"center"},children:m.jsx("button",{style:PB,onClick:x,disabled:u,children:""})})]}),m.jsx("div",{style:{display:"flex",gap:8,marginBottom:12},children:UB.map(v=>{const S=s===v.key;return m.jsx("button",{onClick:()=>a(v.key),style:{...HB,...S?FB:{}},children:v.label},v.key)})}),u&&m.jsx("div",{style:{opacity:.6},children:" ..."}),!u&&h&&m.jsx("div",{style:{color:"#ff6b6b"},children:h}),!u&&!h&&o.length===0&&m.jsx("div",{style:{marginTop:"45px",textAlign:"center",opacity:.6},children:" ."}),m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:o.map(v=>m.jsxs("div",{onClick:()=>e(v),style:{padding:"10px 14px",border:"1px solid rgba(255,255,255,0.15)",borderRadius:10,cursor:"pointer",background:"rgba(0,0,0,0.35)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsxs("div",{children:[m.jsxs("div",{style:{fontWeight:600},children:["[",v.targetType,"] ",v.targetName??`${v.targetId}`]}),m.jsx("div",{style:{fontSize:12,opacity:.65},children:v.targetType==="USER"?" ":v.targetType==="SONG"?" ":v.reasonCode})]}),m.jsx("div",{style:{fontSize:12,opacity:.5},children:v.regDate?.replace("T"," ")})]},v.id))}),t&&m.jsx(OB,{report:t,onClose:()=>e(null),onAction:n,onRefresh:x,onLocalMove:y})]})}const T_="#5aeaff",PB={padding:"6px 14px",borderRadius:6,background:"transparent",border:"1px solid rgba(255,255,255,0.25)",color:"#ccc",cursor:"pointer"},HB={padding:"6px 10px",borderRadius:999,border:"1px solid rgba(255,255,255,0.25)",background:"transparent",color:"#aaa",cursor:"pointer",fontSize:13},FB={border:`1px solid ${T_}`,color:T_,background:"rgba(90,234,255,0.12)"};function GB({open:n,song:t,onClose:e,onApprove:s,onReject:a,onBlock:o}){const[c,u]=E.useState(null),[d,h]=E.useState("");return!n||!t?null:m.jsxs(m.Fragment,{children:[m.jsx("div",{style:$B,onClick:e}),m.jsxs("div",{style:VB,children:[m.jsx("h3",{style:{marginBottom:6},children:""}),m.jsxs("section",{style:WB,children:[m.jsx("div",{style:XB,children:t.title?t.title.replace(".mp3"," "):""}),m.jsxs("div",{style:R_,children:[" : ",t.uploadUserNickname]}),m.jsxs("div",{style:R_,children:[" : "," "," ",t.createDate?t.createDate.replace("T"," "):"--"]})]}),m.jsxs("section",{style:YB,children:[m.jsx(C_,{label:" ",value:t.duration?`${t.duration}`:"--"}),m.jsx(C_,{label:"",value:t.diff?.toUpperCase()})]}),m.jsx("section",{style:qB,children:m.jsx("img",{src:`/api/songs/${t.id}/cover`,alt:"cover",style:KB,onError:p=>{p.currentTarget.style.display="none"}})}),c&&m.jsxs("section",{style:{display:"flex",flexDirection:"column",gap:6},children:[m.jsx("div",{style:{color:"#ff6b6b",fontSize:13},children:c==="REJECT"?"  ":"  "}),m.jsx("textarea",{value:d,onChange:p=>h(p.target.value),placeholder:"  ",style:{background:"#111",border:"1px solid #333",borderRadius:6,padding:8,color:"#fff",minHeight:70,resize:"none"}}),m.jsxs("div",{style:{display:"flex",gap:8},children:[m.jsx("button",{style:M_,onClick:()=>{u(null),h("")},children:""}),m.jsx("button",{style:j_,onClick:()=>{if(!d.trim()){alert(c==="REJECT"?"  .":"  .");return}c==="REJECT"&&a?.(t,d.trim()),c==="BLOCK"&&o?.(t,d.trim())},children:""})]})]}),!c&&m.jsxs("section",{style:QB,children:[m.jsx("button",{style:j_,onClick:()=>s?.(t),children:""}),m.jsx("button",{style:M_,onClick:()=>u("REJECT"),children:""}),m.jsx("button",{style:JB,onClick:()=>u("BLOCK"),children:""})]}),m.jsx("button",{style:ZB,onClick:e,children:""})]})]})}function C_({label:n,value:t}){return m.jsxs("div",{style:tU,children:[m.jsx("div",{style:eU,children:n}),m.jsx("div",{style:nU,children:t})]})}const $B={position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",zIndex:9e3},VB={position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:420,background:"#0b0b0b",border:"1px solid #333",borderRadius:14,padding:16,zIndex:9001,display:"flex",flexDirection:"column",gap:12},WB={display:"flex",flexDirection:"column",gap:4},YB={display:"flex",gap:8},XB={fontSize:16,fontWeight:600},R_={fontSize:12,color:"#aaa"},qB={width:"100%",aspectRatio:"1 / 1",borderRadius:10,background:"#111",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},KB={width:"100%",height:"100%",objectFit:"cover"},QB={display:"flex",gap:8},j_={flex:1,height:34,borderRadius:8,border:"1px solid #5aeaff",background:"rgba(90,234,255,0.15)",color:"#5aeaff",cursor:"pointer"},M_={flex:1,height:34,borderRadius:8,border:"1px solid rgba(255,255,255,0.25)",background:"transparent",color:"#ccc",cursor:"pointer"},JB={flex:1,height:34,borderRadius:8,border:"1px solid #ff6b6b",background:"rgba(255,107,107,0.12)",color:"#ff6b6b",cursor:"pointer"},ZB={height:30,borderRadius:8,border:"1px solid rgba(255,255,255,0.25)",background:"transparent",color:"#aaa",cursor:"pointer"},tU={flex:1,background:"rgba(255,255,255,0.05)",borderRadius:8,padding:8,textAlign:"center"},eU={fontSize:10,opacity:.6},nU={fontSize:13,fontWeight:600};function iU({open:n,user:t,onClose:e,onConfirm:s}){const[a,o]=E.useState("");return!n||!t?null:(E.useEffect(()=>{n||o("")},[n]),m.jsxs(m.Fragment,{children:[m.jsx("div",{style:sU,onClick:e}),m.jsxs("div",{style:rU,onClick:c=>c.stopPropagation(),children:[m.jsx("h3",{style:{marginBottom:4},children:" "}),m.jsxs("div",{style:{fontSize:13,opacity:.8},children:[": ",t.nickname]}),m.jsx("textarea",{value:a,onChange:c=>o(c.target.value),placeholder:"  ",style:aU}),m.jsxs("div",{style:oU,children:[m.jsx("button",{style:lU,onClick:e,children:""}),m.jsx("button",{style:cU,onClick:()=>{if(!a.trim()){alert("  ");return}s(t.id,a)},children:""})]})]})]}))}const sU={position:"fixed",inset:0,background:"rgba(0,0,0,0.65)",zIndex:9e3},rU={position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:360,background:"#0b0b0b",border:"1px solid #333",borderRadius:14,padding:16,zIndex:9001,display:"flex",flexDirection:"column",gap:12},aU={minHeight:90,resize:"none",borderRadius:8,padding:10,background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.25)",color:"#fff",outline:"none"},oU={display:"flex",gap:8},lU={flex:1,height:34,borderRadius:8,border:"1px solid rgba(255,255,255,0.25)",background:"transparent",color:"#ccc",cursor:"pointer"},cU={flex:1,height:34,borderRadius:8,border:"1px solid #ff6b6b",background:"rgba(255,107,107,0.15)",color:"#ff6b6b",cursor:"pointer"},SA="/api/admin/songs";async function uU({visibility:n="PENDING",page:t=1,size:e=10,keyword:s=""}={}){const a=new URLSearchParams;a.set("visibility",n),a.set("page",String(t)),a.set("size",String(e)),s?.trim()&&a.set("keyword",s.trim());const o=await fetch(`${SA}?${a.toString()}`,{method:"GET",credentials:"include",headers:{Accept:"application/json"}});if(o.status===401)throw new Error("  .");if(!o.ok)throw new Error(`     (${o.status})`);const c=await o.json();return Array.isArray(c)?{list:c,total:c.length,page:t,size:e}:{list:c?.list??[],total:c?.total??c?.count??0,page:c?.page??t,size:c?.size??e}}async function fU(n){const t=await fetch(`${SA}/${n}`,{method:"GET",credentials:"include",headers:{Accept:"application/json"}});if(t.status===401)throw new Error("  .");if(!t.ok)throw new Error(`    (${t.status})`);return t.json()}async function Nm(n,t,e){const s=await fetch(`/api/admin/songs/${n}/review`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({action:t,reason:e})}),a=await s.json().catch(()=>({}));if(!s.ok||a?.ok===!1)throw new Error(a?.message||"  ");return a}async function dU({page:n,size:t,keyword:e}){return(await _e.get("/api/admin/users",{params:{page:n,size:t,keyword:e}})).data}const hU=(n,t)=>_e.post(`/api/admin/users/${n}/block`,{reason:t});function pU(n){return _e.post(`/api/admin/users/${n}/unblock`)}const mU=[{key:"songs",label:" "},{key:"reports",label:" "},{key:"users",label:" "}];function gU(){const[n,t]=E.useState("songs"),[e,s]=E.useState(""),[a,o]=E.useState(!1),[c,u]=E.useState(null),[d,h]=E.useState(!1),[p,y]=E.useState(null),[x,v]=E.useState([]),[S,w]=E.useState(!1),[_,A]=E.useState(""),[R,C]=E.useState(1),[j,k]=E.useState(0),I=10,[N,L]=E.useState(!1),[H,B]=E.useState(""),[U,z]=E.useState([]),[G,V]=E.useState(!1),[J,O]=E.useState(""),[$,rt]=E.useState(0),[it,ft]=E.useState(1),D=10;async function Y(yt,Mt){try{await hU(yt,Mt),alert("   ."),h(!1),y(null),lt()}catch(Et){alert(Et.response?.data?.message||" .")}}async function at(yt){if(window.confirm(`[${yt.nickname}]   ?`))try{await pU(yt.id),alert("    ."),lt()}catch(Et){alert(Et.response?.data?.message||"  .")}}async function lt(){V(!0),O("");try{const yt=await dU({page:it,size:D,keyword:e}),Mt=(yt.list??[]).map(Et=>({id:Et.id,nickname:Et.nickName,role:Et.role,blocked:Et.role==="BLOCK",regDate:Et.reg_date}));z(Mt),rt(yt.total??0)}catch(yt){O(yt?.message??"   "),z([])}finally{V(!1)}}async function nt(){w(!0),A("");try{const yt=await uU({visibility:"PENDING",page:R,size:I,keyword:e}),Mt=(yt.list??[]).map(Et=>({id:Et.id??Et.songId,title:Et.title??Et.songTitle??"(no title)",uploader:Et.uploader??Et.uploaderNickName??Et.nickName??Et.userNickName??"",status:Et.visibility??Et.status??"PENDING"}));v(Mt),k(yt.total??0)}catch(yt){A(yt?.message??"  "),v([])}finally{w(!1)}}E.useEffect(()=>{n==="songs"&&nt()},[n,R,e]),E.useEffect(()=>{n==="users"&&lt()},[n,it,e]);async function xt(yt){o(!0),B(""),L(!0),u(yt);try{const Et=(await fU(yt.id))?.song,Tt={id:Et.id,title:Et.title,artist:Et.artist,visibility:Et.visibility,uploadUserId:Et.uploadUserId,uploadUserNickname:Et.uploadUserNickname,createDate:Et.createDate,duration:Et.duration,diff:Et.diff,coverPath:Et.coverPath};u(Tt)}catch(Mt){B(Mt?.message??"  ")}finally{L(!1)}}async function Rt(yt,Mt,Et){await adminActionApi(yt,{actionType:Mt,actionReason:Et});const Tt=Mt==="IGNORE"?"REJECTED":"RESOLVED";setReport(qt=>qt.map(Gt=>Gt.id===yt?{...Gt,status:Tt,actionType:Mt,actionReason:Et}:Gt))}return m.jsxs("div",{style:xU,children:[m.jsxs("div",{style:vU,children:[m.jsx("div",{style:SU,children:mU.map(yt=>m.jsx("button",{onClick:()=>t(yt.key),style:{..._U,...n===yt.key?wU:{}},children:yt.label},yt.key))}),m.jsx("input",{placeholder:n==="songs"?"  ":n==="users"?"  ":"  ",value:e,onChange:yt=>s(yt.target.value),style:EU})]}),m.jsxs("div",{style:AU,children:[n==="songs"&&m.jsx(yU,{onOpenReview:xt,songs:x,loading:S,error:_}),n==="reports"&&m.jsx(zB,{onAction:Rt}),n==="users"&&m.jsx(bU,{users:U,loading:G,error:J,onRequestBlock:yt=>{y(yt),h(!0)},onUnblock:yt=>at(yt)})]}),m.jsx(iU,{open:d,user:p,onClose:()=>{h(!1),y(null)},onConfirm:(yt,Mt)=>{Y(yt,Mt)}},p?.id||"empty"),m.jsx(GB,{open:a,song:c,loading:N,error:H,onClose:()=>{o(!1),u(null),B(""),L(!1)},onApprove:async yt=>{try{await Nm(yt.id,"APPROVE",null),alert("  ."),o(!1),u(null),await nt()}catch(Mt){alert(Mt.message)}},onReject:async(yt,Mt)=>{try{await Nm(yt.id,"REJECT",Mt),alert("  ."),o(!1),u(null),await nt()}catch(Et){alert(Et.message)}},onBlock:async(yt,Mt)=>{try{await Nm(yt.id,"BLOCK",Mt),alert("  ."),o(!1),u(null),await nt()}catch(Et){alert(Et.message)}}})]})}function yU({onOpenReview:n,songs:t,loading:e,error:s}){return m.jsxs("div",{style:_A,children:[m.jsx("div",{style:wA,children:"  "}),e&&m.jsx("div",{style:{opacity:.8},children:" ..."}),!!s&&m.jsx("div",{style:{color:"#ff6b6b"},children:s}),!e&&!s&&t.length===0&&m.jsx("div",{style:{opacity:.7,textAlign:"center",margin:"45px 0px"},children:" ."}),t.map(a=>m.jsxs("div",{style:RU,children:[m.jsxs("div",{style:{...jU,cursor:"pointer",flex:1},onClick:()=>n?.(a),children:[m.jsx("div",{style:{fontWeight:600},children:a.title.replace(".mp3","")}),m.jsxs("div",{style:MU,children:["by ",a.uploader]})]}),m.jsx("button",{style:IU,onClick:o=>{o.stopPropagation(),window.location.href=`/game/play?songId=${a.id}&diff=normal&mode=review`},children:" "})]},a.id))]})}function bU({users:n,loading:t,error:e,onRequestBlock:s,onUnblock:a}){return m.jsxs("div",{style:_A,children:[m.jsx("div",{style:wA,children:" "}),t&&m.jsx("div",{children:" ..."}),!!e&&m.jsx("div",{style:{color:"#ff6b6b"},children:e}),!t&&n.length===0&&m.jsx("div",{style:{opacity:.7,textAlign:"center",margin:"40px 0"},children:" ."}),n.map(o=>m.jsxs("div",{style:kU,children:[m.jsxs("div",{style:OU,children:[m.jsx("div",{style:{fontWeight:600},children:o.nickname}),m.jsx("div",{style:NU(o.blocked),children:o.blocked?"":""})]}),m.jsx("div",{style:TU,children:o.blocked?m.jsx(k_,{onClick:()=>a(o),children:""}):m.jsx(k_,{onClick:()=>s(o),children:""})})]},o.id))]})}const k_=({children:n,onClick:t})=>m.jsx("button",{style:CU,onClick:t,children:n}),xU={display:"flex",flexDirection:"column",gap:16},vU={display:"flex",justifyContent:"space-between",alignItems:"center"},SU={display:"flex",gap:10},_U={padding:"8px 14px",borderRadius:8,border:"1px solid rgba(255,255,255,0.25)",background:"transparent",color:"#aaa",cursor:"pointer"},wU={border:"1px solid #5aeaff",color:"#5aeaff",background:"rgba(90,234,255,0.15)"},EU={height:34,width:220,borderRadius:8,padding:"0 12px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.25)",color:"#fff",outline:"none"},AU={display:"flex",flexDirection:"column",gap:14},_A={background:"rgba(0,0,0,0.25)",borderRadius:12,padding:14,display:"flex",flexDirection:"column",gap:10},wA={fontWeight:600,marginBottom:6},TU={display:"flex",gap:6},CU={padding:"6px 14px",borderRadius:6,background:"transparent",border:"1px solid rgba(255,255,255,0.25)",color:"#ccc",cursor:"pointer"},RU={display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 8px",borderBottom:"1px solid rgba(255,255,255,0.08)"},jU={display:"flex",flexDirection:"column",gap:2},MU={fontSize:12,opacity:.6},kU={display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 8px",borderBottom:"1px solid rgba(255,255,255,0.08)"},OU={display:"flex",flexDirection:"column",gap:2},NU=n=>({fontSize:15,color:n?"#ff6b6b":"#5aeaff",opacity:.85}),IU={height:32,padding:"0 10px",borderRadius:8,border:"1px solid rgba(255,255,255,0.25)",background:"transparent",color:"#5aeaff",cursor:"pointer",whiteSpace:"nowrap"};function LU(){const n=E.useRef(null),t=li(),[e,s]=E.useState(t.state?.tab??"profile"),a=E.useRef(e),[o,c]=E.useState(null),[u,d]=E.useState({unreadMessages:0,pendingFriends:0,adminAlerts:0}),[h,p]=E.useState(null),y=E.useRef(null),[x,v]=E.useState(0),[S,w]=E.useState(null),_=o?.loginUserRole==="BLOCK",A=o?.loginUserRole==="ADMIN";E.useEffect(()=>{a.current=e},[e]);const R=U=>{window.dispatchEvent(new CustomEvent("pm:unread",{detail:{count:U}}))},C=U=>{window.dispatchEvent(new CustomEvent("admin:alert",{detail:{count:U}}))},j=U=>{window.dispatchEvent(new CustomEvent("friend:alert",{detail:{count:U}}))},k=async()=>{try{const{data:U}=await vi.get("/api/messages/unread-count");if(U?.ok){const z=Number(U.count??0);d(G=>({...G,unreadMessages:z})),R(z)}}catch(U){console.error("[UNREAD] sync error",U)}},I=async()=>{try{const{data:U}=await vi.get("/api/friend/requests");if(typeof U=="string"){d(G=>({...G,pendingFriends:0})),j(0);return}const z=Array.isArray(U)?U.length:0;d(G=>({...G,pendingFriends:z}))}catch{}},N=U=>{w(U),s("messages")},[L,H]=E.useState([]),B=20;return en(),L.length>=B,E.useEffect(()=>{vi.get("/api/songs/my").then(U=>H(U.data||[])).catch(U=>console.error("[MY SONGS] load error",U))},[]),E.useEffect(()=>{vi.get("/api/songs/my").then(U=>H(U.data||[])).catch(U=>console.error("[MY SONGS] load error",U))},[]),E.useEffect(()=>{(async()=>{try{const{data:z}=await vi.get("/api/user/myInfo");if(!z.ok){alert(z.message);return}p(z.user)}catch(z){console.error(z),alert("  ")}})()},[]),E.useEffect(()=>{(async()=>{try{const z=await(await fetch("/api/auth/login/status",{credentials:"include"})).json();z?.ok&&c(z)}catch(U){console.error("[LOGIN STATUS] fetch failed",U)}})()},[]),E.useEffect(()=>{go()||No()},[]),E.useEffect(()=>{const U=setInterval(()=>{const z=dd();z&&(n.current=z,clearInterval(U))},50);return()=>clearInterval(U)},[]),E.useEffect(()=>{k(),I()},[]),E.useEffect(()=>{j(u.pendingFriends)},[u.pendingFriends]),E.useEffect(()=>{if(!h||y.current)return;const U=new e0({webSocketFactory:()=>new n0("http://localhost:8080/ws"),reconnectDelay:3e3,debug:()=>{},onConnect:()=>{U.subscribe("/user/queue/notify",async z=>{let G;try{G=JSON.parse(z.body)}catch(V){console.error("[NOTIFY] JSON parse error:",V);return}if(G.type==="ADMIN_NOTIFY"&&G.event==="REPORT_NEW"){if(a.current==="manager")return;d(V=>{const J=(V.adminAlerts||0)+1;return C(J),{...V,adminAlerts:J}});return}if(G.type==="FRIEND_NOTIFY"&&G.event==="REQUEST_NEW"){if(a.current==="friends")return;d(V=>{const J=(V.pendingFriends||0)+1;return j(J),{...V,pendingFriends:J}});return}if(G.type==="NEW_MESSAGE"){if(a.current==="messages"){await k(),v(V=>V+1);return}d(V=>{const J=(V.unreadMessages||0)+1;return R(J),{...V,unreadMessages:J}})}})},onStompError:()=>{},onWebSocketError:()=>{},onDisconnect:()=>{}});return U.activate(),y.current=U,()=>{try{U.deactivate()}finally{y.current=null}}},[h]),E.useEffect(()=>{e==="messages"&&k()},[e]),E.useEffect(()=>{e==="manager"&&(d(U=>({...U,adminAlerts:0})),C(0))},[e]),E.useEffect(()=>{e==="friends"&&(d(U=>({...U,pendingFriends:0})),j(0))},[e]),h?m.jsxs("div",{style:{position:"absolute",inset:0},children:[m.jsx(Xs,{style:{position:"fixed",inset:0,zIndex:-3}}),m.jsx(Ys,{}),m.jsxs("main",{style:{position:"absolute",top:64,left:0,right:0,bottom:0,display:"flex",padding:"40px 21%"},children:[m.jsx("aside",{style:{width:"220px",borderRadius:"12px",background:"rgba(20,22,28,0.7)",padding:"14px"},children:[["manager",""],["profile",""],["games"," "],["records"," "],["friends",""],["messages",""],["policy"," / "]].map(([U,z])=>{const V=_&&["manager","games","records","friends","messages"].includes(U);return U==="manager"&&!A||V?null:m.jsx("div",{onClick:()=>s(U),style:{padding:"10px 12px",borderRadius:"8px",cursor:"pointer",color:e===U?"#5aeaff":"#cfd8e3",fontWeight:e===U?600:400},children:m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsx("span",{children:z}),!_&&U==="manager"&&u.adminAlerts>0&&m.jsx(Im,{}),!_&&U==="friends"&&u.pendingFriends>0&&m.jsx(Im,{}),!_&&U==="messages"&&u.unreadMessages>0&&m.jsx(Im,{})]})},U)})}),m.jsxs("section",{style:{width:"100%",maxWidth:"860px",margin:"0 auto",borderRadius:"14px",background:"rgba(20,22,28,0.65)",padding:"20px",overflowY:"auto",maxHeight:"calc(100vh - 64px - 80px)"},children:[e==="manager"&&A&&m.jsx(gU,{}),e==="profile"&&m.jsx(Z8,{myInfo:h,status:o}),e==="games"&&m.jsxs(m.Fragment,{children:[m.jsx(KD,{}),m.jsx("div",{style:{marginTop:"24px",padding:"12px",borderRadius:"8px",background:"rgba(255,255,255,0.05)",display:"flex",justifyContent:"center",alignItems:"center"},children:m.jsxs("div",{style:{color:"#e6ecf5"},children:[" : ",m.jsx("strong",{children:L.length})," / ",B]})})]}),e==="records"&&m.jsx(gB,{}),e==="friends"&&m.jsx(DD,{user:o,onClickMessage:N}),e==="messages"&&m.jsx(yD,{refreshKey:x,onReadDone:k,composeTo:S,onConsumeComposeTo:()=>w(null)}),e==="policy"&&m.jsx(vB,{})]})]}),m.jsx(Ea,{size:"game",preset:"menu",analyserRef:n,active:!0,style:{position:"fixed",left:0,right:0,bottom:0,height:"28vh",zIndex:-2,pointerEvents:"none"}}),m.jsx("div",{style:{position:"fixed",left:0,right:0,bottom:0,height:"100vh",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",background:"rgba(255,255,255,0.03)",zIndex:-1,pointerEvents:"none"}})]}):null}function Im(){return m.jsx(Qg,{icon:q3,style:{color:"#ff4d4f",fontSize:20}})}function DU(){const n=en(),t=li(),[e,s]=E.useState("LOADING");return E.useEffect(()=>{(async()=>{const c=new URLSearchParams(t.search).get("target")||t.state?.target||"/main";s("  ...");try{if(!(await(await fetch("/api/auth/login/status",{method:"GET",credentials:"include"})).json()).ok){n("/login",{replace:!0});return}n(c,{replace:!0})}catch{n("/login",{replace:!0})}})()},[t,n]),m.jsx("div",{style:{color:"#fff",textAlign:"center",paddingTop:120},children:e})}function BU(){const n=en(),[t,e]=E.useState(!1),s=Object.keys(Kl).reduce((x,v)=>(x[v]=!1,x),{}),[a,o]=E.useState(s),c=x=>{o(v=>({...v,[x]:!v[x]}))},d=Object.keys(Kl).filter(x=>Kl[x].required).every(x=>a[x]),h=Object.keys(a).every(x=>a[x]),p=x=>{const v={};Object.keys(a).forEach(S=>v[S]=x),o(v)},y=()=>{if(!d){e(!0);return}n("/join",{state:{terms:a,agreedAt:new Date().toISOString()}})};return m.jsx("div",{className:"terms-page",children:m.jsxs("div",{className:"terms-card",children:[m.jsx("h1",{className:"terms-title",children:"  "}),m.jsxs("label",{className:"terms-all",children:[m.jsx("input",{type:"checkbox",checked:h,onChange:x=>p(x.target.checked)}),"  "]}),m.jsx("div",{className:"terms-list",children:Object.entries(Kl).map(([x,v])=>m.jsxs("div",{className:`terms-item ${t&&v.required&&!a[x]?"terms-warn":""}`,children:[m.jsxs("label",{className:"terms-item-head",children:[m.jsx("input",{type:"checkbox",checked:a[x],onChange:()=>c(x)}),v.required?"()":"()"," ",v.title]}),m.jsx("div",{className:"terms-box",children:v.content})]},x))}),m.jsxs("div",{className:"terms-actions",children:[m.jsx("button",{className:"terms-btn ghost",onClick:()=>n("/login"),children:""}),m.jsx("button",{className:"terms-btn primary",disabled:!d,onClick:y,children:""})]})]})})}function UU(){const n={width:"100%",padding:"10px 12px",borderRadius:8,background:"linear-gradient(180deg, #0e141b 0%, #0a0f15 100%)",border:"1px solid rgba(90,234,255,0.35)",color:"#e6f7ff",outline:"none",boxShadow:"inset 0 0 6px rgba(0,0,0,0.6)"},t=en(),e=E.useRef(null),[s,a]=E.useState(""),[o,c]=E.useState("PRIVATE"),[u,d]=E.useState(null),[h,p]=E.useState(null),[y,x]=E.useState(null),[v,S]=E.useState(!1),[w,_]=E.useState("NORMAL");E.useEffect(()=>{api.get("/api/songs/my").then(R=>{(R.data||[]).length>=20&&(alert("   20   ."),t("/mypage"))})},[]),E.useEffect(()=>{go()||No()},[]),E.useEffect(()=>{const R=setInterval(()=>{const C=dd();C&&(e.current=C,clearInterval(R))},50);return()=>clearInterval(R)},[]),E.useEffect(()=>()=>{y&&URL.revokeObjectURL(y)},[y]);const A=async()=>{if(v)return;if(!h){alert("   .");return}const R=new FormData;R.append("file",h),R.append("visibility",o),u&&R.append("cover",u);try{S(!0);const j=(await _e.post(`/api/ai/analyze/${w}`,R,{withCredentials:!0})).data;let k=null,I=null;if(typeof j=="number"?k=j:typeof j=="object"&&j!==null&&(k=j.songId??j.id,I=j.shareToken),!k){console.error("[SongUpload] Invalid analyze response:",j),alert("  songId .  .");return}if(o==="UNLISTED"&&I){const N=`${window.location.origin}/song/${k}?token=${I}`;await navigator.clipboard.writeText(N),alert(`  .
 .`)}if(o==="PENDING"){alert(" !   ."),t(`/song/${k}/edit`,{state:{fromPublicUpload:!0}});return}alert(" !  ."),t(`/song/${k}/edit`)}catch(C){console.error(C),alert(" ")}finally{S(!1)}};return m.jsxs("div",{style:{position:"absolute",inset:0},children:[m.jsx(Xs,{style:{position:"fixed",inset:0,zIndex:-3}}),m.jsx(Ys,{}),m.jsx("main",{style:{position:"absolute",top:64,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center"},children:m.jsx("div",{style:{display:"flex",gap:80},children:m.jsxs("div",{style:{width:500,height:380,marginTop:-60,padding:20,borderRadius:18,background:"rgba(10,20,30,0.85)",border:"2px solid rgba(90,234,255,0.45)",boxShadow:"0 0 20px rgba(90,234,255,0.4)",display:"flex",flexDirection:"column",justifyContent:"center",gap:16},children:[m.jsx("h3",{style:{color:"#5aeaff",textAlign:"center"},children:" "}),m.jsx("input",{style:n,placeholder:"",value:s,readOnly:!0}),m.jsx("input",{id:"cover-input",type:"file",accept:"image/*",style:{display:"none"},onChange:R=>{const C=R.target.files[0];d(C),C&&x(URL.createObjectURL(C))}}),m.jsx("label",{style:{color:"#cfd8e3",fontSize:13,display:"flex",alignItems:"center",gap:20},children:m.jsx("input",{type:"file",accept:"audio/*",style:{color:"transparent"},onChange:R=>{const C=R.target.files[0];if(p(C),C){const j=C.name.replace(/\.[^/.]+$/,"");a(j)}}})}),m.jsx("div",{style:{display:"flex",gap:10},children:["EASY","NORMAL","HARD","HELL"].map(R=>m.jsx("button",{type:"button",className:"neon-btn",onClick:()=>_(R),style:{flex:1,opacity:w===R?1:.4},children:R},R))}),m.jsx("div",{style:{display:"flex",gap:10},children:[["PRIVATE",""],["UNLISTED"," "],["PUBLIC"," "]].map(([R,C])=>{const j=o===R;return m.jsx("div",{onClick:()=>c(R),style:{flex:1,padding:"10px 0",textAlign:"center",borderRadius:10,cursor:"pointer",fontSize:13,color:j?"#0ff":"#cfd8e3",background:j?"linear-gradient(180deg, rgba(90,234,255,0.25), rgba(10,20,30,0.9))":"linear-gradient(180deg, #0e141b, #0a0f15)",border:j?"1px solid rgba(90,234,255,0.9)":"1px solid rgba(90,234,255,0.3)",boxShadow:j?"0 0 10px rgba(90,234,255,0.8)":"inset 0 0 6px rgba(0,0,0,0.6)",transition:"all 0.15s ease"},children:C},R)})}),m.jsx("div",{style:{height:18,marginTop:4,fontSize:12,color:"#ff9aa2",opacity:o==="PUBLIC"?1:0,transition:"opacity 0.15s ease"},children:"      ."}),m.jsx("button",{className:"neon-btn",disabled:v,onClick:A,children:v?" ...":""})]})})}),m.jsx(Ea,{size:"game",preset:"menu",analyserRef:e,active:!0,style:{position:"fixed",left:0,right:0,bottom:0,height:"28vh",zIndex:-2,pointerEvents:"none"}}),m.jsx("div",{style:{position:"fixed",inset:0,backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",background:"rgba(255,255,255,0.03)",zIndex:-1,pointerEvents:"none"}})]})}function zU(){const{songId:n}=td(),t=en(),{state:e}=li(),s=e?.fromPublicUpload===!0,a={PRIVATE:"",UNLISTED:" ",PENDING:"",PUBLIC:" ",BLOCKED:""},o=async()=>{if(window.confirm("   ?"))try{I(!0);const J=new FormData;J.append("title",y),J.append("artist",v),J.append("visibility","PUBLIC"),A&&J.append("cover",A),await _e.post(`/api/songs/${n}/update`,J,{withCredentials:!0}),alert("  ."),t("/main",{replace:!0})}catch(J){console.error(J),alert("  ")}finally{I(!1)}},c={PRIVATE:"#aaa",UNLISTED:"#5aeaff",PENDING:"#ffd166",PUBLIC:"#06d6a0",BLOCKED:"#ff5c5c"},u={padding:"10px 14px",borderRadius:10,background:"linear-gradient(180deg, #0f1b26 0%, #0a121a 100%)",border:"1px solid rgba(90,234,255,0.45)",color:"#e6f7ff",cursor:"pointer"},d={...u,border:"1px solid rgba(255,92,92,0.7)",color:"#ffb3b3"},h=E.useRef(null),p={width:"100%",padding:"10px 12px",borderRadius:8,background:"linear-gradient(180deg, #0e141b 0%, #0a0f15 100%)",border:"1px solid rgba(90,234,255,0.35)",color:"#e6f7ff",outline:"none",boxShadow:"inset 0 0 6px rgba(0,0,0,0.6)"},[y,x]=E.useState(""),[v,S]=E.useState(""),[w,_]=E.useState("PRIVATE"),[A,R]=E.useState(null),[C,j]=E.useState(null),[k,I]=E.useState(!1),[N,L]=E.useState(!1),H=!s&&w==="PRIVATE",B=w==="PENDING",U=s||w==="PENDING";E.useEffect(()=>{fd()},[]),E.useEffect(()=>{n&&_e.get(`/api/songs/${n}`,{withCredentials:!0}).then(J=>{const O=J.data;x((O.title||"").replace(".mp3","")),S(O.artist||""),_(O.visibility||"PRIVATE"),O.coverPath&&j(`/api/songs/${n}/cover`)}).catch(J=>{if(console.error("[SongEditor load]",J),J.response?.status===403){t("/main",{replace:!0});return}alert("   ."),t("/main",{replace:!0})})},[n,t]);const z=async()=>{if(!k)try{I(!0);const J=new FormData;J.append("title",y),J.append("artist",v),J.append("visibility",w),A&&J.append("cover",A),await _e.post(`/api/songs/${n}/update`,J,{withCredentials:!0}),alert(" !"),t("/main",{replace:!0})}catch(J){console.error(J),alert(" ")}finally{I(!1)}},G=()=>{h.current&&(N?h.current.pause():h.current.play(),L(!N))},V=async()=>{if(window.confirm("   ?"))try{await _e.delete(`/api/songs/${n}`,{withCredentials:!0}),alert(" "),t("/main")}catch(J){console.error(J),alert(" ")}};return m.jsxs("div",{style:{position:"absolute",inset:0},children:[m.jsx(Xs,{style:{position:"fixed",inset:0,zIndex:-1}}),m.jsx(Ys,{}),m.jsxs("main",{style:{position:"absolute",top:64,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center"},children:[m.jsxs("div",{style:{display:"flex",gap:80},children:[m.jsx("div",{style:{position:"relative",width:420,height:420,borderRadius:18,background:C?`url(${C}) center / cover no-repeat`:"linear-gradient(180deg, #2a2f38 0%, #151a22 100%)",border:"2px solid rgba(90,234,255,0.55)",boxShadow:"0 0 20px rgba(90,234,255,0.45)",cursor:"pointer"},onClick:()=>document.getElementById("cover-input").click(),children:m.jsx("button",{onClick:J=>{J.stopPropagation(),G()},style:{position:"absolute",bottom:12,right:12,width:48,height:48,borderRadius:"50%",border:"none",background:"rgba(0,0,0,0.6)",color:"#5aeaff",fontSize:20,cursor:"pointer"},children:N?"":""})}),m.jsxs("div",{style:{width:480,padding:24,borderRadius:18,background:"rgba(10,20,30,0.85)",border:"2px solid rgba(90,234,255,0.45)",boxShadow:"0 0 20px rgba(90,234,255,0.4)",display:"flex",flexDirection:"column",gap:14},children:[m.jsx("h3",{style:{color:"#5aeaff",textAlign:"center"},children:"  "}),m.jsxs("div",{style:{fontSize:13,textAlign:"center",color:c[w]||"#aaa"},children:[" : ",a[w]||w]}),m.jsx("input",{style:p,value:y,onChange:J=>x(J.target.value),placeholder:" "}),m.jsx("input",{style:p,value:v,onChange:J=>S(J.target.value),placeholder:""}),m.jsx("input",{id:"cover-input",type:"file",accept:"image/*",style:{display:"none"},onChange:J=>{const O=J.target.files[0];O&&(R(O),j(URL.createObjectURL(O)))}}),m.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:10,marginTop:10},children:[U?m.jsx("button",{className:"neon-btn",style:u,onClick:()=>t("/main"),children:""}):m.jsx("button",{className:"neon-btn",style:u,disabled:k,onClick:z,children:k?" ...":""}),!U&&m.jsx("button",{className:"neon-btn",style:u,onClick:()=>t(`/song/${n}/note/edit`),children:" "}),m.jsx("div",{style:{height:1,background:"rgba(90,234,255,0.25)",margin:"12px 0 8px"}}),H&&m.jsx("button",{className:"neon-btn",style:{...u,opacity:B?.5:1,cursor:B?"not-allowed":"pointer"},disabled:B,onClick:o,children:B?"  ":"  "}),!U&&w!=="PENDING"&&m.jsx("button",{className:"neon-btn",style:d,onClick:V,children:" "})]})]})]}),n&&m.jsx("audio",{ref:h,src:`/api/songs/${n}/audio`,onEnded:()=>L(!1)})]})]})}const PU={PRIVATE:"",UNLISTED:" ",PUBLIC:" ",PENDING:"",BLOCKED:""},qf=64,EA=300;function HU(){const{songId:n}=td(),t=li(),s=new URLSearchParams(t.search).get("mode")==="editorTest",[a,o]=E.useState(null),[c,u]=E.useState(0),[d,h]=E.useState(0),[p,y]=E.useState(null),[x,v]=E.useState(!1),[S,w]=E.useState([]),[_,A]=E.useState([]),[R,C]=E.useState("tap"),[j,k]=E.useState(new Set),I=en(),N=E.useRef(null),[L,H]=E.useState(!1),B=PU[a?.visibility]||"  ",U=ft=>{w(D=>[...D,structuredClone(ft)])},z=ft=>{const D=$(ft.clientX);y(D)},G=ft=>{const D=$(ft.clientX);y(D),H(!0)},V=ft=>{if(!L)return;const D=$(ft.clientX);y(D)},J=()=>{H(!1)},O=E.useCallback(({currentTime:ft,duration:D})=>{u(ft),h(D)},[]),$=ft=>{if(!N.current||!d)return c;const D=N.current.getBoundingClientRect(),Y=(ft-D.left)/D.width;return Math.max(0,Math.min(d,Y*d))},rt=(ft=0)=>{const D=Math.max(0,Math.floor(ft/1e3)),Y=String(Math.floor(D/60)).padStart(2,"0"),at=String(D%60).padStart(2,"0");return`${Y}:${at}`},it=async()=>{const ft=_.map(D=>({lane:D.lane,type:D.type,time:(D.timing??0)/1e3,endTime:D.type==="long"?(D.endTime??D.timing)/1e3:null}));try{if(!(await fetch(`/api/songs/${n}/notes`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ft)})).ok)throw new Error("save failed");alert(" "),I(`/song/${n}/edit`,{replace:!0})}catch{alert(" ")}};return E.useEffect(()=>{fd()},[]),E.useEffect(()=>(window.addEventListener("mouseup",J),()=>window.removeEventListener("mouseup",J)),[]),E.useEffect(()=>{n&&(s||(async()=>{try{const ft=await fetch(`/api/songs/${n}/edit`);if(ft.status===403){I("/main",{replace:!0});return}if(!ft.ok){I("/main",{replace:!0});return}const D=await ft.json(),Y=D.data??D.song??D;let at=null;try{const yt=await fetch("/api/auth/status",{credentials:"include"});yt.ok&&(at=(await yt.json()).loginUserId)}catch{}if(at!==null&&Y.userId!==at){I("/main",{replace:!0});return}o(Y);const lt=await fetch(`/api/songs/${n}/notes/edit`);if(lt.status===403){I("/main",{replace:!0});return}if(!lt.ok){I("/main",{replace:!0});return}const nt=await lt.json(),xt=nt?.data??nt?.notes??nt,Rt=Array.isArray(xt)?xt.map(yt=>{const Mt=crypto.randomUUID(),Et=Number(yt.lane??yt.laneIndex??yt.key??0),Tt=(yt.type??yt.noteType??"tap")==="long"?"long":"tap",qt=Number(yt.time??yt.noteTime??yt.note_time??yt.timing??0),Gt=Math.round(qt*1e3),Vt=yt.endTime??yt.end_time??yt.end??null,Ct=Vt!=null?Math.round(Number(Vt)*1e3):void 0;return Tt==="long"?{id:Mt,lane:Et,timing:Gt,endTime:Ct??Gt+1e3,type:"long",hit:!1,holding:!1,released:!1}:{id:Mt,lane:Et,timing:Gt,type:"tap",hit:!1}}):[];A(Rt)}catch(ft){console.error("editor load failed",ft),I("/main",{replace:!0})}})())},[n,s,I]),E.useEffect(()=>{const ft=sessionStorage.getItem("EDITOR_STATE_SNAPSHOT");if(ft){try{const D=JSON.parse(ft);Array.isArray(D.notes)&&A(D.notes.map(Y=>({...Y,id:Y.id??crypto.randomUUID()}))),typeof D.currentTime=="number"&&y(D.currentTime),D.tool&&C(D.tool)}catch(D){console.error("editor snapshot restore failed",D)}sessionStorage.removeItem("EDITOR_STATE_SNAPSHOT"),sessionStorage.removeItem("EDITOR_RETURNING")}},[]),m.jsxs("div",{style:FU,children:[m.jsx("div",{style:GU,children:m.jsx(Xs,{})}),m.jsx(Ys,{}),m.jsx(gA,{songId:n,diff:a?.diff,currentTime:c,duration:d}),m.jsx(yA,{}),m.jsxs("div",{style:YU,children:[": ",m.jsx("b",{children:B})]}),m.jsx("div",{style:$U,children:m.jsxs("div",{style:VU,children:[m.jsx("div",{style:{position:"absolute",inset:0,zIndex:-5,pointerEvents:"none",background:`
                linear-gradient(
                  #000000 0%,
                  #000000 60%,
                  #000000 85%,
                  #000000 100%
                )
              `,clipPath:"polygon(40% 8%, 60% 8%, 100% 100%, 0% 100%)"}}),m.jsx(mA,{mode:"edit",isPlaying:x,seekTime:p,tool:R,notes:_,setNotes:A,pushUndo:U,selectedNoteIds:j,setSelectedNoteIds:k,songId:n,onState:O})]})}),m.jsxs("div",{style:WU,children:[m.jsx("div",{style:XU,children:"EDITOR"}),m.jsxs("div",{style:vf,children:[m.jsx("div",{style:Sf,children:"Time"}),m.jsxs("div",{style:qU,children:[rt(c)," / ",rt(d)]}),m.jsxs("div",{ref:N,style:{...QU,position:"relative",cursor:"pointer"},onMouseDown:G,onMouseMove:V,onClick:z,children:[m.jsx("div",{style:{...JU,width:d>0?`${c/d*100}%`:"0%"}}),m.jsx("div",{style:{...ZU,left:d>0?`${c/d*100}%`:"0%"}})]}),m.jsxs("div",{style:KU,children:[m.jsx("span",{children:"Remain"}),m.jsxs("span",{children:["-",rt(Math.max(0,d-c))]})]})]}),m.jsxs("div",{style:vf,children:[m.jsx("div",{style:Sf,children:"Playback"}),m.jsx("button",{style:O_,onClick:()=>v(ft=>!ft),children:x?"Pause":"Play"})]}),m.jsxs("div",{style:vf,children:[m.jsx("div",{style:Sf,children:"Actions"}),m.jsx("button",{style:O_,onClick:it,children:""}),m.jsx("div",{style:{height:10}}),m.jsx("button",{style:Lm,onClick:()=>{w(ft=>{if(ft.length===0)return ft;const D=ft[ft.length-1];return A(D),ft.slice(0,-1)})},children:""}),m.jsx("div",{style:{height:10}}),m.jsx("button",{style:Lm,onClick:()=>{sessionStorage.setItem("EDITOR_RETURNING","1"),sessionStorage.setItem("EDITOR_STATE_SNAPSHOT",JSON.stringify({notes:_,currentTime:c,tool:R})),sessionStorage.setItem("EDITOR_TEST_NOTES",JSON.stringify(_)),I(`/game/play?songId=${n}&mode=editorTest`)},children:" "})]}),m.jsxs("div",{style:vf,children:[m.jsx("div",{style:Sf,children:"Tools"}),m.jsxs("div",{style:tz,children:[m.jsx("button",{style:{..._f,...R==="tap"?wf:{}},onClick:()=>C("tap"),children:"TAP"}),m.jsx("button",{style:{..._f,...R==="long"?wf:{}},onClick:()=>C("long"),children:"LONG"}),m.jsx("button",{style:{..._f,...R==="select"?wf:{}},onClick:()=>C("select"),children:"SELECT"}),m.jsx("button",{style:{..._f,...R==="delete"?wf:{}},onClick:()=>C("delete"),children:"DELETE"})]}),m.jsx("div",{style:{marginTop:50},children:m.jsx("button",{style:Lm,onClick:()=>{sessionStorage.removeItem("EDITOR_STATE_SNAPSHOT"),sessionStorage.removeItem("EDITOR_RETURNING"),sessionStorage.removeItem("EDITOR_TEST_NOTES"),I(`/song/${n}/edit`,{replace:!0})},children:""})}),m.jsx("div",{style:{height:10}})]})]})]})}const FU={minHeight:"100vh",position:"relative"},GU={position:"fixed",inset:0,zIndex:0,pointerEvents:"none"},$U={position:"fixed",inset:0,zIndex:20,pointerEvents:"none"},VU={position:"absolute",top:`calc(46% + ${qf/2}px)`,left:"50%",transform:"translate(-50%, -50%)",pointerEvents:"auto"},WU={position:"fixed",top:qf,right:0,width:`${EA}px`,height:`calc(100vh - ${qf}px)`,zIndex:60,padding:"18px 14px",boxSizing:"border-box",background:"rgba(10,20,30,0.45)",borderLeft:"1px solid rgba(255,255,255,0.08)",backdropFilter:"blur(10px)"},YU={position:"fixed",top:qf+24+270+6+14+14,left:16,width:EA-32,zIndex:80,fontSize:13,opacity:.9,color:"#e6faff",pointerEvents:"none",textShadow:"0 0 6px rgba(0,255,255,0.18)"},XU={fontSize:14,letterSpacing:"0.18em",fontWeight:800,color:"#c8feff",marginBottom:14},vf={padding:"12px",borderRadius:10,background:"rgba(0,0,0,0.25)",border:"1px solid rgba(255,255,255,0.08)",marginBottom:12},Sf={fontSize:12,opacity:.7,marginBottom:6},qU={fontSize:14,fontWeight:700,marginBottom:10},KU={display:"flex",justifyContent:"space-between",fontSize:12},QU={height:6,borderRadius:4,background:"rgba(255,255,255,0.15)",overflow:"visible"},JU={height:"100%",background:"linear-gradient(90deg,#00ffff,#00ff88)"},O_={width:"100%",padding:"10px",borderRadius:10,border:"1px solid rgba(0,255,255,0.55)",background:"rgba(0,255,255,0.10)",color:"#bfffff",fontWeight:800,cursor:"pointer"},Lm={width:"100%",padding:"10px",borderRadius:10,border:"1px solid rgba(255,255,255,0.14)",background:"rgba(255,255,255,0.06)",color:"#e6faff",fontWeight:700,cursor:"pointer"},_f={flex:1,padding:"10px 0",borderRadius:10,border:"1px solid rgba(255,255,255,0.14)",background:"rgba(255,255,255,0.06)",color:"#e6faff",fontWeight:800,cursor:"pointer"},wf={border:"1px solid rgba(0,255,255,0.8)",background:"rgba(0,255,255,0.18)",boxShadow:"0 0 10px rgba(0,255,255,0.35)"},ZU={position:"absolute",top:"50%",transform:"translate(-50%, -50%)",width:10,height:10,borderRadius:"50%",background:"#00ffff",boxShadow:"0 0 8px rgba(0,255,255,0.8)",pointerEvents:"none"},tz={display:"grid",gridTemplateColumns:"1fr 1fr",gap:10};function ez(){const[n,t]=E.useState(""),[e,s]=E.useState(""),[a,o]=E.useState(!1),[c,u]=E.useState(0),d=E.useRef(null),h=en();E.useEffect(()=>{Gl()},[]),E.useEffect(()=>{if(c<=0)return;const x=setInterval(()=>{u(v=>Math.max(0,v-1))},1e3);return()=>clearInterval(x)},[c]);const p=x=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(x),y=async()=>{if(!n.trim()){s(" ."),d.current?.focus(),d.current?.classList.add("is-error"),setTimeout(()=>d.current?.classList.remove("is-error"),300);return}if(!p(n)){s("   ."),d.current?.focus();return}if(!(c>0)){o(!0),s("");try{const x=await fetch("/api/auth/sendTempPw",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:n})}),v=await x.json();if(!x.ok||!v.ok){s(v.message||"   .");return}alert(`  .
    .`),h("/login")}catch{s("  .")}finally{o(!1)}}};return m.jsxs("div",{className:"login-page",children:[m.jsx(hd,{}),m.jsxs("section",{className:"login-hero",style:{display:"flex",justifyContent:"center",alignItems:"flex-start"},children:[m.jsx("div",{className:"hero-bg",style:{background:`
              linear-gradient(
                180deg,
                #8f0015 0%,
                #120000 50%,
                #007a86 100%
              )
            `}}),m.jsx("div",{className:"hero-overlay",style:{background:`
              radial-gradient(
                circle at center,
                rgba(0,0,0,0.05) 0%,
                rgba(0,0,0,0.15) 60%,
                rgba(0,0,0,0.30) 100%
              )
            `}}),m.jsx("div",{className:"hero-content",style:{paddingTop:280,paddingBottom:48,paddingInline:24,display:"flex",flexDirection:"column",alignItems:"center"},children:m.jsx("div",{className:"login-form-wrap",children:m.jsxs("div",{className:"login-form",style:{padding:"56px 48px",borderRadius:18,width:450,transform:"translateY(-30px)",scale:1.2,position:"relative",zIndex:20,background:"rgb(38, 38, 38)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.6), inset 0 0 0 1px rgba(255, 255, 255, 0.05)",color:"#fff",textAlign:"center"},children:[m.jsx("h2",{style:{marginBottom:24},children:" "}),m.jsx("div",{className:"login-form__fields",children:m.jsx("input",{ref:d,type:"email",placeholder:" ",className:"login-input",value:n,onChange:x=>t(x.target.value),style:{height:48,borderRadius:10,border:"1px solid rgba(255,255,255,0.12)",background:"rgba(0,0,0,0.4)",color:"#fff",fontSize:16,padding:"0 14px"}})}),m.jsx("div",{style:{height:20,marginTop:10},children:m.jsx("div",{style:{color:"#ff6b6b",fontSize:13},children:e||""})}),m.jsx("div",{className:"login-form__actions",style:{marginTop:12},children:m.jsx("button",{onClick:y,disabled:a||c>0,className:"login-btn primary",style:{width:"100%",height:48,background:"linear-gradient(135deg, #00aeffff, #00ccffff)",color:"#000",borderRadius:12,fontWeight:600,cursor:a||c>0?"not-allowed":"pointer",border:"none",opacity:a||c>0?.6:1},children:a?" ...":c>0?` (${c}s)`:"  "})}),m.jsx("div",{className:"login-form__links",style:{marginTop:20,fontSize:13,color:"#aaa"},children:m.jsx("span",{style:{cursor:"pointer"},onClick:()=>h("/login"),children:" "})})]})})})]})]})}function nz(n){return n?n.startsWith("http")?n:n.startsWith("/")?`http://localhost:8080${n}`:`http://localhost:8080/${n}`:null}function iz(n){if(n==null||isNaN(n))return"--:--";const t=Math.floor(n/60),e=Math.floor(n%60);return`${t}:${String(e).padStart(2,"0")}`}function sz(n){return n?String(n).replace(/\.mp3$/i,""):""}function rz(){const{roomId:n}=td(),t=en(),e=E.useRef(!1),s=E.useRef(null),a=E.useRef(null),o=()=>K4(n),c=()=>Q4(n),[u,d]=E.useState(null),[h,p]=E.useState(null),y=()=>{console.log("[LOBBY LEAVE CLICK]",n),E1(n),sessionStorage.setItem("roomClosed","true"),sessionStorage.setItem(`leftRoom:${n}`,"true"),setTimeout(()=>{t("/main",{replace:!0})},300)},[x,v]=E.useState(null),[S,w]=E.useState(null),[_,A]=E.useState([]),[R,C]=E.useState(!1),j=E.useMemo(()=>!S||x==null?!1:Number(x)===Number(S.hostUserId),[S,x]),k=S?.length??S?.duration??S?.lengthSec??null;E.useEffect(()=>{i0({roomId:n,onRoomMessage:H=>{if(H?.type==="ROOM_STATE"){A(H.players||[]);return}H?.type==="START"&&(e.current=!0,sessionStorage.setItem("roomClosed","true"),t(`/game/play?mode=multi&roomId=${n}&songId=${S.songId}&startAt=${H.startAt}`))},onRoomClosed:()=>{e.current||(sessionStorage.setItem("roomClosed","true"),sessionStorage.setItem(`leftRoom:${n}`,"true"),t("/main",{replace:!0}))}})},[n,S?.songId,t]),E.useEffect(()=>{if(document.getElementById("vb-marquee-style"))return;const H=document.createElement("style");H.id="vb-marquee-style",H.innerHTML=`
    @keyframes vb-marquee {
      0%   { transform: translateX(0); }
      100% { transform: translateX(-100%); }
    }
  `,document.head.appendChild(H)},[]),E.useEffect(()=>{if(sessionStorage.getItem(`leftRoom:${n}`)==="true"){alert("     ."),t("/main",{replace:!0});return}let H=!0;return(async()=>{try{if(!(await fetch(`/api/multi/rooms/${n}/join`,{method:"POST",credentials:"include"})).ok)throw new Error("  ");const U=await fetch(`/api/multi/rooms/${n}`,{credentials:"include"});if(!U.ok)throw new Error("   ");const z=await U.json();if(!H)return;if(!z?.ok)throw new Error(z?.message||"   ");w(z.room),A(z.players||[]),v(z.myUserId)}catch{alert("   ."),t("/main")}})(),()=>{H=!1}},[n,t]),E.useEffect(()=>{const H=a.current;H&&C(H.scrollWidth>H.clientWidth)},[S?.songTitle]),E.useEffect(()=>()=>{j&&!e.current&&_.length<=1&&(E1(n),sessionStorage.setItem("roomClosed","true"))},[j,n]),E.useEffect(()=>{const H=setInterval(()=>{const B=dd();B&&(s.current=B,clearInterval(H))},50);return()=>clearInterval(H)},[]);const I=x!=null&&_.find(H=>Number(H.userId)===Number(x))||null,N=x!=null&&_.find(H=>Number(H.userId)!==Number(x))||null,L=S?.coverPath||"";return S?m.jsxs("div",{style:{position:"absolute",inset:0},children:[m.jsx(Xs,{}),m.jsx(Ys,{}),m.jsx("div",{style:{position:"absolute",inset:0,top:64,display:"flex",justifyContent:"center",alignItems:"center",background:"rgba(10,20,30,0.25)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)"},children:m.jsxs("div",{style:{width:"75%",height:"65%",background:"rgba(10,20,30,0.55)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:"2px solid rgba(90,234,255,0.6)",borderRadius:18,padding:24,display:"flex",flexDirection:"column",gap:18},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:14},children:[m.jsx("div",{style:{fontSize:18,fontWeight:600},children:S.roomName}),m.jsxs("div",{style:{opacity:.7},children:[_.length," / ",S.maxPlayers]}),m.jsx("div",{style:{marginLeft:"auto"},children:m.jsx("button",{style:wz,onClick:y,children:""})})]}),m.jsxs("div",{style:{flex:1,display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:18},children:[m.jsx(N_,{title:"",player:I,hostUserId:S.hostUserId}),m.jsxs("div",{style:dz,children:[m.jsx("div",{style:hz,children:L?m.jsx("img",{src:L,alt:"",style:pz}):m.jsx("div",{style:AA,children:"COVER"})}),m.jsx("div",{style:xz,children:m.jsx("div",{style:{...Sz,...R?vz:{textAlign:"center",width:"100%"}},ref:a,children:sz(S.songTitle)})}),m.jsx("div",{style:{...mz,fontWeight:800,letterSpacing:"0.15em",color:bz[String(S.diff).toUpperCase()]||"#ccc"},children:String(S.diff).toUpperCase()}),m.jsxs("div",{style:gz,children:["LENGTH ",iz(k)]}),m.jsxs("div",{style:yz,children:["Room ID: ",n]})]}),m.jsx(N_,{title:"",player:N,hostUserId:S.hostUserId,onNameClick:H=>p(H)})]}),m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:20},children:[m.jsx("button",{onClick:o,disabled:!I,style:I?I?.ready?I_:x0:_z,children:I?.ready?"NOT READY":"READY"}),j&&I?.ready&&N?.ready&&m.jsx("div",{style:{display:"flex",alignItems:"center",gap:12},children:m.jsx("button",{onClick:c,style:I_,children:"START"})})]})]})}),m.jsx(t0,{open:!!h,user:{id:h?.userId,nickname:h?.nickname,profileImg:h?.profileImg},onClose:()=>p(null)}),m.jsx(Ea,{size:"game",preset:"menu",analyserRef:s,active:!0})]}):null}function N_({title:n,player:t,hostUserId:e,onNameClick:s}){const a=!t;return m.jsxs("div",{style:az,children:[m.jsx("div",{style:oz,children:n}),m.jsx("div",{style:lz,children:t?.profileImg?m.jsx("img",{src:nz(t.profileImg),onError:o=>{o.currentTarget.src="/assets/default_profile.png"},alt:"",style:cz}):m.jsx("div",{style:AA,children:"PROFILE"})}),m.jsx("div",{style:{...uz,cursor:a?"default":"pointer"},onClick:()=>{!a&&s&&s(t)},children:a?"WAITING":m.jsxs(m.Fragment,{children:[Number(t.userId)===Number(e)&&" ",t.nickname]})}),m.jsx("div",{style:{...fz,color:a||!t?.ready?"#ff5a5a":"#5aeaff",fontWeight:a||!t?.ready?700:600},children:a?"NOT READY":t.ready?"READY":"NOT READY"})]})}const az={borderRadius:14,border:"1px solid rgba(90,234,255,0.25)",padding:"30px 30px",display:"flex",flexDirection:"column",alignItems:"center",gap:30,background:"rgba(0,0,0,0.15)"},oz={fontSize:20,opacity:.4},lz={width:72,height:72,borderRadius:12,background:"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center"},cz={width:"100%",height:"100%",objectFit:"cover",borderRadius:12},AA={fontSize:10,opacity:.3},uz={fontSize:20,fontWeight:500,textDecoration:"none"},fz={marginTop:6,fontSize:15,letterSpacing:"0.2em"},dz={borderRadius:14,border:"1px solid rgba(90,234,255,0.35)",padding:"26px 18px",display:"flex",flexDirection:"column",alignItems:"center",gap:10,background:"rgba(0,0,0,0.18)"},hz={width:200,height:200,borderRadius:10,overflow:"hidden",background:"rgba(255,255,255,0.06)"},pz={width:"100%",height:"100%",objectFit:"cover"},mz={fontSize:30},gz={fontSize:11,opacity:.8},yz={fontSize:10,opacity:.8},bz={EASY:"#5aeaff",NORMAL:"#6cff5a",HARD:"#ffb85a",HELL:"#ff5a5a"},xz={width:260,overflow:"hidden",whiteSpace:"nowrap"},vz={display:"inline-block",paddingLeft:"100%",animation:"vb-marquee 20s linear infinite"},Sz={fontSize:30,fontWeight:600,whiteSpace:"nowrap"},x0={minWidth:140,height:44,padding:"0 28px",borderRadius:12,background:"rgba(10,20,30,0.9)",border:"1px solid rgba(90,234,255,0.6)",color:"#5aeaff",fontSize:15,fontWeight:600,letterSpacing:"0.15em",cursor:"pointer",boxShadow:`
    inset 0 0 12px rgba(90,234,255,0.35),
    0 0 18px rgba(90,234,255,0.45)
  `,transition:"all 0.2s ease"},I_={...x0,background:"rgba(90,234,255,0.18)",color:"#ffffff",boxShadow:`
    inset 0 0 18px rgba(90,234,255,0.6),
    0 0 26px rgba(90,234,255,0.8)
  `},_z={...x0,opacity:.35,cursor:"default",boxShadow:"none"},wz={minWidth:110,height:36,padding:"0 22px",borderRadius:10,background:"rgba(30,10,10,0.9)",border:"1px solid rgba(255,90,90,0.6)",color:"#ff6b6b",fontSize:14,fontWeight:600,letterSpacing:"0.1em",cursor:"pointer",boxShadow:`
    inset 0 0 10px rgba(255,90,90,0.35),
    0 0 16px rgba(255,90,90,0.45)
  `,transition:"all 0.2s ease"},Ni={pagePaddingX:110,headerHeight:84,footerHeight:84,leftPaddingX:140,leftGap:40,logoWidth:640,contentShiftX:60,contentBiasY:-30,videoWidth:620,videoHeight:360};function Ez(){const n=en(),t=E.useRef(null),[e,s]=E.useState(!1);return E.useEffect(()=>{const a=setInterval(()=>{s(!0),setTimeout(()=>s(!1),500)},18e3);return()=>clearInterval(a)},[]),m.jsxs("div",{style:{width:"100vw",height:"100vh",position:"relative",overflow:"hidden"},className:"text-white font-sans",children:[m.jsx(Xs,{}),m.jsx(hd,{}),m.jsx("div",{style:{position:"absolute",inset:0,background:"rgba(0,0,0,0.35)",zIndex:5}}),m.jsxs("div",{style:{position:"relative",zIndex:20,width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:[m.jsxs("header",{style:{height:Ni.headerHeight,padding:`0 ${Ni.pagePaddingX}px`,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[m.jsxs("div",{style:{position:"relative",width:200,height:150,overflow:"hidden",transform:"translateX(-110px)"},children:[m.jsx("img",{src:"/images/teamlogo.png",draggable:!1,style:{position:"absolute",inset:0,width:"100%",zIndex:1,opacity:e?0:1,transition:"opacity .05s"}}),e&&m.jsx("img",{src:"/images/teamlogo2.png",draggable:!1,className:"glitch-layer glitch-red",style:{zIndex:2}}),e&&m.jsx("img",{src:"/images/teamlogo2.png",draggable:!1,className:"glitch-layer glitch-blue",style:{zIndex:3}})]}),m.jsxs("nav",{style:{display:"flex",gap:14,alignItems:"center",marginLeft:"auto",transform:"translateX(60px)"},children:[m.jsx("span",{onClick:()=>n("/login"),style:L_,children:""}),m.jsx("span",{onClick:()=>n("/terms"),style:L_,children:""})]})]}),m.jsxs("main",{style:{flex:1,display:"grid",gridTemplateColumns:"1fr 1fr",padding:`0 ${Ni.pagePaddingX}px`,alignItems:"center",transform:`translateY(${Ni.contentBiasY}px)`},children:[m.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:Ni.leftGap,paddingLeft:Ni.leftPaddingX},children:[m.jsx("img",{src:"/images/landinlogo.png",alt:"Victory Beat Logo",draggable:!1,style:{width:Ni.logoWidth}}),m.jsxs("div",{style:{marginLeft:Ni.contentShiftX},children:[m.jsxs("div",{style:{display:"flex",gap:20,marginTop:10,marginLeft:50},children:[m.jsx("button",{onClick:()=>n("/start",{state:{next:"/main"}}),className:"rounded-xl bg-cyan-400 text-black font-semibold hover:bg-cyan-300 transition",style:{padding:"14px 48px",fontSize:16},children:"PLAY NOW"}),m.jsx("button",{onClick:()=>{const a=t.current;a&&(a.muted=!1,a.volume=1,a.currentTime=0,a.play(),a.requestFullscreen?a.requestFullscreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen())},className:"rounded-xl border border-cyan-400 text-cyan-300 font-semibold hover:bg-cyan-400/10 transition",style:{padding:"14px 48px",fontSize:16},children:"WATCH TRAILER"})]}),m.jsxs("div",{style:{display:"flex",gap:36,fontSize:13,opacity:.6,marginTop:8,marginLeft:50},children:[m.jsx("span",{children:" Pick Your Track"}),m.jsx("span",{children:" Battle with Friends"}),m.jsx("span",{children:" Build Your Chart"})]})]})]}),m.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:m.jsxs("div",{style:{position:"relative"},children:[m.jsx("div",{style:{position:"absolute",inset:0,borderRadius:26,filter:"blur(34px)",background:"rgba(34,211,238,0.35)"}}),m.jsx("div",{style:{position:"relative",width:Ni.videoWidth,height:Ni.videoHeight,borderRadius:26,background:"rgba(0,0,0,0.6)",border:"1px solid rgba(34,211,238,0.4)",boxShadow:"0 0 40px rgba(34,211,238,0.25)",overflow:"hidden",marginRight:30},children:m.jsx("video",{ref:t,src:"/video/trailer.mp4",muted:!0,autoPlay:!0,loop:!0,playsInline:!0,style:{width:"100%",height:"100%",borderRadius:26,objectFit:"cover"}})})]})})]}),m.jsx("footer",{style:{height:Ni.footerHeight,padding:`0 ${Ni.pagePaddingX}px`,display:"flex",alignItems:"center",justifyContent:"space-between",borderTop:"1px solid rgba(255,255,255,0.1)",fontSize:13,opacity:.6},children:m.jsx("div",{style:{width:"100%",textAlign:"center",marginTop:-6,opacity:.6},children:" 2026 Team Syntax Error v1.0"})})]})]})}const L_={padding:"8px 18px",borderRadius:999,fontSize:13,cursor:"pointer",color:"#7fe9ff",background:"rgba(0,0,0,0.45)",border:"1.5px solid rgba(80,220,255,0.9)",boxShadow:`
    0 0 6px rgba(80,220,255,0.6),
    inset 0 0 6px rgba(80,220,255,0.35)
  `};function Az({from:n,onAccept:t,onReject:e}){return m.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:m.jsxs("div",{style:{width:320,padding:20,background:"#111",borderRadius:12,border:"1px solid #5aeaff",color:"#fff"},children:[m.jsxs("div",{style:{marginBottom:12},children:[n,"   ."]}),m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:12,marginTop:50},children:[m.jsx("button",{onClick:t,style:{padding:"6px 18px",borderRadius:8,background:"transparent",border:"1px solid #5aeaff",color:"#5aeaff",cursor:"pointer"},children:""}),m.jsx("button",{onClick:e,style:{padding:"6px 18px",borderRadius:8,background:"transparent",border:"1px solid rgba(255,80,80,0.9)",color:"rgba(255,80,80,0.9)",cursor:"pointer"},children:""})]})]})})}const Tz=["/main","/login","/","/landing","/join","/start","/terms"];function Cz(){const n=li(),t=en();return E.useEffect(()=>{const e=s=>{if(window.__ALLOW_LEAVE__)return;const a=n.pathname;Tz.some(c=>a===c)||(console.log("[REFRESH BLOCK]",a),s.preventDefault(),s.returnValue="",sessionStorage.setItem("forceMainAfterRefresh","true"))};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[n.pathname]),E.useEffect(()=>{sessionStorage.getItem("forceMainAfterRefresh")==="true"&&(sessionStorage.removeItem("forceMainAfterRefresh"),console.log("[REDIRECT TO /main AFTER REFRESH]"),t("/main",{replace:!0}))},[n.pathname,t]),null}function Ef({isLogin:n,children:t}){const[e,s]=E.useState(!1);return E.useEffect(()=>{const a=c=>{c.ctrlKey&&(c.key==="+"||c.key==="-"||c.key==="0")&&c.preventDefault()},o=c=>{c.ctrlKey&&c.preventDefault()};return window.addEventListener("keydown",a),window.addEventListener("wheel",o,{passive:!1}),()=>window.removeEventListener("keydown",a)},[]),E.useEffect(()=>{n===!1&&!e&&(alert("    ."),s(!0))},[n,e]),n===null?null:n?t:m.jsx(q_,{to:"/login",replace:!0})}function Dm({isLogin:n,children:t}){const[e,s]=E.useState(!1);return E.useEffect(()=>{n===!0&&!e&&s(!0)},[n,e]),n===null?null:n?m.jsx(q_,{to:"/main",replace:!0}):t}function Rz(){const[n,t]=E.useState(null),[e,s]=E.useState(null),a=en();E.useEffect(()=>{const c=()=>{if(window.location.pathname==="/main"){window.history.pushState(null,"",window.location.href);return}alert("   .  .");try{const u=new URLSearchParams(window.location.search),d=u.get("roomId");u.get("mode")==="multi"&&d&&window.dispatchEvent(new CustomEvent("multi:forceLeave",{detail:{roomId:d}}))}catch{}a("/main",{replace:!0}),window.history.pushState(null,"",window.location.href)};return window.history.pushState(null,"",window.location.href),window.addEventListener("popstate",c),()=>{window.removeEventListener("popstate",c)}},[a]),E.useEffect(()=>{const c=d=>{d.preventDefault()},u=d=>{if(d.key==="F12"){d.preventDefault();return}if(d.ctrlKey&&d.shiftKey&&(d.key==="I"||d.key==="J")){d.preventDefault();return}if(d.ctrlKey&&d.key==="U"){d.preventDefault();return}};return document.addEventListener("contextmenu",c),document.addEventListener("keydown",u),()=>{document.removeEventListener("contextmenu",c),document.removeEventListener("keydown",u)}},[]),E.useEffect(()=>{const c=u=>{u.preventDefault()};return document.addEventListener("dragstart",c),document.addEventListener("selectstart",c),document.addEventListener("mousedown",u=>{u.target.tagName!=="INPUT"&&u.target.tagName!=="TEXTAREA"&&u.preventDefault()}),()=>{document.removeEventListener("dragstart",c),document.removeEventListener("selectstart",c)}},[]);const o=async()=>{try{await cj(),s(!1),a("/login",{replace:!0})}catch{s(!1),a("/login")}s(!1)};return E.useEffect(()=>{_o().then(c=>{s(c.data.ok===!0)}).catch(()=>{s(!1)})},[]),E.useEffect(()=>{const c=u=>{t(u.detail)};return window.addEventListener("multi:invite",c),()=>window.removeEventListener("multi:invite",c)},[]),m.jsxs(m.Fragment,{children:[m.jsx(Cz,{}),n&&m.jsx(Az,{from:n.from,onAccept:()=>{t(null),a(`/game/play?mode=multi&roomId=${n.roomId}`)},onReject:()=>{t(null)}}),m.jsxs(jC,{children:[m.jsx(Cn,{path:"/join",element:m.jsx(Dm,{isLogin:e,children:m.jsx(Q8,{})})}),m.jsx(Cn,{path:"/re-password",element:m.jsx(Dm,{isLogin:e,children:m.jsx(ez,{})})}),m.jsx(Cn,{path:"/start",element:m.jsx(J8,{})}),m.jsx(Cn,{path:"/terms",element:m.jsx(BU,{})}),m.jsx(Cn,{path:"/main",element:m.jsx(rO,{onLogout:o})}),m.jsx(Cn,{path:"/multi/room/:roomId",element:m.jsx(Ef,{isLogin:e,children:m.jsx(rz,{})})}),m.jsx(Cn,{path:"/song/:songId/edit",element:m.jsx(zU,{})}),m.jsx(Cn,{path:"/song/:songId/note/edit",element:m.jsx(HU,{})}),m.jsx(Cn,{path:"/song/:songId",element:m.jsx(Tm,{})}),m.jsx(Cn,{path:"/game/play",element:m.jsx(Tm,{})}),m.jsx(Cn,{path:"/game/test",element:m.jsx(Tm,{})}),m.jsx(Cn,{path:"/game/result",element:m.jsx(l_,{})}),m.jsx(Cn,{path:"/nav-loading",element:m.jsx(DU,{})}),m.jsx(Cn,{path:"/game/result-test-multi",element:m.jsx(Ef,{isLogin:e,children:m.jsx(l_,{})})}),m.jsx(Cn,{path:"/",element:m.jsx(Ez,{})}),m.jsx(Cn,{path:"/login",element:m.jsx(Dm,{isLogin:e,children:m.jsx(p4,{onLoginSuccess:()=>s(!0)})})}),m.jsx(Cn,{path:"/mypage",element:m.jsx(Ef,{isLogin:e,children:m.jsx(LU,{})})}),m.jsx(Cn,{path:"/song/upload",element:m.jsx(Ef,{isLogin:e,children:m.jsx(UU,{})})})]}),m.jsx(Ys,{isLogin:e,onLogout:o})]})}function jz(){return m.jsx("div",{className:"root-frame",children:m.jsx(NC,{children:m.jsx(Rz,{})})})}UT.createRoot(document.getElementById("root")).render(m.jsx(E.StrictMode,{children:m.jsx(jz,{})}));export{Ao as $,RE as A,wn as B,_i as C,Be as D,Pt as E,Di as F,md as G,V2 as H,Xi as I,J2 as J,$1 as K,Hs as L,ue as M,TN as N,BN as O,Vn as P,Tc as Q,bg as R,l0 as S,rf as T,pg as U,Je as V,eI as W,W1 as X,Jp as Y,Y1 as Z,rN as _,LN as a,An as a0,iN as a1,X2 as a2,jE as a3,ye as a4,Qe as a5,aI as a6,Cc as a7,wI as a8,XI as a9,KI as aa,e6 as ab,i6 as ac,s6 as ad,a0 as ae,ua as af,GE as ag,s8 as ah,lS as ai,aS as aj,IS as ak,ds as al,aL as am,$e as an,TO as ao,wa as ap,VS as aq,WE as ar,mE as b,Ki as c,a6 as d,Pn as e,oS as f,yI as g,vI as h,Mr as i,Nf as j,o0 as k,AE as l,rE as m,Qi as n,xE as o,gc as p,YI as q,PO as r,qI as s,ZI as t,on as u,n6 as v,Ve as w,Wt as x,AO as y,r6 as z};
